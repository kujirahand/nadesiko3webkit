{"version":3,"file":"wnako3.js","mappings":"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","sources":["webpack://nadesiko3/./node_modules/hotkeys-js/dist/hotkeys.common.min.js","webpack://nadesiko3/./node_modules/hotkeys-js/index.js","webpack://nadesiko3/./core/src/nako_core_version.mjs","webpack://nadesiko3/./core/src/nako_errors.mjs","webpack://nadesiko3/./core/src/nako_gen.mjs","webpack://nadesiko3/./core/src/nako_gen_async.mjs","webpack://nadesiko3/./core/src/nako_josi_list.mjs","webpack://nadesiko3/./core/src/nako_reserved_words.mjs","webpack://nadesiko3/./core/src/plugin_system.mjs","webpack://nadesiko3/webpack/bootstrap","webpack://nadesiko3/webpack/runtime/define property getters","webpack://nadesiko3/webpack/runtime/hasOwnProperty shorthand","webpack://nadesiko3/webpack/runtime/make namespace object","webpack://nadesiko3/./core/src/nako_parser_const.mjs","webpack://nadesiko3/./core/src/nako_types.mjs","webpack://nadesiko3/./core/src/nako_indent_chars.mjs","webpack://nadesiko3/./core/src/nako_lex_rules.mjs","webpack://nadesiko3/./core/src/nako_lexer.mjs","webpack://nadesiko3/./core/src/nako_parser3.mjs","webpack://nadesiko3/./core/src/nako_parser_base.mjs","webpack://nadesiko3/./core/src/nako_prepare.mjs","webpack://nadesiko3/./core/src/nako_tools.mjs","webpack://nadesiko3/./core/src/nako_indent_inline.mjs","webpack://nadesiko3/./core/src/nako_from_dncl.mjs","webpack://nadesiko3/./core/src/nako_from_dncl2.mjs","webpack://nadesiko3/./core/src/nako_source_mapping.mjs","webpack://nadesiko3/./core/src/nako_colors.mjs","webpack://nadesiko3/./core/src/nako_logger.mjs","webpack://nadesiko3/./core/src/nako_global.mjs","webpack://nadesiko3/./core/src/plugin_math.mjs","webpack://nadesiko3/./core/src/nako_csv.mjs","webpack://nadesiko3/./core/src/plugin_csv.mjs","webpack://nadesiko3/./core/src/plugin_promise.mjs","webpack://nadesiko3/./core/src/plugin_test.mjs","webpack://nadesiko3/./core/src/nako3.mjs","webpack://nadesiko3/./core/src/nako_indent.mjs","webpack://nadesiko3/./src/wnako3_editor.mjs","webpack://nadesiko3/./src/nako_version.mjs","webpack://nadesiko3/./src/plugin_browser_color.mjs","webpack://nadesiko3/./src/plugin_browser_system.mjs","webpack://nadesiko3/./src/plugin_browser_dialog.mjs","webpack://nadesiko3/./src/plugin_browser_location.mjs","webpack://nadesiko3/./src/plugin_browser_ajax.mjs","webpack://nadesiko3/./src/plugin_browser_dom_basic.mjs","webpack://nadesiko3/./src/plugin_browser_dom_event.mjs","webpack://nadesiko3/./src/plugin_browser_dom_parts.mjs","webpack://nadesiko3/./src/plugin_browser_html.mjs","webpack://nadesiko3/./src/plugin_browser_storage.mjs","webpack://nadesiko3/./src/plugin_browser_canvas.mjs","webpack://nadesiko3/./src/plugin_browser_geolocation.mjs","webpack://nadesiko3/./src/plugin_browser_speech.mjs","webpack://nadesiko3/./src/plugin_browser_websocket.mjs","webpack://nadesiko3/./src/plugin_browser_audio.mjs","webpack://nadesiko3/./src/plugin_browser.mjs","webpack://nadesiko3/./src/plugin_browser_hotkey.mjs","webpack://nadesiko3/./src/plugin_browser_chart.mjs","webpack://nadesiko3/./src/plugin_browser_crypto.mjs","webpack://nadesiko3/./src/wnako3mod.mjs","webpack://nadesiko3/./src/wnako3.mjs"],"sourcesContent":["/*! hotkeys-js v3.9.4 | MIT © 2022 kenny wong <wowohoo@qq.com> http://jaywcjlove.github.io/hotkeys */\n\"use strict\";var isff=\"undefined\"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf(\"firefox\");function addEvent(e,n,t,o){e.addEventListener?e.addEventListener(n,t,o):e.attachEvent&&e.attachEvent(\"on\".concat(n),function(){t(window.event)})}function getMods(e,n){for(var t=n.slice(0,n.length-1),o=0;o<t.length;o++)t[o]=e[t[o].toLowerCase()];return t}function getKeys(e){for(var n=(e=(e=\"string\"!=typeof e?\"\":e).replace(/\\s/g,\"\")).split(\",\"),t=n.lastIndexOf(\"\");0<=t;)n[t-1]+=\",\",n.splice(t,1),t=n.lastIndexOf(\"\");return n}function compareArray(e,n){for(var t=e.length<n.length?n:e,o=e.length<n.length?e:n,s=!0,i=0;i<t.length;i++)~o.indexOf(t[i])||(s=!1);return s}for(var _keyMap={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,\"\\u21ea\":20,\",\":188,\".\":190,\"/\":191,\"`\":192,\"-\":isff?173:189,\"=\":isff?61:187,\";\":isff?59:186,\"'\":222,\"[\":219,\"]\":221,\"\\\\\":220},_modifier={\"\\u21e7\":16,shift:16,\"\\u2325\":18,alt:18,option:18,\"\\u2303\":17,ctrl:17,control:17,\"\\u2318\":91,cmd:91,command:91},modifierMap={16:\"shiftKey\",18:\"altKey\",17:\"ctrlKey\",91:\"metaKey\",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={},k=1;k<20;k++)_keyMap[\"f\".concat(k)]=111+k;var _downKeys=[],winListendFocus=!1,_scope=\"all\",elementHasBindEvent=[],code=function(e){return _keyMap[e.toLowerCase()]||_modifier[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function setScope(e){_scope=e||\"all\"}function getScope(){return _scope||\"all\"}function getPressedKeyCodes(){return _downKeys.slice(0)}function filter(e){var e=e.target||e.srcElement,n=e.tagName;return!e.isContentEditable&&(\"INPUT\"!==n&&\"TEXTAREA\"!==n&&\"SELECT\"!==n||e.readOnly)?!0:!1}function isPressed(e){return\"string\"==typeof e&&(e=code(e)),!!~_downKeys.indexOf(e)}function deleteScope(e,n){var t,o,s;for(s in e=e||getScope(),_handlers)if(Object.prototype.hasOwnProperty.call(_handlers,s))for(t=_handlers[s],o=0;o<t.length;)t[o].scope===e?t.splice(o,1):o++;getScope()===e&&setScope(n||\"all\")}function clearModifier(e){var n=e.keyCode||e.which||e.charCode,t=_downKeys.indexOf(n);if(t<0||_downKeys.splice(t,1),e.key&&\"meta\"==e.key.toLowerCase()&&_downKeys.splice(0,_downKeys.length),(n=93!==n&&224!==n?n:91)in _mods)for(var o in _mods[n]=!1,_modifier)_modifier[o]===n&&(hotkeys[o]=!1)}function unbind(e){if(void 0===e)Object.keys(_handlers).forEach(function(e){return delete _handlers[e]});else if(Array.isArray(e))e.forEach(function(e){e.key&&eachUnbind(e)});else if(\"object\"==typeof e)e.key&&eachUnbind(e);else if(\"string\"==typeof e){for(var n=arguments.length,t=Array(1<n?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var s=t[0],i=t[1];\"function\"==typeof s&&(i=s,s=\"\"),eachUnbind({key:e,scope:s,method:i,splitKey:\"+\"})}}var eachUnbind=function(e){var s=e.scope,i=e.method,n=e.splitKey,r=void 0===n?\"+\":n;getKeys(e.key).forEach(function(e){var n,e=e.split(r),t=e.length,o=e[t-1],o=\"*\"===o?\"*\":code(o);_handlers[o]&&(s=s||getScope(),n=1<t?getMods(_modifier,e):[],_handlers[o]=_handlers[o].filter(function(e){return!((!i||e.method===i)&&e.scope===s&&compareArray(e.mods,n))}))})};function eventHandler(e,n,t,o){var s;if(n.element===o&&(n.scope===t||\"all\"===n.scope)){for(var i in s=0<n.mods.length,_mods)Object.prototype.hasOwnProperty.call(_mods,i)&&(!_mods[i]&&~n.mods.indexOf(+i)||_mods[i]&&!~n.mods.indexOf(+i))&&(s=!1);(0!==n.mods.length||_mods[16]||_mods[18]||_mods[17]||_mods[91])&&!s&&\"*\"!==n.shortcut||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function dispatch(t,e){var n=_handlers[\"*\"],o=t.keyCode||t.which||t.charCode;if(hotkeys.filter.call(this,t)){if(~_downKeys.indexOf(o=93!==o&&224!==o?o:91)||229===o||_downKeys.push(o),[\"ctrlKey\",\"altKey\",\"shiftKey\",\"metaKey\"].forEach(function(e){var n=modifierMap[e];t[e]&&!~_downKeys.indexOf(n)?_downKeys.push(n):!t[e]&&~_downKeys.indexOf(n)?_downKeys.splice(_downKeys.indexOf(n),1):\"metaKey\"!==e||!t[e]||3!==_downKeys.length||t.ctrlKey||t.shiftKey||t.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf(n)))}),o in _mods){for(var s in _mods[o]=!0,_modifier)_modifier[s]===o&&(hotkeys[s]=!0);if(!n)return}for(var i in _mods)Object.prototype.hasOwnProperty.call(_mods,i)&&(_mods[i]=t[modifierMap[i]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState(\"AltGraph\")&&(~_downKeys.indexOf(17)||_downKeys.push(17),~_downKeys.indexOf(18)||_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);var r=getScope();if(n)for(var d=0;d<n.length;d++)n[d].scope===r&&(\"keydown\"===t.type&&n[d].keydown||\"keyup\"===t.type&&n[d].keyup)&&eventHandler(t,n[d],r,e);if(o in _handlers)for(var a=0;a<_handlers[o].length;a++)if((\"keydown\"===t.type&&_handlers[o][a].keydown||\"keyup\"===t.type&&_handlers[o][a].keyup)&&_handlers[o][a].key){for(var c=_handlers[o][a],l=c.key.split(c.splitKey),f=[],y=0;y<l.length;y++)f.push(code(l[y]));f.sort().join(\"\")===_downKeys.sort().join(\"\")&&eventHandler(t,c,r,e)}}}function isElementBind(e){return!!~elementHasBindEvent.indexOf(e)}function hotkeys(e,n,t){_downKeys=[];var o=getKeys(e),s=[],i=\"all\",r=document,d=0,a=!1,c=!0,l=\"+\",f=!1;for(void 0===t&&\"function\"==typeof n&&(t=n),\"[object Object]\"===Object.prototype.toString.call(n)&&(n.scope&&(i=n.scope),n.element&&(r=n.element),n.keyup&&(a=n.keyup),void 0!==n.keydown&&(c=n.keydown),void 0!==n.capture&&(f=n.capture),\"string\"==typeof n.splitKey&&(l=n.splitKey)),\"string\"==typeof n&&(i=n);d<o.length;d++)s=[],1<(e=o[d].split(l)).length&&(s=getMods(_modifier,e)),(e=\"*\"===(e=e[e.length-1])?\"*\":code(e))in _handlers||(_handlers[e]=[]),_handlers[e].push({keyup:a,keydown:c,scope:i,mods:s,shortcut:o[d],method:t,key:o[d],splitKey:l,element:r});void 0!==r&&!isElementBind(r)&&window&&(elementHasBindEvent.push(r),addEvent(r,\"keydown\",function(e){dispatch(e,r)},f),winListendFocus||(winListendFocus=!0,addEvent(window,\"focus\",function(){_downKeys=[]},f)),addEvent(r,\"keyup\",function(e){dispatch(e,r),clearModifier(e)},f))}function trigger(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"all\";Object.keys(_handlers).forEach(function(e){e=_handlers[e].find(function(e){return e.scope===t&&e.shortcut===n});e&&e.method&&e.method()})}var a,_hotkeys,_api={setScope:setScope,getScope:getScope,deleteScope:deleteScope,getPressedKeyCodes:getPressedKeyCodes,isPressed:isPressed,filter:filter,trigger:trigger,unbind:unbind,keyMap:_keyMap,modifier:_modifier,modifierMap:modifierMap};for(a in _api)Object.prototype.hasOwnProperty.call(_api,a)&&(hotkeys[a]=_api[a]);\"undefined\"!=typeof window&&(_hotkeys=window.hotkeys,hotkeys.noConflict=function(e){return e&&window.hotkeys===hotkeys&&(window.hotkeys=_hotkeys),hotkeys},window.hotkeys=hotkeys),module.exports=hotkeys;","if (process.env.NODE_ENV === 'production') {\n  // eslint-disable-next-line global-require\n  module.exports = require('./dist/hotkeys.common.min.js');\n} else {\n  // eslint-disable-next-line global-require\n  module.exports = require('./dist/hotkeys.common.js');\n}\n","// 実際のバージョン定義 (自動生成されるので以下を編集しない)\nconst coreVersion = {\n    version: '3.4.21',\n    major: 3,\n    minor: 4,\n    patch: 21\n};\nexport default coreVersion;\n","/**\n * なでしこ言語が投げる全てのエラーが継承するクラス\n */\nexport class NakoError extends Error {\n    constructor(tag, msg, file = undefined, line = undefined) {\n        // エラー位置を分かりやすく日本語に変換\n        const positionJa = `${file || ''}${line === undefined ? '' : `(${line + 1}行目): `}`;\n        // #1223 エラーメッセージに「main__関数名」と表示されるので、main__は省略して表示\n        msg = msg.replace(/『main__(.+?)』/g, '『$1』');\n        // 親のErrorを呼ぶ\n        super(`[${tag}]${positionJa}${msg}`);\n        // エラーの種類を設定\n        this.name = 'NakoError';\n        this.type = 'NakoError';\n        this.tag = '[' + tag + ']';\n        this.positionJa = positionJa;\n        this.msg = msg;\n    }\n}\nexport class NakoIndentError extends NakoError {\n    /**\n     * @param {string} msg\n     * @param {number} line\n     * @param {string} file\n     */\n    constructor(msg, line, file) {\n        super('インデントエラー', msg, file, line);\n        this.type = 'NakoIndentError';\n        this.line = line;\n        this.file = file;\n    }\n}\n// コンパイラの内部でのみ使うエラー。投げられたらtryでキャッチしてLexerErrorへ変更する。\nexport class InternalLexerError extends NakoError {\n    /**\n     * @param {string} msg\n     * @param {number} preprocessedCodeStartOffset\n     * @param {number} preprocessedCodeEndOffset\n     * @param {number | undefined} [line]\n     * @param {string | undefined} [file]\n     */\n    constructor(msg, preprocessedCodeStartOffset, preprocessedCodeEndOffset, line, file) {\n        super('字句解析エラー（内部エラー）', msg, file, line);\n        this.type = 'InternalLexerError';\n        this.preprocessedCodeStartOffset = preprocessedCodeStartOffset;\n        this.preprocessedCodeEndOffset = preprocessedCodeEndOffset;\n        this.line = line;\n        this.file = file;\n    }\n}\nexport class NakoLexerError extends NakoError {\n    /**\n     * @param {string} msg\n     * @param {number | null} startOffset\n     * @param {number | null} endOffset,\n     * @param {number | undefined} line\n     * @param {string | undefined} file\n     */\n    constructor(msg, startOffset, endOffset, line, file) {\n        super('字句解析エラー', msg, file, line);\n        this.type = 'NakoLexerError';\n        this.startOffset = startOffset;\n        this.endOffset = endOffset;\n        this.line = line;\n        this.file = file;\n    }\n}\nexport class NakoSyntaxError extends NakoError {\n    /**\n     * @param {string} msg\n     * @param {Ast} first\n     * @param {Ast} [last]\n     */\n    static fromNode(msg, first, last = undefined) {\n        if (!first) {\n            return new NakoSyntaxError(msg, undefined, undefined, undefined, undefined);\n        }\n        const startOffset = typeof first.startOffset === 'number' ? first.startOffset : undefined;\n        const endOffset = (last && typeof last.endOffset === 'number')\n            ? last.endOffset\n            : (typeof first.endOffset === 'number' ? first.endOffset : undefined);\n        return new NakoSyntaxError(msg, first.line, startOffset, endOffset, first.file);\n    }\n    /**\n     * @param {string} msg\n     * @param {number | undefined} line\n     * @param {number | undefined} startOffset\n     * @param {number | undefined} endOffset\n     * @param {string | undefined} file\n     */\n    constructor(msg, line, startOffset, endOffset, file) {\n        super('文法エラー', msg, file, line);\n        this.type = 'NakoSyntaxError';\n        this.file = file;\n        this.line = line;\n        this.startOffset = startOffset;\n        this.endOffset = endOffset;\n    }\n}\nexport class NakoRuntimeError extends NakoError {\n    /**\n     * @param error エラー\n     * @param lineNo 発生行\n     */\n    constructor(error, lineNo) {\n        let msg = 'unknown';\n        if (typeof error === 'string') {\n            msg = error;\n        }\n        else {\n            if (error instanceof NakoRuntimeError) {\n                msg = error.msg;\n            }\n            else if (error instanceof NakoError) {\n                msg = error.msg;\n            }\n            else if (error instanceof Error) {\n                if (error.name === 'Error') {\n                    msg = error.message;\n                }\n                else {\n                    msg = `${error.name}: ${error.message}`;\n                }\n            }\n        }\n        // 行番号を表す文字列をパースする。\n        let line;\n        let file;\n        let matches;\n        if (lineNo === undefined) {\n            line = undefined;\n            file = undefined;\n            // eslint-disable-next-line no-cond-assign\n        }\n        else if (matches = /^l(-?\\d+):(.*)$/.exec(lineNo)) {\n            line = parseInt(matches[1]);\n            file = matches[2];\n            // eslint-disable-next-line no-cond-assign\n        }\n        else if (matches = /^l(-?\\d+)$/.exec(lineNo)) {\n            line = parseInt(matches[1]);\n            file = 'main.nako3';\n        }\n        else {\n            line = 0;\n            file = lineNo;\n        }\n        super('実行時エラー', msg, file, line);\n        this.type = 'NakoRuntimeError';\n        this.lineNo = lineNo;\n        this.line = line;\n        this.file = file;\n    }\n}\nexport class NakoImportError extends NakoError {\n    /**\n     * @param {string} msg\n     * @param {string} file\n     * @param {number} line\n     */\n    constructor(msg, file, line) {\n        super('取り込みエラー', msg, file, line);\n        this.file = file;\n        this.line = line;\n    }\n}\n","/**\n * パーサーが生成した中間オブジェクトを実際のJavaScriptのコードに変換する。\n * なお速度優先で忠実にJavaScriptのコードを生成する。\n */\nimport { NakoSyntaxError } from './nako_errors.mjs';\n// なでしこで定義した関数の開始コードと終了コード\nconst topOfFunction = '(function(){\\n';\nconst endOfFunction = '})';\nconst topOfFunctionAsync = '(async function(){\\n';\n/** コード生成オプション */\nexport class NakoGenOptions {\n    constructor(isTest = false, importFiles = [], codeStandalone = '', convEnv = '') {\n        this.isTest = isTest;\n        this.codeStandalone = codeStandalone;\n        this.codeEnv = convEnv;\n        this.importFiles = ['plugin_system.mjs', 'plugin_math.mjs', 'plugin_csv.mjs', 'plugin_promise.mjs', 'plugin_test.mjs'];\n        for (const fname of importFiles) {\n            this.importFiles.push(fname);\n        }\n    }\n}\n/**\n * 構文木からJSのコードを生成するクラス\n */\nexport class NakoGen {\n    /** constructor\n     * @param com コンパイラのインスタンス\n     */\n    constructor(com) {\n        /**\n         * 出力するJavaScriptコードのヘッダー部分で定義する必要のある関数。fnはjsのコード。\n         * プラグイン関数は含まれない。\n         */\n        this.nakoFuncList = { ...com.getNakoFuncList() };\n        /**\n         * なでしこで定義したテストの一覧\n         */\n        this.nakoTestFuncs = {};\n        /**\n         * プログラム内で参照された関数のリスト。プラグインの命令を含む。\n         * JavaScript単体で実行するとき、このリストにある関数の定義をJavaScriptコードの先頭に付け足す。\n         */\n        this.usedFuncSet = new Set();\n        /**\n         * ループ時の一時変数が被らないようにIDで管理\n         */\n        this.loopId = 1;\n        /**\n         * 非同関数を何回使ったか\n         */\n        this.numAsyncFn = 0;\n        /**\n         * 関数定義の際、関数の中でasyncFn=trueの関数を呼び出したかどうかを調べる @see convDefFuncCommon\n         */\n        this.usedAsyncFn = false;\n        /** 変換中の処理が、ループの中かどうかを判定する */\n        this.flagLoop = false;\n        this.__self = com;\n        /** コードジェネレータの種類 */\n        this.genMode = 'sync';\n        /** 行番号とファイル名が分かるときは `l123:main.nako3`、行番号だけ分かるときは `l123`、そうでなければ任意の文字列。 */\n        this.lastLineNo = null;\n        /** スタック */\n        this.varslistSet = com.__varslist.map((v) => ({ isFunction: false, names: new Set(Object.keys(v)), readonly: new Set() }));\n        /** スタックトップ */\n        this.varsSet = { isFunction: false, names: new Set(), readonly: new Set() };\n        this.varslistSet[2] = this.varsSet;\n        // 1以上のとき高速化する。\n        // 実行速度優先ブロック内で1増える。\n        this.speedMode = {\n            lineNumbers: 0,\n            implicitTypeCasting: 0,\n            invalidSore: 0,\n            forcePure: 0 // 全てのシステム命令をpureとして扱う。命令からローカル変数への参照が出来なくなる。\n        };\n        // 1以上のとき測定をinjectする。\n        // パフォーマンスモニタのブロック内で1増える。\n        this.performanceMonitor = {\n            userFunction: 0,\n            systemFunction: 0,\n            systemFunctionBody: 0,\n            mumeiId: 0\n        };\n        /**\n         * 未定義の変数の警告を行う\n         */\n        this.warnUndefinedVar = true;\n        this.constPools = [];\n        this.constPoolsTemplate = [];\n        // 暫定変数\n        this.warnUndefinedReturnUserFunc = 1;\n        this.warnUndefinedCallingUserFunc = 1;\n        this.warnUndefinedCallingSystemFunc = 1;\n        this.warnUndefinedCalledUserFuncArgs = 1;\n        this.debugOption = com.debugOption;\n    }\n    static isValidIdentifier(name) {\n        // TODO: いらなそうな部分は削る\n        // https://stackoverflow.com/a/9337047\n        // eslint-disable-next-line no-misleading-character-class\n        return /^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc][$A-Z_a-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc0-9\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u0669\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u06f0-\\u06f9\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07c0-\\u07c9\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u09e6-\\u09ef\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0e50-\\u0e59\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1040-\\u1049\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b4-\\u17d3\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u194f\\u19b0-\\u19c0\\u19c8\\u19c9\\u19d0-\\u19d9\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1bad\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1c40-\\u1c49\\u1c50-\\u1c59\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2-\\u1cf4\\u1dc0-\\u1de6\\u1dfc-\\u1dff\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua620-\\ua629\\ua66f\\ua674-\\ua67d\\ua69f\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8e0-\\ua8f1\\ua900-\\ua909\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\ua9d0-\\ua9d9\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uaaeb-\\uaaef\\uaaf5\\uaaf6\\uabe3-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f]*$/.test(name);\n    }\n    /**\n     * 改行を埋め込む\n     */\n    convLineno(node, forceUpdate = false, incLine = 0) {\n        // スピードモードでは行番号を埋め込まない\n        if (this.speedMode.lineNumbers > 0) {\n            return '';\n        }\n        const lineNo = node.line + incLine;\n        let lineNoStr;\n        if (typeof node.line !== 'number') {\n            lineNoStr = 'unknown';\n        }\n        else if (typeof node.file !== 'string') {\n            lineNoStr = `l${lineNo}`;\n        }\n        else {\n            lineNoStr = `l${lineNo}:${node.file}`;\n        }\n        // 強制的に行番号をアップデートするか\n        if (!forceUpdate) {\n            if (lineNoStr === this.lastLineNo) {\n                return '';\n            }\n            this.lastLineNo = lineNoStr;\n        }\n        // 実行行のデータ\n        const lineDataJSON = JSON.stringify(lineNoStr);\n        // デバッグ実行か\n        let debugCode = '';\n        if (this.debugOption.useDebug) {\n            // messageAction\n            if (this.debugOption.messageAction) {\n                debugCode += `window.postMessage({action:'${this.debugOption.messageAction}',` +\n                    `line: ${lineDataJSON}});`;\n            }\n            // waitTime\n            if (lineNo >= 1) {\n                if (this.debugOption.waitTime > 0) {\n                    debugCode += `await __v0['秒待'](${this.debugOption.waitTime},__self);`;\n                }\n                // breakpoints\n                this.numAsyncFn += 1;\n                this.usedAsyncFn = true;\n                debugCode += `await __v0['__DEBUG_BP_WAIT'](${lineNo}, __self);`;\n            }\n            // end\n            debugCode += 'if(__v0.forceClose){return-1};';\n        }\n        // 例: __v0.line='l1:main.nako3'\n        return `__v0.line=${lineDataJSON};` + debugCode;\n    }\n    /**\n     * ローカル変数のJavaScriptコードを生成する。\n     * @param {string} name\n     */\n    varname(name) {\n        if (this.varslistSet.length === 3) {\n            // グローバル\n            return `__varslist[${2}][${JSON.stringify(name)}]`;\n        }\n        else {\n            // 関数内\n            if (NakoGen.isValidIdentifier(name)) {\n                return name;\n            }\n            else {\n                return `__vars[${JSON.stringify(name)}]`;\n            }\n        }\n    }\n    /**\n     * @param {string} name\n     * @returns {string}\n    */\n    static getFuncName(name) {\n        if (name.indexOf('__') >= 0) { // スコープがある場合\n            const a = name.split('__');\n            const scope = a[0];\n            const name3 = NakoGen.getFuncName(a[1]);\n            return `${scope}__${name3}`;\n        }\n        let name2 = name.replace(/[ぁ-ん]+$/, '');\n        if (name2 === '') {\n            name2 = name;\n        }\n        return name2;\n    }\n    /** @param {Ast} node */\n    static convPrint(node) {\n        return `__print(${node});`;\n    }\n    /** @param {Ast} node */\n    convRequire(node) {\n        const moduleName = node.value;\n        return this.convLineno(node, false) +\n            `__module['${moduleName}'] = require('${moduleName}');\\n`;\n    }\n    /**\n     * プログラムの実行に必要な関数定義を書き出す(グローバル領域)\n     * convGenの結果を利用するため、convGenの後に呼び出すこと。\n     * @param com\n     * @param opt\n     */\n    getDefFuncCode(com, opt) {\n        let code = '';\n        // よく使う変数のショートカット\n        code += `const nakoVersion = { version: ${JSON.stringify(com.version)} }\\n`;\n        code += 'const __self = self;\\n';\n        code += 'self.__self = self;\\n';\n        code += 'const __varslist = self.__varslist;\\n';\n        code += 'const __module = self.__module;\\n';\n        code += 'const __v0 = self.__v0 = self.__varslist[0];\\n';\n        code += 'const __v1 = self.__v1 = self.__varslist[1];\\n';\n        code += 'const __vars = self.__vars = self.__varslist[2];\\n';\n        code += `const __modList = self.__modList = ${JSON.stringify(com.getModList())}\\n`;\n        code += '__v0.line = 0;\\n';\n        code += '__v0.forceClose = false;\\n';\n        code += `__v0.useDebug = ${this.debugOption.useDebug};\\n`;\n        // 定数を埋め込む\n        code += 'self.constPools = ' + JSON.stringify(this.constPools) + ';\\n';\n        code += 'self.constPoolsTemplate = ' + JSON.stringify(this.constPoolsTemplate) + ';\\n';\n        // なでしこの関数定義を行う\n        let nakoFuncCode = '';\n        for (const key in this.nakoFuncList) {\n            const f = this.nakoFuncList[key].fn;\n            const isAsync = this.nakoFuncList[key].asyncFn ? 'true' : 'false';\n            nakoFuncCode += '' +\n                `//[DEF_FUNC name='${key}' asyncFn=${isAsync}]\\n` +\n                `self.__varslist[1][\"${key}\"]=${f};\\n;` +\n                `//[/DEF_FUNC name='${key}']\\n`;\n        }\n        if (nakoFuncCode !== '') {\n            code += '__v0.line=\\'関数の定義\\';\\n' + nakoFuncCode;\n        }\n        // テストの定義を行う\n        if (opt.isTest) {\n            let testCode = 'const __tests = [];\\n';\n            for (const key in this.nakoTestFuncs) {\n                const f = this.nakoTestFuncs[key].fn;\n                testCode += `${f};\\n;`;\n            }\n            if (testCode !== '') {\n                code += '__v0.line=\\'テストの定義\\';\\n';\n                code += testCode + '\\n';\n            }\n        }\n        return code;\n    }\n    /**\n     * プラグイン・オブジェクトを追加\n     * @param po プラグイン・オブジェクト\n     */\n    addPlugin(po) {\n        return this.__self.addPlugin(po);\n    }\n    /**\n     * プラグイン・オブジェクトを追加(ブラウザ向け)\n     * @param name オブジェクト名\n     * @param po 関数リスト\n     */\n    addPluginObject(name, po) {\n        this.__self.addPluginObject(name, po);\n    }\n    /**\n     * プラグイン・ファイルを追加(Node.js向け)\n     * @param objName オブジェクト名\n     * @param path ファイルパス\n     * @param po 登録するオブジェクト\n     */\n    addPluginFile(objName, path, po) {\n        this.__self.addPluginFile(objName, path, po);\n    }\n    /**\n     * 関数を追加する\n     * @param key 関数名\n     * @param josi 助詞\n     * @param fn 関数\n     */\n    addFunc(key, josi, fn) {\n        this.__self.addFunc(key, josi, fn);\n    }\n    /**\n     * プラグイン関数を参照する\n     * @param key プラグイン関数の関数名\n     * @returns プラグイン・オブジェクト\n     */\n    getFunc(key) {\n        return this.__self.getFunc(key);\n    }\n    /**\n     * 関数を先に登録してしまう\n     */\n    registerFunction(ast) {\n        if (ast.type !== 'block') {\n            throw NakoSyntaxError.fromNode('構文解析に失敗しています。構文は必ずblockが先頭になります', ast);\n        }\n        /** 関数一覧 */\n        const funcList = [];\n        // なでしこ関数を定義して this.nako_func[name] に定義する\n        const registFunc = (node) => {\n            if (!node.block) {\n                return;\n            }\n            const blockList = (node.block instanceof Array) ? node.block : [node.block];\n            for (let i = 0; i < blockList.length; i++) {\n                const t = blockList[i];\n                if (t.type === 'def_func') {\n                    if (!t.name) {\n                        throw new Error('[System Error] 関数の定義で関数名が指定されていない');\n                    }\n                    const name = t.name.value;\n                    this.usedFuncSet.add(name);\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    this.__self.__varslist[1][name] = function () { }; // 事前に適当な値を設定\n                    this.varslistSet[1].names.add(name); // global\n                    const meta = (t.name).meta; // todo: 強制変換したが正しいかチェック\n                    this.nakoFuncList[name] = {\n                        josi: meta.josi,\n                        // eslint-disable-next-line @typescript-eslint/no-empty-function\n                        fn: () => { },\n                        type: 'func',\n                        asyncFn: t.asyncFn,\n                        isExport: t.isExport\n                    };\n                    funcList.push({ name, node: t });\n                    // eslint-disable-next-line brace-style\n                }\n                // 実行速度優先 などのオプションが付いている場合の処理\n                else if (t.type === 'speed_mode') {\n                    if (!t.block) {\n                        continue;\n                    }\n                    if (t.block.type === 'block') {\n                        registFunc(t.block);\n                    }\n                    else {\n                        registFunc(t);\n                    }\n                }\n                else if (t.type === 'performance_monitor') {\n                    if (!t.block) {\n                        continue;\n                    }\n                    if (t.block.type === 'block') {\n                        registFunc(t.block);\n                    }\n                    else {\n                        registFunc(t);\n                    }\n                }\n            }\n        };\n        // 関数の登録\n        registFunc(ast);\n        // __self.__varslistの変更を反映\n        const initialNames = new Set();\n        if (this.speedMode.invalidSore === 0) {\n            initialNames.add('それ');\n        }\n        this.varsSet = { isFunction: false, names: initialNames, readonly: new Set() };\n        this.varslistSet = this.__self.__varslist.map((v) => ({ isFunction: false, names: new Set(Object.keys(v)), readonly: new Set() }));\n        this.varslistSet[2] = this.varsSet;\n    }\n    /**\n     * @param node\n     * @param opt\n     */\n    convGen(node, opt) {\n        const result = this.convLineno(node, false) + this._convGen(node, true);\n        if (opt.isTest) {\n            return '';\n        }\n        else {\n            return result;\n        }\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     */\n    _convGen(node, isExpression) {\n        if (!node) {\n            return '';\n        }\n        let code = '';\n        if (node instanceof Array) {\n            for (let i = 0; i < node.length; i++) {\n                const n = node[i];\n                code += this._convGen(n, isExpression);\n            }\n            return code;\n        }\n        if (node === null) {\n            return 'null';\n        }\n        if (node === undefined) {\n            return 'undefined';\n        }\n        if (typeof (node) !== 'object') {\n            return '' + node;\n        }\n        // switch\n        switch (node.type) {\n            case 'nop':\n                break;\n            case 'block':\n                if (!node.block) {\n                    return code;\n                }\n                // eslint-disable-next-line no-case-declarations\n                const blocks = (node.block instanceof Array) ? node.block : [node.block];\n                for (let i = 0; i < blocks.length; i++) {\n                    const b = blocks[i];\n                    code += this._convGen(b, false);\n                }\n                break;\n            case 'comment':\n            case 'eol':\n                code += this.convComment(node);\n                break;\n            case 'break':\n                code += this.convCheckLoop(node, 'break');\n                break;\n            case 'continue':\n                code += this.convCheckLoop(node, 'continue');\n                break;\n            case 'end':\n                code += '__v0[\\'終\\'](__self);';\n                break;\n            case 'number':\n                code += node.value;\n                break;\n            case 'bigint':\n                code += node.value;\n                break;\n            case 'string':\n                code += this.convString(node);\n                break;\n            case 'def_local_var':\n                code += this.convDefLocalVar(node);\n                break;\n            case 'def_local_varlist':\n                code += this.convDefLocalVarlist(node);\n                break;\n            case 'let':\n                code += this.convLet(node);\n                break;\n            case 'inc':\n                code += this.convInc(node);\n                break;\n            case 'word':\n            case 'variable':\n                code += this.convGetVar(node);\n                break;\n            case 'op':\n            case 'calc':\n                code += this.convOp(node);\n                break;\n            case 'renbun':\n                code += this.convRenbun(node);\n                break;\n            case 'not':\n                code += '((' + this._convGen(node.value, true) + ')?false:true)';\n                break;\n            case 'func':\n            case 'func_pointer':\n            case 'calc_func':\n                code += this.convCallFunc(node, isExpression);\n                break;\n            case 'if':\n                code += this.convIf(node);\n                break;\n            case 'tikuji':\n                code += this.convTikuji(node);\n                break;\n            case 'for':\n                code += this.convFor(node);\n                break;\n            case 'foreach':\n                code += this.convForeach(node);\n                break;\n            case 'repeat_times':\n                code += this.convRepeatTimes(node);\n                break;\n            case 'speed_mode':\n                code += this.convSpeedMode(node, isExpression);\n                break;\n            case 'performance_monitor':\n                code += this.convPerformanceMonitor(node, isExpression);\n                break;\n            case 'while':\n                code += this.convWhile(node);\n                break;\n            case 'atohantei':\n                code += this.convAtohantei(node);\n                break;\n            case 'switch':\n                code += this.convSwitch(node);\n                break;\n            case 'let_array':\n                code += this.convLetArray(node);\n                break;\n            case '配列参照':\n                code += this.convRefArray(node);\n                break;\n            case 'json_array':\n                code += this.convJsonArray(node);\n                break;\n            case 'json_obj':\n                code += this.convJsonObj(node);\n                break;\n            case 'func_obj':\n                code += this.convFuncObj(node);\n                break;\n            case 'bool':\n                code += (node.value) ? 'true' : 'false';\n                break;\n            case 'null':\n                code += 'null';\n                break;\n            case 'def_test':\n                code += this.convDefTest(node);\n                break;\n            case 'def_func':\n                code += this.convDefFunc(node);\n                break;\n            case 'return':\n                code += this.convReturn(node);\n                break;\n            case 'try_except':\n                code += this.convTryExcept(node);\n                break;\n            case 'require':\n                code += this.convRequire(node);\n                break;\n            default:\n                throw new Error('System Error: unknown_type=' + node.type);\n        }\n        return code;\n    }\n    /** 変数を検索 */\n    findVar(name) {\n        // __vars ? (ローカル変数)\n        if (this.varslistSet.length > 3 && this.varsSet.names.has(name)) {\n            return { i: this.varslistSet.length - 1, name, isTop: true, js: this.varname(name) };\n        }\n        // __varslist ?\n        for (let i = 2; i >= 0; i--) {\n            if (this.varslistSet[i].names.has(name)) {\n                // ユーザーの定義したグローバル変数 (__varslist[2]) は、変数展開されている（そのままの名前で定義されている）可能性がある。\n                // それ以外の変数は、必ず__varslistに入っている。\n                return { i, name, isTop: false, js: `__varslist[${i}][${JSON.stringify(name)}]` };\n            }\n        }\n        return null;\n    }\n    /**\n     * 定義済みの変数の参照\n     * @param {string} name\n     * @param {Ast} position\n     */\n    genVar(name, position) {\n        const res = this.findVar(name);\n        const lno = position.line;\n        if (res === null) {\n            // 定義されていない名前の参照は変数の定義とみなす。\n            // 多くの場合はundefined値を持つ変数であり分かりづらいバグを引き起こすが、\n            // 「ナデシコする」などの命令の中で定義された変数の参照の場合があるため警告に留める。\n            // ただし、自動的に定義される変数『引数』『それ』などは例外 #952\n            if (name === '引数' || name === 'それ' || name === '対象' || name === '対象キー') {\n                // デフォルト定義されている変数名\n            }\n            else {\n                if (this.warnUndefinedVar) {\n                    // main__は省略して表示するように。 #1223\n                    const dispName = name.replace(/^main__(.+)$/, '$1');\n                    this.__self.getLogger().warn(`変数『${dispName}』は定義されていません。`, position);\n                }\n            }\n            this.varsSet.names.add(name);\n            return this.varname(name);\n        }\n        const i = res.i;\n        // システム関数・変数の場合\n        if (i === 0) {\n            const pv = this.__self.getNakoFunc(name);\n            if (!pv) {\n                return `${res.js}/*err:${lno}*/`;\n            }\n            if (pv.type === 'const' || pv.type === 'var') {\n                return res.js;\n            }\n            if (pv.type === 'func') {\n                if (!pv.josi || pv.josi.length === 0) {\n                    return `(${res.js}())`;\n                }\n                throw NakoSyntaxError.fromNode(`『${name}』が複文で使われました。単文で記述してください。(v1非互換)`, position);\n            }\n            throw NakoSyntaxError.fromNode(`『${name}』は関数であり参照できません。`, position);\n        }\n        return res.js;\n    }\n    convGetVar(node) {\n        const name = node.value;\n        return this.genVar(name, node);\n    }\n    convComment(node) {\n        let commentSrc = String(node.value);\n        commentSrc = commentSrc.replace(/\\n/g, '¶');\n        const lineNo = this.convLineno(node, false);\n        if (commentSrc === '' && lineNo === '') {\n            return ';';\n        }\n        if (commentSrc === '') {\n            return ';' + lineNo + '\\n';\n        }\n        return ';' + lineNo + '//' + commentSrc + '\\n';\n    }\n    convReturn(node) {\n        // 関数の中であれば利用可能\n        if (this.varsSet.names.has('!関数')) {\n            throw NakoSyntaxError.fromNode('『戻る』がありますが、関数定義内のみで使用可能です。', node);\n        }\n        const lno = this.convLineno(node, false);\n        let value;\n        if (node.value) {\n            value = this._convGen(node.value, true);\n        }\n        else if (this.speedMode.invalidSore === 0) {\n            value = this.varname('それ');\n        }\n        else {\n            return lno + 'return;';\n        }\n        if (this.warnUndefinedReturnUserFunc === 0) {\n            return lno + `return ${value};`;\n        }\n        else {\n            const poolIndex = this.addConstPool('ユーザ関数からundefinedが返されています', [], node.file, node.line);\n            return lno + `return (__self.chk(${value}, ${poolIndex}));`;\n        }\n    }\n    getConstPoolsTemplateId(msg) {\n        let id = this.constPoolsTemplate.indexOf(msg);\n        if (id < 0) {\n            id = this.constPoolsTemplate.length;\n            this.constPoolsTemplate[id] = msg;\n        }\n        return id;\n    }\n    addConstPool(msg, args, file, line) {\n        // file\n        file = '' + file;\n        const fileNo = this.getConstPoolsTemplateId(file);\n        // msg\n        const msgNo = this.getConstPoolsTemplateId(msg);\n        // args\n        const args2 = [];\n        for (const i in args) {\n            const arg = '' + args[i];\n            const argNo = this.getConstPoolsTemplateId(arg);\n            args2.push(argNo);\n        }\n        const poolIndex = this.constPools.length;\n        this.constPools.push([msgNo, args2, fileNo, line]);\n        return poolIndex;\n    }\n    convCheckLoop(node, cmd) {\n        // ループの中であれば利用可能\n        if (!this.flagLoop) {\n            const cmdj = (cmd === 'continue') ? '続ける' : '抜ける';\n            throw NakoSyntaxError.fromNode(`『${cmdj}』文がありますが、それは繰り返しの中で利用してください。`, node);\n        }\n        return this.convLineno(node) + cmd + ';';\n    }\n    convDefFuncCommon(node, name) {\n        // パフォーマンスモニタ:ユーザ関数のinjectの定義\n        let performanceMonitorInjectAtStart = '';\n        let performanceMonitorInjectAtEnd = '';\n        if (this.performanceMonitor.userFunction !== 0) {\n            let key = name;\n            if (!key) {\n                if (typeof this.performanceMonitor.mumeiId === 'undefined') {\n                    this.performanceMonitor.mumeiId = 0;\n                }\n                this.performanceMonitor.mumeiId++;\n                key = `anous_${this.performanceMonitor.mumeiId}`;\n            }\n            performanceMonitorInjectAtStart = 'const performanceMonitorEnd = (function (key, type) {\\n' +\n                'const uf_start = performance.now() * 1000;\\n' +\n                'return function () {\\n' +\n                'const el_time = performance.now() * 1000 - uf_start;\\n' +\n                'if (!__self.__performance_monitor) {\\n' +\n                '__self.__performance_monitor={};\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: el_time, min_usec: el_time, max_usec: el_time, type: type };\\n' +\n                '} else if (!__self.__performance_monitor[key]) {\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: el_time, min_usec: el_time, max_usec: el_time, type: type };\\n' +\n                '} else {\\n' +\n                '__self.__performance_monitor[key].called++;\\n' +\n                '__self.__performance_monitor[key].totel_usec+=el_time;\\n' +\n                'if(__self.__performance_monitor[key].min_usec>el_time){__self.__performance_monitor[key].min_usec=el_time;}\\n' +\n                'if(__self.__performance_monitor[key].max_usec<el_time){__self.__performance_monitor[key].max_usec=el_time;}\\n' +\n                `}};})('${key}', 'user');` +\n                'try {\\n';\n            performanceMonitorInjectAtEnd = '} finally { performanceMonitorEnd(); }\\n';\n        }\n        let variableDeclarations = '';\n        const popStack = '';\n        const initialNames = new Set();\n        if (this.speedMode.invalidSore === 0) {\n            initialNames.add('それ');\n        }\n        this.varsSet = { isFunction: true, names: initialNames, readonly: new Set() };\n        // ローカル変数をPUSHする\n        this.varslistSet.push(this.varsSet);\n        // JSの引数と引数をバインド\n        variableDeclarations += '  var 引数 = arguments;\\n';\n        // ローカル変数を生成\n        variableDeclarations += '  var __vars = {};\\n';\n        // 宣言済みの名前を保存\n        const varsDeclared = Array.from(this.varsSet.names.values());\n        let code = '';\n        // 引数をローカル変数に設定\n        const meta = (!name) ? node.meta : node.name.meta;\n        for (let i = 0; i < meta.varnames.length; i++) {\n            const word = meta.varnames[i];\n            if (this.warnUndefinedCalledUserFuncArgs === 0) {\n                code += `  ${this.varname(word)} = arguments[${i}];\\n`;\n            }\n            else if (name) {\n                code += `  ${this.varname(word)} = (function(a){if(a===undefined){__self.logger.warn('ユーザ関数(${name})の引数(${this.varname(word)})にundefinedが渡されました',{file:'${node.file}',line:${node.line}});};return a;})(arguments[${i}]);\\n`;\n            }\n            else {\n                code += `  ${this.varname(word)} = (function(a){if(a===undefined){__self.logger.warn('匿名関数の引数(${this.varname(word)})にundefinedが渡されました',{file:'${node.file}',line:${node.line}});};return a;})(arguments[${i}]);\\n`;\n            }\n            this.varsSet.names.add(word);\n        }\n        // 関数定義は、グローバル領域で。\n        if (name) {\n            this.usedFuncSet.add(name);\n            this.varslistSet[1].names.add(name);\n            if (this.nakoFuncList[name] === undefined) {\n                // 既に generate で作成済みのはず(念のため)\n                this.nakoFuncList[name] = {\n                    josi: node.name.meta.josi,\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    fn: () => { },\n                    type: 'func',\n                    asyncFn: false,\n                    isExport: null\n                };\n                this.__self.getLogger().warn(`generateで未定義の状態の関数『${name}』が動的に登録されています。`);\n            }\n        }\n        // ブロックを解析\n        const oldUsedAsyncFn = this.usedAsyncFn;\n        this.usedAsyncFn = false || this.debugOption.useDebug;\n        const block = this._convGen(node.block, false);\n        code += block.split('\\n').map((line) => '  ' + line).join('\\n') + '\\n';\n        // 関数の最後に、変数「それ」をreturnするようにする\n        if (this.speedMode.invalidSore === 0) {\n            code += `  return (${this.varname('それ')});\\n`;\n        }\n        // パフォーマンスモニタ:ユーザ関数のinject\n        code += performanceMonitorInjectAtEnd;\n        // ブロックでasyncFnを使ったか\n        if (name && this.usedAsyncFn) {\n            this.nakoFuncList[name].asyncFn = true;\n        }\n        // 関数の末尾に、ローカル変数をPOP\n        // 関数内で定義されたローカル変数の宣言\n        for (const name of Array.from(this.varsSet.names.values())) {\n            if (!varsDeclared.includes(name)) {\n                if (NakoGen.isValidIdentifier(name)) {\n                    variableDeclarations += `  var ${name};\\n`;\n                }\n            }\n        }\n        if (this.speedMode.invalidSore === 0) {\n            if (NakoGen.isValidIdentifier('それ')) {\n                variableDeclarations += '  var それ = \\'\\';\\n';\n            }\n            else {\n                variableDeclarations += `  ${this.varname('それ')} = '';`;\n            }\n        }\n        // usedAsyncFnの値に応じて関数定義の方法を変更\n        const tof = (this.usedAsyncFn) ? topOfFunctionAsync : topOfFunction;\n        // 関数コード全体を構築\n        const lineInfo = '  ' + this.convLineno(node, true, 1) + '\\n';\n        code = tof + performanceMonitorInjectAtStart + variableDeclarations + lineInfo + code + popStack;\n        code += endOfFunction;\n        // 名前があれば、関数を登録する\n        if (name) {\n            this.nakoFuncList[name].fn = code;\n            this.nakoFuncList[name].asyncFn = this.usedAsyncFn;\n            meta.asyncFn = this.usedAsyncFn;\n        }\n        this.usedAsyncFn = oldUsedAsyncFn; // 以前の値を戻す\n        this.varslistSet.pop();\n        this.varsSet = this.varslistSet[this.varslistSet.length - 1];\n        if (name) {\n            this.__self.__varslist[1][name] = code;\n        }\n        return code;\n    }\n    convDefTest(node) {\n        const name = node.name.value;\n        let code = `__tests.push({ name: '${name}', f: () => {\\n`;\n        // ブロックを解析\n        const block = this._convGen(node.block, false);\n        code += `   ${block}\\n` +\n            '}});';\n        this.nakoTestFuncs[name] = {\n            josi: node.name.meta.josi,\n            fn: code,\n            type: 'test_func'\n        };\n        // ★この時点ではテストコードを生成しない★\n        // プログラム冒頭でコード生成時にテストの定義を行う\n        return '';\n    }\n    convDefFunc(node) {\n        // ※ [関数定義のメモ]\n        // ※ 関数の定義はプログラムの冒頭に移される。\n        // ※ そのため、生成されたコードはここでは返さない\n        // ※ registerFunction を参照\n        if (!node.name) {\n            return '';\n        }\n        const name = NakoGen.getFuncName(node.name.value);\n        this.convDefFuncCommon(node, name);\n        return '';\n    }\n    convFuncObj(node) {\n        return this.convDefFuncCommon(node, '');\n    }\n    convJsonObj(node) {\n        const list = node.value;\n        const codelist = list.map((e) => {\n            const key = this._convGen(e.key, true);\n            const val = this._convGen(e.value, true);\n            return `${key}:${val}`;\n        });\n        return '{' + codelist.join(',') + '}';\n    }\n    convJsonArray(node) {\n        const list = node.value;\n        const codelist = list.map((e) => {\n            return this._convGen(e, true);\n        });\n        return '[' + codelist.join(',') + ']';\n    }\n    convRefArray(node) {\n        const name = this._convGen(node.name, true);\n        const list = node.index;\n        let code = name;\n        if (!list) {\n            return code;\n        }\n        for (let i = 0; i < list.length; i++) {\n            const idx = this._convGen(list[i], true);\n            code += '[' + idx + ']';\n        }\n        return code;\n    }\n    convLetArray(node) {\n        const name = this._convGen(node.name, true);\n        const list = node.index || [];\n        let codeInit = '';\n        let code = name;\n        let codeArray = '';\n        // codeInit?\n        if (node.checkInit) {\n            const arrayDefCode = '[0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0]';\n            codeInit += `\\n/*配列初期化*/if (!(${name} instanceof Array)) { ${name} = ${arrayDefCode}; /*console.log('初期化:${name}')*/ };`;\n            for (let i = 0; i < list.length - 1; i++) {\n                const idx = this._convGen(list[i], true);\n                codeArray += `[${idx}]`;\n                codeInit += `\\n/*配列初期化${i}*/if (!(${name}${codeArray} instanceof Array)) { ${name}${codeArray} = ${arrayDefCode}; };`;\n                // codeInit += `\\n/*配列初期化${i}*/if (!(${name}${codeArray} instanceof Array)) { ${name}${codeArray} = ${arrayDefCode}; console.log('初期化:${i}:${name}${codeArray}',JSON.stringify(${name})) }; `\n            }\n            codeInit += '\\n';\n        }\n        // array\n        for (let i = 0; i < list.length; i++) {\n            const idx = this._convGen(list[i], true);\n            code += '[' + idx + ']';\n        }\n        // value\n        let value = null;\n        if (this.speedMode.invalidSore === 0) {\n            value = this.varname('それ');\n        }\n        if (node.value) {\n            value = this._convGen(node.value, true);\n        }\n        if (value == null) {\n            throw NakoSyntaxError.fromNode('代入する先の変数名がありません。', node);\n        }\n        code += ' = ' + value + ';\\n';\n        // generate code\n        const src = this.convLineno(node, false) + codeInit + code;\n        return src;\n    }\n    convGenLoop(node) {\n        const tmpflag = this.flagLoop;\n        this.flagLoop = true;\n        try {\n            return this._convGen(node, false);\n        }\n        finally {\n            this.flagLoop = tmpflag;\n        }\n    }\n    convFor(node) {\n        // ループ変数について\n        let word;\n        if (node.word !== null) { // ループ変数を使う時\n            const varName = node.word.value; // todo: Forの最初のパラメータが Token か Astか確認\n            this.varsSet.names.add(varName);\n            word = this.varname(varName);\n        }\n        else {\n            this.varsSet.names.add('dummy');\n            word = this.varname('dummy');\n        }\n        const idLoop = this.loopId++;\n        const varI = `$nako_i${idLoop}`;\n        // ループ条件を確認\n        const kara = this._convGen(node.from, true);\n        const made = this._convGen(node.to, true);\n        const flagDown = node.flagDown;\n        let inc = '1';\n        if (node.inc && node.inc !== 'null') {\n            inc = this._convGen(node.inc, true);\n        }\n        // ループ内のブロック内容を得る\n        const block = this.convGenLoop(node.block);\n        // ループ条件を変数に入れる用\n        const varFrom = `$nako_from${idLoop}`;\n        const varTo = `$nako_to${idLoop}`;\n        let sorePrefex = '';\n        if (this.speedMode.invalidSore === 0) {\n            sorePrefex = `${this.varname('それ')} = `;\n        }\n        const code = `\\n//[FOR id=${idLoop}]\\n` +\n            `const ${varFrom} = ${kara};\\n` +\n            `const ${varTo} = ${made};\\n` +\n            `if (${varFrom} <= ${varTo}) { // up\\n` +\n            `  for (let ${varI} = ${varFrom}; ${varI} <= ${varTo}; ${varI}+= ${inc}) {\\n` +\n            `    ${sorePrefex}${word} = ${varI};\\n` +\n            `    ${block}\\n` +\n            '  };\\n' +\n            '} else { // down\\n' +\n            `  if (${flagDown}) {` +\n            `    for (let ${varI} = ${varFrom}; ${varI} >= ${varTo}; ${varI}-= ${inc}) {\\n` +\n            `      ${sorePrefex}${word} = ${varI};` + '\\n' +\n            `      ${block}\\n` +\n            '    }\\n' +\n            '  };\\n' +\n            `};\\n//[/FOR id=${idLoop}]\\n`;\n        return this.convLineno(node, false) + code;\n    }\n    convForeach(node) {\n        let target;\n        if (node.target === null) {\n            if (this.speedMode.invalidSore === 0) {\n                target = this.varname('それ');\n            }\n            else {\n                throw NakoSyntaxError.fromNode('『反復』の対象がありません。', node);\n            }\n        }\n        else {\n            target = this._convGen(node.target, true);\n        }\n        // blockより早く変数を定義する必要がある\n        let nameS = '__v0[\"対象\"]';\n        if (node.name) {\n            nameS = this.varname(node.name.value);\n            this.varsSet.names.add(node.name.value);\n        }\n        const block = this.convGenLoop(node.block);\n        const id = this.loopId++;\n        const key = '__v0[\"対象キー\"]';\n        let sorePrefex = '';\n        if (this.speedMode.invalidSore === 0) {\n            sorePrefex = `${this.varname('それ')} = `;\n        }\n        const code = `let $nako_foreach_v${id}=${target};\\n` +\n            `for (let $nako_i${id} in $nako_foreach_v${id})` + '{\\n' +\n            `  if ($nako_foreach_v${id}.hasOwnProperty($nako_i${id})) {\\n` +\n            `    ${nameS} = ${sorePrefex}$nako_foreach_v${id}[$nako_i${id}];` + '\\n' +\n            `    ${key} = $nako_i${id};\\n` +\n            `    ${block}\\n` +\n            '  }\\n' +\n            '};\\n';\n        return this.convLineno(node, false) + code;\n    }\n    convRepeatTimes(node) {\n        const id = this.loopId++;\n        const value = this._convGen(node.value, true);\n        const block = this.convGenLoop(node.block);\n        const kaisu = '__v0[\"回数\"]';\n        let sorePrefex = '';\n        if (this.speedMode.invalidSore === 0) {\n            sorePrefex = `${this.varname('それ')} = `;\n        }\n        const code = `let $nako_times_v${id} = ${value};\\n` +\n            `for(var $nako_i${id} = 1; $nako_i${id} <= $nako_times_v${id}; $nako_i${id}++)` + '{\\n' +\n            `  ${sorePrefex}${kaisu} = $nako_i${id};` + '\\n' +\n            '  ' + block + '\\n}\\n';\n        return this.convLineno(node, false) + code;\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     */\n    convSpeedMode(node, isExpression) {\n        if (!node.options) {\n            return '';\n        }\n        const prev = { ...this.speedMode };\n        if (node.options['行番号無し']) {\n            this.speedMode.lineNumbers++;\n        }\n        if (node.options['暗黙の型変換無し']) {\n            this.speedMode.implicitTypeCasting++;\n        }\n        if (node.options['強制ピュア']) {\n            this.speedMode.forcePure++;\n        }\n        if (node.options['それ無効']) {\n            this.speedMode.invalidSore++;\n        }\n        try {\n            return this._convGen(node.block, isExpression);\n        }\n        finally {\n            this.speedMode = prev;\n        }\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     */\n    convPerformanceMonitor(node, isExpression) {\n        const prev = { ...this.performanceMonitor };\n        if (!node.options) {\n            return '';\n        }\n        if (node.options['ユーザ関数']) {\n            this.performanceMonitor.userFunction++;\n        }\n        if (node.options['システム関数本体']) {\n            this.performanceMonitor.systemFunctionBody++;\n        }\n        if (node.options['システム関数']) {\n            this.performanceMonitor.systemFunction++;\n        }\n        try {\n            return this._convGen(node.block, isExpression);\n        }\n        finally {\n            this.performanceMonitor = prev;\n        }\n    }\n    convWhile(node) {\n        const cond = this._convGen(node.cond, true);\n        const block = this.convGenLoop(node.block);\n        const code = `while (${cond})` + '{\\n' +\n            `  ${block}` + '\\n' +\n            '}\\n';\n        return this.convLineno(node, false) + code;\n    }\n    convAtohantei(node) {\n        const id = this.loopId++;\n        const varId = `$nako_i${id}`;\n        const cond = this._convGen(node.cond, true);\n        const block = this.convGenLoop(node.block);\n        const code = 'for(;;) {\\n' +\n            `  ${block}\\n` +\n            `  let ${varId} = ${cond};\\n` +\n            `  if (${varId}) { continue } else { break }\\n` +\n            '}\\n\\n';\n        return this.convLineno(node, false) + code;\n    }\n    convSwitch(node) {\n        const value = this._convGen(node.value, true);\n        const cases = node.cases || [];\n        let body = '';\n        for (let i = 0; i < cases.length; i++) {\n            const cvalue = cases[i][0];\n            const cblock = this.convGenLoop(cases[i][1]);\n            if (cvalue.type === '違えば') {\n                body += '  default:\\n';\n            }\n            else {\n                const cvalueCode = this._convGen(cvalue, true);\n                body += `  case ${cvalueCode}:\\n`;\n            }\n            body += `    ${cblock}\\n` +\n                '    break\\n';\n        }\n        const code = `switch (${value})` + '{\\n' +\n            `${body}` + '\\n' +\n            '}\\n';\n        return this.convLineno(node, false) + code;\n    }\n    convIf(node) {\n        const expr = this._convGen(node.expr, true);\n        const block = this._convGen(node.block, false);\n        const falseBlock = (node.false_block === null)\n            ? ''\n            : 'else {' + this._convGen(node.false_block, false) + '};\\n';\n        return this.convLineno(node, false) +\n            `if (${expr}) {\\n  ${block}\\n}` + falseBlock + ';\\n';\n    }\n    convTikuji(node) {\n        // #1164 により「逐次実行」構文は近いうちに廃止する\n        const pid = this.loopId++;\n        // gen tikuji blocks\n        const curName = `__tikuji${pid}`;\n        let code = `const ${curName} = []\\n`;\n        const blocks = (node.blocks) ? node.blocks : [];\n        for (let i = 0; i < blocks.length; i++) {\n            const block = this._convGen(blocks[i], false).replace(/\\s+$/, '') + '\\n';\n            const blockLineNo = this.convLineno(blocks[i], true);\n            const blockCode = `${curName}.push(async function(resolve, reject) {\\n` +\n                '  __self.resolve = resolve;\\n' +\n                '  __self.reject = reject;\\n' +\n                '  __self.resolveCount = 0;\\n' +\n                `  ${blockLineNo}\\n` +\n                `  ${block}` +\n                '  if (__self.resolveCount === 0) resolve();\\n' +\n                // eslint-disable-next-line no-template-curly-in-string\n                '}); // end of tikuji__${pid}[{$i}]\\n';\n            code += blockCode;\n        }\n        code += `// end of ${curName} \\n`;\n        // gen error block\n        let errorCode = `  ${curName}.splice(0);\\n` + // clear\n            '  __v0[\"エラーメッセージ\"]=errMsg;\\n';\n        if (node.errorBlock != null) {\n            const errBlock = this._convGen(node.errorBlock, false).replace(/\\s+$/, '') + '\\n';\n            errorCode += errBlock;\n        }\n        code += `const ${curName}__reject = function(errMsg){\\n${errorCode}};\\n`;\n        // gen run block\n        code += '__self.resolve = undefined;\\n';\n        code += `const ${curName}__resolve = function(){\\n`;\n        code += '  setTimeout(async function(){\\n';\n        code += `    if (${curName}.length == 0) {return}\\n`;\n        code += `    const f = ${curName}.shift()\\n`;\n        code += `    await f(${curName}__resolve, ${curName}__reject);\\n`;\n        code += '  }, 0);\\n';\n        code += '};\\n';\n        code += `${curName}__resolve()\\n`;\n        return this.convLineno(node, false) + code;\n    }\n    convFuncGetArgsCalcType(_funcName, _func, node) {\n        const args = [];\n        const opts = {};\n        const nodeArgs = (node.args) ? node.args : [];\n        for (let i = 0; i < nodeArgs.length; i++) {\n            const arg = nodeArgs[i];\n            if (i === 0 && arg === null && this.speedMode.invalidSore === 0) {\n                args.push(this.varname('それ'));\n                opts.sore = true;\n            }\n            else {\n                args.push(this._convGen(arg, true));\n            }\n        }\n        return [args, opts];\n    }\n    getPluginList() {\n        const r = [];\n        for (const name in this.__self.__module) {\n            r.push(name);\n        }\n        return r;\n    }\n    /**\n     * 関数の呼び出し\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     * @returns string コード\n     */\n    convCallFunc(node, isExpression) {\n        const funcName = NakoGen.getFuncName(node.name);\n        const res = this.findVar(funcName);\n        if (res === null) {\n            throw NakoSyntaxError.fromNode(`関数『${funcName}』が見当たりません。有効プラグイン=[` + this.getPluginList().join(', ') + ']', node);\n        }\n        // どの関数を呼び出すのか関数を特定する\n        let func;\n        if (res.i === 0) { // plugin function\n            func = this.__self.getFunc(funcName);\n            if (!func) {\n                throw new Error(`[System Error] 関数「${funcName}」NakoCompiler.nakoFuncList の不整合があります。`);\n            }\n            if (func.type !== 'func') {\n                throw NakoSyntaxError.fromNode(`『${funcName}』は関数ではありません。`, node);\n            }\n        }\n        else {\n            func = this.nakoFuncList[funcName];\n            // 無名関数の可能性\n            if (func === undefined) {\n                func = { return_none: false };\n            }\n        }\n        // 関数の参照渡しか？\n        if (node.type === 'func_pointer') {\n            return res.js;\n        }\n        // 関数の参照渡しでない場合\n        // 関数定義より助詞を一つずつ調べる\n        const argsInfo = this.convFuncGetArgsCalcType(funcName, func, node);\n        const args = argsInfo[0];\n        const argsOpts = argsInfo[1];\n        // function\n        this.usedFuncSet.add(funcName);\n        if (funcName === '名前空間設定') {\n            return `\\n// --- 名前空間(${args[0]}) ---\\n__varslist[0]['名前空間設定'](${args[0]}, __self);__self.__modName=${args[0]};\\n`;\n        }\n        else if (funcName === 'プラグイン名設定') {\n            return `\\n__varslist[0]['プラグイン名設定'](${args[0]}, __self);\\n`;\n        }\n        // 関数呼び出しで、引数の末尾にthisを追加する-システム情報を参照するため\n        args.push('__self');\n        let funcDef = 'function';\n        let funcBegin = '';\n        let funcEnd = '';\n        // setter?\n        if (node.setter) {\n            funcBegin += ';__self.isSetter = true;\\n';\n            funcEnd += ';__self.isSetter = false;\\n';\n        }\n        // 関数内 (__varslist.length > 3) からプラグイン関数 (res.i === 0) を呼び出すとき、 そのプラグイン関数がpureでなければ\n        // 呼び出しの直前に全てのローカル変数をthis.__localsに入れる。\n        if (res.i === 0 && this.varslistSet.length > 3 && func.pure !== true && this.speedMode.forcePure === 0) { // undefinedはfalseとみなす\n            // 展開されたローカル変数の列挙\n            const localVars = [];\n            for (const name of Array.from(this.varsSet.names.values())) {\n                if (NakoGen.isValidIdentifier(name)) {\n                    localVars.push({ str: JSON.stringify(name), js: this.varname(name) });\n                }\n            }\n            // --- 実行前 ---\n            // 全ての展開されていないローカル変数を __self.__locals にコピーする\n            funcBegin += '__self.__locals = __vars;\\n';\n            // 全ての展開されたローカル変数を __self.__locals に保存する\n            for (const v of localVars) {\n                funcBegin += `__self.__locals[${v.str}] = ${v.js};\\n`;\n            }\n            // --- 実行後 ---\n            // 全ての展開されたローカル変数を __self.__locals から受け取る\n            // 「それ」は関数の実行結果を受け取るために使うためスキップ。\n            for (const v of localVars) {\n                if (v.js !== 'それ') {\n                    funcEnd += `${v.js} = __self.__locals[${v.str}];\\n`;\n                }\n            }\n        }\n        // 変数「それ」が補完されていることをヒントとして出力\n        if (argsOpts.sore) {\n            funcBegin += '/*[sore]*/';\n        }\n        const indent = (text, n) => {\n            let result = '';\n            for (const line of text.split('\\n')) {\n                if (line !== '') {\n                    result += '  '.repeat(n) + line + '\\n';\n                }\n            }\n            return result;\n        };\n        // 引数チェックの例外 #1260\n        const noCheckFuncs = { 'TYPEOF': true, '変数型確認': true };\n        // 関数呼び出しコードの構築\n        let argsCode;\n        if ((this.warnUndefinedCallingUserFunc === 0 && res.i !== 0) || (this.warnUndefinedCallingSystemFunc === 0 && res.i === 0)) {\n            argsCode = args.join(',');\n        }\n        else {\n            const argsA = [];\n            args.forEach((arg) => {\n                if (arg === '__self' || noCheckFuncs[funcName] === true) { // #1260\n                    argsA.push(`${arg}`);\n                }\n                else {\n                    // 引数のundefinedチェックのコードを入れる\n                    const msg = (res.i === 0) ? '命令『$0』の引数にundefinedを渡しています。' : 'ユーザ命令『$0』の引数にundefinedを渡しています。';\n                    const poolIndex = this.addConstPool(msg, [funcName], node.file, node.line);\n                    // argが空になる対策 #1315\n                    const argStr = (arg === '') ? '\"\"' : arg;\n                    argsA.push(`(__self.chk(${argStr}, ${poolIndex}))`);\n                }\n            });\n            argsCode = argsA.join(', ');\n        }\n        let funcCall = `${res.js}(${argsCode})`;\n        if (func.asyncFn) {\n            funcDef = `async ${funcDef}`;\n            funcCall = `await ${funcCall}`;\n            this.numAsyncFn++;\n            this.usedAsyncFn = true;\n        }\n        if (res.i === 0 && this.performanceMonitor.systemFunctionBody !== 0) {\n            let key = funcName;\n            if (!key) {\n                if (typeof this.performanceMonitor.mumeiId === 'undefined') {\n                    this.performanceMonitor.mumeiId = 0;\n                }\n                this.performanceMonitor.mumeiId++;\n                key = `anous_${this.performanceMonitor.mumeiId}`;\n            }\n            funcCall = `(${funcDef} (key, type) {\\n` +\n                'const sbf_start = performance.now() * 1000;\\n' +\n                'try {\\n' +\n                'return ' + funcCall + ';\\n' +\n                '} finally {\\n' +\n                'const sbl_time = performance.now() * 1000 - sbf_start;\\n' +\n                'if (!__self.__performance_monitor) {\\n' +\n                '__self.__performance_monitor={};\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: sbl_time, min_usec: sbl_time, max_usec: sbl_time, type: type };\\n' +\n                '} else if (!__self.__performance_monitor[key]) {\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: sbl_time, min_usec: sbl_time, max_usec: sbl_time, type: type };\\n' +\n                '} else {\\n' +\n                '__self.__performance_monitor[key].called++;\\n' +\n                '__self.__performance_monitor[key].totel_usec+=sbl_time;\\n' +\n                'if(__self.__performance_monitor[key].min_usec>sbl_time){__self.__performance_monitor[key].min_usec=sbl_time;}\\n' +\n                'if(__self.__performance_monitor[key].max_usec<sbl_time){__self.__performance_monitor[key].max_usec=sbl_time;}\\n' +\n                `}}})('${funcName}_body', 'sysbody')\\n`;\n        }\n        let code = '';\n        if (func.return_none) {\n            // 戻り値のない関数の場合\n            if (funcEnd === '') {\n                if (funcBegin === '') {\n                    code = `${funcCall};\\n`;\n                }\n                else {\n                    code = `${funcBegin} ${funcCall};\\n`;\n                }\n            }\n            else {\n                code = `${funcBegin}try {\\n${indent(funcCall, 1)};\\n} finally {\\n${indent(funcEnd, 1)}}\\n`;\n            }\n        }\n        else {\n            // 戻り値のある関数の場合\n            let sorePrefex = '';\n            if (this.speedMode.invalidSore === 0) {\n                sorePrefex = `${this.varname('それ')} = `;\n            }\n            if (funcBegin === '' && funcEnd === '') {\n                code = `(${sorePrefex}${funcCall})`;\n            }\n            else {\n                if (funcEnd === '') {\n                    code = `(${funcDef}(){\\n${indent(`${funcBegin};\\nreturn ${sorePrefex} ${funcCall}`, 1)}}).call(this)`;\n                }\n                else {\n                    code = `(${funcDef}(){\\n${indent(`${funcBegin}try {\\n${indent(`return ${sorePrefex}${funcCall};`, 1)}\\n} finally {\\n${indent(funcEnd, 1)}}`, 1)}}).call(this)`;\n                }\n            }\n            // ...して\n            if (node.josi === 'して' || (node.josi === '' && !isExpression)) {\n                code += ';\\n';\n            }\n        }\n        if (res.i === 0 && this.performanceMonitor.systemFunction !== 0) {\n            code = '(function (key, type) {\\n' +\n                'const sf_start = performance.now() * 1000;\\n' +\n                'try {\\n' +\n                'return ' + code + ';\\n' +\n                '} finally {\\n' +\n                'const sl_time = performance.now() * 1000 - sf_start;\\n' +\n                'if (!__self.__performance_monitor) {\\n' +\n                '__self.__performance_monitor={};\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: sl_time, min_usec: sl_time, max_usec: sl_time, type: type };\\n' +\n                '} else if (!__self.__performance_monitor[key]) {\\n' +\n                '__self.__performance_monitor[key] = { called:1, totel_usec: sl_time, min_usec: sl_time, max_usec: sl_time, type: type };\\n' +\n                '} else {\\n' +\n                '__self.__performance_monitor[key].called++;\\n' +\n                '__self.__performance_monitor[key].totel_usec+=sl_time;\\n' +\n                'if(__self.__performance_monitor[key].min_usec>sl_time){__self.__performance_monitor[key].min_usec=sl_time;}\\n' +\n                'if(__self.__performance_monitor[key].max_usec<sl_time){__self.__performance_monitor[key].max_usec=sl_time;}\\n' +\n                `}}})('${funcName}_sys', 'system')\\n`;\n        }\n        return code;\n    }\n    convRenbun(node) {\n        const right = this._convGen(node.right, true);\n        const left = this._convGen(node.left, false);\n        this.numAsyncFn++;\n        this.usedAsyncFn = true;\n        return `/*連文*/await (async function(){ ${left}; return ${right} }).call(this)`;\n    }\n    convOp(node) {\n        // トークン名からJS演算子への変換 - 単純な変換が可能なものをここで定義\n        const OP_TBL = {\n            '&': '+\"\"+',\n            eq: '==',\n            noteq: '!=',\n            '===': '===',\n            '!==': '!==',\n            gt: '>',\n            lt: '<',\n            gteq: '>=',\n            lteq: '<=',\n            and: '&&',\n            or: '||',\n            shift_l: '<<',\n            shift_r: '>>',\n            shift_r0: '>>>',\n            '÷': '/'\n        };\n        let op = node.operator || ''; // 演算子\n        let right = this._convGen(node.right, true);\n        let left = this._convGen(node.left, true);\n        if (op === '+' && this.speedMode.implicitTypeCasting === 0) {\n            if (node.left && node.left.type !== 'number' && node.left.type !== 'bigint') {\n                left = `self.__parseFloatOrBigint(${left})`;\n            }\n            if (node.right && node.right.type !== 'number' && node.right.type !== 'bigint') {\n                right = `self.__parseFloatOrBigint(${right})`;\n            }\n        }\n        // 階乗\n        if (op === '^' || op === '**') {\n            return `((${left}) ** (${right}))`;\n        }\n        // 整数の割り算 #1152\n        if (op === '÷÷') {\n            return `(Math.floor(${left} / ${right}))`;\n        }\n        // 一般的なオペレータに変換\n        if (OP_TBL[op]) {\n            op = OP_TBL[op];\n        }\n        //\n        return `(${left} ${op} ${right})`;\n    }\n    convInc(node) {\n        // もし値が省略されていたら、変数「それ」に代入する\n        let value = null;\n        if (this.speedMode.invalidSore === 0) {\n            value = this.varname('それ');\n        }\n        if (node.value) {\n            value = this._convGen(node.value, true);\n        }\n        if (value == null) {\n            throw NakoSyntaxError.fromNode('加算する先の変数名がありません。', node);\n        }\n        // 配列への代入か(core#86)\n        let code = '';\n        let jsName;\n        const nodeName = node.name;\n        if (nodeName.type === '配列参照') {\n            jsName = this.convRefArray(nodeName);\n        }\n        else {\n            // 変数名\n            const name = nodeName.value;\n            let res = this.findVar(name);\n            if (res === null) {\n                this.varsSet.names.add(name);\n                res = this.findVar(name);\n                if (!res) {\n                    throw new Error('『増』または『減』で変数が見当たりません。');\n                }\n            }\n            jsName = res.js;\n        }\n        // 自動初期化するか\n        code += `if (typeof(${jsName}) === 'undefined') { ${jsName} = 0; }`;\n        code += `${jsName} += ${value}`;\n        return ';' + this.convLineno(node, false) + code + '\\n';\n    }\n    convLet(node) {\n        // もし値が省略されていたら、変数「それ」に代入する\n        let value = null;\n        if (this.speedMode.invalidSore === 0) {\n            value = this.varname('それ');\n        }\n        if (node.value) {\n            value = this._convGen(node.value, true);\n        }\n        if (value == null) {\n            throw NakoSyntaxError.fromNode('代入する先の変数名がありません。', node);\n        }\n        // 変数名\n        const name = node.name.value;\n        const res = this.findVar(name);\n        let code = '';\n        if (res === null) {\n            this.varsSet.names.add(name);\n            code = `${this.varname(name)} = ${value};`;\n        }\n        else {\n            // 定数ならエラーを出す\n            if (this.varslistSet[res.i].readonly.has(name)) {\n                throw NakoSyntaxError.fromNode(`定数『${name}』は既に定義済みなので、値を代入することはできません。`, node);\n            }\n            code = `${res.js} = ${value};`;\n        }\n        return ';' + this.convLineno(node, false) + code + '\\n';\n    }\n    convDefLocalVar(node) {\n        const value = (node.value === null) ? 'null' : this._convGen(node.value, true);\n        const name = node.name.value;\n        const vtype = node.vartype; // 変数 or 定数\n        // 二重定義？\n        if (this.varsSet.names.has(name)) {\n            throw NakoSyntaxError.fromNode(`${vtype}『${name}』の二重定義はできません。`, node);\n        }\n        //\n        this.varsSet.names.add(name);\n        if (vtype === '定数') {\n            this.varsSet.readonly.add(name);\n        }\n        const code = `${this.varname(name)}=${value};\\n`;\n        return this.convLineno(node, false) + code;\n    }\n    // #563 複数変数への代入\n    convDefLocalVarlist(node) {\n        let code = '';\n        const vtype = node.vartype; // 変数 or 定数\n        const value = (node.value === null) ? 'null' : this._convGen(node.value, true);\n        const id = this.loopId++;\n        const varI = `$nako_i${id}`;\n        code += `const ${varI}=${value}\\n`;\n        code += `if (!(${varI} instanceof Array)) { ${varI}=[${varI}] }\\n`;\n        const names = (node.names) ? node.names : [];\n        for (let i = 0; i < names.length; i++) {\n            const nameObj = names[i];\n            const name = nameObj.value;\n            // 二重定義？\n            if (this.varsSet.names.has(name)) {\n                // 複数変数文では、二重定義も許容する #1027\n                // throw NakoSyntaxError.fromNode(`${vtype}『${name}』の二重定義はできません。`, node)\n            }\n            this.varsSet.names.add(name);\n            if (vtype === '定数') {\n                this.varsSet.readonly.add(name);\n            }\n            const vname = this.varname(name);\n            code += `${vname}=${varI}[${i}];\\n`;\n        }\n        return this.convLineno(node, false) + code;\n    }\n    convString(node) {\n        let value = '' + node.value;\n        const mode = node.mode;\n        value = value.replace(/\\\\/g, '\\\\\\\\');\n        value = value.replace(/\"/g, '\\\\\"');\n        value = value.replace(/\\r/g, '\\\\r');\n        value = value.replace(/\\n/g, '\\\\n');\n        if (mode === 'ex') {\n            const rf = (a, name) => {\n                return '\"+' + this.genVar(name, node) + '+\"';\n            };\n            value = value.replace(/\\{(.+?)\\}/g, rf);\n            value = value.replace(/｛(.+?)｝/g, rf);\n        }\n        return '\"' + value + '\"';\n    }\n    convTryExcept(node) {\n        const block = this._convGen(node.block, false);\n        const errBlock = this._convGen(node.errBlock, false);\n        return this.convLineno(node, false) +\n            `try {\\n${block}\\n} catch (e) {\\n` +\n            '  __v0[\"エラーメッセージ\"] = e.message;\\n' +\n            ';\\n' +\n            `${errBlock}}\\n`;\n    }\n    getUsedFuncSet() {\n        return this.usedFuncSet;\n    }\n    getPluginInitCode() {\n        // プラグインの初期化関数を実行する\n        let code = '';\n        let pluginCode = '';\n        for (const name in this.__self.__module) {\n            const initkey = `!${name}:初期化`;\n            if (this.varslistSet[0].names.has(initkey)) {\n                this.usedFuncSet.add(`!${name}:初期化`);\n                pluginCode += `__v0[\"!${name}:初期化\"](__self);\\n`;\n            }\n        }\n        if (pluginCode !== '') {\n            code += '__v0.line=\\'l0:プラグインの初期化\\';\\n' + pluginCode;\n        }\n        return code;\n    }\n}\n/** template of standalone js code */\nconst STANDALONE_CODE = `\n// === generated by nadesiko3 ===\n// <nadesiko3standalone>\n// --- import\nimport path from 'path'\nimport { NakoRuntimeError } from './nako3runtime/nako_errors.mjs'\n__codeImportFiles__\n// --- init global self\nconst self = {}\nself.coreVersion = '__coreVersion__'\nself.version = '__version__'\nself.logger = {\n  error: (message) => { console.error(message) },\n  warn: (message) => { console.warn(message) },\n  send: (level, message) => { console.log(message) },\n  runtimeError: (message, lineInfo) => { console.error(message, lineInfo) }\n};\nself.__varslist = [{}, {}, {}]\nself.__v0 = self.__varslist[0]\nself.initFuncList = []\nself.clearFuncList = []\n// --- jsInit ---\n__jsInit__\n// --- Copy module functions ---\nfor (const mod of __importNames__) {\n  for (const funcName in mod) {\n    // プラグインの初期化とクリア関数を登録\n    if (funcName === '初期化') {\n      self.initFuncList.push(mod[funcName].fn)\n      continue\n    }\n    if (funcName === '!クリア') {\n      self.clearFuncList.push(mod[funcName].fn)\n      continue\n    }\n    // 関数や定数を登録\n    const f = mod[funcName]\n    if (f.type === 'func') { // 関数\n      self.__varslist[0][funcName] = f.fn\n    } else { // 定数\n      self.__varslist[0][funcName] = f.value\n    }\n  }\n}\nself.__vars = self.__varslist[2];\nself.__module = {};\nself.__locals = {};\nself.__genMode = 'sync';\n// プラグインの初期化コードを実行\nself.initFuncList.map(f => f(self))\ntry {\n// ---------------------------\n// <prepareMainCode>\n__codeStandalone__\n// </prepareMainCode>\n// ---------------------------\n// <mainCode>\n__codeJS__\n// </mainCode>\n// ---------------------------\n  // standaloneCodeでは、即時プラグインのクリアコードを実行\n  self.clearFuncList.map(f => f(self))\n} catch (err) {\n  self.logger.error(err);\n  throw err;\n}\n// </nadesiko3standalone>\n`;\n/**\n * @param com\n * @param ast\n * @param opt\n */\nexport function generateJS(com, ast, opt) {\n    // NakoGenのインスタンスを作成\n    const gen = new NakoGen(com);\n    // ※ [関数定義に関するコード生成のヒント]\n    // ※ 関数の名前だけを(1)で登録して、(2)で実際に関数のコードを生成する。\n    // ※ ただし(2)では生成するだけなので、(3)でプログラム冒頭に関数定義のコードを記述する。\n    // この順番を変えることはできない (グローバル変数が認識できなくなったり、関数定義のタイミングがずれる)\n    // (1) ユーザー定義関数をシステムに登録する\n    gen.registerFunction(ast);\n    // (2) JSコードを生成する\n    let js = gen.convGen(ast, opt);\n    // (3) JSコードを実行するための事前ヘッダ部分の生成\n    const jsInit = gen.getDefFuncCode(com, opt);\n    // ランダムな関数名を生成\n    const funcID = '' + (new Date()).getTime() + '_' + Math.floor(0xFFFFFFFF * Math.random());\n    // テストの実行\n    if (js && opt.isTest) {\n        js += '\\n__self._runTests(__tests);\\n';\n    }\n    // async method\n    if (gen.numAsyncFn > 0 || gen.debugOption.useDebug) {\n        const asyncMain = '__eval_nako3async_' + funcID + '__';\n        js = `\n// --------------------------------------------------\n// <nadesiko3::gen::async id=\"${funcID}\" times=\"${gen.numAsyncFn}\">\nasync function ${asyncMain}(self) {\n  // --- code_begin ---\n${js}\n  // --- code_end ---\n  // __処理末尾__ // ← テストなどで必要なので消さない\n} // end of ${asyncMain}\n${asyncMain}.call(self, self)\n.then(() => {\n  // ok\n})\n.catch(err => {\n  if (err.message === '__終わる__') { return }\n  self.numFailures++\n  // send errors to logger\n  let rterr = self.logger.runtimeError(err, self.__v0.line)\n  self.logger.error(rterr)\n})\n// </nadesiko3::gen::async id=\"${funcID}\">\n// --------------------------------------------------\n`;\n    }\n    else {\n        const syncMain = '__eval_nako3sync_' + funcID + '__';\n        js = `\n// --------------------------------------------------\n// <nadesiko3::gen::syncMode>\nfunction ${syncMain}(self) {\ntry {\n  ${js}\n  // __処理末尾__ // ← テストなどで必要なので消さない\n} catch (err) {\n  if (err.message === '__終わる__') { return }\n  self.numFailures++\n  throw self.logger.runtimeError(err, self.__v0.line)\n}\n} // end of ${syncMain}\n${syncMain}(self)\n// </nadesiko3::gen::syncMode>\n// --------------------------------------------------\n`;\n    }\n    // デバッグメッセージ\n    com.getLogger().trace('--- generate ---\\n' + js);\n    let codeImportFiles = '';\n    const importNames = [];\n    for (const f of opt.importFiles) {\n        if (f === 'nako_errors.mjs') {\n            continue;\n        }\n        const ff = 'nako3runtime_' + f.replace(/\\.(js|mjs)$/, '').replace(/[^a-zA-Z0-9_]/g, '_');\n        importNames.push(ff);\n        codeImportFiles += `import ${ff} from './nako3runtime/${f}'\\n`;\n    }\n    // ---\n    const initCode = gen.getPluginInitCode();\n    const runtimeEnvCode = `\n// <runtimeEnvCode>\nconst self = this\n${opt.codeEnv}\n${jsInit}\n${initCode}\n${js}\n// </runtimeEnvCode>\n`;\n    return {\n        // なでしこの実行環境ありの場合(thisが有効)\n        runtimeEnv: runtimeEnvCode,\n        // JavaScript単体で動かす場合\n        standalone: replaceTemplateCode(STANDALONE_CODE, {\n            codeImportFiles,\n            'coreVersion': com.coreVersion,\n            'version': com.version,\n            'importNames': ('[' + importNames.join(', ') + ']'),\n            'codeStandalone': opt.codeStandalone,\n            'codeJS': js,\n            jsInit\n        }),\n        // コード生成に使ったNakoGenのインスタンス\n        gen\n    };\n}\n// template\nfunction replaceTemplateCode(template, values) {\n    for (const key in values) {\n        const pat = `__${key}__`;\n        const val = values[key];\n        template = template.split(pat).join(val);\n    }\n    return template;\n}\n","/**\n * file: nako_gen_async\n * パーサーが生成した中間オブジェクトを実際のJavaScriptのコードに変換する。\n * なお、扱いやすさ優先で、なでしこの一文を一つの関数として生成し、非同期実行する。\n */\nimport { NakoSyntaxError, NakoError, NakoRuntimeError } from './nako_errors.mjs';\nimport nakoVersion from './nako_core_version.mjs';\nimport { NakoGen } from './nako_gen.mjs';\n/**\n * なでしこのインタプリタコード\n */\nconst NakoCodeNop = 'NOP';\nconst NakoCodeLabel = 'LBL';\nconst NakoCodeEOL = 'EOL';\nconst NakoCodeJump = 'JMP'; // JUMP addr\nconst NakoCodeJumpIfTrue = 'JMP_T'; // pop and jump addr\nconst NakoCodeJumpIfFalse = 'JMP_F'; // pop and jump addr\nconst NakoCodeCall = 'CALL'; // call addr\nconst NakoCodeCallObj = 'CALL_OBJ'; // call addr\nconst NakoCodeReturn = 'RET';\nconst NakoCodeTry = 'TRY';\nconst NakoCodeCode = 'CODE';\nconst NakoCodeTagIsFuncpoint = 0x0F;\n/**\n * なでしこのインタプリタが用いる簡易コードを表現するクラス\n */\nclass NakoCode {\n    /**\n     * @param type\n     * @param value\n     */\n    constructor(type, value) {\n        /** Codeのタイプ\n         * @type {string}\n         */\n        this.type = type;\n        /** Codeの値 / ラベルならラベル名\n         * @type {string}\n         */\n        this.value = value;\n        /** ラベルならジャンプ先\n         * @type {number}\n         */\n        this.no = -1;\n        /** タグ\n         * @type {number}\n         */\n        this.tag = 0;\n    }\n}\n/**\n * 構文木からJSのコードを生成するクラス\n */\nexport class NakoGenASync {\n    /**\n     * @param com\n     * @param {Ast} ast\n     * @param {boolean | string} isTest 文字列なら1つのテストだけを実行する\n     */\n    static generate(com, ast, isTest) {\n        const gen = new NakoGenASync(com);\n        // ユーザー定義関数をシステムに登録する\n        gen.registerFunction(ast);\n        // JSコードを生成する\n        let js = gen.convGen(ast, !!isTest);\n        // JSコードを実行するための事前ヘッダ部分の生成\n        js = gen.getDefFuncCode(isTest) + js;\n        com.getLogger().trace('--- generate(非同期モード) ---\\n' + js);\n        // テストの実行\n        if (js && isTest) {\n            js += '\\n__self._runTests(__tests);\\n';\n        }\n        return {\n            // なでしこの実行環境ありの場合\n            runtimeEnv: js,\n            // JavaScript単体で動かす場合\n            standalone: `\\\nconst nakoVersion = ${JSON.stringify(nakoVersion)};\n${NakoError.toString()}\n${NakoRuntimeError.toString()}\nthis.logger = {\n  error(message) { console.error(message) },\n  send(level, message) { console.log(message) },\n};\nthis.__varslist = [{}, {}, {}];\nthis.__vars = this.__varslist[2];\nthis.__module = {};\nthis.__locals = {};\nthis.__labels = {};\nthis.__code = [];\nthis.__callstack = [];\nthis.__stack = [];\nthis.__genMode = '非同期モード';\ntry {\n  ${gen.getVarsCode()}\n  ${js}\n} catch (err) {\n  if (!(err instanceof NakoRuntimeError)) {\n    err = new NakoRuntimeError(err, this.__varslist[0].line);\n  }\n  this.logger.error(err);\n  throw err;\n}`,\n            gen // コード生成に使ったNakoGenのインスタンス\n        };\n    }\n    /**\n     * @param com コンパイラのインスタンス\n     */\n    constructor(com) {\n        this.com = com;\n        /**\n         * 出力するJavaScriptコードのヘッダー部分で定義する必要のある関数。fnはjsのコード。\n         * プラグイン関数は含まれない。\n         */\n        this.nakoFuncList = { ...com.getNakoFuncList() };\n        /**\n         * なでしこで定義したテストの一覧\n         * @type {Record<string, { josi: string[][], fn: string, type: 'test_func' }>}\n         */\n        this.nakoTestList = {};\n        /**\n         * プログラム内で参照された関数のリスト。プラグインの命令を含む。\n         * JavaScript単体で実行するとき、このリストにある関数の定義をJavaScriptコードの先頭に付け足す。\n         * @type {Set<string>}\n         */\n        this.usedFuncSet = new Set();\n        /**\n         * ループ時の一時変数が被らないようにIDで管理\n         * @type {number}\n         */\n        this.loopId = 1;\n        /**\n         * 変換中の処理が、ループの中かどうかを判定する\n         * @type {boolean}\n         */\n        this.flagLoop = false;\n        /**\n         * 変換後のコード管理番号\n         * @type {number}\n         */\n        this.codeId = 0;\n        /**\n         * 変換後のコードを保持する配列\n         * @type {Array<NakoCode>}\n         */\n        this.codeArray = [];\n        /** @type {NakoCode | null} */\n        this.labelContinue = null;\n        /** @type {NakoCode | null} */\n        this.labelBreak = null;\n        /**\n         * ジャンプ先を表現するラベル\n         * @type {Object<string, number>}\n         */\n        this.labels = {};\n        // コンパイラのインスタンス\n        this.__self = com;\n        /**\n         * コードジェネレータの種類\n         * @type {string}\n         */\n        this.genMode = '非同期モード';\n        /**\n         * 行番号とファイル名が分かるときは `l123:main.nako3`、行番号だけ分かるときは `l123`、そうでなければ任意の文字列。\n         * @type {string | null}\n         */\n        this.lastLineNo = null;\n        /**\n         * スタック\n         * @type {{ isFunction: boolean, names: Set<string>, readonly: Set<string> }[]}\n         */\n        this.varslistSet = com.__varslist.map((v) => ({ isFunction: false, names: new Set(Object.keys(v)), readonly: new Set() }));\n        /**\n         * スタックトップ\n         * @type {{ isFunction: boolean, names: Set<string>, readonly: Set<string> }}\n         */\n        this.varsSet = { isFunction: false, names: new Set(), readonly: new Set() };\n        this.varslistSet[2] = this.varsSet;\n        // 1以上のとき高速化する。\n        // 実行速度優先ブロック内で1増える。\n        this.speedMode = {\n            lineNumbers: 0,\n            implicitTypeCasting: 0,\n            invalidSore: 0,\n            forcePure: 0 // 全てのシステム命令をpureとして扱う。命令からローカル変数への参照が出来なくなる。\n        };\n        // 1以上のとき測定をinjectする。\n        // パフォーマンスモニタのブロック内で1増える。\n        this.performanceMonitor = {\n            userFunction: 0,\n            systemFunction: 0,\n            systemFunctionBody: 0 // システム関数(呼び出しコードを除く)\n        };\n    }\n    /**\n     * @param {import(\"./nako3\").Ast} node\n     * @param {boolean} forceUpdate\n     */\n    convLineno(node, forceUpdate) {\n        if (this.speedMode.lineNumbers > 0) {\n            return '';\n        }\n        /** @type {string} */\n        let lineNo;\n        if (typeof node.line !== 'number') {\n            lineNo = 'unknown';\n        }\n        else if (typeof node.file !== 'string') {\n            lineNo = `l${node.line}`;\n        }\n        else {\n            lineNo = `l${node.line}:${node.file}`;\n        }\n        // 強制的に行番号をアップデートするか\n        if (!forceUpdate) {\n            if (lineNo === this.lastLineNo) {\n                return '';\n            }\n            this.lastLineNo = lineNo;\n        }\n        // 例: __v0.line='l1:main.nako3'\n        return `__v0.line=${JSON.stringify(lineNo)};`;\n    }\n    /**\n     * ローカル変数のJavaScriptコードを生成する。\n     * 基本的に取得のために利用\n     * @param {string} name\n     */\n    varname(name) {\n        const keys = JSON.stringify(name);\n        return `sys.__vars[${keys}]`;\n    }\n    /**\n     * プログラムの実行に必要な関数を書き出す(システム領域)\n     * @returns {string}\n     */\n    getVarsCode() {\n        let code = '';\n        // プログラム中で使った関数を列挙して書き出す\n        for (const key of Array.from(this.usedFuncSet.values())) {\n            const f = this.__self.__varslist[0][key];\n            const name = `this.__varslist[0][\"${key}\"]`;\n            if (typeof (f) === 'function') {\n                code += name + '=' + f.toString() + ';\\n';\n            }\n            else {\n                code += name + '=' + JSON.stringify(f) + ';\\n';\n            }\n        }\n        return code;\n    }\n    /**\n     * プログラムの実行に必要な関数定義を書き出す(グローバル領域)\n     * convGenの結果を利用するため、convGenの後に呼び出すこと。\n     * @param {boolean | string} isTest テストかどうか。stringの場合は1つのテストのみ。\n     * @returns {string}\n     */\n    getDefFuncCode(isTest) {\n        let code = '';\n        // よく使う変数のショートカット\n        code += 'const __self = this.__self = this;\\n';\n        code += 'const __varslist = this.__varslist;\\n';\n        code += 'const __module = this.__module;\\n';\n        code += 'const __v0 = this.__v0 = this.__varslist[0];\\n';\n        code += 'const __v1 = this.__v1 = this.__varslist[1];\\n';\n        code += 'const __vars = this.__vars = this.__varslist[2];\\n';\n        code += 'const __code = this.__code;\\n';\n        // なでしこの関数定義を行う\n        let nakoFuncCode = '';\n        for (const key in this.nakoFuncList) {\n            const f = this.nakoFuncList[key].fn;\n            nakoFuncCode += '' +\n                `//[DEF_FUNC name='${key}']\\n` +\n                `__v1[\"${key}\"]=${f};\\n;` +\n                `//[/DEF_FUNC name='${key}']\\n`;\n        }\n        if (nakoFuncCode !== '') {\n            code += '__v0.line=\\'関数の定義\\';\\n' + nakoFuncCode;\n        }\n        // プラグインの初期化関数を実行する\n        let pluginCode = '';\n        for (const name in this.__self.__module) {\n            const initkey = `!${name}:初期化`;\n            if (this.varslistSet[0].names.has(initkey)) {\n                this.usedFuncSet.add(`!${name}:初期化`);\n                pluginCode += `__v0[\"!${name}:初期化\"](__self);\\n`;\n            }\n        }\n        if (pluginCode !== '') {\n            code += '__v0.line=\\'プラグインの初期化\\';\\n' + pluginCode;\n        }\n        // テストの定義を行う\n        if (isTest) {\n            let testCode = 'const __tests = [];\\n';\n            for (const key in this.nakoTestList) {\n                if (isTest === true || (typeof isTest === 'string' && isTest === key)) {\n                    const f = this.nakoTestList[key].fn;\n                    testCode += `${f};\\n;`;\n                }\n            }\n            if (testCode !== '') {\n                code += '__v0.line=\\'テストの定義\\';\\n';\n                code += testCode + '\\n';\n            }\n        }\n        return code;\n    }\n    /**\n     * プラグイン・オブジェクトを追加\n     * @param po プラグイン・オブジェクト\n     */\n    addPlugin(po) {\n        return this.__self.addPlugin(po);\n    }\n    /**\n     * プラグイン・オブジェクトを追加(ブラウザ向け)\n     * @param name オブジェクト名\n     * @param po 関数リスト\n     */\n    addPluginObject(name, po) {\n        this.__self.addPluginObject(name, po);\n    }\n    /**\n     * プラグイン・ファイルを追加(Node.js向け)\n     * @param objName オブジェクト名\n     * @param path ファイルパス\n     * @param po 登録するオブジェクト\n     */\n    addPluginFile(objName, path, po) {\n        this.__self.addPluginFile(objName, path, po);\n    }\n    /**\n     * 関数を追加する\n     * @param key 関数名\n     * @param josi 助詞\n     * @param fn 関数\n     */\n    addFunc(key, josi, fn) {\n        this.__self.addFunc(key, josi, fn);\n    }\n    /**\n     * プラグイン関数を参照する\n     * @param key プラグイン関数の関数名\n     * @returns プラグイン・オブジェクト\n     */\n    getFunc(key) {\n        return this.__self.getFunc(key);\n    }\n    /**\n     * 関数を先に登録してしまう\n     */\n    registerFunction(ast) {\n        if (ast.type !== 'block') {\n            throw NakoSyntaxError.fromNode('構文解析に失敗しています。構文は必ずblockが先頭になります', ast);\n        }\n        const registFunc = (node) => {\n            for (let i = 0; i < node.block.length; i++) {\n                const t = node.block[i];\n                if (t.type === 'def_func') {\n                    const name = t.name.value;\n                    this.usedFuncSet.add(name);\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    this.__self.__varslist[1][name] = function () { }; // 事前に適当な値を設定\n                    this.nakoFuncList[name] = {\n                        josi: t.name.meta.josi,\n                        fn: '',\n                        type: 'func'\n                    };\n                }\n                else if (t.type === 'speed_mode') {\n                    if (t.block.type === 'block') {\n                        registFunc(t.block);\n                    }\n                    else {\n                        registFunc(t);\n                    }\n                }\n                else if (t.type === 'performance_monitor') {\n                    if (t.block.type === 'block') {\n                        registFunc(t.block);\n                    }\n                    else {\n                        registFunc(t);\n                    }\n                }\n            }\n        };\n        registFunc(ast);\n        // __self.__varslistの変更を反映\n        const initialNames = new Set();\n        if (this.speedMode.invalidSore === 0) {\n            initialNames.add('それ');\n        }\n        this.varsSet = { isFunction: false, names: initialNames, readonly: new Set() };\n        this.varslistSet = this.__self.__varslist.map(v => ({ isFunction: false, names: new Set(Object.keys(v)), readonly: new Set() }));\n        this.varslistSet[2] = this.varsSet;\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isTest\n     */\n    convGen(node, isTest) {\n        // convert\n        this._convGen(node, true);\n        // ラベルアドレスの解決が必要なコード一覧\n        const needToFixAddr = new Set([\n            NakoCodeJump, NakoCodeJumpIfTrue, NakoCodeJumpIfFalse, NakoCodeCall, NakoCodeTry\n        ]);\n        // コードの最適化をするか?\n        const optimization = true;\n        let codes = this.codeArray;\n        //\n        if (optimization) {\n            // NOPを削除\n            codes = codes.filter((code) => {\n                return code.type !== NakoCodeNop;\n            });\n            // 未参照のラベルを探す - ただし関数呼び出しは削除しない\n            const usedLabels = new Set();\n            codes.forEach((code) => {\n                if (needToFixAddr.has(code.type)) {\n                    usedLabels.add(code.value);\n                }\n            });\n            // 未参照のラベルを削除\n            codes = codes.filter((code) => {\n                if (code.type !== NakoCodeLabel) {\n                    return true;\n                }\n                if (code.tag === NakoCodeTagIsFuncpoint) {\n                    return true;\n                }\n                return usedLabels.has(code.value);\n            });\n            // EOLが連続していたら削除する\n            let i = 0;\n            while (i < codes.length - 1) {\n                if (codes[i].type === NakoCodeEOL && codes[i + 1].type === NakoCodeEOL) {\n                    codes.splice(i + 1, 1);\n                    continue;\n                }\n                i++;\n            }\n            this.codeArray = codes;\n        }\n        // ラベルアドレスの解決\n        codes.forEach((code, index) => {\n            if (code.type === NakoCodeLabel) {\n                this.labels[code.value] = index;\n            }\n        });\n        codes.forEach((code) => {\n            if (needToFixAddr.has(code.type)) {\n                if (code.no < 0) {\n                    code.no = this.labels[code.value];\n                }\n            }\n        });\n        let result = '';\n        // コードの生成\n        codes.forEach((code, index) => {\n            switch (code.type) {\n                case NakoCodeNop:\n                    result += `case ${index}: break; // [NOP] ${code.value}\\n`;\n                    break;\n                case NakoCodeLabel:\n                    result += `case ${index}: break; // [LABEL] ${code.value}\\n`;\n                    break;\n                case NakoCodeEOL:\n                    result += `case ${index}: ${code.value}; break; // [EOL]\\n`;\n                    break;\n                case NakoCodeJump:\n                    result += `case ${index}: sys.nextIndex = ${code.no}; break; // ${code.value}\\n`;\n                    break;\n                case NakoCodeJumpIfTrue:\n                    result += `case ${index}: if (sys.__stack.pop()) { sys.nextIndex = ${code.no};} break; // ${code.value}\\n`;\n                    break;\n                case NakoCodeJumpIfFalse:\n                    result += `case ${index}: if (!sys.__stack.pop()) { sys.nextIndex = ${code.no}} break; // ${code.value}\\n`;\n                    break;\n                case NakoCodeReturn:\n                    result += `case ${index}: sys.__return(sys); break;\\n`;\n                    break;\n                case NakoCodeCall:\n                    result += `case ${index}: sys.__call(${code.no}, sys); break; // ${code.value}\\n`;\n                    break;\n                case NakoCodeCallObj:\n                    result += `case ${index}: sys.__callObj('${code.value}', ${index}, sys); break; // ${code.value}\\n`;\n                    break;\n                case NakoCodeTry:\n                    result += `case ${index}: sys.tryIndex = ${code.no}; break; // TRY \\n`;\n                    break;\n                case NakoCodeCode:\n                    {\n                        // trim last\n                        const s = code.value.replace(/\\s+$/, '');\n                        result += `case ${index}: {\\n${s}\\n};break;\\n`;\n                        break;\n                    }\n                default:\n                    throw new Error('invalid code type');\n            }\n        });\n        result = `\n    //-------------------------\n    // main_code\n    this.__labels = ${JSON.stringify(this.labels)};\n    this.nextAsync = (sys) => {\n      if (sys.index >= sys.codeSize || sys.index < 0) {return}\n      const __v0 = sys.__v0\n      try {\n        sys.inLoop = true\n        while (sys.index < sys.codeSize && sys.index >= 0) {\n          // console.log('@@[run]', sys.index)\n          switch (sys.index) {\n            // --- CODE.BEGIN ---\n            ${result}\n            // --- CODE.END ---\n            default:\n              sys.inLoop = false\n              console.log(sys.index, sys.__stack)\n              throw new Error('Invalid sys.index:' + sys.index)\n              break\n          }\n          // check next\n          if (sys.nextIndex >= 0) {\n            sys.index = sys.nextIndex\n            sys.nextIndex = -1\n          } else {\n            sys.index++\n          }\n          if (sys.async) {\n            sys.__saveSysenv(sys)\n            sys.async = false\n            break\n          }\n        } // end of while\n        sys.inLoop = false\n      } catch (e) {\n        sys.__errorAsync(e, sys)\n      }\n    }\n    this.__errorAsync = (e, sys) => { // エラーが起きた時呼び出す\n      sys.__v0[\"エラーメッセージ\"] = e.message;\n      if (e.message == '__終わる__') {\n        sys.__stopAsync(sys)\n        return\n      }\n      if (sys.tryIndex >= 0) {\n        sys.index = sys.tryIndex;\n        setTimeout(() => {sys.nextAsync(sys)}, 1)\n      } else {\n        throw e\n      }\n    }\n    this.__call = (no, sys) => {\n      const info = {lastVars:sys.__vars, backNo: this.index + 1}\n      sys.__callstack.push(info);\n      sys.__vars = {\"それ\":\"\"}\n      sys.__varslist.push(sys.__vars)\n      sys.nextIndex = no;\n    }\n    this.__return = sys => {\n      if (sys.__callstack.length === 0) {\n        sys.__destroySysenv(sys, sys.curSysenv.envid)\n        sys.index = -2\n        sys.nextIndex = -1\n        return\n      }\n      const sore = sys.__vars['それ'];\n      sys.__varslist.pop();\n      const info = sys.__callstack.pop();\n      sys.nextIndex = info.backNo;\n      sys.__vars = info.lastVars;\n      sys.__vars['それ'] = sore\n      sys.__stack.push(sore);\n    }\n    this.__resetAsync = sys => {\n      sys.index = 0\n      sys.codeSize = ${codes.length};\n      sys.async = false\n      sys.nextIndex = -1\n      sys.tryIndex = -1\n    }\n    this.__stopAsync = sys => {\n      sys.__resetAsync(sys)\n      sys.index = -1 // force stop!!\n    }\n    this.__callNakoCode = (no, backNo, sys) => {\n      this.__call(backNo, sys)\n      sys.nextIndex = no\n      const sysenv = sys.setAsync(sys)\n      setTimeout(() => {\n        // console.log('//__callNakoCode, back=', backNo, 'no=', no)\n        sys.compAsync(sys, sysenv)\n      } ,1)\n    }\n    this.__callNakoCodeEntry = (no, sys) => {\n      sys.__saveSysenv(sys)\n      sys.curSysenv = sys.__generateSysenv(sys)\n      sys.__restoreSysenv(sys)\n      sys.__vars = {\"それ\":\"\"}\n      sys.__varslist.push(sys.__vars)\n      sys.index = no;\n      sys.nextAsync(sys)\n    }\n    this.__callObj = (vname, curNo, sys) => {\n      if (sys.__vars[vname]) {\n        const fname = sys.__vars[vname]\n        // console.log(sys.__labels)\n        if (fname && sys.__labels[fname]) {\n          const no = sys.__labels[fname]\n          sys.__call(no, sys)\n          return\n        } else {\n          console.log('vname=', vname, 'label=', fname)\n        }\n      }\n      throw new Error('async error in __callObj::', vname)\n    }\n    this.__generateSysenv = sys => {\n      sys.envid = ( sys.envid == null ? 0 : sys.envid ) + 1\n      const sysenv = {\n        callstack: [],\n        varstack: [],\n        varslist: [sys.__varslist[0], sys.__varslist[1], sys.__varslist[2]],\n        index: -1,\n        nextIndex: -1,\n        tryIndex: -1,\n        envid: sys.envid\n      }\n      sysenv.vars = sysenv.varslist[2]\n      if (sys.sysenvs == null) { sys.sysenvs={} }\n      sys.sysenvs[sys.envid] = sysenv\n      // console.log('generete envid '+sys.envid)\n      return sysenv\n    }\n    this.__destroySysenv = (sys, envid) => {\n      delete sys.sysenvs[envid]\n      // console.log('destroy envid '+envid)\n    }\n    this.__saveSysenv = sys => {\n      const sysenv = sys.curSysenv\n      sysenv.callstack = sys.__callstack\n      sysenv.varstack = sys.__stack\n      sysenv.varslist = sys.__varslist\n      sysenv.vars = sys.__vars\n      sysenv.index = sys.index\n      sysenv.nextIndex = sys.nextIndex\n      sysenv.tryIndex = sys.tryIndex\n    }\n    this.__restoreSysenv = sys => {\n      const sysenv = sys.curSysenv\n      sys.__callstack = sysenv.callstack\n      sys.__stack = sysenv.varstack\n      sys.__varslist = sysenv.varslist\n      sys.__vars = sysenv.vars\n      ___vars = sys.__vars\n      sys.index = sysenv.index\n      sys.nextIndex = sysenv.nextIndex\n      sys.tryIndex = sysenv.tryIndex\n    }\n    this.setAsync = sys => {\n      sys.async = true\n      return sys.curSysenv\n    }\n    this.compAsync = (sys,sysenv) => {\n      if (sys.async && sys.curSysenv != null && sysenv != null && sys.curSysenv.envid === sysenv.envid) {\n        sys.async = false\n      } else {\n        if (sys.curSysenv == null || sysenv == null || sys.curSysenv.envid !== sysenv.envid) {\n          sys.__saveSysenv(sys)\n          const envid = sys.curSysenv.envid\n          sys.curSysenv = sysenv\n          sys.__restoreSysenv(sys)\n          // console.log('switch envid '+envid+' to '+sys.curSysenv.envid)\n        }\n        sys.nextAsync(sys)\n      }\n    }\n\n    this.__resetAsync(this)\n    this.curSysenv = this.__generateSysenv(this)\n    this.nextAsync(this)\n    //-------------------------\n    `;\n        if (isTest) {\n            return '';\n        }\n        else {\n            return result;\n        }\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     */\n    _convGen(node, isExpression) {\n        let code = '';\n        if (node instanceof Array) {\n            for (let i = 0; i < node.length; i++) {\n                const n = node[i];\n                code += this._convGen(n, isExpression);\n            }\n            return code;\n        }\n        if (node === null) {\n            return 'null';\n        }\n        if (node === undefined) {\n            return 'undefined';\n        }\n        if (typeof (node) !== 'object') {\n            return '' + node;\n        }\n        // switch\n        switch (node.type) {\n            // === NOP ===\n            case 'nop':\n                break;\n            case 'comment':\n                if (!node.value) {\n                    node.value = '';\n                }\n                this.addCode(new NakoCode(NakoCodeNop, node.value));\n                break;\n            case 'eol':\n                this.addCode(new NakoCode(NakoCodeEOL, this.convLineno(node, true)));\n                break;\n            // === 単純なコード変換 ===\n            case 'number':\n                this.addCodeStr(`sys.__stack.push(${node.value});//number`);\n                break;\n            case 'string':\n                this.convString(node);\n                break;\n            case 'word':\n            case 'variable':\n                this.convGetVar(node);\n                break;\n            case 'op':\n            case 'calc':\n                this.convOp(node);\n                break;\n            case 'renbun':\n                this.convRenbun(node);\n                break;\n            case 'not':\n                this._convGen(node.value, true);\n                this.addCodeStr('if (sys.__stack.length==0) throw new Error(\\'NOTでスタックに値がありません\\');' +\n                    'sys.__stack[sys.__stack.length-1] = (sys.__stack[sys.__stack.length-1]) ? 0:1');\n                break;\n            case '配列参照':\n                this.convRefArray(node);\n                break;\n            case 'json_array':\n                this.convJsonArray(node);\n                break;\n            case 'json_obj':\n                this.convJsonObj(node);\n                break;\n            case 'bool':\n                {\n                    const b = (node.value) ? 'true' : 'false';\n                    this.addCodeStr(`sys.__stack.push(${b})`);\n                    break;\n                }\n            case 'null':\n                this.addCodeStr('sys.__stack.push(null)');\n                break;\n            case 'func':\n            case 'func_pointer':\n            case 'calc_func':\n                this.convFunc(node, isExpression); // 関数の呼び出し\n                break;\n            // === 文の変換 ===\n            case 'let':\n                this.convLet(node);\n                break;\n            case 'let_array':\n                this.convLetArray(node);\n                break;\n            case 'block':\n                for (let i = 0; i < node.block.length; i++) {\n                    const b = node.block[i];\n                    this._convGen(b, false);\n                }\n                break;\n            case 'if':\n                this.convIf(node);\n                break;\n            case 'repeat_times':\n                this.convRepeatTimes(node);\n                break;\n            case 'break':\n                this.addCodeStr(this.convCheckLoop(node, 'break'));\n                break;\n            case 'continue':\n                this.addCodeStr(this.convCheckLoop(node, 'continue'));\n                break;\n            case 'for':\n                this.convFor(node);\n                break;\n            case 'foreach':\n                this.convForeach(node);\n                break;\n            case 'while':\n                this.convWhile(node);\n                break;\n            case 'switch':\n                this.convSwitch(node);\n                break;\n            case 'return':\n                this.convReturn(node);\n                break;\n            case 'end':\n                code += this.addCodeStr('__varslist[0][\\'終\\']();');\n                break;\n            case 'def_local_var':\n                this.convDefLocalVar(node);\n                break;\n            case 'def_local_varlist':\n                code += this.addCodeStr(this.convDefLocalVarlist(node));\n                break;\n            case 'tikuji':\n                throw NakoSyntaxError.fromNode('「逐次実行」構文は「!非同期モード」では使えません。', node);\n            case 'speed_mode':\n                throw NakoSyntaxError.fromNode('「速度有線」構文は「!非同期モード」では使えません。', node);\n            case 'performance_monitor':\n                this.convPerformanceMonitor(node, isExpression);\n                break;\n            case 'func_obj':\n                this.convFuncObj(node);\n                break;\n            case 'def_test':\n                this.convDefTest(node);\n                break;\n            case 'def_func':\n                code += this.addCodeStr(this.convDefFunc(node));\n                break;\n            // TODO\n            case 'try_except':\n                code += this.convTryExcept(node);\n                break;\n            case 'require':\n                code += this.convRequire(node);\n                break;\n            default:\n                throw new Error('System Error: unknown_type=' + node.type);\n        }\n        return code;\n    }\n    convRequire(node) {\n        const gen = new NakoGen(this.com);\n        this.addCodeStr(gen.convRequire(node));\n        return '';\n    }\n    /**\n     * add code to array\n     * @param {string} codeStr\n     * @returns {string}\n     */\n    addCodeStr(codeStr) {\n        if (codeStr === '') {\n            return '';\n        }\n        const a = codeStr.split('\\n');\n        const a2 = a.map((row) => '  ' + row.replace(/\\s+$/, ''));\n        const c = new NakoCode(NakoCodeCode, a2.join('\\n'));\n        return this.addCode(c);\n    }\n    /**\n     * add code to array\n     * @param {NakoCode} code\n     * @returns {string}\n     */\n    addCode(code) {\n        this.codeArray[this.codeId] = code;\n        this.codeId++;\n        return '';\n    }\n    /**\n     * make label for jump\n     * @param {string} name\n     * @returns {NakoCode}\n     */\n    makeLabel(name) {\n        const uniqLabel = name + '_' + (this.loopId++);\n        return this.makeLabelDirectly(uniqLabel);\n    }\n    /**\n     * make label for function\n     * @param {string} labelName\n     * @returns {NakoCode}\n     */\n    makeLabelDirectly(labelName) {\n        const c = new NakoCode(NakoCodeLabel, labelName);\n        this.labels[labelName] = -1;\n        return c;\n    }\n    /**\n     * make Jump\n     * @param {NakoCode} label\n     * @returns {NakoCode}\n     */\n    makeJump(label) {\n        return new NakoCode(NakoCodeJump, label.value);\n    }\n    /**\n     * make Jump if true\n     * @param {NakoCode} label\n     * @returns {NakoCode}\n     */\n    makeJumpIfTrue(label) {\n        return new NakoCode(NakoCodeJumpIfTrue, label.value);\n    }\n    /**\n     * make Jump if false\n     * @param {NakoCode} label\n     * @returns {NakoCode}\n     */\n    makeJumpIfFalse(label) {\n        return new NakoCode(NakoCodeJumpIfFalse, label.value);\n    }\n    /**\n     * @param {Ast} node\n     */\n    convIf(node) {\n        const labelBegin = this.makeLabel('もし:ここから');\n        const labelEnd = this.makeLabel('もし:ここまで');\n        const labelIfFalse = this.makeLabel('もし:違えば');\n        //\n        this.addCode(labelBegin);\n        this._convGen(node.expr, true);\n        this.addCode(this.makeJumpIfFalse(labelIfFalse));\n        this._convGen(node.block, false);\n        this.addCode(this.makeJump(labelEnd));\n        this.addCode(labelIfFalse);\n        if (node.falseBlock) {\n            this._convGen(node.falseBlock, false);\n        }\n        this.addCode(labelEnd);\n        return '';\n    }\n    convRepeatTimes(node) {\n        this.flagLoop = true;\n        this.varsSet.names.add('回数');\n        this.varsSet.readonly.add('回数');\n        // ループ管理変数を作成\n        const loopVar = `sys.__tmp_i${this.loopId}`;\n        this.loopId++;\n        // ループ回数を取得\n        const loopCount = `sys.__tmp_count${this.loopId}`;\n        this.loopId++;\n        this._convGen(node.value, true);\n        this.addCodeStr(`${loopCount} = sys.__stack.pop(); ${loopVar} = 0;`);\n        const labelCheck = this.makeLabel('回:条件チェック');\n        this.addCode(labelCheck);\n        const labelEnd = this.makeLabel('回:ここまで');\n        this.labelBreak = labelEnd;\n        this.labelContinue = labelCheck;\n        // 繰り返し判定\n        const kaisu = 'sys.__vars[\"回数\"]';\n        const cond = `${kaisu} = ++${loopVar}\\n` +\n            `sys.__stack.push(${loopVar} > ${loopCount})\\n`;\n        this.addCodeStr(cond);\n        this.addCode(this.makeJumpIfTrue(labelEnd));\n        this.convGenLoop(node.block); // read block\n        this.addCode(this.makeJump(labelCheck));\n        this.addCode(labelEnd);\n        this.flagLoop = false;\n        return '';\n    }\n    /**\n     * @param {string} name\n     * @returns {{i: number, name: string, isTop: boolean, js: string} | null}\n     */\n    findVar(name) {\n        // __vars ? (ローカル変数)\n        if (this.varsSet.names.has(name)) {\n            return { i: this.varslistSet.length - 1, name, isTop: true, js: `sys.__vars[${JSON.stringify(name)}]` };\n        }\n        // __varslist ?\n        for (let i = 2; i >= 0; i--) {\n            if (this.varslistSet[i].names.has(name)) {\n                return { i, name, isTop: false, js: `sys.__varslist[${i}][${JSON.stringify(name)}]` };\n            }\n        }\n        return null;\n    }\n    /**\n     * 定義済みの変数の参照\n     * @param {string} name\n     * @param {Ast} position\n     */\n    genVar(name, position) {\n        const res = this.findVar(name);\n        const lno = position.line;\n        if (res === null) {\n            // 定義されていない名前の参照は変数の定義とみなす。\n            // 多くの場合はundefined値を持つ変数であり分かりづらいバグを引き起こすが、\n            // 「ナデシコする」などの命令の中で定義された変数の参照の場合があるため警告に留める。\n            // ただし、自動的に定義される変数『引数』『それ』などは例外 #952\n            if (name === '引数' || name === 'それ' || name === '対象' || name === '対象キー' || name === '回数') {\n                // デフォルト定義されている変数名\n            }\n            else {\n                this.__self.getLogger().warn(`変数『${name}』は定義されていません。`, position);\n            }\n            this.varsSet.names.add(name);\n            return this.varname(name);\n        }\n        const i = res.i;\n        // システム関数・変数の場合\n        if (i === 0) {\n            const pv = this.__self.getFunc(name);\n            if (!pv) {\n                return `${res.js}/*err:${lno}*/`;\n            }\n            if (pv.type === 'const' || pv.type === 'var') {\n                return res.js;\n            }\n            if (pv.type === 'func') {\n                if (!pv.josi) {\n                    throw new Error('[System Error]');\n                }\n                if (pv.josi.length === 0) {\n                    return `(${res.js}())`;\n                }\n                throw NakoSyntaxError.fromNode(`『${name}』が複文で使われました。単文で記述してください。(v1非互換)`, position);\n            }\n            throw NakoSyntaxError.fromNode(`『${name}』は関数であり参照できません。`, position);\n        }\n        return res.js;\n    }\n    convGetVar(node) {\n        const name = node.value;\n        let varName = `sys.__vars[${JSON.stringify(name)}]`;\n        const o = this.findVar(name);\n        if (o != null) {\n            varName = o.js;\n        }\n        this.addCodeStr(`sys.__stack.push(${varName});`);\n    }\n    convComment(node) {\n        let commentSrc = String(node.value);\n        commentSrc = commentSrc.replace(/\\n/g, '¶');\n        const lineNo = this.convLineno(node, false);\n        if (commentSrc === '' && lineNo === '') {\n            return ';';\n        }\n        if (commentSrc === '') {\n            return ';' + lineNo + '\\n';\n        }\n        return ';' + lineNo + '//' + commentSrc + '\\n';\n    }\n    convReturn(node) {\n        // 関数の中であれば利用可能\n        if (this.varsSet.names.has('!関数')) {\n            throw NakoSyntaxError.fromNode('『戻る』がありますが、関数定義内のみで使用可能です。', node);\n        }\n        if (node.value) {\n            this._convGen(node.value, true);\n            this.addCodeStr('sys.__vars[\"それ\"] = sys.__stack.pop()');\n        }\n        this.addCode(new NakoCode(NakoCodeReturn, ''));\n        return '';\n    }\n    convCheckLoop(node, cmd) {\n        // ループの中であれば利用可能\n        if (!this.flagLoop) {\n            const cmdj = (cmd === 'continue') ? '続ける' : '抜ける';\n            throw NakoSyntaxError.fromNode(`『${cmdj}』文がありますが、それは繰り返しの中で利用してください。`, node);\n        }\n        if (cmd === 'continue') {\n            if (this.labelContinue) {\n                this.addCode(this.makeJump(this.labelContinue));\n            }\n        }\n        else {\n            if (this.labelBreak) {\n                this.addCode(this.makeJump(this.labelBreak));\n            }\n        }\n        return '';\n    }\n    convDefFuncCommon(node, name) {\n        // deffunc_code\n        const isMumeiFunc = (name === '');\n        let funcName = name;\n        if (isMumeiFunc) {\n            funcName = `無名関数:${this.loopId++}`;\n        }\n        const labelEnd = this.makeLabel(`関数「${funcName}」:ここまで`);\n        this.addCode(this.makeJump(labelEnd));\n        const labelBegin = this.makeLabelDirectly(funcName);\n        labelBegin.tag = NakoCodeTagIsFuncpoint; // 削除対象からはずすため\n        this.addCode(labelBegin);\n        //\n        const initialNames = new Set();\n        this.varsSet = { isFunction: true, names: initialNames, readonly: new Set() };\n        this.varsSet.names.add('それ');\n        // ローカル変数をPUSHする\n        this.varslistSet.push(this.varsSet);\n        // JSの引数と引数をバインド\n        const meta = isMumeiFunc ? node.meta : node.name.meta;\n        let code = '';\n        let codeCall = '';\n        code += `//関数『${funcName}』の初期化処理\\n`;\n        // 宣言済みの名前を保存\n        // const varsDeclared = Array.from(this.varsSet.names.values())\n        // 引数をローカル変数に設定 (スタックの末尾から取得する必要があるので、逆順に値を得る)\n        code += '// 引数をローカル変数として登録\\n';\n        for (let i = meta.varnames.length - 1; i >= 0; i--) {\n            const word = meta.varnames[i];\n            code += `  ${this.varname(word)} = sys.__stack.pop();\\n`;\n            this.varsSet.names.add(word);\n            codeCall += ''; //  sys.__stack.push(arguments[${i}]);\\n\n        }\n        code += '// ここまで:引数をローカル変数として登録\\n';\n        this.addCodeStr(code);\n        // 関数定義は、グローバル領域で。\n        this.usedFuncSet.add(funcName);\n        this.varslistSet[1].names.add(funcName);\n        this.nakoFuncList[funcName] = {\n            josi: meta.josi,\n            fn: '(function(){\\n' +\n                '  const sys = (arguments.length > 0) ? arguments[arguments.length-1] : {}; \\n' +\n                '  if (sys.newenv) { \\n' +\n                '    sys.newenv = false\\n' +\n                `    sys.__callNakoCodeEntry(sys.__labels['${funcName}'], sys);` + '\\n' +\n                '  } else {\\n' +\n                '  ' + codeCall + '\\n' +\n                `    sys.__callNakoCode(sys.__labels['${funcName}'], sys.nextIndex, sys);` + '\\n' +\n                '    if (!sys.inLoop) { sys.nextAsync(sys) }\\n' +\n                '  }  })',\n            type: 'func'\n        };\n        // ブロックを解析\n        this._convGen(node.block, false);\n        this.varslistSet.pop();\n        this.varsSet = this.varslistSet[this.varslistSet.length - 1];\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this.__self.__varslist[1][funcName] = function () { };\n        this.addCode(new NakoCode(NakoCodeReturn, ''));\n        this.addCode(labelEnd);\n        // 無名関数の定義であれば無名関数をPUSH\n        if (!name) {\n            this.addCodeStr(`sys.__stack.push('${funcName}')`);\n        }\n        return '';\n    }\n    convDefTest(node) {\n        throw NakoSyntaxError.fromNode('テスト構文は!非同期モードでは使えません。', node);\n    }\n    convDefFunc(node) {\n        const name = NakoGen.getFuncName(node.name.value);\n        this.convDefFuncCommon(node, name);\n        // ★この時点では関数のコードを生成しない★\n        // プログラム冒頭でコード生成時に関数定義を行う\n        return '';\n    }\n    convFuncObj(node) {\n        return this.convDefFuncCommon(node, '');\n    }\n    convJsonObj(node) {\n        const list = node.value;\n        const objName = `sys.__tmp_obj${this.loopId++}`;\n        this.addCodeStr(objName + '={}; // convJsonObj::ここから');\n        list.forEach((e) => {\n            this._convGen(e.value, true);\n            this._convGen(e.key, true);\n            this.addCodeStr(`${objName}[sys.__stack.pop()]=sys.__stack.pop()`);\n        });\n        this.addCodeStr(`this.__stack.push(${objName}); delete $objName; // convJsonObj::ここまで`);\n        return '';\n    }\n    convJsonArray(node) {\n        const list = node.value;\n        this.addCode(this.makeLabel('convJsonArray::ここから'));\n        list.forEach((e) => this._convGen(e, true));\n        const size = list.length;\n        this.addCodeStr(`sys.__stack.push(sys.__stack.splice(sys.__stack.length-${size},${size}))`);\n        return '';\n    }\n    convRefArray(node) {\n        // 名前をPUSH\n        this._convGen(node.name, true);\n        const list = node.index;\n        for (let i = 0; i < list.length; i++) {\n            // push index\n            this._convGen(list[i], true);\n            // pop index & push value\n            this.addCodeStr('const idx = sys.__stack.pop();\\n' +\n                'const obj = sys.__stack.pop();\\n' +\n                'sys.__stack.push(obj[idx]);');\n        }\n        return '';\n    }\n    convLetArray(node) {\n        // 代入する値をPUSH\n        this._convGen(node.value, true);\n        // 変数を取得\n        this._convGen(node.name, true);\n        const list = node.index;\n        for (let i = 0; i < list.length; i++) {\n            this._convGen(list[i], true);\n            if (i === list.length - 1) { // 代入\n                this.addCodeStr('const idx = this.__stack.pop();' +\n                    'const obj = this.__stack.pop();' +\n                    'const val = this.__stack.pop();' +\n                    'obj[idx]=val;');\n                break;\n            }\n            // index アクセス\n            this.addCodeStr('const idx = sys.__stack.pop();\\n' +\n                'const obj = sys.__stack.pop();\\n' +\n                'sys.__stack.push(obj[idx]);');\n        }\n        return '';\n    }\n    convGenLoop(node) {\n        const tmpflag = this.flagLoop;\n        this.flagLoop = true;\n        try {\n            return this._convGen(node, false);\n        }\n        finally {\n            this.flagLoop = tmpflag;\n        }\n    }\n    convFor(node) {\n        this.flagLoop = true;\n        // ループ変数について\n        let word;\n        if (node.word !== null) { // ループ変数を使う時\n            const varName = node.word.value;\n            this.varsSet.names.add(varName);\n            word = this.varname(varName);\n        }\n        else {\n            this.varsSet.names.add('dummy');\n            word = this.varname('dummy');\n        }\n        const sore = this.varname('それ');\n        const idLoop = this.loopId++;\n        const varI = `sys.__tmp__i${idLoop}`;\n        // ループ条件を変数に入れる用\n        const varTo = `sys.__tmp__to${idLoop}`;\n        // ループ条件を確認\n        this._convGen(node.from, true);\n        this._convGen(node.to, true);\n        this.addCodeStr(`${varTo}=sys.__stack.pop();${varI}=sys.__stack.pop();`);\n        // ループ変数を初期化\n        this.addCodeStr(`${sore} = ${word} = ${varI}`);\n        // 繰り返し判定\n        const labelCheck = this.makeLabel('繰返:条件確認');\n        const labelInc = this.makeLabel('繰返:加算');\n        this.addCode(labelCheck);\n        const labelEnd = this.makeLabel('繰返:ここまで');\n        this.addCodeStr(`sys.__stack.push(${word} <= ${varTo})`);\n        this.addCode(this.makeJumpIfFalse(labelEnd));\n        this.labelContinue = labelInc;\n        this.labelBreak = labelEnd;\n        // ループ内のブロック内容を得る\n        this.convGenLoop(node.block); // block\n        this.addCode(labelInc);\n        this.addCodeStr(`${sore} = ++${word};`);\n        this.addCode(this.makeJump(labelCheck));\n        this.addCode(labelEnd);\n        this.addCodeStr(`delete ${varI};delete ${varTo};//繰返:掃除`);\n        this.flagLoop = false;\n        return '';\n    }\n    convForeach(node) {\n        this.flagLoop = true;\n        // 対象を用意する\n        let taisyo = '__v0[\"対象\"]';\n        const taisyoKey = '__v0[\"対象キー\"]';\n        if (node.name) {\n            taisyo = this.varname(node.name.value);\n            this.varsSet.names.add(node.name.value);\n        }\n        // 反復対象を調べる\n        const target = node.target;\n        if (target === null) {\n            throw NakoSyntaxError.fromNode('『反復』の対象がありません。', node);\n        }\n        const sore = this.varname('それ');\n        const targetArray = `sys.__tmp__target${this.loopId++}`;\n        const targetKeys = `sys.__tmp__keys${this.loopId++}`;\n        const loopVar = `sys.__tmp__i${this.loopId++}`;\n        const loopCount = `sys.__tmp__count${this.loopId++}`;\n        // 反復対象を評価\n        this._convGen(node.target, true);\n        // どのように反復するか判定\n        const initCode = '// 反復: 初期化\\n' +\n            `${targetArray} = sys.__stack.pop();\\n` +\n            `${loopVar} = 0;\\n` +\n            // 文字列や数値なら反復できるように配列に入れる\n            `if (typeof(${targetArray}) == 'string' || typeof(${targetArray}) == 'number') { ${targetArray} = [${targetArray}]; }\\n` +\n            // Objectならキー一覧を得る\n            `if (${targetArray} instanceof Array) { ${loopCount} = ${targetArray}.length; }\\n` +\n            'else { // キーの一覧を得る\\n' +\n            `  ${targetKeys} = Object.keys(${targetArray}); \\n` +\n            '  // hasOwnPropertyがfalseならばkeyを消す処理\\n' +\n            `  ${targetKeys} = ${targetKeys}.filter((key)=>{ return ${targetArray}.hasOwnProperty(key) })\\n` +\n            `  ${loopCount} = ${targetKeys}.length;\\n` +\n            '}\\n';\n        this.addCodeStr(initCode);\n        const labelCheck = this.makeLabel('反復:条件確認');\n        const labelInc = this.makeLabel('反復:加算');\n        const labelEnd = this.makeLabel('反復:ここまで');\n        this.labelBreak = labelEnd;\n        this.labelContinue = labelInc;\n        this.addCode(labelCheck);\n        const setTarget = `if (${targetArray} instanceof Array) {\\n` +\n            // eslint-disable-next-line no-irregular-whitespace\n            `  ${taisyo} = ${sore} = ${targetArray}[${loopVar}];　${taisyoKey} = ${loopVar};\\n` +\n            '} else {\\n' +\n            `  ${taisyoKey} = ${targetKeys}[${loopVar}]; ${taisyo} = ${sore} = ${targetArray}[${taisyoKey}];\\n` +\n            '}\\n';\n        this.addCodeStr(`${setTarget}\\nsys.__stack.push(${loopVar} < ${loopCount});`);\n        this.addCode(this.makeJumpIfFalse(labelEnd));\n        // 反復ブロックを定義\n        this.convGenLoop(node.block); // block\n        // 加算\n        this.addCode(labelInc);\n        this.addCodeStr(`${loopVar}++`);\n        this.addCode(this.makeJump(labelCheck));\n        this.addCode(labelEnd);\n        this.flagLoop = false;\n        return '';\n    }\n    convWhile(node) {\n        this.flagLoop = true;\n        const labelBegin = this.makeLabel('間:ここから');\n        const labelEnd = this.makeLabel('間:ここまで');\n        this.labelContinue = labelBegin;\n        this.labelBreak = labelEnd;\n        this.addCode(labelBegin);\n        // 条件をスタックに\n        this._convGen(node.cond, true);\n        this.addCode(this.makeJumpIfFalse(labelEnd));\n        // ブロックを追加\n        this.convGenLoop(node.block);\n        this.addCode(this.makeJump(labelBegin));\n        this.addCode(labelEnd);\n        this.flagLoop = false;\n        return '';\n    }\n    /**\n     * @param {Ast} _node\n     * @param {boolean} _isExpression\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    convSpeedMode(_node, _isExpression) {\n        return '';\n    }\n    /**\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     */\n    convPerformanceMonitor(node, isExpression) {\n        const prev = { ...this.performanceMonitor };\n        if (node.options['ユーザ関数']) {\n            this.performanceMonitor.userFunction++;\n        }\n        if (node.options['システム関数本体']) {\n            this.performanceMonitor.systemFunctionBody++;\n        }\n        if (node.options['システム関数']) {\n            this.performanceMonitor.systemFunction++;\n        }\n        this._convGen(node.block, isExpression);\n        this.performanceMonitor = prev;\n    }\n    convSwitch(node) {\n        // 値をPUSH\n        this._convGen(node.value, true);\n        const varValue = `sys.__tmp__i${this.loopId++}`;\n        this.addCodeStr(`${varValue} = sys.__stack.pop()`);\n        const labelEnd = this.makeLabel('条件分岐:ここまで');\n        const cases = node.cases;\n        for (let i = 0; i < cases.length; i++) {\n            const cvalue = cases[i][0];\n            if (cvalue.type === '違えば') {\n                this.convGenLoop(cases[i][1]);\n            }\n            else {\n                const nextLabel = this.makeLabel('条件分岐:次');\n                this._convGen(cvalue, true);\n                this.addCodeStr(`sys.__stack.push(sys.__stack.pop() == ${varValue})`);\n                this.addCode(this.makeJumpIfFalse(nextLabel));\n                this.convGenLoop(cases[i][1]);\n                this.addCode(this.makeJump(labelEnd));\n                this.addCode(nextLabel);\n            }\n        }\n        this.addCode(labelEnd);\n        this.addCodeStr(`delete ${varValue}//条件分岐:掃除`);\n        return '';\n    }\n    convFuncGetArgsCalcType(funcName, func, node) {\n        const opts = {};\n        for (let i = 0; i < node.args.length; i++) {\n            const arg = node.args[i];\n            if (i === 0 && arg === null) {\n                this.addCodeStr('sys.__stack.push(sys.__vars[\\'それ\\'])');\n                opts.sore = true;\n            }\n            else {\n                // 関数の引数を評価\n                this._convGen(arg, true);\n            }\n        }\n        return opts;\n    }\n    getPluginList() {\n        const r = [];\n        for (const name in this.__self.__module) {\n            r.push(name);\n        }\n        return r;\n    }\n    /**\n     * 関数の呼び出し\n     * @param {Ast} node\n     * @param {boolean} isExpression\n     * @returns string コード\n     */\n    convFunc(node, isExpression) {\n        let isJSFunc = false;\n        let isMumeiFunc = false;\n        const funcName = NakoGen.getFuncName(node.name);\n        const res = this.findVar(funcName);\n        if (res === null) {\n            throw NakoSyntaxError.fromNode(`関数『${funcName}』が見当たりません。有効プラグイン=[` + this.getPluginList().join(', ') + ']', node);\n        }\n        let func;\n        if (res.i === 0) { // plugin function\n            func = this.__self.getFunc(funcName);\n            if (func.type !== 'func') {\n                throw NakoSyntaxError.fromNode(`『${funcName}』は関数ではありません。`, node);\n            }\n            isJSFunc = true;\n        }\n        else {\n            func = this.nakoFuncList[funcName];\n            // 無名関数の可能性\n            if (func === undefined) {\n                isMumeiFunc = true;\n                func = { return_none: false };\n            }\n        }\n        // 関数の参照渡しか？\n        if (node.type === 'func_pointer') {\n            return res.js;\n        }\n        // 関数の参照渡しでない場合\n        // 関数定義より助詞を一つずつ調べる\n        const argsOpts = this.convFuncGetArgsCalcType(funcName, func, node);\n        // function\n        this.usedFuncSet.add(funcName);\n        let funcBegin = '';\n        let funcEnd = '';\n        // setter?\n        if (node.setter) {\n            funcBegin += ';__self.isSetter = true;\\n';\n            funcEnd += ';__self.isSetter = false;\\n';\n        }\n        // 変数「それ」が補完されていることをヒントとして出力\n        if (argsOpts.sore) {\n            funcBegin += '/*[sore]*/';\n        }\n        // 引数をスタックに積む\n        const arcCount = node.args.length;\n        // 必要な引数分だけスタックから下ろして呼び出す\n        let code = '';\n        if (isJSFunc) {\n            code += funcBegin;\n            code += `const args = sys.__stack.splice(sys.__stack.length - ${arcCount}, ${arcCount});\\n`;\n            // code += `console.log(\"call:${funcName}\", args, 'sys');\\n`\n            code += 'args.push(sys);\\n';\n            code += `const ret = ${res.js}.apply(sys, args);\\n`;\n            if (!func.return_none) {\n                code += 'sys.__vars[\\'それ\\'] = ret;\\n';\n                if (isExpression) {\n                    code += 'sys.__stack.push(ret);\\n';\n                }\n            }\n            code += funcEnd;\n            this.addCodeStr(code);\n        }\n        else {\n            if (isMumeiFunc) {\n                this.addCode(new NakoCode(NakoCodeCallObj, funcName));\n            }\n            else {\n                this.addCode(new NakoCode(NakoCodeCall, funcName));\n            }\n            if (!isExpression) {\n                this.addCodeStr('sys.__stack.pop();// 戻り値を利用しない関数呼出');\n            }\n        }\n    }\n    convRenbun(node) {\n        this._convGen(node.left, false);\n        this._convGen(node.right, true);\n    }\n    convOp(node) {\n        const OP_TBL = {\n            '&': '+\"\"+',\n            eq: '==',\n            noteq: '!=',\n            '===': '===',\n            '!==': '!==',\n            gt: '>',\n            lt: '<',\n            gteq: '>=',\n            lteq: '<=',\n            and: '&&',\n            or: '||',\n            shift_l: '<<',\n            shift_r: '>>',\n            shift_r0: '>>>',\n            '÷': '/'\n        };\n        const op = node.operator; // 演算子\n        // 値はスタックに載せられる\n        // left\n        this._convGen(node.left, true);\n        // right\n        this._convGen(node.right, true);\n        // calc\n        let code = 'const rv = sys.__stack.pop();\\n' +\n            'const lv = sys.__stack.pop();\\n';\n        if (op === '^') {\n            code += 'const v = (Math.pow(lv, rv))\\n';\n        }\n        else {\n            const op2 = OP_TBL[op] || op;\n            code += `const v = ((lv) ${op2} (rv));\\n`;\n        }\n        // code += `if (isNaN(v) && '${op}' != '&') { console.log('ERROR:${op}', lv, rv) }\\n`\n        code += `sys.__stack.push(v); //op:${op}\\n`;\n        this.addCodeStr(code);\n    }\n    convLet(node) {\n        let code = '';\n        // 値をスタックに載せる\n        if (node.value === null) {\n            // 値が省略されたら「それ」を載せる\n            this.addCodeStr('sys.__stack.push(sys.__vars[\\'それ\\'])');\n        }\n        else {\n            // 値がある場合\n            this._convGen(node.value, true);\n        }\n        // 変数名\n        const name = node.name.value;\n        const res = this.findVar(name);\n        if (res === null) {\n            this.varsSet.names.add(name);\n            code = `${this.varname(name)}=sys.__stack.pop();`;\n        }\n        else {\n            // 定数ならエラーを出す\n            if (this.varslistSet[res.i].readonly.has(name)) {\n                throw NakoSyntaxError.fromNode(`定数『${name}』は既に定義済みなので、値を代入することはできません。`, node);\n            }\n            code = `${res.js}=sys.__stack.pop();`;\n        }\n        this.addCodeStr(code + '//let');\n    }\n    convDefLocalVar(node) {\n        if (node.value === null) {\n            this.addCodeStr('sys.__stack.push(null)');\n        }\n        else {\n            this._convGen(node.value, true);\n        }\n        const name = node.name.value;\n        const vtype = node.vartype; // 変数 or 定数\n        // 二重定義？\n        if (this.varsSet.names.has(name)) {\n            throw NakoSyntaxError.fromNode(`${vtype}『${name}』の二重定義はできません。`, node);\n        }\n        this.varsSet.names.add(name);\n        // 定数?\n        if (vtype === '定数') {\n            this.varsSet.readonly.add(name);\n        }\n        this.addCodeStr(`${this.varname(name)}=sys.__stack.pop()`);\n        return '';\n    }\n    // #563 複数変数への代入\n    convDefLocalVarlist(node) {\n        const vtype = node.vartype; // 変数 or 定数\n        if (node.value === null) {\n            this.addCodeStr('sys.__stack.push(null)');\n        }\n        else {\n            this._convGen(node.value, true);\n        }\n        const varI = `sys.__tmp_i${this.loopId}`;\n        this.loopId++;\n        this.addCodeStr(`${varI}=sys.__stack.pop();if (!(${varI} instanceof Array)) { ${varI}=[${varI}] }`);\n        for (const nameObj of node.names) {\n            const name = nameObj.value;\n            // 二重定義？\n            if (this.varsSet.names.has(name)) {\n                throw NakoSyntaxError.fromNode(`${vtype}『${name}』の二重定義はできません。`, node);\n            }\n            //\n            this.varsSet.names.add(name);\n            if (vtype === '定数') {\n                this.varsSet.readonly.add(name);\n            }\n            const vname = this.varname(name);\n            this.addCodeStr(`${vname}=${varI}.pop()`);\n        }\n        this.addCodeStr(`delete ${varI}//複数代入:掃除`);\n        return '';\n    }\n    convString(node) {\n        let value = '' + node.value;\n        const mode = node.mode;\n        value = value.replace(/\\\\/g, '\\\\\\\\');\n        value = value.replace(/\"/g, '\\\\\"');\n        value = value.replace(/\\r/g, '\\\\r');\n        value = value.replace(/\\n/g, '\\\\n');\n        if (mode === 'ex') {\n            throw new Error('[システムエラー] ジェネレーターでの文字列の展開はサポートしていません');\n        }\n        this.addCodeStr(`sys.__stack.push(\"${value}\")//string`);\n        return '\"' + value + '\"';\n    }\n    convTryExcept(node) {\n        const labelExcept = this.makeLabel('エラー監視:ならば');\n        const labelEnd = this.makeLabel('エラー監視:ここまで');\n        // エラーをひっかけるように設定\n        this.addCode(new NakoCode(NakoCodeTry, labelExcept.value));\n        this._convGen(node.block, false);\n        this.addCode(this.makeJump(labelEnd));\n        this.addCode(labelExcept);\n        this._convGen(node.errBlock, false);\n        this.addCode(labelEnd);\n    }\n}\n// ブラウザに登録する\nif (typeof (navigator) === 'object' && typeof (navigator.nako3) === 'object') {\n    // Webブラウザの場合\n    const nako3 = navigator.nako3;\n    if (nako3.addCodeGenerator) {\n        nako3.addCodeGenerator('非同期モード', NakoGenASync);\n    }\n}\n","/**\n * 助詞の一覧\n */\nexport const josiList = [\n    'について', 'くらい', 'なのか', 'までを', 'までの', 'による',\n    'とは', 'から', 'まで', 'だけ', 'より', 'ほど', 'など',\n    'いて', 'えて', 'きて', 'けて', 'して', 'って', 'にて', 'みて',\n    'めて', 'ねて', 'では', 'には', 'は~', 'んで', 'ずつ',\n    'は', 'を', 'に', 'へ', 'で', 'と', 'が', 'の'\n];\n// 「もし」文で使う助詞\nexport const tararebaJosiList = [\n    'でなければ', 'なければ', 'ならば', 'なら', 'たら', 'れば'\n];\n// 意味のない助詞(削除する) #936 #939 #974\nexport const removeJosiList = [\n    'こと', 'である', 'です', 'します', 'でした'\n];\n/**\n * 「もし」文で使う「たら」「れば」などの一覧をプログラムで扱いやすいようマップに変換したもの\n */\nexport const tararebaMap = {};\ntararebaJosiList.forEach(josi => {\n    josiList.push(josi);\n    tararebaMap[josi] = true;\n});\n/**\n * 意味のない助詞(削除する)をマップに変換したもの\n */\nexport const removeJosiMap = {};\nremoveJosiList.forEach(josi => {\n    josiList.push(josi);\n    removeJosiMap[josi] = true;\n});\n// 文字数の長い順に並び替え\njosiList.sort((a, b) => b.length - a.length);\n// 正規表現で助詞をマッチできるようにする\nexport const josiRE = new RegExp('^[\\\\t ]*(' + josiList.join('|') + ')');\n","/** 予約語 */\nconst reserved = {\n    '回': '回',\n    '回繰返': '回',\n    '間': '間',\n    '間繰返': '間',\n    '繰返': '繰返',\n    '増繰返': '増繰返',\n    '減繰返': '減繰返',\n    '後判定': '後判定',\n    '反復': '反復',\n    '抜': '抜ける',\n    '続': '続ける',\n    '戻': '戻る',\n    '先': '先に',\n    '次': '次に',\n    '代入': '代入',\n    '実行速度優先': '実行速度優先',\n    'パフォーマンスモニタ適用': 'パフォーマンスモニタ適用',\n    '定': '定める',\n    '逐次実行': '逐次実行',\n    '条件分岐': '条件分岐',\n    '増': '増',\n    '減': '減',\n    '変数': '変数',\n    '定数': '定数',\n    'エラー監視': 'エラー監視',\n    'エラー': 'エラー',\n    'それ': 'word',\n    'そう': 'word',\n    '関数': 'def_func',\n    'インデント構文': 'インデント構文',\n    '非同期モード': '非同期モード',\n    'DNCLモード': 'DNCLモード',\n    'モード設定': 'モード設定',\n    '取込': '取込',\n    'モジュール公開既定値': 'モジュール公開既定値'\n};\nexport default reserved;\n","import { NakoRuntimeError } from './nako_errors.mjs';\nexport default {\n    'meta': {\n        type: 'const',\n        value: {\n            pluginName: 'plugin_system',\n            pluginVersion: '3.4.5',\n            nakoRuntime: ['wnako', 'cnako', 'phpnako'],\n            nakoVersion: '^3.4.5' // 要求なでしこバージョン\n        }\n    },\n    '初期化': {\n        type: 'func',\n        josi: [],\n        pure: false,\n        fn: function (sys) {\n            // 言語バージョンを設定\n            sys.isDebug = false;\n            sys.__v0['ナデシコバージョン'] = sys.version;\n            sys.__v0['ナデシコ言語バージョン'] = sys.coreVersion;\n            sys.__namespaceList = [];\n            // なでしこの関数や変数を探して返す\n            sys.__findVar = function (nameStr, def) {\n                if (typeof nameStr === 'function') {\n                    return nameStr;\n                }\n                if (sys.__locals[nameStr]) {\n                    return sys.__locals[nameStr];\n                }\n                // 名前空間が指定されている場合\n                if (nameStr.indexOf('__') >= 0) {\n                    for (let i = 2; i >= 0; i--) {\n                        const varScope = sys.__varslist[i];\n                        if (varScope[nameStr]) {\n                            return varScope[nameStr];\n                        }\n                    }\n                    return def;\n                }\n                // 名前空間を参照して関数・変数名を解決する\n                const modList = sys.__modList ? sys.__modList : [sys.__modName];\n                for (const modName of modList) {\n                    const gname = modName + '__' + nameStr;\n                    for (let i = 2; i >= 0; i--) {\n                        const scope = sys.__varslist[i];\n                        if (scope[gname]) {\n                            return scope[gname];\n                        }\n                    }\n                }\n                return def;\n            };\n            // 文字列から関数を探す\n            sys.__findFunc = function (nameStr, parentFunc) {\n                const f = sys.__findVar(nameStr);\n                if (typeof f === 'function') {\n                    return f;\n                }\n                throw new Error(`『${parentFunc}』に実行できない関数が指定されました。`);\n            };\n            // システム関数を実行\n            sys.__exec = function (func, params) {\n                // システム命令を優先\n                const f0 = sys.__v0[func];\n                if (f0) {\n                    return f0.apply(this, params);\n                }\n                // グローバル・ローカルを探す\n                const f = sys.__findVar(func);\n                if (!f) {\n                    throw new Error('システム関数でエイリアスの指定ミス:' + func);\n                }\n                return f.apply(this, params);\n            };\n            // タイマーに関する処理(タイマーは「!クリア」で全部停止する)\n            sys.__timeout = [];\n            sys.__interval = [];\n            // 日付処理などに使う\n            const z2 = sys.__zero2 = (s) => {\n                s = '00' + s;\n                return s.substring(s.length - 2);\n            };\n            sys.__zero = (s, keta) => {\n                let zeroS = '';\n                for (let i = 0; i < keta; i++) {\n                    zeroS += '0';\n                }\n                s = zeroS + s;\n                return s.substring(s.length - keta);\n            };\n            sys.__formatDate = (t) => {\n                return t.getFullYear() + '/' + z2(t.getMonth() + 1) + '/' + z2(t.getDate());\n            };\n            sys.__formatTime = (t) => {\n                return z2(t.getHours()) + ':' + z2(t.getSeconds()) + ':' + z2(t.getMinutes());\n            };\n            sys.__formatDateTime = (t, fmt) => {\n                const dateStr = t.getFullYear() + '/' + z2(t.getMonth() + 1) + '/' + z2(t.getDate());\n                const timeStr = z2(t.getHours()) + ':' + z2(t.getMinutes()) + ':' + z2(t.getSeconds());\n                if (fmt.match(/^\\d+\\/\\d+\\/\\d+\\s+\\d+:\\d+:\\d+$/)) {\n                    return dateStr + ' ' + timeStr;\n                }\n                if (fmt.match(/^\\d+\\/\\d+\\/\\d+$/)) {\n                    return dateStr;\n                }\n                if (fmt.match(/^\\d+:\\d+:\\d+$/)) {\n                    return timeStr;\n                }\n                return dateStr + ' ' + timeStr;\n            };\n            sys.__str2date = (s) => {\n                // trim\n                s = ('' + s).replace(/(^\\s+|\\s+$)/, '');\n                // is unix time\n                if (s.match(/^(\\d+|\\d+\\.\\d+)$/)) {\n                    return new Date(parseFloat(s) * 1000);\n                }\n                // is time ?\n                if (s.match(/^\\d+:\\d+(:\\d+)?$/)) {\n                    const t = new Date();\n                    const a = (s + ':0').split(':');\n                    return new Date(t.getFullYear(), t.getMonth(), t.getDate(), parseInt(a[0]), parseInt(a[1]), parseInt(a[2]));\n                }\n                // replace splitter to '/'\n                s = s.replace(/[\\s:-]/g, '/');\n                s += '/0/0/0'; // 日付だけのときのために時間分を足す\n                const a = s.split('/');\n                return new Date(parseInt(a[0]), parseInt(a[1]) - 1, parseInt(a[2]), parseInt(a[3]), parseInt(a[4]), parseInt(a[5]));\n            };\n            // 『継続表示』のための一時変数(『表示』実行で初期化)\n            sys.__printPool = '';\n            // 暗黙の型変換で足し算を行うときに使用。bigint はそのまま、その他は number に自動変換\n            sys.__parseFloatOrBigint = (v) => {\n                return (typeof v) === 'bigint' ? v : parseFloat(v);\n            };\n            // undefinedチェック\n            sys.chk = (value, constId) => {\n                if (typeof value === 'undefined') {\n                    const cp = sys.constPools[constId];\n                    const { msgNo, msgArgs, fileNo, lineNo } = cp;\n                    let msg = sys.constPoolsTemplate[msgNo];\n                    for (const i in msgArgs) {\n                        const arg = sys.constPoolsTemplate[msgArgs[i]];\n                        msg = msg.split(`$${i}`).join(arg);\n                    }\n                    const fileStr = sys.constPoolsTemplate[fileNo];\n                    sys.logger.warn(msg, { file: fileStr, line: lineNo });\n                }\n                return value;\n            };\n        }\n    },\n    '!クリア': {\n        type: 'func',\n        josi: [],\n        pure: false,\n        fn: function (sys) {\n            if (sys.__exec) {\n                sys.__exec('全タイマー停止', [sys]);\n            }\n            if (sys.__genMode === '非同期モード') {\n                sys.__stopAsync(sys);\n            }\n            sys.__v0['表示ログ'] = '';\n        }\n    },\n    // @システム定数\n    'ナデシコバージョン': { type: 'const', value: '?' },\n    'ナデシコ言語バージョン': { type: 'const', value: '?' },\n    'ナデシコエンジン': { type: 'const', value: 'nadesi.com/v3' },\n    'ナデシコ種類': { type: 'const', value: '?' },\n    'はい': { type: 'const', value: 1 },\n    'いいえ': { type: 'const', value: 0 },\n    '真': { type: 'const', value: 1 },\n    '偽': { type: 'const', value: 0 },\n    '永遠': { type: 'const', value: 1 },\n    'オン': { type: 'const', value: 1 },\n    'オフ': { type: 'const', value: 0 },\n    '改行': { type: 'const', value: '\\n' },\n    'タブ': { type: 'const', value: '\\t' },\n    'カッコ': { type: 'const', value: '「' },\n    'カッコ閉': { type: 'const', value: '」' },\n    '波カッコ': { type: 'const', value: '{' },\n    '波カッコ閉': { type: 'const', value: '}' },\n    'OK': { type: 'const', value: true },\n    'NG': { type: 'const', value: false },\n    'キャンセル': { type: 'const', value: 0 },\n    'TRUE': { type: 'const', value: true },\n    'FALSE': { type: 'const', value: false },\n    'true': { type: 'const', value: true },\n    'false': { type: 'const', value: false },\n    'PI': { type: 'const', value: Math.PI },\n    '空': { type: 'const', value: '' },\n    'NULL': { type: 'const', value: null },\n    'undefined': { type: 'const', value: undefined },\n    '未定義': { type: 'const', value: undefined },\n    'エラーメッセージ': { type: 'const', value: '' },\n    '対象': { type: 'const', value: '' },\n    '対象キー': { type: 'const', value: '' },\n    '回数': { type: 'const', value: '' },\n    'CR': { type: 'const', value: '\\r' },\n    'LF': { type: 'const', value: '\\n' },\n    '非数': { type: 'const', value: NaN },\n    '無限大': { type: 'const', value: Infinity },\n    '空配列': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return [];\n        }\n    },\n    '空辞書': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return {};\n        }\n    },\n    '空ハッシュ': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return {};\n        }\n    },\n    '空オブジェクト': {\n        type: 'func',\n        josi: [],\n        pure: false,\n        fn: function (sys) {\n            return sys.__exec('空ハッシュ', [sys]);\n        }\n    },\n    // @標準出力\n    '表示': {\n        type: 'func',\n        josi: [['を', 'と']],\n        pure: true,\n        fn: function (s, sys) {\n            // 継続表示の一時プールを出力\n            s = sys.__printPool + s;\n            sys.__printPool = '';\n            //\n            sys.__varslist[0]['表示ログ'] += (s + '\\n');\n            sys.logger.send('stdout', s + '');\n        },\n        return_none: true\n    },\n    '継続表示': {\n        type: 'func',\n        josi: [['を', 'と']],\n        pure: true,\n        fn: function (s, sys) {\n            sys.__printPool += s;\n        },\n        return_none: true\n    },\n    '連続表示': {\n        type: 'func',\n        josi: [['と', 'を']],\n        isVariableJosi: true,\n        pure: true,\n        fn: function (...a) {\n            const sys = a.pop();\n            const v = a.join('');\n            sys.__exec('表示', [v, sys]);\n        },\n        return_none: true\n    },\n    '連続無改行表示': {\n        type: 'func',\n        josi: [['と', 'を']],\n        isVariableJosi: true,\n        pure: true,\n        fn: function (...a) {\n            const sys = a.pop();\n            const v = a.join('');\n            sys.__exec('継続表示', [v, sys]);\n        },\n        return_none: true\n    },\n    '表示ログ': { type: 'const', value: '' },\n    '表示ログクリア': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            sys.__varslist[0]['表示ログ'] = '';\n        },\n        return_none: true\n    },\n    '言': {\n        type: 'func',\n        josi: [['を', 'と']],\n        pure: true,\n        fn: function (s, sys) {\n            sys.logger.send('stdout', s + '');\n        },\n        return_none: true\n    },\n    'コンソール表示': {\n        type: 'func',\n        josi: [['を', 'と']],\n        pure: true,\n        fn: function (s) {\n            console.log(s);\n        },\n        return_none: true\n    },\n    // @四則演算\n    '足': {\n        type: 'func',\n        josi: [['に', 'と'], ['を']],\n        isVariableJosi: false,\n        pure: true,\n        fn: function (a, b) {\n            return a + b;\n        }\n    },\n    '引': {\n        type: 'func',\n        josi: [['から'], ['を']],\n        pure: true,\n        fn: function (a, b) {\n            return a - b;\n        }\n    },\n    '掛': {\n        type: 'func',\n        josi: [['に', 'と'], ['を']],\n        pure: true,\n        fn: function (a, b) {\n            // 数値の掛け算\n            if (typeof a === 'number') {\n                return a * b;\n            }\n            // 文字列の掛け算(文字列の繰り返し)\n            if (typeof a === 'string') {\n                let s = '';\n                for (let i = 0; i < parseInt(b); i++) {\n                    s += a;\n                }\n                return s;\n            }\n            // 配列の繰り返し\n            if (a instanceof Array) {\n                const aa = [];\n                for (let i = 0; i < parseInt(b); i++) {\n                    aa.push(...a);\n                }\n                return aa;\n            }\n            return a * b;\n        }\n    },\n    '倍': {\n        type: 'func',\n        josi: [['の', 'を'], ['']],\n        pure: true,\n        fn: function (a, b) {\n            return a * b;\n        }\n    },\n    '割': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            return a / b;\n        }\n    },\n    '割余': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            return a % b;\n        }\n    },\n    '偶数': {\n        type: 'func',\n        josi: [['が']],\n        pure: true,\n        fn: function (a) {\n            return (parseInt(a) % 2 === 0);\n        }\n    },\n    '奇数': {\n        type: 'func',\n        josi: [['が']],\n        pure: true,\n        fn: function (a) {\n            return (parseInt(a) % 2 === 1);\n        }\n    },\n    '二乗': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            return a * a;\n        }\n    },\n    'べき乗': {\n        type: 'func',\n        josi: [['の'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return Math.pow(a, b);\n        }\n    },\n    '以上': {\n        type: 'func',\n        josi: [['が'], ['']],\n        pure: true,\n        fn: function (a, b) {\n            return a >= b;\n        }\n    },\n    '以下': {\n        type: 'func',\n        josi: [['が'], ['']],\n        pure: true,\n        fn: function (a, b) {\n            return a <= b;\n        }\n    },\n    '未満': {\n        type: 'func',\n        josi: [['が'], ['']],\n        pure: true,\n        fn: function (a, b) {\n            return a < b;\n        }\n    },\n    '超': {\n        type: 'func',\n        josi: [['が'], ['']],\n        pure: true,\n        fn: function (a, b) {\n            return a > b;\n        }\n    },\n    '等': {\n        type: 'func',\n        josi: [['が'], ['と']],\n        pure: true,\n        fn: function (a, b) {\n            return a === b;\n        }\n    },\n    '等無': {\n        type: 'func',\n        josi: [['が'], ['と']],\n        pure: true,\n        fn: function (a, b) {\n            return a !== b;\n        }\n    },\n    '一致': {\n        type: 'func',\n        josi: [['が'], ['と']],\n        pure: true,\n        fn: function (a, b) {\n            // オブジェクトの場合、JSONに変換して比較\n            if (typeof (a) === 'object') {\n                const jsonA = JSON.stringify(a);\n                const jsonB = JSON.stringify(b);\n                return jsonA === jsonB;\n            }\n            return a === b;\n        }\n    },\n    '不一致': {\n        type: 'func',\n        josi: [['が'], ['と']],\n        pure: true,\n        fn: function (a, b) {\n            // オブジェクトの場合、JSONに変換して比較\n            if (typeof (a) === 'object') {\n                const jsonA = JSON.stringify(a);\n                const jsonB = JSON.stringify(b);\n                return jsonA !== jsonB;\n            }\n            return a !== b;\n        }\n    },\n    '範囲内': {\n        type: 'func',\n        josi: [['が'], ['から'], ['の', 'までの']],\n        pure: true,\n        fn: function (v, a, b) {\n            return (a <= v) && (v <= b);\n        }\n    },\n    '連続加算': {\n        type: 'func',\n        josi: [['を'], ['に', 'と']],\n        isVariableJosi: true,\n        pure: true,\n        fn: function (b, ...a) {\n            a.pop(); // 必ず末尾に sys があるので、末尾のシステム変数を除外\n            a.push(b);\n            return a.reduce((p, c) => p + c);\n        }\n    },\n    // @敬語\n    'ください': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__reisetu) {\n                sys.__reisetu = 0;\n            }\n            sys.__reisetu++;\n        },\n        return_none: true\n    },\n    'お願': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__reisetu) {\n                sys.__reisetu = 0;\n            }\n            sys.__reisetu++;\n        },\n        return_none: true\n    },\n    'です': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__reisetu) {\n                sys.__reisetu = 0;\n            }\n            sys.__reisetu++;\n        },\n        return_none: true\n    },\n    '拝啓': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            sys.__reisetu = 0;\n        },\n        return_none: true\n    },\n    '敬具': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            sys.__reisetu += 100; // bonus point\n        },\n        return_none: true\n    },\n    '礼節レベル取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__reisetu) {\n                sys.__reisetu = 0;\n            }\n            return sys.__reisetu;\n        }\n    },\n    // @特殊命令\n    'JS実行': {\n        type: 'func',\n        josi: [['を', 'で']],\n        pure: true,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        fn: function (src, sys) {\n            // [メモ] ↑のsys は eval の中でも有効なので消さない!!\n            // https://github.com/kujirahand/nadesiko3/issues/1237\n            return eval(src); // eslint-disable-line\n        }\n    },\n    'JSオブジェクト取得': {\n        type: 'func',\n        josi: [['の']],\n        pure: false,\n        fn: function (name, sys) {\n            return sys.__findVar(name, null);\n        }\n    },\n    'JS関数実行': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        fn: function (name, args) {\n            // nameが文字列ならevalして関数を得る\n            // eslint-disable-next-line no-eval\n            if (typeof name === 'string') {\n                name = eval(name);\n            }\n            if (typeof name !== 'function') {\n                throw new Error('JS関数取得で実行できません。');\n            }\n            // argsがArrayでなければArrayに変換する\n            if (!(args instanceof Array)) {\n                args = [args];\n            }\n            // 実行\n            // eslint-disable-next-line prefer-spread\n            return name.apply(null, args);\n        }\n    },\n    'ASYNC': {\n        type: 'func',\n        josi: [],\n        asyncFn: true,\n        fn: async function () {\n            // empty\n        },\n        return_none: true\n    },\n    'AWAIT実行': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        asyncFn: true,\n        fn: async function (f, args, sys) {\n            // nameが文字列ならevalして関数を得る\n            if (typeof f === 'string') {\n                f = sys.__findFunc(f, 'AWAIT実行');\n            }\n            if (!(f instanceof Function)) {\n                throw new Error('『AWAIT実行』の第一引数はなでしこ関数名かFunction型で指定してください。');\n            }\n            // 実行\n            return await f(...args);\n        }\n    },\n    'JSメソッド実行': {\n        type: 'func',\n        josi: [['の'], ['を'], ['で']],\n        fn: function (obj, m, args) {\n            // objが文字列ならevalして関数を得る\n            // eslint-disable-next-line no-eval\n            if (typeof obj === 'string') {\n                obj = eval(obj);\n            }\n            if (typeof obj !== 'object') {\n                throw new Error('JSオブジェクトを取得できませんでした。');\n            }\n            // method を求める\n            if (typeof m !== 'function') {\n                m = obj[m];\n            }\n            // argsがArrayでなければArrayに変換する\n            if (!(args instanceof Array)) {\n                args = [args];\n            }\n            // 実行\n            return m.apply(obj, args);\n        }\n    },\n    'ナデシコ': {\n        type: 'func',\n        josi: [['を', 'で']],\n        pure: false,\n        fn: function (code, sys) {\n            if (sys.__genMode === '非同期モード') {\n                throw new Error('非同期モードでは「ナデシコ」は利用できません。');\n            }\n            sys.__varslist[0]['表示ログ'] = '';\n            sys.__self.runEx(code, sys.__modName, { resetEnv: false, resetLog: true });\n            const out = sys.__varslist[0]['表示ログ'] + '';\n            if (out) {\n                sys.logger.trace(out);\n            }\n            return out;\n        }\n    },\n    'ナデシコ続': {\n        type: 'func',\n        josi: [['を', 'で']],\n        fn: function (code, sys) {\n            if (sys.__genMode === '非同期モード') {\n                throw new Error('非同期モードでは「ナデシコ続」は利用できません。');\n            }\n            sys.__self.runEx(code, sys.__modName, { resetEnv: false, resetAll: false });\n            const out = sys.__varslist[0]['表示ログ'] + '';\n            if (out) {\n                sys.logger.trace(out);\n            }\n            return out;\n        }\n    },\n    '実行': {\n        type: 'func',\n        josi: [['を', 'に', 'で']],\n        pure: false,\n        fn: function (f, sys) {\n            // #938 の規則に従って処理\n            // 引数が関数なら実行\n            if (typeof f === 'function') {\n                return f(sys);\n            }\n            // 文字列なら関数に変換できるか判定して実行\n            if (typeof f === 'string') {\n                const tf = sys.__findFunc(f, '実行');\n                if (typeof tf === 'function') {\n                    return tf(sys);\n                }\n            }\n            // それ以外ならそのまま値を返す\n            return f;\n        }\n    },\n    '実行時間計測': {\n        type: 'func',\n        josi: [['の']],\n        pure: false,\n        fn: function (f, sys) {\n            if (typeof f === 'string') {\n                f = sys.__findFunc(f, '実行時間計測');\n            }\n            //\n            if (performance && performance.now) {\n                const t1 = performance.now();\n                f(sys);\n                const t2 = performance.now();\n                return (t2 - t1);\n            }\n            else {\n                const t1 = Date.now();\n                f(sys);\n                const t2 = Date.now();\n                return (t2 - t1);\n            }\n        }\n    },\n    '終': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // デバッグモードでなければ例外を投げることでプログラムを終了させる\n            sys.__v0.forceClose = true;\n            if (!sys.__v0.useDebug) {\n                throw new Error('__終わる__');\n            }\n        }\n    },\n    // @型変換\n    '変数型確認': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return (typeof v);\n        }\n    },\n    'TYPEOF': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return (typeof v);\n        }\n    },\n    '文字列変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return String(v);\n        }\n    },\n    'TOSTR': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return String(v);\n        }\n    },\n    '整数変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return parseInt(v);\n        }\n    },\n    'TOINT': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return parseInt(v);\n        }\n    },\n    '実数変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return parseFloat(v);\n        }\n    },\n    'TOFLOAT': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return parseFloat(v);\n        }\n    },\n    'INT': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return parseInt(v);\n        }\n    },\n    'FLOAT': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return parseFloat(v);\n        }\n    },\n    'NAN判定': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return isNaN(v);\n        }\n    },\n    '非数判定': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            // https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN\n            return Number.isNaN(v);\n        }\n    },\n    'HEX': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return parseInt(a).toString(16);\n        }\n    },\n    '進数変換': {\n        type: 'func',\n        josi: [['を', 'の'], ['']],\n        pure: true,\n        fn: function (v, n) {\n            return parseInt(v).toString(n);\n        }\n    },\n    '二進': {\n        type: 'func',\n        josi: [['を', 'の', 'から']],\n        pure: true,\n        fn: function (v) {\n            return parseInt(v).toString(2);\n        }\n    },\n    '二進表示': {\n        type: 'func',\n        josi: [['を', 'の', 'から']],\n        pure: true,\n        fn: function (v, sys) {\n            const s = parseInt(v).toString(2);\n            sys.__exec('表示', [s, sys]);\n        }\n    },\n    'RGB': {\n        type: 'func',\n        josi: [['と'], ['の'], ['で']],\n        pure: true,\n        fn: function (r, g, b) {\n            const z2 = (v) => {\n                const v2 = '00' + (parseInt('' + v).toString(16));\n                return v2.substring(v2.length - 2, v2.length);\n            };\n            return '#' + z2(r) + z2(g) + z2(b);\n        }\n    },\n    // @論理演算\n    '論理OR': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return (a || b);\n        }\n    },\n    '論理AND': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return (a && b);\n        }\n    },\n    '論理NOT': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return (!v) ? 1 : 0;\n        }\n    },\n    // @ビット演算\n    'OR': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return (a | b);\n        }\n    },\n    'AND': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return (a & b);\n        }\n    },\n    'XOR': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return (a ^ b);\n        }\n    },\n    'NOT': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return (~v);\n        }\n    },\n    'SHIFT_L': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            return (a << b);\n        }\n    },\n    'SHIFT_R': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            return (a >> b);\n        }\n    },\n    'SHIFT_UR': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            return (a >>> b);\n        }\n    },\n    // @文字列処理\n    '文字数': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            if (!Array.from) {\n                return String(v).length;\n            }\n            return Array.from(v).length;\n        }\n    },\n    '何文字目': {\n        type: 'func',\n        josi: [['で', 'の'], ['が']],\n        pure: true,\n        fn: function (s, a) {\n            return String(s).indexOf(a) + 1;\n        }\n    },\n    'CHR': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            if (!String.fromCodePoint) {\n                return String.fromCharCode(v);\n            }\n            return String.fromCodePoint(v);\n        }\n    },\n    'ASC': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            if (!String.prototype.codePointAt) {\n                return String(v).charCodeAt(0);\n            }\n            return String(v).codePointAt(0);\n        }\n    },\n    '文字挿入': {\n        type: 'func',\n        josi: [['で', 'の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (s, i, a) {\n            if (i <= 0) {\n                i = 1;\n            }\n            const ss = String(s);\n            const mae = ss.substring(0, i - 1);\n            const usi = ss.substring(i - 1);\n            return mae + a + usi;\n        }\n    },\n    '文字検索': {\n        type: 'func',\n        josi: [['で', 'の'], ['から'], ['を']],\n        pure: true,\n        fn: function (s, a, b) {\n            let str = String(s);\n            str = str.substring(a);\n            const res = str.indexOf(b);\n            if (res === -1) {\n                return 0;\n            }\n            return res + 1 + a;\n        }\n    },\n    '追加': {\n        type: 'func',\n        josi: [['で', 'に', 'へ'], ['を']],\n        pure: true,\n        fn: function (s, a) {\n            if (s instanceof Array) {\n                s.push(a);\n                return s;\n            }\n            return String(s) + String(a);\n        }\n    },\n    '一行追加': {\n        type: 'func',\n        josi: [['で', 'に', 'へ'], ['を']],\n        pure: true,\n        fn: function (s, a) {\n            if (s instanceof Array) {\n                s.push(a);\n                return s;\n            }\n            return String(s) + String(a) + '\\n';\n        }\n    },\n    '文字列分解': {\n        type: 'func',\n        josi: [['を', 'の', 'で']],\n        pure: true,\n        fn: function (v) {\n            if (!Array.from) {\n                return String(v).split('');\n            }\n            return Array.from(v);\n        }\n    },\n    'リフレイン': {\n        type: 'func',\n        josi: [['を', 'の'], ['で']],\n        pure: true,\n        fn: function (v, cnt) {\n            let s = '';\n            for (let i = 0; i < cnt; i++) {\n                s += String(v);\n            }\n            return s;\n        }\n    },\n    '出現回数': {\n        type: 'func',\n        josi: [['で'], ['の']],\n        pure: true,\n        fn: function (s, a) {\n            s = '' + s;\n            a = '' + a;\n            return s.split(a).length - 1;\n        }\n    },\n    'MID': {\n        type: 'func',\n        josi: [['で', 'の'], ['から'], ['を']],\n        pure: true,\n        fn: function (s, a, cnt) {\n            cnt = cnt || 1;\n            return (String(s).substring(a - 1, a + cnt - 1));\n        }\n    },\n    '文字抜出': {\n        type: 'func',\n        josi: [['で', 'の'], ['から'], ['を', '']],\n        pure: true,\n        fn: function (s, a, cnt) {\n            cnt = cnt || 1;\n            return (String(s).substring(a - 1, a + cnt - 1));\n        }\n    },\n    'LEFT': {\n        type: 'func',\n        josi: [['の', 'で'], ['だけ']],\n        pure: true,\n        fn: function (s, cnt) {\n            return (String(s).substring(0, cnt));\n        }\n    },\n    '文字左部分': {\n        type: 'func',\n        josi: [['の', 'で'], ['だけ', '']],\n        pure: true,\n        fn: function (s, cnt) {\n            return (String(s).substring(0, cnt));\n        }\n    },\n    'RIGHT': {\n        type: 'func',\n        josi: [['の', 'で'], ['だけ']],\n        pure: true,\n        fn: function (s, cnt) {\n            s = '' + s;\n            return (s.substring(s.length - cnt, s.length));\n        }\n    },\n    '文字右部分': {\n        type: 'func',\n        josi: [['の', 'で'], ['だけ', '']],\n        pure: true,\n        fn: function (s, cnt) {\n            s = '' + s;\n            return (s.substring(s.length - cnt, s.length));\n        }\n    },\n    '区切': {\n        type: 'func',\n        josi: [['の', 'を'], ['で']],\n        pure: true,\n        fn: function (s, a) {\n            return ('' + s).split('' + a);\n        }\n    },\n    '文字列分割': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (s, a) {\n            s = '' + s;\n            a = '' + a;\n            const i = s.indexOf(a);\n            if (i < 0) {\n                return [s];\n            }\n            return [s.substring(0, i), s.substring(i + a.length)];\n        }\n    },\n    '切取': {\n        type: 'func',\n        josi: [['から', 'の'], ['まで', 'を']],\n        pure: true,\n        fn: function (s, a, sys) {\n            s = String(s);\n            const i = s.indexOf(a);\n            if (i < 0) {\n                sys.__v0['対象'] = '';\n                return s;\n            }\n            sys.__v0['対象'] = s.substring(i + a.length);\n            return s.substring(0, i);\n        }\n    },\n    '文字削除': {\n        type: 'func',\n        josi: [['の'], ['から'], ['だけ', 'を', '']],\n        pure: true,\n        fn: function (s, a, b) {\n            s = '' + s;\n            const mae = s.substring(0, a - 1);\n            const usi = s.substring((a - 1 + b));\n            return mae + usi;\n        }\n    },\n    // @置換・トリム\n    '置換': {\n        type: 'func',\n        josi: [['の', 'で'], ['を', 'から'], ['に', 'へ']],\n        pure: true,\n        fn: function (s, a, b) {\n            return String(s).split(a).join(b);\n        }\n    },\n    '単置換': {\n        type: 'func',\n        josi: [['の', 'で'], ['を'], ['に', 'へ']],\n        pure: true,\n        fn: function (s, a, b) {\n            // replaceは最初の一度だけ置換する\n            return String(s).replace(a, b);\n        }\n    },\n    'トリム': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            s = String(s).replace(/^\\s+/, '').replace(/\\s+$/, '');\n            return s;\n        }\n    },\n    '空白除去': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            s = String(s).replace(/^\\s+/, '').replace(/\\s+$/, '');\n            return s;\n        }\n    },\n    // @文字変換\n    '大文字変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).toUpperCase();\n        }\n    },\n    '小文字変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).toLowerCase();\n        }\n    },\n    '平仮名変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            const kanaToHira = (str) => {\n                return String(str).replace(/[\\u30a1-\\u30f6]/g, function (m) {\n                    const chr = m.charCodeAt(0) - 0x60;\n                    return String.fromCharCode(chr);\n                });\n            };\n            return kanaToHira('' + s);\n        }\n    },\n    'カタカナ変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            const hiraToKana = (str) => {\n                return String(str).replace(/[\\u3041-\\u3096]/g, function (m) {\n                    const chr = m.charCodeAt(0) + 0x60;\n                    return String.fromCharCode(chr);\n                });\n            };\n            return hiraToKana('' + s);\n        }\n    },\n    '英数全角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).replace(/[A-Za-z0-9]/g, function (v) {\n                return String.fromCharCode(v.charCodeAt(0) + 0xFEE0);\n            });\n        }\n    },\n    '英数半角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).replace(/[Ａ-Ｚａ-ｚ０-９]/g, function (v) {\n                return String.fromCharCode(v.charCodeAt(0) - 0xFEE0);\n            });\n        }\n    },\n    '英数記号全角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).replace(/[\\x20-\\x7F]/g, function (v) {\n                return String.fromCharCode(v.charCodeAt(0) + 0xFEE0);\n            });\n        }\n    },\n    '英数記号半角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s) {\n            return String(s).replace(/[\\uFF00-\\uFF5F]/g, function (v) {\n                return String.fromCharCode(v.charCodeAt(0) - 0xFEE0);\n            });\n        }\n    },\n    'カタカナ全角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s, sys) {\n            // 半角カタカナ\n            const zen1 = sys.__v0['全角カナ一覧'];\n            const han1 = sys.__v0['半角カナ一覧'];\n            const zen2 = sys.__v0['全角カナ濁音一覧'];\n            const han2 = sys.__v0['半角カナ濁音一覧'];\n            let str = '';\n            let i = 0;\n            while (i < s.length) {\n                // 濁点の変換\n                const c2 = s.substring(i, i + 2);\n                const n2 = han2.indexOf(c2);\n                if (n2 >= 0) {\n                    str += zen2.charAt(n2 / 2);\n                    i += 2;\n                    continue;\n                }\n                // 濁点以外の変換\n                const c = s.charAt(i);\n                const n = han1.indexOf(c);\n                if (n >= 0) {\n                    str += zen1.charAt(n);\n                    i++;\n                    continue;\n                }\n                str += c;\n                i++;\n            }\n            return str;\n        }\n    },\n    'カタカナ半角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (s, sys) {\n            // 半角カタカナ\n            const zen1 = sys.__v0['全角カナ一覧'];\n            const han1 = sys.__v0['半角カナ一覧'];\n            const zen2 = sys.__v0['全角カナ濁音一覧'];\n            const han2 = sys.__v0['半角カナ濁音一覧'];\n            return s.split('').map((c) => {\n                const i = zen1.indexOf(c);\n                if (i >= 0) {\n                    return han1.charAt(i);\n                }\n                const j = zen2.indexOf(c);\n                if (j >= 0) {\n                    return han2.substring(j * 2, j * 2 + 2);\n                }\n                return c;\n            }).join('');\n        }\n    },\n    '全角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: false,\n        fn: function (s, sys) {\n            let result = s;\n            result = sys.__exec('カタカナ全角変換', [result, sys]);\n            result = sys.__exec('英数記号全角変換', [result, sys]);\n            return result;\n        }\n    },\n    '半角変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: false,\n        fn: function (s, sys) {\n            let result = s;\n            result = sys.__exec('カタカナ半角変換', [result, sys]);\n            result = sys.__exec('英数記号半角変換', [result, sys]);\n            return result;\n        }\n    },\n    '全角カナ一覧': { type: 'const', value: 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲンァィゥェォャュョッ、。ー「」' },\n    '全角カナ濁音一覧': { type: 'const', value: 'ガギグゲゴザジズゼゾダヂヅデドバビブベボパピプペポ' },\n    '半角カナ一覧': { type: 'const', value: 'ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜｦﾝｧｨｩｪｫｬｭｮｯ､｡ｰ｢｣ﾞﾟ' },\n    '半角カナ濁音一覧': { type: 'const', value: 'ｶﾞｷﾞｸﾞｹﾞｺﾞｻﾞｼﾞｽﾞｾﾞｿﾞﾀﾞﾁﾞﾂﾞﾃﾞﾄﾞﾊﾞﾋﾞﾌﾞﾍﾞﾎﾞﾊﾟﾋﾟﾌﾟﾍﾟﾎﾟ' },\n    // @JSON\n    'JSONエンコード': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (v) {\n            return JSON.stringify(v);\n        }\n    },\n    'JSONエンコード整形': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (v) {\n            return JSON.stringify(v, null, 2);\n        }\n    },\n    'JSONデコード': {\n        type: 'func',\n        josi: [['を', 'の', 'から']],\n        pure: true,\n        fn: function (s) {\n            return JSON.parse(s);\n        }\n    },\n    // @正規表現\n    '正規表現マッチ': {\n        type: 'func',\n        josi: [['を', 'が'], ['で', 'に']],\n        pure: true,\n        fn: function (a, b, sys) {\n            let re;\n            const f = ('' + b).match(/^\\/(.+)\\/([a-zA-Z]*)$/);\n            // パターンがない場合\n            if (f === null) {\n                re = new RegExp(b, 'g');\n            }\n            else {\n                re = new RegExp(f[1], f[2]);\n            }\n            const sa = sys.__varslist[0]['抽出文字列'] = [];\n            const m = String(a).match(re);\n            let result = m;\n            if (re.global) {\n                // no groups\n            }\n            else if (m) {\n                // has group?\n                if (m.length > 0) {\n                    result = m[0];\n                    for (let i = 1; i < m.length; i++) {\n                        sa[i - 1] = m[i];\n                    }\n                }\n            }\n            return result;\n        }\n    },\n    '抽出文字列': { type: 'const', value: [] },\n    '正規表現置換': {\n        type: 'func',\n        josi: [['の'], ['を', 'から'], ['で', 'に', 'へ']],\n        pure: true,\n        fn: function (s, a, b) {\n            let re;\n            const f = a.match(/^\\/(.+)\\/([a-zA-Z]*)/);\n            if (f === null) {\n                re = new RegExp(a, 'g');\n            }\n            else {\n                re = new RegExp(f[1], f[2]);\n            }\n            return String(s).replace(re, b);\n        }\n    },\n    '正規表現区切': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (s, a) {\n            let re;\n            const f = a.match(/^\\/(.+)\\/([a-zA-Z]*)/);\n            if (f === null) {\n                re = new RegExp(a, 'g');\n            }\n            else {\n                re = new RegExp(f[1], f[2]);\n            }\n            return String(s).split(re);\n        }\n    },\n    // @指定形式\n    '通貨形式': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (v) {\n            return String(v).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\n        }\n    },\n    'ゼロ埋': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (v, a) {\n            v = String(v);\n            let z = '0';\n            for (let i = 0; i < a; i++) {\n                z += '0';\n            }\n            a = parseInt(a);\n            if (a < v.length) {\n                a = v.length;\n            }\n            const s = z + String(v);\n            return s.substring(s.length - a, s.length);\n        }\n    },\n    '空白埋': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (v, a) {\n            v = String(v);\n            let z = ' ';\n            for (let i = 0; i < a; i++) {\n                z += ' ';\n            }\n            a = parseInt(a);\n            if (a < v.length) {\n                a = v.length;\n            }\n            const s = z + String(v);\n            return s.substring(s.length - a, s.length);\n        }\n    },\n    // @文字種類\n    'かなか判定': {\n        type: 'func',\n        josi: [['を', 'の', 'が']],\n        pure: true,\n        fn: function (s) {\n            const c = String(s).charCodeAt(0);\n            return (c >= 0x3041 && c <= 0x309F);\n        }\n    },\n    'カタカナ判定': {\n        type: 'func',\n        josi: [['を', 'の', 'が']],\n        pure: true,\n        fn: function (s) {\n            const c = String(s).charCodeAt(0);\n            return (c >= 0x30A1 && c <= 0x30FA);\n        }\n    },\n    '数字判定': {\n        type: 'func',\n        josi: [['を', 'が']],\n        pure: true,\n        fn: function (s) {\n            const c = String(s).charAt(0);\n            return ((c >= '0' && c <= '9') || (c >= '０' && c <= '９'));\n        }\n    },\n    '数列判定': {\n        type: 'func',\n        josi: [['を', 'が']],\n        pure: true,\n        fn: function (s) {\n            const checkerRE = /^[+\\-＋－]?([0-9０-９]*)(([.．][0-9０-９]+)?|([.．][0-9０-９]+[eEｅＥ][+\\-＋－]?[0-9０-９]+)?)$/;\n            return String(s).match(checkerRE) !== null;\n        }\n    },\n    // @配列操作\n    '配列結合': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, s) {\n            // 配列ならOK\n            if (a instanceof Array) {\n                return a.join('' + s);\n            }\n            const a2 = String(a).split('\\n'); // 配列でなければ無理矢理改行で区切ってみる\n            return a2.join('' + s);\n        }\n    },\n    '配列検索': {\n        type: 'func',\n        josi: [['の', 'から'], ['を']],\n        pure: true,\n        fn: function (a, s) {\n            if (a instanceof Array) {\n                return a.indexOf(s);\n            } // 配列ならOK\n            return -1;\n        }\n    },\n    '配列要素数': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) {\n                return a.length;\n            } // 配列ならOK\n            if (a instanceof Object) {\n                return Object.keys(a).length;\n            }\n            return 1;\n        }\n    },\n    '要素数': {\n        type: 'func',\n        josi: [['の']],\n        pure: false,\n        fn: function (a, sys) {\n            return sys.__exec('配列要素数', [a]);\n        }\n    },\n    '配列挿入': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (a, i, s) {\n            if (a instanceof Array) {\n                return a.splice(i, 0, s);\n            } // 配列ならOK\n            throw new Error('『配列挿入』で配列以外の要素への挿入。');\n        }\n    },\n    '配列一括挿入': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (a, i, b) {\n            if (a instanceof Array && b instanceof Array) { // 配列ならOK\n                for (let j = 0; j < b.length; j++) {\n                    a.splice(i + j, 0, b[j]);\n                }\n                return a;\n            }\n            throw new Error('『配列一括挿入』で配列以外の要素への挿入。');\n        }\n    },\n    '配列ソート': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) {\n                return a.sort();\n            } // 配列ならOK\n            throw new Error('『配列ソート』で配列以外が指定されました。');\n        }\n    },\n    '配列数値変換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            // 配列ならOK\n            if (a instanceof Array) {\n                for (let i = 0; i < a.length; i++) {\n                    a[i] = parseFloat(a[i]);\n                }\n                return a;\n            }\n            throw new Error('『配列数値変換』で配列以外が指定されました。');\n        }\n    },\n    '配列数値ソート': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            // 配列ならOK\n            if (a instanceof Array) {\n                return a.sort((a, b) => {\n                    return parseFloat(a) - parseFloat(b);\n                });\n            }\n            throw new Error('『配列数値ソート』で配列以外が指定されました。');\n        }\n    },\n    '配列カスタムソート': {\n        type: 'func',\n        josi: [['で'], ['の', 'を']],\n        pure: false,\n        fn: function (f, a, sys) {\n            let ufunc = f;\n            if (typeof f === 'string') {\n                ufunc = sys.__findFunc(f, '配列カスタムソート');\n            }\n            if (a instanceof Array) {\n                return a.sort(ufunc);\n            }\n            throw new Error('『配列カスタムソート』で配列以外が指定されました。');\n        }\n    },\n    '配列逆順': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) {\n                return a.reverse();\n            } // 配列ならOK\n            throw new Error('『配列ソート』で配列以外が指定されました。');\n        }\n    },\n    '配列シャッフル': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) { // 配列ならOK\n                for (let i = a.length - 1; i > 0; i--) {\n                    const r = Math.floor(Math.random() * (i + 1));\n                    const tmp = a[i];\n                    a[i] = a[r];\n                    a[r] = tmp;\n                }\n                return a;\n            }\n            throw new Error('『配列シャッフル』で配列以外が指定されました。');\n        }\n    },\n    '配列削除': {\n        type: 'func',\n        josi: [['の', 'から'], ['を']],\n        pure: false,\n        fn: function (a, i, sys) {\n            return sys.__exec('配列切取', [a, i, sys]);\n        }\n    },\n    '配列切取': {\n        type: 'func',\n        josi: [['の', 'から'], ['を']],\n        pure: true,\n        fn: function (a, i) {\n            // 配列変数のとき\n            if (a instanceof Array) {\n                const b = a.splice(i, 1);\n                if (b instanceof Array) {\n                    return b[0];\n                } // 切り取った戻り値は必ずArrayになるので。\n                return null;\n            }\n            // 辞書型変数のとき\n            if (a instanceof Object && typeof (i) === 'string') { // 辞書型変数も許容\n                if (a[i]) {\n                    const old = a[i];\n                    delete a[i];\n                    return old;\n                }\n                return undefined;\n            }\n            throw new Error('『配列切取』で配列以外を指定。');\n        }\n    },\n    '配列取出': {\n        type: 'func',\n        josi: [['の'], ['から'], ['を']],\n        pure: true,\n        fn: function (a, i, cnt) {\n            if (a instanceof Array) {\n                return a.splice(i, cnt);\n            }\n            throw new Error('『配列取出』で配列以外を指定。');\n        }\n    },\n    '配列ポップ': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) {\n                return a.pop();\n            }\n            throw new Error('『配列ポップ』で配列以外の処理。');\n        }\n    },\n    '配列プッシュ': {\n        type: 'func',\n        josi: [['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (a, b, sys) {\n            return sys.__exec('配列追加', [a, b, sys]);\n        }\n    },\n    '配列追加': {\n        type: 'func',\n        josi: [['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (a, b) {\n            if (a instanceof Array) { // 配列ならOK\n                a.push(b);\n                return a;\n            }\n            throw new Error('『配列追加』で配列以外の処理。');\n        }\n    },\n    '配列複製': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (a) {\n            return JSON.parse(JSON.stringify(a));\n        }\n    },\n    '配列足': {\n        type: 'func',\n        josi: [['に', 'へ', 'と'], ['を']],\n        pure: true,\n        fn: function (a, b) {\n            if (a instanceof Array) {\n                return a.concat(b);\n            }\n            return JSON.parse(JSON.stringify(a));\n        }\n    },\n    '配列最大値': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return a.reduce((x, y) => Math.max(x, y));\n        }\n    },\n    '配列最小値': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return a.reduce((x, y) => Math.min(x, y));\n        }\n    },\n    '配列合計': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            if (a instanceof Array) {\n                let v = 0;\n                a.forEach((n) => {\n                    const nn = parseFloat(n);\n                    if (isNaN(nn)) {\n                        return;\n                    }\n                    v += nn;\n                });\n                return v;\n            }\n            throw new Error('『配列合計』で配列変数以外の値が指定されました。');\n        }\n    },\n    '配列入替': {\n        type: 'func',\n        josi: [['の'], ['と'], ['を']],\n        pure: true,\n        fn: function (a, i, j) {\n            if (!(a instanceof Array)) {\n                throw new Error('『配列入替』の第1引数には配列を指定してください。');\n            }\n            const tmp = a[i];\n            a[i] = a[j];\n            a[j] = tmp;\n            return a;\n        }\n    },\n    '配列連番作成': {\n        type: 'func',\n        josi: [['から'], ['までの', 'まで', 'の']],\n        pure: true,\n        fn: function (a, b) {\n            const result = [];\n            for (let i = a; i <= b; i++) {\n                result.push(i);\n            }\n            return result;\n        }\n    },\n    '配列要素作成': {\n        type: 'func',\n        josi: [['を'], ['だけ']],\n        pure: true,\n        fn: function (a, b) {\n            const result = [];\n            for (let i = 0; i < b; i++) {\n                result.push(a);\n            }\n            return result;\n        }\n    },\n    '配列関数適用': {\n        type: 'func',\n        josi: [['を'], ['へ', 'に']],\n        pure: true,\n        fn: function (f, a, sys) {\n            let ufunc = f;\n            if (typeof f === 'string') {\n                ufunc = sys.__findFunc(f, '配列関数適用');\n            }\n            const result = [];\n            for (const e of a) {\n                result.push(ufunc(e));\n            }\n            return result;\n        }\n    },\n    '配列マップ': {\n        type: 'func',\n        josi: [['を'], ['へ', 'に']],\n        pure: true,\n        fn: function (f, a, sys) {\n            return sys.__exec('配列関数適用', [f, a, sys]);\n        }\n    },\n    '配列フィルタ': {\n        type: 'func',\n        josi: [['で', 'の'], ['を', 'について']],\n        pure: true,\n        fn: function (f, a, sys) {\n            let ufunc = f;\n            if (typeof f === 'string') {\n                ufunc = sys.__findFunc(f, '配列フィルタ');\n            }\n            const result = [];\n            for (const e of a) {\n                if (ufunc(e)) {\n                    result.push(e);\n                }\n            }\n            return result;\n        }\n    },\n    // @二次元配列処理\n    '表ソート': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (a, no) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表ソート』には配列を指定する必要があります。');\n            }\n            a.sort((n, m) => {\n                const ns = n[no];\n                const ms = m[no];\n                if (ns === ms) {\n                    return 0;\n                }\n                else if (ns < ms) {\n                    return -1;\n                }\n                else {\n                    return 1;\n                }\n            });\n            return a;\n        }\n    },\n    '表数値ソート': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (a, no) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表数値ソート』には配列を指定する必要があります。');\n            }\n            a.sort((n, m) => {\n                const ns = n[no];\n                const ms = m[no];\n                return ns - ms;\n            });\n            return a;\n        }\n    },\n    '表ピックアップ': {\n        type: 'func',\n        josi: [['の'], ['から'], ['を', 'で']],\n        pure: true,\n        fn: function (a, no, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表ピックアップ』には配列を指定する必要があります。');\n            }\n            return a.filter((row) => String(row[no]).indexOf(s) >= 0);\n        }\n    },\n    '表完全一致ピックアップ': {\n        type: 'func',\n        josi: [['の'], ['から'], ['を', 'で']],\n        pure: true,\n        fn: function (a, no, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表完全ピックアップ』には配列を指定する必要があります。');\n            }\n            return a.filter((row) => row[no] === s);\n        }\n    },\n    '表検索': {\n        type: 'func',\n        josi: [['の'], ['で', 'に'], ['から'], ['を']],\n        pure: true,\n        fn: function (a, col, row, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表検索』には配列を指定する必要があります。');\n            }\n            for (let i = row; i < a.length; i++) {\n                if (a[i][col] === s) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    },\n    '表列数': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表列数』には配列を指定する必要があります。');\n            }\n            let cols = 1;\n            for (let i = 0; i < a.length; i++) {\n                if (a[i].length > cols) {\n                    cols = a[i].length;\n                }\n            }\n            return cols;\n        }\n    },\n    '表行数': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表行数』には配列を指定する必要があります。');\n            }\n            return a.length;\n        }\n    },\n    '表行列交換': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: false,\n        fn: function (a, sys) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表行列交換』には配列を指定する必要があります。');\n            }\n            const cols = sys.__exec('表列数', [a]);\n            const rows = a.length;\n            const res = [];\n            for (let r = 0; r < cols; r++) {\n                const row = [];\n                res.push(row);\n                for (let c = 0; c < rows; c++) {\n                    row[c] = (a[c][r] !== undefined) ? a[c][r] : '';\n                }\n            }\n            return res;\n        }\n    },\n    '表右回転': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: false,\n        fn: function (a, sys) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表右回転』には配列を指定する必要があります。');\n            }\n            const cols = sys.__exec('表列数', [a]);\n            const rows = a.length;\n            const res = [];\n            for (let r = 0; r < cols; r++) {\n                const row = [];\n                res.push(row);\n                for (let c = 0; c < rows; c++) {\n                    row[c] = a[rows - c - 1][r];\n                }\n            }\n            return res;\n        }\n    },\n    '表重複削除': {\n        type: 'func',\n        josi: [['の'], ['を', 'で']],\n        pure: true,\n        fn: function (a, i) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表重複削除』には配列を指定する必要があります。');\n            }\n            const res = [];\n            const keys = {};\n            for (let n = 0; n < a.length; n++) {\n                const k = a[n][i];\n                if (undefined === keys[k]) {\n                    keys[k] = true;\n                    res.push(a[n]);\n                }\n            }\n            return res;\n        }\n    },\n    '表列取得': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (a, i) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表列取得』には配列を指定する必要があります。');\n            }\n            const res = a.map(row => row[i]);\n            return res;\n        }\n    },\n    '表列挿入': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (a, i, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表列挿入』には配列を指定する必要があります。');\n            }\n            const res = [];\n            a.forEach((row, idx) => {\n                let nr = [];\n                if (i > 0) {\n                    nr = nr.concat(row.slice(0, i));\n                }\n                nr.push(s[idx]);\n                nr = nr.concat(row.slice(i));\n                res.push(nr);\n            });\n            return res;\n        }\n    },\n    '表列削除': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (a, i) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表列削除』には配列を指定する必要があります。');\n            }\n            const res = [];\n            a.forEach((row) => {\n                const nr = row.slice(0);\n                nr.splice(i, 1);\n                res.push(nr);\n            });\n            return res;\n        }\n    },\n    '表列合計': {\n        type: 'func',\n        josi: [['の'], ['を', 'で']],\n        pure: true,\n        fn: function (a, i) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表列合計』には配列を指定する必要があります。');\n            }\n            let sum = 0;\n            a.forEach((row) => { sum += row[i]; });\n            return sum;\n        }\n    },\n    '表曖昧検索': {\n        type: 'func',\n        josi: [['の'], ['から'], ['で'], ['を']],\n        pure: true,\n        fn: function (a, row, col, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表曖昧検索』には配列を指定する必要があります。');\n            }\n            const re = new RegExp(s);\n            for (let i = row; i < a.length; i++) {\n                const line = a[i];\n                if (re.test(line[col])) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    },\n    '表正規表現ピックアップ': {\n        type: 'func',\n        josi: [['の', 'で'], ['から'], ['を']],\n        pure: true,\n        fn: function (a, col, s) {\n            if (!(a instanceof Array)) {\n                throw new Error('『表正規表現ピックアップ』には配列を指定する必要があります。');\n            }\n            const re = new RegExp(s);\n            const res = [];\n            for (let i = 0; i < a.length; i++) {\n                const row = a[i];\n                if (re.test(row[col])) {\n                    res.push(row.slice(0));\n                }\n            }\n            return res;\n        }\n    },\n    // @辞書型変数の操作\n    '辞書キー列挙': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            const keys = [];\n            if (a instanceof Object) { // オブジェクトのキーを返す\n                for (const key in a) {\n                    keys.push(key);\n                }\n                return keys;\n            }\n            if (a instanceof Array) { // 配列なら数字を返す\n                for (let i = 0; i < a.length; i++) {\n                    keys.push(i);\n                }\n                return keys;\n            }\n            throw new Error('『辞書キー列挙』でハッシュ以外が与えられました。');\n        }\n    },\n    '辞書キー削除': {\n        type: 'func',\n        josi: [['から', 'の'], ['を']],\n        pure: true,\n        fn: function (a, key) {\n            if (a instanceof Object) { // オブジェクトのキーを返す\n                if (key in a) {\n                    delete a[key];\n                }\n                return a;\n            }\n            throw new Error('『辞書キー削除』でハッシュ以外が与えられました。');\n        }\n    },\n    '辞書キー存在': {\n        type: 'func',\n        josi: [['の', 'に'], ['が']],\n        pure: true,\n        fn: function (a, key) {\n            return key in a;\n        }\n    },\n    // @ハッシュ\n    'ハッシュキー列挙': {\n        type: 'func',\n        josi: [['の']],\n        pure: false,\n        fn: function (a, sys) {\n            return sys.__exec('辞書キー列挙', [a, sys]);\n        }\n    },\n    'ハッシュ内容列挙': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            const body = [];\n            if (a instanceof Object) { // オブジェクトのキーを返す\n                for (const key in a) {\n                    body.push(a[key]);\n                }\n                return body;\n            }\n            throw new Error('『ハッシュ内容列挙』でハッシュ以外が与えられました。');\n        }\n    },\n    'ハッシュキー削除': {\n        type: 'func',\n        josi: [['から', 'の'], ['を']],\n        pure: false,\n        fn: function (a, key, sys) {\n            return sys.__exec('辞書キー削除', [a, key, sys]);\n        }\n    },\n    'ハッシュキー存在': {\n        type: 'func',\n        josi: [['の', 'に'], ['が']],\n        pure: true,\n        fn: function (a, key) {\n            return key in a;\n        }\n    },\n    // @タイマー\n    '秒待': {\n        type: 'func',\n        josi: [['']],\n        pure: true,\n        asyncFn: true,\n        fn: function (n, sys) {\n            return new Promise((resolve, reject) => {\n                try {\n                    // タイマーを仕掛ける\n                    const timerId = setTimeout(() => {\n                        // タイマー使用中リストに追加したIDを削除\n                        const i = sys.__timeout.indexOf(timerId);\n                        if (i >= 0) {\n                            sys.__timeout.splice(i, 1);\n                        }\n                        // Promiseを終了\n                        resolve();\n                    }, parseFloat(n) * 1000);\n                    // タイマー使用中リストに追加\n                    sys.__timeout.push(timerId);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            });\n        },\n        return_none: true\n    },\n    '秒待機': {\n        type: 'func',\n        josi: [['']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (n, sys) {\n            const p = sys.__exec('秒待', [n, sys]);\n            return await p;\n        },\n        return_none: true\n    },\n    '秒逐次待機': {\n        type: 'func',\n        josi: [['']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (n, sys) {\n            const p = sys.__exec('秒待', [n, sys]);\n            return await p;\n        },\n        return_none: true\n    },\n    '秒後': {\n        type: 'func',\n        josi: [['を'], ['']],\n        pure: true,\n        fn: function (f, n, sys) {\n            // 文字列で指定された関数をオブジェクトに変換\n            if (typeof f === 'string') {\n                f = sys.__findFunc(f, '秒後');\n            }\n            // 1回限りのタイマーをセット\n            const timerId = setTimeout(() => {\n                // 使用中リストに追加したIDを削除\n                const i = sys.__timeout.indexOf(timerId);\n                if (i >= 0) {\n                    sys.__timeout.splice(i, 1);\n                }\n                if (sys.__genMode === '非同期モード') {\n                    sys.newenv = true;\n                }\n                try {\n                    f(timerId, sys);\n                }\n                catch (e) {\n                    let err = e;\n                    if (!(e instanceof NakoRuntimeError)) {\n                        err = new NakoRuntimeError(e, sys.__varslist[0].line);\n                    }\n                    sys.logger.error(err);\n                }\n            }, parseFloat(n) * 1000);\n            sys.__timeout.unshift(timerId);\n            sys.__v0['対象'] = timerId;\n            return timerId;\n        }\n    },\n    '秒毎': {\n        type: 'func',\n        josi: [['を'], ['']],\n        pure: false,\n        fn: function (f, n, sys) {\n            // 文字列で指定された関数をオブジェクトに変換\n            if (typeof f === 'string') {\n                f = sys.__findFunc(f, '秒毎');\n            }\n            // タイマーをセット\n            const timerId = setInterval(() => {\n                if (sys.__genMode === '非同期モード') {\n                    sys.newenv = true;\n                }\n                f(timerId, sys);\n            }, parseFloat(n) * 1000);\n            // タイマーIDを追加\n            sys.__interval.unshift(timerId);\n            sys.__v0['対象'] = timerId;\n            return timerId;\n        }\n    },\n    '秒タイマー開始時': {\n        type: 'func',\n        josi: [['を'], ['']],\n        pure: false,\n        fn: function (f, n, sys) {\n            return sys.__exec('秒毎', [f, n, sys]);\n        }\n    },\n    'タイマー停止': {\n        type: 'func',\n        josi: [['の', 'で']],\n        pure: true,\n        fn: function (timerId, sys) {\n            const i = sys.__interval.indexOf(timerId);\n            if (i >= 0) {\n                sys.__interval.splice(i, 1);\n                clearInterval(timerId);\n                return true;\n            }\n            const j = sys.__timeout.indexOf(timerId);\n            if (j >= 0) {\n                sys.__timeout.splice(j, 1);\n                clearTimeout(timerId);\n                return true;\n            }\n            return false;\n        },\n        return_none: false\n    },\n    '全タイマー停止': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // clearInterval\n            for (let i = 0; i < sys.__interval.length; i++) {\n                const timerId = sys.__interval[i];\n                clearInterval(timerId);\n            }\n            sys.__interval = [];\n            // clearTimeout\n            for (let i = 0; i < sys.__timeout.length; i++) {\n                const timerId = sys.__timeout[i];\n                clearTimeout(timerId);\n            }\n            sys.__timeout = [];\n        },\n        return_none: true\n    },\n    // @日時処理(簡易)\n    '元号データ': { type: 'const', value: [{ '元号': '令和', '改元日': '2019/05/01' }, { '元号': '平成', '改元日': '1989/01/08' }, { '元号': '昭和', '改元日': '1926/12/25' }, { '元号': '大正', '改元日': '1912/07/30' }, { '元号': '明治', '改元日': '1868/10/23' }] },\n    '今': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            const z2 = (n) => {\n                n = '00' + n;\n                return n.substring(n.length - 2, n.length);\n            };\n            const t = new Date();\n            return z2(t.getHours()) + ':' + z2(t.getMinutes()) + ':' + z2(t.getSeconds());\n        }\n    },\n    'システム時間': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            const now = new Date();\n            return Math.floor(now.getTime() / 1000);\n        }\n    },\n    'システム時間ミリ秒': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            const now = new Date();\n            return now.getTime();\n        }\n    },\n    '今日': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            return sys.__formatDate(new Date());\n        }\n    },\n    '明日': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const t = Date.now() + (24 * 60 * 60 * 1000);\n            return sys.__formatDate(new Date(t));\n        }\n    },\n    '昨日': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const t = Date.now() - (24 * 60 * 60 * 1000);\n            return sys.__formatDate(new Date(t));\n        }\n    },\n    '今年': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getFullYear();\n        }\n    },\n    '来年': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getFullYear() + 1;\n        }\n    },\n    '去年': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getFullYear() - 1;\n        }\n    },\n    '今月': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getMonth() + 1;\n        }\n    },\n    '来月': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getMonth() + 2;\n        }\n    },\n    '先月': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (new Date()).getMonth();\n        }\n    },\n    '曜日': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (s, sys) {\n            const d = sys.__str2date(s);\n            return '日月火水木金土'.charAt(d.getDay() % 7);\n        }\n    },\n    '曜日番号取得': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (s) {\n            const a = s.split('/');\n            const t = new Date(a[0], a[1] - 1, a[2]);\n            return t.getDay();\n        }\n    },\n    'UNIXTIME変換': {\n        type: 'func',\n        josi: [['の', 'を', 'から']],\n        pure: true,\n        fn: function (s, sys) {\n            const d = sys.__str2date(s);\n            return d.getTime() / 1000;\n        }\n    },\n    'UNIX時間変換': {\n        type: 'func',\n        josi: [['の', 'を', 'から']],\n        pure: true,\n        fn: function (s, sys) {\n            const d = sys.__str2date(s);\n            return d.getTime() / 1000;\n        }\n    },\n    '日時変換': {\n        type: 'func',\n        josi: [['を', 'から']],\n        pure: true,\n        fn: function (tm, sys) {\n            const t = tm * 1000;\n            return sys.__formatDateTime(new Date(t), '2022/01/01 00:00:00');\n        }\n    },\n    '日時書式変換': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (tm, fmt, sys) {\n            const t = sys.__str2date(tm);\n            fmt = fmt.replace(/(YYYY|ccc|WWW|MMM|YY|MM|DD|HH|mm|ss|[MDHmsW])/g, (m) => {\n                switch (m) {\n                    case 'YYYY': return t.getFullYear();\n                    case 'YY': return ('' + t.getFullYear()).substring(2);\n                    case 'MM': return sys.__zero2(t.getMonth() + 1);\n                    case 'DD': return sys.__zero2(t.getDate());\n                    case 'M': return (t.getMonth() + 1);\n                    case 'D': return (t.getDate());\n                    case 'HH': return sys.__zero2(t.getHours());\n                    case 'mm': return sys.__zero2(t.getMinutes());\n                    case 'ss': return sys.__zero2(t.getSeconds());\n                    case 'ccc': return sys.__zero(t.getMilliseconds(), 3);\n                    case 'H': return (t.getHours());\n                    case 'm': return (t.getMinutes());\n                    case 's': return (t.getSeconds());\n                    case 'W': return '日月火水木金土'.charAt(t.getDay() % 7);\n                    case 'WWW': return ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][t.getDay() % 7];\n                    case 'MMM': return ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][t.getMonth()];\n                }\n                return m;\n            });\n            return fmt;\n        }\n    },\n    '和暦変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (s, sys) {\n            const d = sys.__str2date(s);\n            const t = d.getTime();\n            for (const era of sys.__v0['元号データ']) {\n                const gengo = era['元号'];\n                const d2 = sys.__str2date(era['改元日']);\n                const t2 = d2.getTime();\n                if (t2 <= t) {\n                    let y = (d.getFullYear() - d2.getFullYear()) + 1;\n                    if (y === 1) {\n                        y = '元';\n                    }\n                    return gengo + y + '年' + sys.__zero2(d.getMonth() + 1) + '月' + sys.__zero2(d.getDate()) + '日';\n                }\n            }\n            throw new Error('『和暦変換』は明示以前の日付には対応していません。');\n        }\n    },\n    '年数差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = sys.__str2date(a);\n            const t2 = sys.__str2date(b);\n            return (t2.getFullYear() - t1.getFullYear());\n        }\n    },\n    '月数差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = sys.__str2date(a);\n            const t2 = sys.__str2date(b);\n            return ((t2.getFullYear() * 12 + t2.getMonth()) -\n                (t1.getFullYear() * 12 + t1.getMonth()));\n        }\n    },\n    '日数差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = Math.ceil(sys.__str2date(a).getTime() / 1000);\n            const t2 = Math.ceil(sys.__str2date(b).getTime() / 1000);\n            const days = Math.ceil((t2 - t1) / (60 * 60 * 24));\n            return days;\n        }\n    },\n    '時間差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = Math.ceil(sys.__str2date(a).getTime() / 1000);\n            const t2 = Math.ceil(sys.__str2date(b).getTime() / 1000);\n            const hours = Math.ceil((t2 - t1) / (60 * 60));\n            return hours;\n        }\n    },\n    '分差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = Math.ceil(sys.__str2date(a).getTime() / 1000);\n            const t2 = Math.ceil(sys.__str2date(b).getTime() / 1000);\n            const min = Math.ceil((t2 - t1) / (60));\n            return min;\n        }\n    },\n    '秒差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの']],\n        pure: true,\n        fn: function (a, b, sys) {\n            const t1 = Math.ceil(sys.__str2date(a).getTime() / 1000);\n            const t2 = Math.ceil(sys.__str2date(b).getTime() / 1000);\n            const sec = Math.ceil((t2 - t1));\n            return sec;\n        }\n    },\n    '日時差': {\n        type: 'func',\n        josi: [['と', 'から'], ['の', 'までの'], ['による']],\n        pure: true,\n        fn: function (a, b, unit, sys) {\n            switch (unit) {\n                case '年': return sys.__exec('年数差', [a, b, sys]);\n                case '月': return sys.__exec('月数差', [a, b, sys]);\n                case '日': return sys.__exec('日数差', [a, b, sys]);\n                case '時間': return sys.__exec('時間差', [a, b, sys]);\n                case '分': return sys.__exec('分差', [a, b, sys]);\n                case '秒': return sys.__exec('秒差', [a, b, sys]);\n            }\n            throw new Error('『日時差』で不明な単位です。');\n        }\n    },\n    '時間加算': {\n        type: 'func',\n        josi: [['に'], ['を']],\n        pure: true,\n        fn: function (s, a, sys) {\n            const op = a.charAt(0);\n            if (op === '-' || op === '+') {\n                a = a.substring(1);\n            }\n            const d = sys.__str2date(s);\n            const aa = (a + ':0:0').split(':');\n            let sec = parseInt(aa[0]) * 60 * 60 +\n                parseInt(aa[1]) * 60 +\n                parseInt(aa[2]);\n            if (op === '-') {\n                sec *= -1;\n            }\n            const rd = new Date(d.getTime() + (sec * 1000));\n            return sys.__formatDateTime(rd, s);\n        }\n    },\n    '日付加算': {\n        type: 'func',\n        josi: [['に'], ['を']],\n        pure: true,\n        fn: function (s, a, sys) {\n            let op = 1;\n            const opc = a.charAt(0);\n            if (opc === '-' || opc === '+') {\n                a = a.substring(1);\n                if (opc === '-') {\n                    op *= -1;\n                }\n            }\n            const d = sys.__str2date(s);\n            const aa = (a + '/0/0').split('/');\n            const addY = parseInt(aa[0]) * op;\n            const addM = parseInt(aa[1]) * op;\n            const addD = parseInt(aa[2]) * op;\n            d.setFullYear(d.getFullYear() + addY);\n            d.setMonth(d.getMonth() + addM);\n            d.setDate(d.getDate() + addD);\n            return sys.__formatDateTime(d, s);\n        }\n    },\n    '日時加算': {\n        type: 'func',\n        josi: [['に'], ['を']],\n        pure: true,\n        fn: function (s, a, sys) {\n            const r = ('' + a).match(/([+|-]?)(\\d+)(年|ヶ月|日|週間|時間|分|秒)$/);\n            if (!r) {\n                throw new Error('『日付加算』は『(+｜-)1(年|ヶ月|日|時間|分|秒)』の書式で指定します。');\n            }\n            switch (r[3]) {\n                case '年': return sys.__exec('日付加算', [s, `${r[1]}${r[2]}/0/0`, sys]);\n                case 'ヶ月': return sys.__exec('日付加算', [s, `${r[1]}0/${r[2]}/0`, sys]);\n                case '週間': return sys.__exec('日付加算', [s, `${r[1]}0/0/${parseInt(r[2]) * 7}`, sys]);\n                case '日': return sys.__exec('日付加算', [s, `${r[1]}0/0/${r[2]}`, sys]);\n                case '時間': return sys.__exec('時間加算', [s, `${r[1]}${r[2]}:0:0`, sys]);\n                case '分': return sys.__exec('時間加算', [s, `${r[1]}0:${r[2]}:0`, sys]);\n                case '秒': return sys.__exec('時間加算', [s, `${r[1]}0:0:${r[2]}`, sys]);\n            }\n        }\n    },\n    '時間ミリ秒取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            if (performance && performance.now) {\n                return performance.now();\n            }\n            else if (Date.now) {\n                return Date.now();\n            }\n            else {\n                const now = new Date();\n                return now.getTime();\n            }\n        }\n    },\n    // @デバッグ支援\n    'エラー発生': {\n        type: 'func',\n        josi: [['の', 'で']],\n        pure: true,\n        fn: function (s) {\n            throw new Error(s);\n        }\n    },\n    '__DEBUG': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            sys.isDebug = true;\n            console.log(sys);\n        }\n    },\n    '__DEBUG強制待機': { type: 'const', value: 0 },\n    '__DEBUGブレイクポイント一覧': { type: 'const', value: [] },\n    '__DEBUG待機フラグ': { type: 'const', value: 0 },\n    '__DEBUG_BP_WAIT': {\n        type: 'func',\n        josi: [['で']],\n        pure: true,\n        asyncFn: true,\n        fn: function (curLine, sys) {\n            return new Promise((resolve) => {\n                const breakpoints = sys.__v0['__DEBUGブレイクポイント一覧'];\n                const forceLine = sys.__v0['__DEBUG強制待機'];\n                sys.__v0['__DEBUG強制待機'] = 0;\n                // ブレイクポイント or __DEBUG強制待機 が指定されたか？\n                if (breakpoints.indexOf(curLine) >= 0 || forceLine) {\n                    if (sys.__v0['プラグイン名'] !== 'メイン') {\n                        return;\n                    } // 現状メインのみデバッグする\n                    console.log(`@__DEBUG_BP_WAIT(${curLine})`);\n                    const timerId = setInterval(() => {\n                        if (sys.__v0['__DEBUG待機フラグ'] === 1) {\n                            sys.__v0['__DEBUG待機フラグ'] = 0;\n                            clearInterval(timerId);\n                            resolve(curLine);\n                        }\n                    }, 500);\n                }\n                else {\n                    resolve(curLine);\n                }\n            });\n        }\n    },\n    'グローバル関数一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const vars = sys.__varslist[1];\n            const res = [];\n            for (const key in vars) {\n                if (Object.prototype.hasOwnProperty.call(vars, key)) {\n                    res.push(key);\n                }\n            }\n            return res;\n        }\n    },\n    'システム関数一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const vars = sys.__varslist[0];\n            const res = [];\n            for (const key in vars) {\n                if (Object.prototype.hasOwnProperty.call(vars, key)) {\n                    res.push(key);\n                }\n            }\n            return res;\n        }\n    },\n    'システム関数存在': {\n        type: 'func',\n        josi: [['が', 'の']],\n        pure: true,\n        fn: function (fname, sys) {\n            return (typeof sys.__v0[fname] !== 'undefined');\n        }\n    },\n    'プラグイン一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const a = [];\n            for (const f in sys.pluginfiles) {\n                a.push(f);\n            }\n            return a;\n        }\n    },\n    'モジュール一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const a = [];\n            for (const f in sys.__module) {\n                a.push(f);\n            }\n            return a;\n        }\n    },\n    '助詞一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        asyncFn: true,\n        fn: function () {\n            return new Promise((resolve, reject) => {\n                import('./nako_josi_list.mjs')\n                    .then((mod) => {\n                    const obj = Object.assign({}, mod);\n                    resolve(obj.josiList);\n                })\n                    .catch((err) => {\n                    reject(err);\n                });\n            });\n        }\n    },\n    '予約語一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        asyncFn: true,\n        fn: function () {\n            // const words = require('./nako_reserved_words.mjs')\n            return new Promise((resolve, reject) => {\n                import('./nako_reserved_words.mjs')\n                    .then((mod) => {\n                    const obj = Object.assign({}, mod);\n                    const w = [];\n                    for (const key in obj.default) {\n                        w.push(key);\n                    }\n                    resolve(w);\n                })\n                    .catch((err) => {\n                    reject(err);\n                });\n            });\n        }\n    },\n    // @プラグイン管理\n    'プラグイン名': { type: 'const', value: 'メイン' },\n    'プラグイン名設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (s, sys) {\n            sys.__v0['プラグイン名'] = s;\n        },\n        return_none: true\n    },\n    '名前空間': { type: 'const', value: '' },\n    '名前空間設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (s, sys) {\n            // push namespace\n            sys.__namespaceList.push([sys.__v0['名前空間'], sys.__v0['プラグイン名']]);\n            sys.__v0['名前空間'] = s;\n        },\n        return_none: true\n    },\n    '名前空間ポップ': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // pop namespace\n            const a = sys.__namespaceList.pop();\n            if (a) {\n                sys.__v0['名前空間'] = a[0];\n                sys.__v0['プラグイン名'] = a[1];\n            }\n        },\n        return_none: true\n    },\n    // @URLエンコードとパラメータ\n    'URLエンコード': {\n        type: 'func',\n        josi: [['を', 'から']],\n        pure: true,\n        fn: function (text) {\n            return encodeURIComponent(text);\n        }\n    },\n    'URLデコード': {\n        type: 'func',\n        josi: [['を', 'へ', 'に']],\n        pure: true,\n        fn: function (text) {\n            return decodeURIComponent(text);\n        }\n    },\n    'URLパラメータ解析': {\n        type: 'func',\n        josi: [['を', 'の', 'から']],\n        pure: true,\n        fn: function (url, sys) {\n            const res = {};\n            if (typeof url !== 'string') {\n                return res;\n            }\n            const p = url.split('?');\n            if (p.length <= 1) {\n                return res;\n            }\n            const params = p[1].split('&');\n            for (const line of params) {\n                const line2 = line + '=';\n                const kv = line2.split('=');\n                const k = sys.__exec('URLデコード', [kv[0]]);\n                res[k] = sys.__exec('URLデコード', [kv[1]]);\n            }\n            return res;\n        }\n    },\n    // @BASE64\n    'BASE64エンコード': {\n        type: 'func',\n        josi: [['を', 'から']],\n        pure: true,\n        fn: function (text) {\n            // browser?\n            if (typeof (window) !== 'undefined' && window.btoa) {\n                const u8a = new TextEncoder().encode(text);\n                const utf8str = String.fromCharCode.apply(null, u8a);\n                return btoa(utf8str);\n            }\n            // Node?\n            if (typeof (Buffer) !== 'undefined') {\n                return Buffer.from(text).toString('base64');\n            }\n            throw new Error('『BASE64エンコード』は利用できません。');\n        }\n    },\n    'BASE64デコード': {\n        type: 'func',\n        josi: [['を', 'へ', 'に']],\n        pure: true,\n        fn: function (text) {\n            if (typeof (window) !== 'undefined' && window.atob) {\n                const decodedUtf8str = atob(text);\n                const dec = Array.prototype.map.call(decodedUtf8str, c => c.charCodeAt());\n                const decodedArray = new Uint8Array(dec);\n                return new TextDecoder('UTF-8').decode(decodedArray);\n            }\n            // Node?\n            if (typeof (Buffer) !== 'undefined') {\n                return Buffer.from(text, 'base64').toString();\n            }\n            throw new Error('『BASE64デコード』は利用できません。');\n        }\n    }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable quote-props */\nexport const opPriority = {\n    // and or\n    'and': 1,\n    'or': 1,\n    // compare\n    'eq': 2,\n    'noteq': 2,\n    '===': 2,\n    '!==': 2,\n    'gt': 2,\n    'gteq': 2,\n    'lt': 2,\n    'lteq': 2,\n    '&': 3,\n    // + - << >> >>>\n    '+': 4,\n    '-': 4,\n    'shift_l': 4,\n    'shift_r': 4,\n    'shift_r0': 4,\n    // * /\n    '*': 5,\n    '/': 5,\n    '÷': 5,\n    '÷÷': 5,\n    '%': 5,\n    // ^\n    '^': 6,\n    '**': 6\n};\nexport const RenbunJosi = [\n    'いて', 'えて', 'きて', 'けて', 'して', 'って', 'にて', 'みて', 'めて', 'ねて', 'には', 'んで'\n];\nexport const operatorList = [];\nfor (const key in opPriority) {\n    operatorList.push(key);\n}\n","/**\n * なでしこ3 の TypeScript のための型定義\n */\nexport function NewEmptyToken(type = '?', value = '', indent = -1, line = 0, file = 'main.nako3') {\n    return {\n        type,\n        value,\n        indent,\n        line,\n        column: 0,\n        file,\n        josi: ''\n    };\n}\n","/**\n * なでしこ3で行頭インデントに使える文字とインデントカウント数\n */\nexport function isIndentChars(ch) {\n    const code = ch.charCodeAt(0);\n    // 特別なコード\n    if (ch === '\\t') {\n        return 4;\n    }\n    if (ch === ' ' || ch === '|') {\n        return 1;\n    }\n    if (ch === '・' || ch === '　') {\n        return 2;\n    }\n    if (ch === '⏋' || ch === '⏌') {\n        return 2;\n    } // 0x23CB, 0x23CC\n    // 罫線から --- https://github.com/kujirahand/unicode-sheets/blob/main/box-drawing.md\n    if (code >= 0x2500 && code <= 0x257F) {\n        return 2;\n    }\n    // 記号から --- https://github.com/kujirahand/unicode-sheets/blob/main/misc-technical.md\n    if ((code >= 0x23A0 && code <= 0x23AF) ||\n        (code >= 0x23B8 && code <= 0x23BF)) {\n        return 2;\n    }\n    return 0;\n}\n","/**\n * なでしこ3字句解析のためのルール\n */\nimport { josiRE, removeJosiMap } from './nako_josi_list.mjs';\nconst kanakanji = /^[\\u3005\\u4E00-\\u9FCF_a-zA-Z0-9ァ-ヶー\\u2460-\\u24FF\\u2776-\\u277F\\u3251-\\u32BF]+/;\nconst hira = /^[ぁ-ん]/;\nconst allHiragana = /^[ぁ-ん]+$/;\nconst wordHasIjoIka = /^.+(以上|以下|超|未満)$/;\nconst wordSpecial = /^(かつ|または)/;\nconst errorRead = (ch) => {\n    return function () { throw new Error('突然の『' + ch + '』があります。'); };\n};\nexport const unitRE = /^(円|ドル|元|歩|㎡|坪|度|℃|°|個|つ|本|冊|才|歳|匹|枚|皿|セット|羽|人|件|行|列|機|品|m|mm|cm|km|g|kg|t|px|dot|pt|em|b|mb|kb|gb)/;\n/** トークンに区切るルールの一覧 */\nexport const rules = [\n    // 上から順にマッチさせていく\n    { name: 'ここまで', pattern: /^;;;/ },\n    { name: 'eol', pattern: /^\\n/ },\n    { name: 'eol', pattern: /^;/ },\n    // eslint-disable-next-line no-control-regex\n    { name: 'space', pattern: /^(\\x20|\\x09|・|⎿ |└|｜)+/ },\n    { name: 'comma', pattern: /^,/ },\n    { name: 'line_comment', pattern: /^#[^\\n]*/ },\n    { name: 'line_comment', pattern: /^\\/\\/[^\\n]*/ },\n    { name: 'range_comment', pattern: /^\\/\\*/, cbParser: cbRangeComment },\n    { name: 'def_test', pattern: /^●テスト:/ },\n    { name: 'def_func', pattern: /^●/ },\n    // 多倍長整数リテラルの判定。整数の末尾に「n」がついているだけな為、数値判定より上に書かないとただの整数にされる\n    { name: 'bigint', pattern: /^0[xX][0-9a-fA-F]+(_[0-9a-fA-F]+)*n/, readJosi: true },\n    { name: 'bigint', pattern: /^0[oO][0-7]+(_[0-7]+)*n/, readJosi: true },\n    { name: 'bigint', pattern: /^0[bB][0-1]+(_[0-1]+)*n/, readJosi: true },\n    { name: 'bigint', pattern: /^\\d+(_\\d+)*?n/, readJosi: true },\n    // 数値の判定 --- この後nako_lexerにて単位を読む処理が入る(#994)\n    { name: 'number', pattern: /^0[xX][0-9a-fA-F]+(_[0-9a-fA-F]+)*/, readJosi: true, cb: parseNumber },\n    { name: 'number', pattern: /^0[oO][0-7]+(_[0-7]+)*/, readJosi: true, cb: parseNumber },\n    { name: 'number', pattern: /^0[bB][0-1]+(_[0-1]+)*/, readJosi: true, cb: parseNumber },\n    // 下の三つは小数点が挟まっている場合、小数点から始まっている場合、小数点がない場合の十進法の数値にマッチします\n    { name: 'number', pattern: /^\\d+(_\\d+)*\\.(\\d+(_\\d+)*)?([eE][+|-]?\\d+(_\\d+)*)?/, readJosi: true, cb: parseNumber },\n    { name: 'number', pattern: /^\\.\\d+(_\\d+)*([eE][+|-]?\\d+(_\\d+)*)?/, readJosi: true, cb: parseNumber },\n    { name: 'number', pattern: /^\\d+(_\\d+)*([eE][+|-]?\\d+(_\\d+)*)?/, readJosi: true, cb: parseNumber },\n    { name: 'ここから', pattern: /^(ここから),?/ },\n    { name: 'ここまで', pattern: /^(ここまで|💧)/ },\n    { name: 'もし', pattern: /^もしも?/ },\n    // 「ならば」は助詞として定義している\n    { name: '違えば', pattern: /^違(えば)?/ },\n    // 「回」「間」「繰返」「反復」「抜」「続」「戻」「代入」「条件分岐」などは NakoLexer._replaceWord で word から変換\n    // @see nako_reserved_words.js\n    { name: 'shift_r0', pattern: /^>>>/ },\n    { name: 'shift_r', pattern: /^>>/ },\n    { name: 'shift_l', pattern: /^<</ },\n    { name: '===', pattern: /^===/ },\n    { name: '!==', pattern: /^!==/ },\n    { name: 'gteq', pattern: /^(≧|>=|=>)/ },\n    { name: 'lteq', pattern: /^(≦|<=|=<)/ },\n    { name: 'noteq', pattern: /^(≠|<>|!=)/ },\n    { name: '←', pattern: /^(←|<--)/ },\n    { name: 'eq', pattern: /^(==|🟰🟰)/ },\n    { name: 'eq', pattern: /^(=|🟰)/ },\n    { name: 'line_comment', pattern: /^(!|💡)(インデント構文|ここまでだるい|DNCLモード|DNCL2モード|DNCL2)[^\\n]*/ },\n    { name: 'not', pattern: /^(!|💡)/ },\n    { name: 'gt', pattern: /^>/ },\n    { name: 'lt', pattern: /^</ },\n    { name: 'and', pattern: /^(かつ|&&|and\\s)/ },\n    { name: 'or', pattern: /^(または|或いは|あるいは|or\\s|\\|\\|)/ },\n    { name: '@', pattern: /^@/ },\n    { name: '+', pattern: /^\\+/ },\n    { name: '-', pattern: /^-/ },\n    { name: '**', pattern: /^(××|\\*\\*)/ },\n    { name: '*', pattern: /^(×|\\*)/ },\n    { name: '÷÷', pattern: /^÷÷/ },\n    { name: '÷', pattern: /^(÷|\\/)/ },\n    { name: '%', pattern: /^%/ },\n    { name: '^', pattern: /^\\^/ },\n    { name: '&', pattern: /^&/ },\n    { name: '[', pattern: /^\\[/ },\n    { name: ']', pattern: /^]/, readJosi: true },\n    { name: '(', pattern: /^\\(/ },\n    { name: ')', pattern: /^\\)/, readJosi: true },\n    { name: '|', pattern: /^\\|/ },\n    { name: 'string', pattern: /^🌿/, cbParser: src => cbString('🌿', '🌿', src) },\n    { name: 'string_ex', pattern: /^🌴/, cbParser: src => cbString('🌴', '🌴', src) },\n    { name: 'string_ex', pattern: /^「/, cbParser: src => cbString('「', '」', src) },\n    { name: 'string', pattern: /^『/, cbParser: src => cbString('『', '』', src) },\n    { name: 'string_ex', pattern: /^“/, cbParser: src => cbString('“', '”', src) },\n    { name: 'string_ex', pattern: /^\"/, cbParser: src => cbString('\"', '\"', src) },\n    { name: 'string', pattern: /^'/, cbParser: src => cbString('\\'', '\\'', src) },\n    { name: '」', pattern: /^」/, cbParser: errorRead('」') },\n    { name: '』', pattern: /^』/, cbParser: errorRead('』') },\n    { name: 'func', pattern: /^\\{関数\\},?/ },\n    { name: '{', pattern: /^\\{/ },\n    { name: '}', pattern: /^\\}/, readJosi: true },\n    { name: ':', pattern: /^:/ },\n    { name: '_eol', pattern: /^_\\s*\\n/ },\n    { name: 'dec_lineno', pattern: /^‰/ },\n    // 絵文字変数 = (絵文字)英数字*\n    { name: 'word', pattern: /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF][_a-zA-Z0-9]*/, readJosi: true },\n    { name: 'word', pattern: /^[\\u1F60-\\u1F6F][_a-zA-Z0-9]*/, readJosi: true },\n    { name: 'word', pattern: /^《.+?》/, readJosi: true },\n    // 単語句\n    {\n        name: 'word',\n        pattern: /^[_a-zA-Z\\u3005\\u4E00-\\u9FCFぁ-んァ-ヶ\\u2460-\\u24FF\\u2776-\\u277F\\u3251-\\u32BF]/,\n        cbParser: cbWordParser\n    }\n];\nexport function trimOkurigana(s) {\n    // ひらがなから始まらない場合、送り仮名を削除。(例)置換する\n    if (!hira.test(s)) {\n        return s.replace(/[ぁ-ん]+/g, '');\n    }\n    // 全てひらがな？ (例) どうぞ\n    if (allHiragana.test(s)) {\n        return s;\n    }\n    // 末尾のひらがなのみ (例)お願いします →お願\n    return s.replace(/[ぁ-ん]+$/g, '');\n}\n// Utility for Rule\nfunction cbRangeComment(src) {\n    let res = '';\n    const josi = '';\n    let numEOL = 0;\n    src = src.substring(2); // skip /*\n    const i = src.indexOf('*/');\n    if (i < 0) { // not found\n        res = src;\n        src = '';\n    }\n    else {\n        res = src.substring(0, i);\n        src = src.substring(i + 2);\n    }\n    // 改行を数える\n    for (let i = 0; i < res.length; i++) {\n        if (res.charAt(i) === '\\n') {\n            numEOL++;\n        }\n    }\n    res = res.replace(/(^\\s+|\\s+$)/, ''); // trim\n    return { src, res, josi, numEOL };\n}\n/**\n * @param {string} src\n */\nfunction cbWordParser(src, isTrimOkurigana = true) {\n    /*\n      kanji    = [\\u3005\\u4E00-\\u9FCF]\n      hiragana = [ぁ-ん]\n      katakana = [ァ-ヶー]\n      emoji    = [\\u1F60-\\u1F6F]\n      uni_extra = [\\uD800-\\uDBFF] [\\uDC00-\\uDFFF]\n      alphabet = [_a-zA-Z]\n      numchars = [0-9]\n    */\n    let res = '';\n    let josi = '';\n    while (src !== '') {\n        // 1文字以上のとき\n        if (res.length > 0) {\n            // 「かつ」「または」なら分割する (#1379 core#84)\n            const jsw = wordSpecial.exec(src);\n            if (jsw) {\n                break;\n            }\n            // 助詞の判定\n            const j = josiRE.exec(src);\n            if (j) {\n                josi = j[0].replace(/^\\s+/, '');\n                src = src.substring(j[0].length);\n                // 助詞の直後にある「,」を飛ばす #877\n                if (src.charAt(0) === ',') {\n                    src = src.substr(1);\n                }\n                break;\n            }\n        }\n        // カタカナ漢字英数字か？\n        const m = kanakanji.exec(src);\n        if (m) {\n            res += m[0];\n            src = src.substring(m[0].length);\n            continue;\n        }\n        // ひらがな？\n        const h = hira.test(src);\n        if (h) {\n            res += src.charAt(0);\n            src = src.substring(1);\n            continue;\n        }\n        break; // other chars\n    }\n    // --- 単語分割における特殊ルール ---\n    // 「間」の特殊ルール (#831)\n    // 「等しい間」や「一致する間」なら「間」をsrcに戻す。ただし「システム時間」はそのままにする。\n    if (/[ぁ-ん]間$/.test(res)) {\n        src = res.charAt(res.length - 1) + src;\n        res = res.slice(0, -1);\n    }\n    // 「以上」「以下」「超」「未満」 #918\n    const ii = wordHasIjoIka.exec(res);\n    if (ii) {\n        src = ii[1] + josi + src;\n        josi = '';\n        res = res.substring(0, res.length - ii[1].length);\n    }\n    // 助詞「こと」「である」「です」などは「＊＊すること」のように使うので削除 #936 #939 #974\n    if (removeJosiMap[josi]) {\n        josi = '';\n    }\n    // 送り仮名の省略ルール\n    // 漢字カタカナ英語から始まる語句 --- 送り仮名を省略\n    if (isTrimOkurigana) {\n        res = trimOkurigana(res);\n    }\n    // 助詞だけの語句の場合\n    if (res === '' && josi !== '') {\n        res = josi;\n        josi = '';\n    }\n    return { src, res, josi, numEOL: 0 };\n}\nfunction cbString(beginTag, closeTag, src) {\n    let res = '';\n    let josi = '';\n    let numEOL = 0;\n    src = src.substr(beginTag.length); // skip beginTag\n    const i = src.indexOf(closeTag);\n    if (i < 0) { // not found\n        res = src;\n        src = '';\n    }\n    else {\n        res = src.substr(0, i);\n        src = src.substr(i + closeTag.length);\n        // res の中に beginTag があればエラーにする #953\n        if (res.indexOf(beginTag) >= 0) {\n            if (beginTag === '『') {\n                throw new Error('「『」で始めた文字列の中に「『」を含めることはできません。');\n            }\n            else {\n                throw new Error(`『${beginTag}』で始めた文字列の中に『${beginTag}』を含めることはできません。`);\n            }\n        }\n    }\n    // 文字列直後の助詞を取得\n    const j = josiRE.exec(src);\n    if (j) {\n        josi = j[0].replace(/^\\s+/, '');\n        src = src.substr(j[0].length);\n        // 助詞の後のカンマ #877\n        if (src.charAt(0) === ',') {\n            src = src.substr(1);\n        }\n    }\n    // 助詞「こと」「である」「です」などは「＊＊すること」のように使うので削除 #936 #939 #974\n    if (removeJosiMap[josi]) {\n        josi = '';\n    }\n    // 改行を数える\n    for (let i = 0; i < res.length; i++) {\n        if (res.charAt(i) === '\\n') {\n            numEOL++;\n        }\n    }\n    return { src, res, josi, numEOL };\n}\nfunction parseNumber(n) {\n    return Number(n.replace(/_/g, ''));\n}\n","// なでしこの字句解析を行う\n// 既に全角半角を揃えたコードに対して字句解析を行う\nimport { opPriority } from './nako_parser_const.mjs';\n// 予約語句\n// (memo)「回」「間」「繰返」「反復」「抜」「続」「戻」「代入」などは _replaceWord で word から変換\n/** @types {Record<string, string>} */\nimport reservedWords from './nako_reserved_words.mjs';\nimport { isIndentChars } from './nako_indent_chars.mjs';\n// 助詞の一覧\nimport { josiRE, removeJosiMap, tararebaMap } from './nako_josi_list.mjs';\n// 字句解析ルールの一覧\nimport { rules, unitRE } from './nako_lex_rules.mjs';\nimport { NakoLexerError, InternalLexerError } from './nako_errors.mjs';\nexport class NakoLexer {\n    /**\n     * @param logger\n     */\n    constructor(logger) {\n        this.logger = logger; // 字句解析した際,確認された関数の一覧\n        this.funclist = {};\n        this.modList = []; // 字句解析した際,取り込むモジュール一覧 --- nako3::lex で更新される\n        this.result = [];\n        this.modName = 'main.nako3'; // モジュール名\n        this.moduleExport = {};\n    }\n    /** 関数一覧をセット */\n    setFuncList(listObj) {\n        this.funclist = listObj;\n    }\n    /** モジュール公開既定値一覧をセット */\n    setModuleExport(exportObj) {\n        this.moduleExport = exportObj;\n    }\n    /**\n     * @param tokens\n     * @param {boolean} isFirst\n     * @param {string} filename\n     */\n    replaceTokens(tokens, isFirst, filename) {\n        this.result = tokens;\n        this.modName = NakoLexer.filenameToModName(filename);\n        // 関数の定義があれば funclist を更新\n        NakoLexer.preDefineFunc(tokens, this.logger, this.funclist, this.moduleExport);\n        this._replaceWord(this.result);\n        if (isFirst) {\n            if (this.result.length > 0) {\n                const eof = this.result[this.result.length - 1];\n                this.result.push({\n                    type: 'eol',\n                    line: eof.line,\n                    column: 0,\n                    indent: -1,\n                    file: eof.file,\n                    josi: '',\n                    value: '---',\n                    startOffset: eof.startOffset,\n                    endOffset: eof.endOffset,\n                    rawJosi: ''\n                }); // 改行\n                this.result.push({\n                    type: 'eof',\n                    line: eof.line,\n                    indent: -1,\n                    column: 0,\n                    file: eof.file,\n                    josi: '',\n                    value: '',\n                    startOffset: eof.startOffset,\n                    endOffset: eof.endOffset,\n                    rawJosi: ''\n                }); // ファイル末尾\n            }\n            else {\n                this.result.push({\n                    type: 'eol',\n                    line: 0,\n                    column: 0,\n                    indent: -1,\n                    file: '',\n                    josi: '',\n                    value: '---',\n                    startOffset: 0,\n                    endOffset: 0,\n                    rawJosi: ''\n                }); // 改行\n                this.result.push({\n                    type: 'eof',\n                    line: 0,\n                    column: 0,\n                    indent: -1,\n                    file: '',\n                    josi: '',\n                    value: '',\n                    startOffset: 0,\n                    endOffset: 0,\n                    rawJosi: ''\n                }); // ファイル末尾\n            }\n        }\n        return this.result;\n    }\n    /**\n     * ファイル内で定義されている関数名を列挙する。結果はfunclistに書き込む。その他のトークンの置換処理も行う。\n     * シンタックスハイライトの処理から呼び出すためにstaticメソッドにしている。\n     */\n    static preDefineFunc(tokens, logger, funclist, moduleexport) {\n        // 関数を先読みして定義\n        let i = 0;\n        let isFuncPointer = false;\n        const readArgs = () => {\n            const args = [];\n            const keys = {};\n            if (tokens[i].type !== '(') {\n                return [];\n            }\n            i++;\n            while (tokens[i]) {\n                const t = tokens[i];\n                i++;\n                if (t.type === ')') {\n                    break;\n                }\n                if (t.type === 'func') {\n                    isFuncPointer = true;\n                }\n                else if (t.type !== '|' && t.type !== 'comma') {\n                    if (isFuncPointer) {\n                        t.funcPointer = true;\n                        isFuncPointer = false;\n                    }\n                    args.push(t);\n                    if (!keys[t.value]) {\n                        keys[t.value] = [];\n                    }\n                    keys[t.value].push(t.josi);\n                }\n            }\n            const varnames = [];\n            const funcPointers = [];\n            const result = [];\n            const already = {};\n            for (const arg of args) {\n                if (!already[arg.value]) {\n                    const josi = keys[arg.value];\n                    result.push(josi);\n                    varnames.push(arg.value);\n                    if (arg.funcPointer) {\n                        funcPointers.push(arg.value);\n                    }\n                    else {\n                        funcPointers.push(null);\n                    }\n                    already[arg.value] = true;\n                }\n            }\n            return [result, varnames, funcPointers];\n        };\n        // トークンを一つずつ確認\n        while (i < tokens.length) {\n            // タイプの置換\n            const t = tokens[i];\n            if (t.type === 'not' && tokens.length - i > 3) {\n                let prevToken = { type: 'eol' };\n                if (i >= 1) {\n                    prevToken = tokens[i - 1];\n                }\n                if (prevToken.type === 'eol') {\n                    let nextToken = tokens[i + 1];\n                    if (nextToken.type === 'word' && nextToken.value === 'モジュール公開既定値') {\n                        nextToken.type = 'モジュール公開既定値';\n                        nextToken = tokens[i + 2];\n                        if (nextToken.type === 'string' && nextToken.value === '非公開') {\n                            const modName = NakoLexer.filenameToModName(t.file);\n                            moduleexport[modName] = false;\n                            i += 3;\n                            continue;\n                        }\n                        else if (nextToken.type === 'string' && nextToken.value === '公開') {\n                            const modName = NakoLexer.filenameToModName(t.file);\n                            moduleexport[modName] = true;\n                            i += 3;\n                            continue;\n                        }\n                    }\n                }\n            }\n            // 無名関数の定義：「xxには**」があった場合 ... 暗黙的な関数定義とする\n            if ((t.type === 'word' && t.josi === 'には') || (t.type === 'word' && t.josi === 'は~')) {\n                t.josi = 'には';\n                tokens.splice(i + 1, 0, { type: 'def_func', value: '関数', indent: t.indent, line: t.line, column: t.column, file: t.file, josi: '', startOffset: t.endOffset, endOffset: t.endOffset, rawJosi: '', tag: '無名関数' });\n                i++;\n                continue;\n            }\n            // N回をN|回に置換\n            if (t.type === 'word' && t.josi === '' && t.value.length >= 2) {\n                if (t.value.match(/回$/)) {\n                    t.value = t.value.substring(0, t.value.length - 1);\n                    // N回を挿入\n                    if (!t.endOffset) {\n                        t.endOffset = 1;\n                    }\n                    const kai = { type: '回', value: '回', indent: t.indent, line: t.line, column: t.column, file: t.file, josi: '', startOffset: t.endOffset - 1, endOffset: t.endOffset, rawJosi: '' };\n                    tokens.splice(i + 1, 0, kai);\n                    t.endOffset--;\n                    i++;\n                }\n            }\n            // 予約語の置換\n            if (t.type === 'word' && reservedWords[t.value]) {\n                t.type = reservedWords[t.value];\n                if (t.value === 'そう') {\n                    t.value = 'それ';\n                }\n            }\n            // 関数定義の確認\n            if (t.type !== 'def_test' && t.type !== 'def_func') {\n                i++;\n                continue;\n            }\n            // 無名関数か普通関数定義かを判定する (1つ前が改行かどうかで判定)\n            let isMumei = true;\n            let prevToken = { type: 'eol' };\n            if (i >= 1) {\n                prevToken = tokens[i - 1];\n            }\n            if (prevToken.type === 'eol') {\n                isMumei = false;\n            }\n            // 関数名や引数を得る\n            const defToken = t;\n            i++; // skip \"●\" or \"関数\"\n            let josi = [];\n            let varnames = [];\n            let funcPointers = [];\n            let funcName = '';\n            let funcNameToken = null;\n            let isExport = null;\n            // 関数の属性指定\n            if (tokens[i] && tokens[i].type === '{') {\n                i++;\n                const attr = tokens[i] && tokens[i].type === 'word' ? tokens[i].value : '';\n                if (attr === '公開') {\n                    isExport = true;\n                }\n                else if (attr === '非公開') {\n                    isExport = false;\n                }\n                else if (attr === 'エクスポート') {\n                    isExport = true;\n                }\n                else {\n                    logger.warn(`不明な関数属性『${attr}』が指定されています。`);\n                }\n                i++;\n                if (tokens[i] && tokens[i].type === '}') {\n                    i++;\n                }\n            }\n            // 関数名の前に引数定義\n            if (tokens[i] && tokens[i].type === '(') {\n                [josi, varnames, funcPointers] = readArgs();\n            }\n            // 関数名を得る\n            if (!isMumei && tokens[i] && tokens[i].type === 'word') {\n                funcNameToken = tokens[i++];\n                funcName = funcNameToken.value;\n            }\n            // 関数名の後で引数定義\n            if (josi.length === 0 && tokens[i] && tokens[i].type === '(') {\n                [josi, varnames, funcPointers] = readArgs();\n            }\n            // 名前のある関数定義ならば関数テーブルに関数名を登録\n            // 無名関数は登録しないように気をつける\n            if (funcName !== '' && funcNameToken) {\n                const modName = NakoLexer.filenameToModName(t.file);\n                funcName = modName + '__' + funcName;\n                if (funcName in funclist) { // 関数の二重定義を警告\n                    // main__は省略 #1223\n                    const dispName = funcName.replace(/^main__/, '');\n                    logger.warn(`関数『${dispName}』は既に定義されています。`, defToken);\n                }\n                funcNameToken.value = funcName;\n                funclist[funcName] = {\n                    type: 'func',\n                    josi,\n                    fn: null,\n                    asyncFn: false,\n                    isExport,\n                    varnames,\n                    funcPointers\n                };\n            }\n            // 無名関数のために\n            defToken.meta = {\n                type: 'func',\n                josi,\n                varnames,\n                funcPointers\n            };\n        }\n    }\n    /** 文字列を{と}の部分で分割する。中括弧が対応していない場合nullを返す。 */\n    splitStringEx(code) {\n        /** @type {string[]} */\n        const list = [];\n        // \"A{B}C{D}E\" -> [\"A\", \"B}C\", \"D}E\"] -> [\"A\", \"B\", \"C\", \"D\", \"E\"]\n        // \"A{B}C}D{E}F\" -> [\"A\", \"B}C}D\", \"E}F\"] -> [\"A\", \"B\", \"C}D\", \"E\", \"F\"]\n        const arr = code.split(/[{｛]/);\n        list.push(arr[0]);\n        for (const s of arr.slice(1)) {\n            const end = s.replace('｝', '}').indexOf('}');\n            if (end === -1) {\n                return null;\n            }\n            list.push(s.slice(0, end), s.slice(end + 1));\n        }\n        return list;\n    }\n    _replaceWord(tokens) {\n        let comment = [];\n        let i = 0;\n        const namespaceStack = [];\n        const getLastType = () => {\n            if (i <= 0) {\n                return 'eol';\n            }\n            return tokens[i - 1].type;\n        };\n        let modSelf = (tokens.length > 0) ? NakoLexer.filenameToModName(tokens[0].file) : 'main';\n        while (i < tokens.length) {\n            const t = tokens[i];\n            // モジュール名の変更に対応\n            if ((t.type === 'word' || t.type === 'func') && t.value === '名前空間設定') {\n                namespaceStack.push(modSelf);\n                modSelf = tokens[i - 1].value;\n            }\n            if ((t.type === 'word' || t.type === 'func') && t.value === '名前空間ポップ') {\n                const space = namespaceStack.pop();\n                if (space) {\n                    modSelf = space;\n                }\n            }\n            // 関数を強制的に置換( word => func )\n            if (t.type === 'word' && t.value !== 'それ') {\n                // 関数を変換\n                const funcName = t.value;\n                if (funcName.indexOf('__') < 0) {\n                    // 自身のモジュール名を検索\n                    const gname1 = `${modSelf}__${funcName}`;\n                    const gfo1 = this.funclist[gname1];\n                    if (gfo1 && gfo1.type === 'func') {\n                        t.type = 'func';\n                        t.meta = gfo1;\n                        t.value = gname1;\n                        continue;\n                    }\n                    // モジュール関数を置換\n                    for (const mod of this.modList) {\n                        const gname = `${mod}__${funcName}`;\n                        const gfo = this.funclist[gname];\n                        const exportDefault = this.moduleExport[mod];\n                        if (gfo && gfo.type === 'func' && (gfo.isExport === true || (gfo.isExport !== false && exportDefault !== false))) {\n                            t.type = 'func';\n                            t.meta = gfo;\n                            t.value = gname;\n                            break;\n                        }\n                    }\n                    if (t.type === 'func') {\n                        continue;\n                    }\n                }\n                const fo = this.funclist[funcName];\n                if (fo && fo.type === 'func') {\n                    t.type = 'func';\n                    t.meta = fo;\n                }\n            }\n            // 数字につくマイナス記号を判定\n            // (ng) 5 - 3 || word - 3\n            // (ok) (行頭)-3 || 1 * -3 || Aに -3を 足す\n            if (t.type === '-' && tokens[i + 1]) {\n                const tokenType = tokens[i + 1].type;\n                if (tokenType === 'number' || tokenType === 'bigint') {\n                    // 一つ前の語句が、(行頭|演算子|助詞付きの語句)なら 負数である\n                    const ltype = getLastType();\n                    if (ltype === 'eol' || opPriority[ltype] || tokens[i - 1].josi !== '') {\n                        tokens.splice(i, 1); // remove '-'\n                        if (tokenType === 'number') {\n                            tokens[i].value *= -1;\n                        }\n                        else {\n                            tokens[i].value = '-' + tokens[i].value;\n                        }\n                    }\n                }\n            }\n            // 助詞の「は」を = に展開\n            if (t.josi === undefined) {\n                t.josi = '';\n            }\n            if (t.josi === 'は') {\n                if (!t.rawJosi) {\n                    t.rawJosi = t.josi;\n                }\n                const startOffset = (t.endOffset === undefined) ? undefined : t.endOffset - t.rawJosi.length;\n                tokens.splice(i + 1, 0, {\n                    type: 'eq',\n                    indent: t.indent,\n                    line: t.line,\n                    column: t.column,\n                    file: t.file,\n                    startOffset,\n                    endOffset: t.endOffset,\n                    josi: '',\n                    rawJosi: '',\n                    value: undefined\n                });\n                i += 2;\n                t.josi = t.rawJosi = '';\n                t.endOffset = startOffset;\n                continue;\n            }\n            // 「とは」を一つの単語にする\n            if (t.josi === 'とは') {\n                if (!t.rawJosi) {\n                    t.rawJosi = t.josi;\n                }\n                const startOffset = t.endOffset === undefined ? undefined : t.endOffset - t.rawJosi.length;\n                tokens.splice(i + 1, 0, {\n                    type: t.josi,\n                    indent: t.indent,\n                    line: t.line,\n                    column: t.column,\n                    file: t.file,\n                    startOffset,\n                    endOffset: t.endOffset,\n                    josi: '',\n                    rawJosi: '',\n                    value: undefined\n                });\n                t.josi = t.rawJosi = '';\n                t.endOffset = startOffset;\n                i += 2;\n                continue;\n            }\n            // 助詞のならばをトークンとする\n            if (tararebaMap[t.josi]) {\n                const josi = (t.josi === 'でなければ' || t.josi === 'なければ') ? 'でなければ' : 'ならば';\n                if (!t.rawJosi) {\n                    t.rawJosi = josi;\n                }\n                const startOffset = t.endOffset === undefined ? undefined : t.endOffset - t.rawJosi.length;\n                tokens.splice(i + 1, 0, {\n                    type: 'ならば',\n                    value: josi,\n                    indent: t.indent,\n                    line: t.line,\n                    column: t.column,\n                    file: t.file,\n                    startOffset,\n                    endOffset: t.endOffset,\n                    josi: '',\n                    rawJosi: ''\n                });\n                t.josi = t.rawJosi = '';\n                t.endOffset = startOffset;\n                i += 2;\n                continue;\n            }\n            // '_' + 改行 を飛ばす (演算子直後に改行を入れたい場合に使う)\n            if (t.type === '_eol') {\n                tokens.splice(i, 1);\n                continue;\n            }\n            // コメントを飛ばす\n            if (t.type === 'line_comment' || t.type === 'range_comment') {\n                comment.push(t.value);\n                tokens.splice(i, 1);\n                continue;\n            }\n            // 改行にコメントを埋め込む\n            if (t.type === 'eol') {\n                t.value = comment.join('/');\n                comment = [];\n            }\n            i++;\n        }\n    }\n    /**\n     * インデントの個数を数える\n     * @returns 戻り値として[インデント数, 読み飛ばすべき文字数]を返す\n     */\n    countIndent(src) {\n        let indent = 0;\n        for (let i = 0; i < src.length; i++) {\n            const c = src.charAt(i);\n            const n = isIndentChars(c);\n            if (n === 0) {\n                return [indent, i];\n            }\n            indent += n;\n        }\n        return [indent, src.length];\n    }\n    /**\n     * ソースコードをトークンに分割する\n     * @param src なでしこのソースコード\n     * @param line 先頭行の行番号\n     * @param filename ファイル名\n     */\n    tokenize(src, line, filename) {\n        const srcLength = src.length;\n        const result = [];\n        let columnCurrent;\n        let lineCurrent;\n        let column = 1;\n        let isDefTest = false;\n        let indent = 0;\n        // 最初にインデントを数える\n        const ia = this.countIndent(src);\n        indent = ia[0]; // インデント数\n        src = src.substring(ia[1]); // 読み飛ばす文字数\n        column += ia[1];\n        while (src !== '') {\n            let ok = false;\n            // 各ルールについて\n            for (const rule of rules) {\n                // 正規表現でマッチ\n                const m = rule.pattern.exec(src);\n                if (!m) {\n                    continue;\n                }\n                ok = true;\n                // 空白ならスキップ\n                if (rule.name === 'space') {\n                    column += m[0].length;\n                    src = src.substring(m[0].length);\n                    continue;\n                }\n                // マッチしたルールがコールバックを持つなら\n                if (rule.cbParser) {\n                    // コールバックを呼ぶ\n                    let rp;\n                    if (isDefTest && rule.name === 'word') {\n                        rp = rule.cbParser(src, false);\n                    }\n                    else {\n                        try {\n                            rp = rule.cbParser(src);\n                        }\n                        catch (e) {\n                            throw new NakoLexerError(e.message, srcLength - src.length, srcLength - src.length + 1, line, filename);\n                        }\n                    }\n                    if (rule.name === 'string_ex') {\n                        // 展開あり文字列 → aaa{x}bbb{x}cccc\n                        const list = this.splitStringEx(rp.res);\n                        if (list === null) {\n                            throw new InternalLexerError('展開あり文字列で値の埋め込み{...}が対応していません。', srcLength - src.length, srcLength - rp.src.length, line, filename);\n                        }\n                        let offset = 0;\n                        for (let i = 0; i < list.length; i++) {\n                            const josi = (i === list.length - 1) ? rp.josi : '';\n                            if (i % 2 === 0) {\n                                result.push({\n                                    type: 'string',\n                                    value: list[i],\n                                    file: filename,\n                                    josi,\n                                    indent,\n                                    line,\n                                    column,\n                                    preprocessedCodeOffset: srcLength - src.length + offset,\n                                    preprocessedCodeLength: list[i].length + 2 + josi.length\n                                });\n                                // 先頭なら'\"...{'、それ以外なら'}...{'、最後は何でも良い\n                                offset += list[i].length + 2;\n                            }\n                            else {\n                                result.push({ type: '&', value: '&', josi: '', indent, file: filename, line, column, preprocessedCodeOffset: srcLength - src.length + offset, preprocessedCodeLength: 0 });\n                                result.push({ type: '(', value: '(', josi: '', indent, file: filename, line, column, preprocessedCodeOffset: srcLength - src.length + offset, preprocessedCodeLength: 0 });\n                                result.push({ type: 'code', value: list[i], josi: '', indent, file: filename, line, column, preprocessedCodeOffset: srcLength - src.length + offset, preprocessedCodeLength: list[i].length });\n                                result.push({ type: ')', value: ')', josi: '', indent, file: filename, line, column, preprocessedCodeOffset: srcLength - src.length + offset + list[i].length, preprocessedCodeLength: 0 });\n                                result.push({ type: '&', value: '&', josi: '', indent, file: filename, line, column, preprocessedCodeOffset: srcLength - src.length + offset + list[i].length, preprocessedCodeLength: 0 });\n                                offset += list[i].length;\n                            }\n                        }\n                        line += rp.numEOL;\n                        column += src.length - rp.src.length;\n                        src = rp.src;\n                        if (rp.numEOL > 0) {\n                            column = 1;\n                        }\n                        break;\n                    }\n                    columnCurrent = column;\n                    column += src.length - rp.src.length;\n                    result.push({ type: rule.name, value: rp.res, josi: rp.josi, indent, line, column: columnCurrent, file: filename, preprocessedCodeOffset: srcLength - src.length, preprocessedCodeLength: src.length - rp.src.length });\n                    src = rp.src;\n                    line += rp.numEOL;\n                    if (rp.numEOL > 0) {\n                        column = 1;\n                    }\n                    break;\n                }\n                // ソースを進める前に位置を計算\n                const srcOffset = srcLength - src.length;\n                // 値を変換する必要があるか？\n                let value = m[0];\n                if (rule.cb) {\n                    value = rule.cb(value);\n                }\n                // ソースを進める\n                columnCurrent = column;\n                lineCurrent = line;\n                column += m[0].length;\n                src = src.substring(m[0].length);\n                // 改行の時の処理\n                if ((rule.name === 'eol' && value === '\\n') || rule.name === '_eol') {\n                    value = line++;\n                    column = 1;\n                }\n                // 数値なら単位を持つか？ --- #994\n                if (rule.name === 'number') {\n                    // 単位があれば読み飛ばす\n                    const um = unitRE.exec(src);\n                    if (um) {\n                        src = src.substring(um[0].length);\n                        column += m[0].length;\n                    }\n                }\n                let josi = '';\n                if (rule.readJosi) {\n                    const j = josiRE.exec(src);\n                    if (j) {\n                        josi = j[0].replace(/^\\s+/, '');\n                        column += j[0].length;\n                        src = src.substring(j[0].length);\n                        // 助詞の直後にあるカンマを無視 #877\n                        if (src.charAt(0) === ',') {\n                            src = src.substring(1);\n                        }\n                        // 「＊＊である」なら削除 #939 #974\n                        if (removeJosiMap[josi]) {\n                            josi = '';\n                        }\n                    }\n                }\n                switch (rule.name) {\n                    case 'def_test': {\n                        isDefTest = true;\n                        break;\n                    }\n                    case 'eol': { // eolの処理はほかに↑と↓にある\n                        isDefTest = false;\n                        break;\n                    }\n                    default: {\n                        break;\n                    }\n                }\n                // ここまで‰(#682) を処理\n                if (rule.name === 'dec_lineno') {\n                    line--;\n                    continue;\n                }\n                result.push({\n                    type: rule.name,\n                    value,\n                    indent,\n                    line: lineCurrent,\n                    column: columnCurrent,\n                    file: filename,\n                    josi,\n                    preprocessedCodeOffset: srcOffset,\n                    preprocessedCodeLength: (srcLength - src.length) - srcOffset\n                });\n                // 改行のとき次の行のインデントを調べる。なお、改行の後は必ずcolumnが1になる。インデント構文のため、一行に2つ以上の文を含むときを考慮する。(core #66)\n                if (rule.name === 'eol' && column === 1) {\n                    const ia = this.countIndent(src);\n                    indent = ia[0];\n                    column += ia[1];\n                    src = src.substring(ia[1]); // インデントを飛ばす\n                }\n                break;\n            }\n            if (!ok) {\n                throw new InternalLexerError('未知の語句: ' + src.substring(0, 3) + '...', srcLength - src.length, srcLength - srcLength + 3, line, filename);\n            }\n        }\n        return result;\n    }\n    // トークン配列をtype文字列に変換\n    static tokensToTypeStr(tokens, sep) {\n        const a = tokens.map((v) => {\n            return v.type;\n        });\n        return a.join(sep);\n    }\n    /**\n     * ファイル名からモジュール名へ変換\n     * @param {string} filename\n     * @returns {string}\n     */\n    static filenameToModName(filename) {\n        if (!filename) {\n            return 'main';\n        }\n        // パスがあればパスを削除\n        filename = filename.replace(/[\\\\:]/g, '/'); // Windowsのpath記号を/に置換\n        if (filename.indexOf('/') >= 0) {\n            const a = filename.split('/');\n            filename = a[a.length - 1];\n        }\n        filename = filename.replace(/\\.nako3?$/, '');\n        return filename;\n    }\n}\n","/**\n * nadesiko v3 parser\n */\nimport { opPriority, RenbunJosi, operatorList } from './nako_parser_const.mjs';\nimport { NakoParserBase } from './nako_parser_base.mjs';\nimport { NakoSyntaxError } from './nako_errors.mjs';\nimport { NakoLexer } from './nako_lexer.mjs';\nimport { NewEmptyToken } from './nako_types.mjs';\n/**\n * 構文解析を行うクラス\n */\nexport class NakoParser extends NakoParserBase {\n    /**\n     * 構文解析を実行する\n     */\n    parse(tokens, filename) {\n        this.reset();\n        this.tokens = tokens;\n        this.modName = NakoLexer.filenameToModName(filename);\n        this.modList.push(this.modName);\n        // 解析開始\n        return this.startParser();\n    }\n    /** パーサーの一番最初に呼び出す構文規則 */\n    startParser() {\n        const b = this.ySentenceList();\n        const c = this.get();\n        if (c && c.type !== 'eof') {\n            this.logger.debug(`構文解析でエラー。${this.nodeToStr(c, { depth: 1 }, true)}の使い方が間違っています。`, c);\n            throw NakoSyntaxError.fromNode(`構文解析でエラー。${this.nodeToStr(c, { depth: 1 }, false)}の使い方が間違っています。`, c);\n        }\n        return b;\n    }\n    /** 複数文を返す */\n    ySentenceList() {\n        const blocks = [];\n        let line = -1;\n        const map = this.peekSourceMap();\n        while (!this.isEOF()) {\n            const n = this.ySentence();\n            if (!n) {\n                break;\n            }\n            blocks.push(n);\n            if (line < 0) {\n                line = n.line;\n            }\n        }\n        if (blocks.length === 0) {\n            const token = this.peek() || this.tokens[0];\n            this.logger.debug('構文解析に失敗:' + this.nodeToStr(this.peek(), { depth: 1 }, true), token);\n            throw NakoSyntaxError.fromNode('構文解析に失敗:' + this.nodeToStr(this.peek(), { depth: 1 }, false), token);\n        }\n        return { type: 'block', block: blocks, ...map, end: this.peekSourceMap(), genMode: this.genMode };\n    }\n    /** 余剰スタックのレポートを作る */\n    makeStackBalanceReport() {\n        const words = [];\n        this.stack.forEach((t) => {\n            let w = this.nodeToStr(t, { depth: 1 }, false);\n            if (t.josi) {\n                w += t.josi;\n            }\n            words.push(w);\n        });\n        const desc = words.join(',');\n        // 最近使った関数の使い方レポートを作る #1093\n        let descFunc = '';\n        const chA = 'A'.charCodeAt(0);\n        for (const f of this.recentlyCalledFunc) {\n            descFunc += ' - ';\n            let no = 0;\n            const josiA = f.josi;\n            if (josiA) {\n                for (const arg of josiA) {\n                    const ch = String.fromCharCode(chA + no);\n                    descFunc += ch;\n                    if (arg.length === 1) {\n                        descFunc += arg[0];\n                    }\n                    else {\n                        descFunc += `(${arg.join('|')})`;\n                    }\n                    no++;\n                }\n            }\n            descFunc += f.name + '\\n';\n        }\n        this.recentlyCalledFunc = [];\n        return `未解決の単語があります: [${desc}]\\n次の命令の可能性があります:\\n${descFunc}`;\n    }\n    yEOL() {\n        // 行末のチェック #1009\n        const eol = this.get();\n        if (!eol) {\n            return null;\n        }\n        // 余剰スタックの確認\n        if (this.stack.length > 0) {\n            const report = this.makeStackBalanceReport();\n            throw NakoSyntaxError.fromNode(report, eol);\n        }\n        this.recentlyCalledFunc = [];\n        return eol; // Token to Ast\n    }\n    /** @returns {Ast | null} */\n    ySentence() {\n        const map = this.peekSourceMap();\n        // 最初の語句が決まっている構文\n        if (this.check('eol')) {\n            return this.yEOL();\n        }\n        if (this.check('もし')) {\n            return this.yIF();\n        }\n        if (this.check('後判定')) {\n            return this.yAtohantei();\n        }\n        if (this.check('エラー監視')) {\n            return this.yTryExcept();\n        }\n        if (this.check('逐次実行')) {\n            return this.yTikuji();\n        }\n        if (this.accept(['抜ける'])) {\n            return { type: 'break', josi: '', ...map, end: this.peekSourceMap() };\n        }\n        if (this.accept(['続ける'])) {\n            return { type: 'continue', josi: '', ...map, end: this.peekSourceMap() };\n        }\n        if (this.accept(['require', 'string', '取込'])) {\n            return this.yRequire();\n        }\n        if (this.accept(['not', '非同期モード'])) {\n            return this.yASyncMode();\n        }\n        if (this.accept(['DNCLモード'])) {\n            return this.yDNCLMode(1);\n        }\n        if (this.accept(['DNCL2モード'])) {\n            return this.yDNCLMode(2);\n        }\n        if (this.accept(['not', 'string', 'モード設定'])) {\n            return this.ySetGenMode(this.y[1].value);\n        }\n        if (this.accept(['not', 'モジュール公開既定値', 'eq', 'string'])) {\n            return this.yExportDefault(this.y[3].value);\n        }\n        // 関数呼び出し演算子\n        if (this.check2(['func', '←'])) {\n            const word = this.get() || NewEmptyToken();\n            throw NakoSyntaxError.fromNode(`関数代入演算子『←』は廃止されました。『${word.value}←』の部分。`, word);\n        }\n        if (this.check2(['func', 'eq'])) {\n            const word = this.get() || NewEmptyToken();\n            throw NakoSyntaxError.fromNode(`関数『${word.value}』に代入できません。`, word);\n        }\n        // 先読みして初めて確定する構文\n        if (this.accept([this.ySpeedMode])) {\n            return this.y[0];\n        }\n        if (this.accept([this.yPerformanceMonitor])) {\n            return this.y[0];\n        }\n        if (this.accept([this.yLet])) {\n            return this.y[0];\n        }\n        if (this.accept([this.yDefTest])) {\n            return this.y[0];\n        }\n        if (this.accept([this.yDefFunc])) {\n            return this.y[0];\n        }\n        // 関数呼び出しの他、各種構文の実装\n        if (this.accept([this.yCall])) {\n            const c1 = this.y[0];\n            if (RenbunJosi.indexOf(c1.josi || '') >= 0) { // 連文をblockとして接続する(もし構文などのため)\n                if (this.stack.length >= 1) { // スタックの余剰をチェック\n                    const report = this.makeStackBalanceReport();\n                    throw NakoSyntaxError.fromNode(report, c1);\n                }\n                const c2 = this.ySentence();\n                if (c2 !== null) {\n                    return {\n                        type: 'block',\n                        block: [c1, c2],\n                        josi: c2.josi,\n                        ...map,\n                        end: this.peekSourceMap()\n                    };\n                }\n            }\n            return c1;\n        }\n        return null;\n    }\n    /** @returns {Ast} */\n    yASyncMode() {\n        const map = this.peekSourceMap();\n        this.genMode = '非同期モード';\n        return { type: 'eol', ...map, end: this.peekSourceMap() };\n    }\n    /** set DNCL mode */\n    yDNCLMode(ver) {\n        const map = this.peekSourceMap();\n        if (ver === 1) {\n            // 配列インデックスは1から\n            this.arrayIndexFrom = 1;\n            // 配列アクセスをJSと逆順で指定する\n            this.flagReverseArrayIndex = true;\n        }\n        else {\n            // ver2はPythonに近いとのこと\n        }\n        // 配列代入時自動で初期化チェックする\n        this.flagCheckArrayInit = true;\n        return { type: 'eol', ...map, end: this.peekSourceMap() };\n    }\n    /** @returns {Ast} */\n    ySetGenMode(mode) {\n        const map = this.peekSourceMap();\n        this.genMode = mode;\n        return { type: 'eol', ...map, end: this.peekSourceMap() };\n    }\n    /** @returns {Ast} */\n    yExportDefault(mode) {\n        const map = this.peekSourceMap();\n        this.isExportDefault = mode === '公開' ? true : false;\n        this.moduleExport[this.modName] = this.isExportDefault;\n        return { type: 'eol', ...map, end: this.peekSourceMap() };\n    }\n    /** @returns {Ast} */\n    yRequire() {\n        const nameToken = this.y[1];\n        const filename = nameToken.value;\n        const modName = NakoLexer.filenameToModName(filename);\n        if (this.modList.indexOf(modName) < 0) {\n            // 優先度が最も高いのは modList[0]\n            // [memo] モジュールの検索優先度は、下に書くほど高くなる\n            const modSelf = this.modList.shift();\n            if (modSelf) {\n                this.modList.unshift(modName);\n                this.modList.unshift(modSelf);\n            }\n        }\n        return {\n            type: 'require',\n            value: filename,\n            josi: '',\n            ...this.peekSourceMap(),\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast} */\n    yBlock() {\n        const map = this.peekSourceMap();\n        const blocks = [];\n        if (this.check('ここから')) {\n            this.get();\n        }\n        while (!this.isEOF()) {\n            if (this.checkTypes(['違えば', 'ここまで', 'エラー'])) {\n                break;\n            }\n            if (!this.accept([this.ySentence])) {\n                break;\n            }\n            blocks.push(this.y[0]);\n        }\n        return { type: 'block', block: blocks, ...map, end: this.peekSourceMap() };\n    }\n    yDefFuncReadArgs() {\n        if (!this.check('(')) {\n            return null;\n        }\n        const a = [];\n        this.get(); // skip '('\n        while (!this.isEOF()) {\n            if (this.check(')')) {\n                this.get(); // skip ''\n                break;\n            }\n            const t = this.get();\n            if (t) {\n                a.push(t);\n            } // Token to Ast\n            if (this.check('comma')) {\n                this.get();\n            }\n        }\n        return a;\n    }\n    yDefTest() {\n        return this.yDef('def_test');\n    }\n    yDefFunc() {\n        return this.yDef('def_func');\n    }\n    /** ユーザー関数の定義 */\n    yDef(type) {\n        if (!this.check(type)) { // yDefFuncから呼ばれれば def_func なのかをチェックする\n            return null;\n        }\n        const map = this.peekSourceMap();\n        const def = this.get(); // ●\n        if (!def) {\n            return null;\n        }\n        let isExport = this.isExportDefault;\n        if (this.check('{')) {\n            this.get();\n            const funcAttribute = this.get();\n            if (this.check('}')) {\n                this.get();\n            }\n            else {\n                throw NakoSyntaxError.fromNode('関数の属性の指定が正しくありません。『{』と『}』で囲む必要があります。', def);\n            }\n            if (funcAttribute != null) {\n                if (funcAttribute.value === '公開') {\n                    isExport = true;\n                }\n                if (funcAttribute.value === '非公開') {\n                    isExport = false;\n                }\n                if (funcAttribute.value === 'エクスポート') {\n                    isExport = true;\n                }\n            }\n        }\n        let defArgs = [];\n        if (this.check('(')) {\n            defArgs = this.yDefFuncReadArgs() || [];\n        } // // lexerでも解析しているが再度詳しく\n        const funcName = this.get();\n        if (!funcName || funcName.type !== 'func') {\n            this.logger.debug(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, true) + 'の宣言でエラー。', funcName);\n            throw NakoSyntaxError.fromNode(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, false) + 'の宣言でエラー。', def);\n        }\n        if (this.check('(')) {\n            // 関数引数の二重定義\n            if (defArgs.length > 0) {\n                this.logger.debug(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, true) + 'の宣言で、引数定義は名前の前か後に一度だけ可能です。', funcName);\n                throw NakoSyntaxError.fromNode(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, false) + 'の宣言で、引数定義は名前の前か後に一度だけ可能です。', funcName);\n            }\n            defArgs = this.yDefFuncReadArgs() || [];\n        }\n        if (this.check('とは')) {\n            this.get();\n        }\n        let block = null;\n        let multiline = false;\n        let asyncFn = false;\n        if (this.check('ここから')) {\n            multiline = true;\n        }\n        if (this.check('eol')) {\n            multiline = true;\n        }\n        try {\n            this.funcLevel++;\n            this.usedAsyncFn = false;\n            // ローカル変数を生成\n            const backupLocalvars = this.localvars;\n            this.localvars = { 'それ': { type: 'var', value: '' } };\n            if (multiline) {\n                this.saveStack();\n                // 関数の引数をローカル変数として登録する\n                for (const arg of defArgs) {\n                    const fnName = (arg.value) ? arg.value + '' : '';\n                    this.localvars[fnName] = { 'type': 'var', 'value': '' };\n                }\n                block = this.yBlock();\n                if (this.check('ここまで')) {\n                    this.get();\n                }\n                else {\n                    throw NakoSyntaxError.fromNode('『ここまで』がありません。関数定義の末尾に必要です。', def);\n                }\n                this.loadStack();\n            }\n            else {\n                this.saveStack();\n                block = this.ySentence();\n                this.loadStack();\n            }\n            this.funcLevel--;\n            asyncFn = this.usedAsyncFn;\n            this.localvars = backupLocalvars;\n        }\n        catch (err) {\n            this.logger.debug(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, true) +\n                'の定義で以下のエラーがありました。\\n' + err.message, def);\n            throw NakoSyntaxError.fromNode(this.nodeToStr(funcName, { depth: 0, typeName: '関数' }, false) +\n                'の定義で以下のエラーがありました。\\n' + err.message, def);\n        }\n        return {\n            type,\n            name: funcName,\n            args: defArgs,\n            block: block || [],\n            asyncFn,\n            isExport,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yIFCond() {\n        const map = this.peekSourceMap();\n        let a = this.yGetArg();\n        if (!a) {\n            return null;\n        }\n        // console.log('@@yIFCond=', a)\n        // チェック : Aならば\n        if (a.josi === 'ならば') {\n            return a;\n        }\n        if (a.josi === 'でなければ') {\n            a = { type: 'not', value: a, josi: '', ...map, end: this.peekSourceMap() };\n            return a;\n        }\n        // チェック : AがBならば --- 「関数B(A)」のとき\n        if ((a.josi !== '') && (this.check('func'))) {\n            // もし文で関数呼び出しがある場合\n            this.stack.push(a);\n            a = this.yCall();\n        }\n        else \n        // チェック : AがBならば --- 「A = B」のとき\n        if (a.josi === 'が') {\n            const tmpI = this.index;\n            const b = this.yGetArg();\n            if (!b) {\n                throw NakoSyntaxError.fromNode('もし文の条件「AがBならば」でBがないか条件が複雑過ぎます。' +\n                    this.nodeToStr(this.peek(), { depth: 1 }, false), map);\n            }\n            if (this.check('ならば')) {\n                const naraba = this.get() || { 'value': 'ならば' };\n                b.josi = naraba.value;\n            }\n            if (b && (b.josi === 'ならば' || b.josi === 'でなければ')) {\n                return {\n                    type: 'op',\n                    operator: (b.josi === 'でなければ') ? 'noteq' : 'eq',\n                    left: a,\n                    right: b,\n                    josi: '',\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n            this.index = tmpI;\n        }\n        // もし文で追加の関数呼び出しがある場合\n        if (!this.check('ならば')) {\n            this.stack.push(a);\n            a = this.yCall();\n        }\n        // (ならば|でなければ)を確認\n        if (!this.check('ならば')) {\n            const smap = a || { type: '?', ...map };\n            this.logger.debug('もし文で『ならば』がないか、条件が複雑過ぎます。' + this.nodeToStr(this.peek(), { depth: 1 }, false) + 'の直前に『ならば』を書いてください。', smap);\n            throw NakoSyntaxError.fromNode('もし文で『ならば』がないか、条件が複雑過ぎます。' + this.nodeToStr(this.peek(), { depth: 1 }, false) + 'の直前に『ならば』を書いてください。', smap);\n        }\n        const naraba = this.get();\n        // 否定形のチェック\n        if (naraba && naraba.value === 'でなければ') {\n            a = {\n                type: 'not',\n                value: a,\n                josi: '',\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        return a;\n    }\n    /** @returns {Ast | null} */\n    yIF() {\n        const map = this.peekSourceMap();\n        if (!this.check('もし')) {\n            return null;\n        }\n        const mosi = this.get(); // skip もし\n        if (mosi == null) {\n            return null;\n        }\n        while (this.check('comma')) {\n            this.get();\n        } // skip commafffff\n        let cond = null;\n        try {\n            cond = this.yIFCond();\n        }\n        catch (err) {\n            throw NakoSyntaxError.fromNode('『もし』文の条件で次のエラーがあります。\\n' + err.message, mosi);\n        }\n        if (cond === null) {\n            throw NakoSyntaxError.fromNode('『もし』文で条件の指定が空です。', mosi);\n        }\n        let trueBlock = null;\n        let falseBlock = null;\n        let tanbun = false;\n        // True Block\n        if (this.check('eol')) {\n            trueBlock = this.yBlock();\n        }\n        else {\n            trueBlock = this.ySentence();\n            tanbun = true;\n        }\n        // skip EOL\n        while (this.check('eol')) {\n            this.get();\n        }\n        // Flase Block\n        if (this.check('違えば')) {\n            this.get(); // skip 違えば\n            while (this.check('comma')) {\n                this.get();\n            }\n            if (this.check('eol')) {\n                falseBlock = this.yBlock();\n            }\n            else {\n                falseBlock = this.ySentence();\n                tanbun = true;\n            }\n        }\n        if (tanbun === false) {\n            if (this.check('ここまで')) {\n                this.get();\n            }\n            else {\n                throw NakoSyntaxError.fromNode('『もし』文で『ここまで』がありません。', mosi);\n            }\n        }\n        return {\n            type: 'if',\n            expr: cond || [],\n            block: trueBlock || [],\n            false_block: falseBlock || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    ySpeedMode() {\n        const map = this.peekSourceMap();\n        if (!this.check2(['string', '実行速度優先'])) {\n            return null;\n        }\n        const optionNode = this.get();\n        this.get();\n        let val = '';\n        if (optionNode && optionNode.value) {\n            val = optionNode.value;\n        }\n        else {\n            return null;\n        }\n        const options = { 行番号無し: false, 暗黙の型変換無し: false, 強制ピュア: false, それ無効: false };\n        for (const name of val.split('/')) {\n            // 全て有効化\n            if (name === '全て') {\n                for (const k of Object.keys(options)) {\n                    options[k] = true;\n                }\n                break;\n            }\n            // 個別に有効化\n            if (Object.keys(options).includes(name)) {\n                options[name] = true;\n            }\n            else {\n                // 互換性を考えて、警告に留める。\n                this.logger.warn(`実行速度優先文のオプション『${name}』は存在しません。`, optionNode);\n            }\n        }\n        let multiline = false;\n        if (this.check('ここから')) {\n            this.get();\n            multiline = true;\n        }\n        else if (this.check('eol')) {\n            multiline = true;\n        }\n        let block = null;\n        if (multiline) {\n            block = this.yBlock();\n            if (this.check('ここまで')) {\n                this.get();\n            }\n        }\n        else {\n            block = this.ySentence();\n        }\n        return {\n            type: 'speed_mode',\n            options,\n            block: block || [],\n            josi: '',\n            ...map\n        };\n    }\n    yPerformanceMonitor() {\n        const map = this.peekSourceMap();\n        if (!this.check2(['string', 'パフォーマンスモニタ適用'])) {\n            return null;\n        }\n        const optionNode = this.get();\n        if (!optionNode) {\n            return null;\n        }\n        this.get();\n        const options = { ユーザ関数: false, システム関数本体: false, システム関数: false };\n        for (const name of optionNode.value.split('/')) {\n            // 全て有効化\n            if (name === '全て') {\n                for (const k of Object.keys(options)) {\n                    options[k] = true;\n                }\n                break;\n            }\n            // 個別に有効化\n            if (Object.keys(options).includes(name)) {\n                options[name] = true;\n            }\n            else {\n                // 互換性を考えて、警告に留める。\n                this.logger.warn(`パフォーマンスモニタ適用文のオプション『${name}』は存在しません。`, optionNode);\n            }\n        }\n        let multiline = false;\n        if (this.check('ここから')) {\n            this.get();\n            multiline = true;\n        }\n        else if (this.check('eol')) {\n            multiline = true;\n        }\n        let block = null;\n        if (multiline) {\n            block = this.yBlock();\n            if (this.check('ここまで')) {\n                this.get();\n            }\n        }\n        else {\n            block = this.ySentence();\n        }\n        return {\n            type: 'performance_monitor',\n            options,\n            block: block || [],\n            josi: '',\n            ...map\n        };\n    }\n    /** (非推奨) 「逐次実行」構文 @returns {Ast | null} */\n    yTikuji() {\n        const map = this.peekSourceMap();\n        if (!this.check('逐次実行')) {\n            return null;\n        }\n        const tikuji = this.getCur(); // skip 逐次実行\n        this.logger.warn('『逐次実行』構文の使用は非推奨になりました(https://nadesi.com/v3/doc/go.php?944)。', tikuji);\n        const blocks = [];\n        let errorBlock = null;\n        if (!tikuji || !this.check('eol')) {\n            throw NakoSyntaxError.fromNode('『逐次実行』の直後は改行が必要です。', tikuji);\n        }\n        // ブロックを読む\n        for (;;) {\n            if (this.check('ここまで')) {\n                break;\n            }\n            if (this.check('eol')) {\n                this.get(); // skip EOL\n                continue;\n            }\n            if (this.check2(['エラー', 'ならば'])) {\n                this.get(); // skip エラー\n                this.get(); // skip ならば\n                errorBlock = this.yBlock();\n                break;\n            }\n            let block = null;\n            // 「先に」「次に」句はブロック宣言 #717 (ただしブロック以外も可能)\n            if (this.check('先に') || this.check('次に')) {\n                const tugini = this.get(); // skip 先に | 次に\n                if (this.check('comma')) {\n                    this.get();\n                }\n                if (this.check('eol')) { // block\n                    block = this.yBlock();\n                    if (!this.check('ここまで')) {\n                        let tuginiType = '次に';\n                        if (tugini != null) {\n                            tuginiType = tugini.type;\n                        }\n                        throw NakoSyntaxError.fromNode(`『${tuginiType}』...『ここまで』を対応させてください。`, map);\n                    }\n                    this.get(); // skip 'ここまで'\n                }\n                else { // line\n                    block = this.ySentence();\n                }\n            }\n            else {\n                block = this.ySentence();\n            }\n            // add block\n            if (block != null) {\n                blocks.push(block);\n            }\n        }\n        if (!this.check('ここまで')) {\n            console.log(blocks, this.peek());\n            throw NakoSyntaxError.fromNode('『逐次実行』...『ここまで』を対応させてください。', tikuji);\n        }\n        this.get(); // skip 'ここまで'\n        return {\n            type: 'tikuji',\n            blocks: blocks || [],\n            errorBlock: errorBlock || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /**\n     * 1つ目の値を与え、その後に続く計算式を取得し、優先規則に沿って並び替えして戻す\n     * @param {Ast} firstValue\n     */\n    yGetArgOperator(firstValue) {\n        const args = [firstValue];\n        while (!this.isEOF()) {\n            // 演算子がある？\n            let op = this.peek();\n            if (op && opPriority[op.type]) {\n                op = this.getCur();\n                args.push(op); // Token to Ast\n                // 演算子後の値を取得\n                const v = this.yValue();\n                if (v === null) {\n                    throw NakoSyntaxError.fromNode(`計算式で演算子『${op.value}』後に値がありません`, firstValue);\n                }\n                args.push(v);\n                continue;\n            }\n            break;\n        }\n        if (args.length === 0) {\n            return null;\n        }\n        if (args.length === 1) {\n            return args[0];\n        }\n        return this.infixToAST(args);\n    }\n    yGetArg() {\n        // 値を一つ読む\n        const value1 = this.yValue();\n        if (value1 === null) {\n            return null;\n        }\n        // 計算式がある場合を考慮\n        return this.yGetArgOperator(value1);\n    }\n    infixToPolish(list) {\n        // 中間記法から逆ポーランドに変換\n        const priority = (t) => {\n            if (opPriority[t.type]) {\n                return opPriority[t.type];\n            }\n            return 10;\n        };\n        const stack = [];\n        const polish = [];\n        while (list.length > 0) {\n            const t = list.shift();\n            if (!t) {\n                break;\n            }\n            while (stack.length > 0) { // 優先順位を見て移動する\n                const sTop = stack[stack.length - 1];\n                if (priority(t) > priority(sTop)) {\n                    break;\n                }\n                const tpop = stack.pop();\n                if (!tpop) {\n                    this.logger.error('計算式に間違いがあります。', t);\n                    break;\n                }\n                polish.push(tpop);\n            }\n            stack.push(t);\n        }\n        // 残った要素を積み替える\n        while (stack.length > 0) {\n            const t = stack.pop();\n            if (t) {\n                polish.push(t);\n            }\n        }\n        return polish;\n    }\n    /** @returns {Ast | null} */\n    infixToAST(list) {\n        if (list.length === 0) {\n            return null;\n        }\n        // 逆ポーランドを構文木に\n        const josi = list[list.length - 1].josi;\n        const node = list[list.length - 1];\n        const polish = this.infixToPolish(list);\n        /** @type {Ast[]} */\n        const stack = [];\n        for (const t of polish) {\n            if (!opPriority[t.type]) { // 演算子ではない\n                stack.push(t);\n                continue;\n            }\n            const b = stack.pop();\n            const a = stack.pop();\n            if (a === undefined || b === undefined) {\n                this.logger.debug('--- 計算式(逆ポーランド) ---\\n' + JSON.stringify(polish));\n                throw NakoSyntaxError.fromNode('計算式でエラー', node);\n            }\n            /** @type {Ast} */\n            const op = {\n                type: 'op',\n                operator: t.type,\n                left: a,\n                right: b,\n                josi,\n                startOffset: a.startOffset,\n                endOffset: a.endOffset,\n                line: a.line,\n                column: a.column,\n                file: a.file\n            };\n            stack.push(op);\n        }\n        const ans = stack.pop();\n        if (!ans) {\n            return null;\n        }\n        return ans;\n    }\n    yGetArgParen(y) {\n        let isClose = false;\n        const si = this.stack.length;\n        while (!this.isEOF()) {\n            if (this.check(')')) {\n                isClose = true;\n                break;\n            }\n            const v = this.yGetArg();\n            if (v) {\n                this.pushStack(v);\n                if (this.check('comma')) {\n                    this.get();\n                }\n                continue;\n            }\n            break;\n        }\n        if (!isClose) {\n            throw NakoSyntaxError.fromNode(`C風関数『${y[0].value}』でカッコが閉じていません`, y[0]);\n        }\n        const a = [];\n        while (si < this.stack.length) {\n            const v = this.popStack();\n            if (v) {\n                a.unshift(v);\n            }\n        }\n        return a;\n    }\n    /** @returns {Ast | null} */\n    yRepeatTime() {\n        const map = this.peekSourceMap();\n        if (!this.check('回')) {\n            return null;\n        }\n        this.get(); // skip '回'\n        if (this.check('comma')) {\n            this.get();\n        } // skip comma\n        if (this.check('繰返')) {\n            this.get();\n        } // skip 'N回、繰り返す' (#924)\n        let num = this.popStack([]);\n        let multiline = false;\n        let block = null;\n        if (num === null) {\n            num = { type: 'word', value: 'それ', josi: '', ...map, end: this.peekSourceMap() };\n        }\n        if (this.check('comma')) {\n            this.get();\n        }\n        if (this.check('ここから')) {\n            this.get();\n            multiline = true;\n        }\n        else if (this.check('eol')) {\n            multiline = true;\n        }\n        if (multiline) { // multiline\n            block = this.yBlock();\n            if (this.check('ここまで')) {\n                this.get();\n            }\n            else {\n                throw NakoSyntaxError.fromNode('『ここまで』がありません。『回』...『ここまで』を対応させてください。', map);\n            }\n        }\n        else {\n            // singleline\n            block = this.ySentence();\n        }\n        return {\n            type: 'repeat_times',\n            value: num,\n            block: block || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yWhile() {\n        const map = this.peekSourceMap();\n        if (!this.check('間')) {\n            return null;\n        }\n        this.get(); // skip '間'\n        while (this.check('comma')) {\n            this.get();\n        } // skip ','\n        if (this.check('繰返')) {\n            this.get();\n        } // skip '繰り返す' #927\n        const cond = this.popStack();\n        if (cond === null) {\n            throw NakoSyntaxError.fromNode('『間』で条件がありません。', map);\n        }\n        if (this.check('comma')) {\n            this.get();\n        }\n        if (!this.checkTypes(['ここから', 'eol'])) {\n            throw NakoSyntaxError.fromNode('『間』の直後は改行が必要です', map);\n        }\n        const block = this.yBlock();\n        if (this.check('ここまで')) {\n            this.get();\n        }\n        return {\n            type: 'while',\n            cond,\n            block,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yAtohantei() {\n        const map = this.peekSourceMap();\n        if (this.check('後判定')) {\n            this.get();\n        } // skip 後判定\n        if (this.check('繰返')) {\n            this.get();\n        } // skip 繰り返す\n        if (this.check('ここから')) {\n            this.get();\n        }\n        const block = this.yBlock();\n        if (this.check('ここまで')) {\n            this.get();\n        }\n        if (this.check('comma')) {\n            this.get();\n        }\n        let cond = this.yGetArg(); // 条件\n        let bUntil = false;\n        const t = this.peek();\n        if (t && t.value === 'なる' && (t.josi === 'まで' || t.josi === 'までの')) {\n            this.get(); // skip なるまで\n            bUntil = true;\n        }\n        if (this.check('間')) {\n            this.get();\n        } // skip 間\n        if (bUntil) { // 条件を反転する\n            cond = {\n                type: 'not',\n                value: cond,\n                josi: '',\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        return {\n            type: 'atohantei',\n            cond: cond || [],\n            block,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yFor() {\n        let flagDown = true; // AからBまでの時、A>=Bを許容するかどうか\n        const map = this.peekSourceMap();\n        if (this.check('繰返') || this.check('増繰返') || this.check('減繰返')) {\n            // pass\n        }\n        else {\n            return null;\n        }\n        const kurikaesu = this.getCur(); // skip 繰り返す\n        // スタックに(増や|減ら)してがある？\n        const incdec = this.stack.pop();\n        if (incdec) {\n            if (incdec.type === 'word' && (incdec.value === '増' || incdec.value === '減')) {\n                if (incdec.value === '増') {\n                    flagDown = false;\n                }\n                kurikaesu.type = incdec.value + kurikaesu.type; // typeを増繰返 | 減繰返 に変換\n            }\n            else {\n                // 普通の繰り返しの場合\n                this.stack.push(incdec); // 違ったので改めて追加\n            }\n        }\n        let vInc = null;\n        if (kurikaesu.type === '増繰返' || kurikaesu.type === '減繰返') {\n            vInc = this.popStack(['ずつ']);\n            if (kurikaesu.type === '増繰返') {\n                flagDown = false;\n            }\n        }\n        const vTo = this.popStack(['まで']);\n        const vFrom = this.popStack(['から']);\n        const word = this.popStack(['を', 'で']);\n        if (vFrom === null || vTo === null) {\n            throw NakoSyntaxError.fromNode('『繰り返す』文でAからBまでの指定がありません。', kurikaesu);\n        }\n        if (this.check('comma')) {\n            this.get();\n        } // skip comma\n        let multiline = false;\n        if (this.check('ここから')) {\n            multiline = true;\n            this.get();\n        }\n        else if (this.check('eol')) {\n            multiline = true;\n            this.get();\n        }\n        let block = null;\n        if (multiline) {\n            block = this.yBlock();\n            if (this.check('ここまで')) {\n                this.get();\n            }\n            else {\n                throw NakoSyntaxError.fromNode('『ここまで』がありません。『繰り返す』...『ここまで』を対応させてください。', map);\n            }\n        }\n        else {\n            block = this.ySentence();\n        }\n        return {\n            type: 'for',\n            from: vFrom,\n            to: vTo,\n            inc: vInc,\n            flagDown,\n            word,\n            block: block || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yReturn() {\n        const map = this.peekSourceMap();\n        if (!this.check('戻る')) {\n            return null;\n        }\n        this.get(); // skip '戻る'\n        const v = this.popStack(['で', 'を']);\n        if (this.stack.length > 0) {\n            throw NakoSyntaxError.fromNode('『戻』文の直前に未解決の引数があります。『(式)を戻す』のように式をカッコで括ってください。', map);\n        }\n        return {\n            type: 'return',\n            value: v,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** @returns {Ast | null} */\n    yForEach() {\n        const map = this.peekSourceMap();\n        if (!this.check('反復')) {\n            return null;\n        }\n        this.get(); // skip '反復'\n        while (this.check('comma')) {\n            this.get();\n        } // skip ','\n        const target = this.popStack(['を']);\n        const name = this.popStack(['で']);\n        let block = null;\n        let multiline = false;\n        if (this.check('ここから')) {\n            multiline = true;\n            this.get();\n        }\n        else if (this.check('eol')) {\n            multiline = true;\n        }\n        if (multiline) {\n            block = this.yBlock();\n            if (this.check('ここまで')) {\n                this.get();\n            }\n        }\n        else {\n            block = this.ySentence();\n        }\n        return {\n            type: 'foreach',\n            name,\n            target,\n            block: block || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** 条件分岐構文 */\n    ySwitch() {\n        const map = this.peekSourceMap();\n        if (!this.check('条件分岐')) {\n            return null;\n        }\n        const joukenbunki = this.get(); // skip '条件分岐'\n        if (!joukenbunki) {\n            return null;\n        }\n        const eol = this.get(); // skip 'eol'\n        if (!eol) {\n            return null;\n        }\n        const value = this.popStack(['で']);\n        if (!value) {\n            throw NakoSyntaxError.fromNode('『(値)で条件分岐』のように記述してください。', joukenbunki);\n        }\n        if (eol.type !== 'eol') {\n            throw NakoSyntaxError.fromNode('『条件分岐』の直後は改行してください。', joukenbunki);\n        }\n        let isDefaultClause = false; // 「違えば」内かどうか\n        let skippedKokomade = false;\n        const cases = [];\n        while (!this.isEOF()) {\n            if (this.check('ここまで')) {\n                if (skippedKokomade) {\n                    throw NakoSyntaxError.fromNode('『条件分岐』は『(条件)ならば〜ここまで』と記述してください。', joukenbunki);\n                }\n                this.get(); // skip ここまで\n                break;\n            }\n            if (this.check('eol')) {\n                this.get();\n                continue;\n            }\n            if (isDefaultClause) {\n                throw NakoSyntaxError.fromNode('『条件分岐』で『違えば〜ここまで』の後に処理を続けることは出来ません。', joukenbunki);\n            }\n            // 違えば？\n            let cond = null;\n            const condToken = this.peek();\n            if (condToken && condToken.type === '違えば') {\n                // 違えば\n                skippedKokomade = false;\n                isDefaultClause = true;\n                cond = this.get(); // skip 違えば // Token to Ast\n                if (this.check('comma')) {\n                    this.get();\n                } // skip ','\n            }\n            else {\n                // ＊＊＊ならば\n                if (skippedKokomade) {\n                    throw NakoSyntaxError.fromNode('『条件分岐』は『(条件)ならば〜ここまで』と記述してください。', joukenbunki);\n                }\n                // 「＊＊ならば」を得る\n                cond = this.yValue();\n                if (!cond) {\n                    throw NakoSyntaxError.fromNode('『条件分岐』は『(条件)ならば〜ここまで』と記述してください。', joukenbunki);\n                }\n                const naraba = this.get(); // skip ならば\n                if (!naraba || naraba.type !== 'ならば') {\n                    throw NakoSyntaxError.fromNode('『条件分岐』で条件は＊＊ならばと記述してください。', joukenbunki);\n                }\n                if (this.check('comma')) {\n                    this.get();\n                } // skip ','\n            }\n            // 条件にあったときに実行すること\n            const condBlock = this.yBlock();\n            const kokomade = this.peek();\n            if (kokomade && kokomade.type === 'ここまで') {\n                this.get(); // skip ここまで\n            }\n            else {\n                if (isDefaultClause) {\n                    throw NakoSyntaxError.fromNode('『条件分岐』は『違えば〜ここまで』と記述してください。', joukenbunki);\n                }\n                // 次が「違えば」の場合に限り、「もし〜ここまで」の「ここまで」を省略できる\n                skippedKokomade = true;\n            }\n            cases.push([cond, condBlock]);\n        }\n        return {\n            type: 'switch',\n            value,\n            cases: cases || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** 無名関数 */\n    yMumeiFunc() {\n        const map = this.peekSourceMap();\n        if (!this.check('def_func')) {\n            return null;\n        }\n        const def = this.get();\n        if (!def) {\n            return null;\n        }\n        let args = [];\n        // 「,」を飛ばす\n        if (this.check('comma')) {\n            this.get();\n        }\n        // 関数の引数定義は省略できる\n        if (this.check('(')) {\n            args = this.yDefFuncReadArgs() || [];\n        }\n        // 「,」を飛ばす\n        if (this.check('comma')) {\n            this.get();\n        }\n        // ブロックを読む\n        this.funcLevel++;\n        this.saveStack();\n        const block = this.yBlock();\n        // 末尾の「ここまで」をチェック - もしなければエラーにする #1045\n        if (!this.check('ここまで')) {\n            throw NakoSyntaxError.fromNode('『ここまで』がありません。『には』構文か無名関数の末尾に『ここまで』が必要です。', map);\n        }\n        this.get(); // skip ここまで\n        this.loadStack();\n        this.funcLevel--;\n        return {\n            type: 'func_obj',\n            args,\n            block,\n            meta: def.meta,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** 代入構文 */\n    yDainyu() {\n        const map = this.peekSourceMap();\n        const dainyu = this.get(); // 代入\n        if (dainyu === null) {\n            return null;\n        }\n        const value = this.popStack(['を']);\n        const word = this.popStack(['へ', 'に']);\n        if (!word || (word.type !== 'word' && word.type !== 'func' && word.type !== '配列参照')) {\n            throw NakoSyntaxError.fromNode('代入文で代入先の変数が見当たりません。『(変数名)に(値)を代入』のように使います。', dainyu);\n        }\n        // 配列への代入\n        if (word.type === '配列参照') {\n            return {\n                type: 'let_array',\n                name: word.name,\n                index: word.index,\n                value,\n                josi: '',\n                checkInit: this.flagCheckArrayInit,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 一般的な変数への代入\n        const word2 = this.getVarName(word);\n        return {\n            type: 'let',\n            name: word2,\n            value,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    /** 定める構文 */\n    ySadameru() {\n        const map = this.peekSourceMap();\n        const sadameru = this.get(); // 定める\n        if (sadameru === null) {\n            return null;\n        }\n        const word = this.popStack(['を']);\n        const value = this.popStack(['へ', 'に', 'と']);\n        if (!word || (word.type !== 'word' && word.type !== 'func' && word.type !== '配列参照')) {\n            throw NakoSyntaxError.fromNode('『定める』文で定数が見当たりません。『(定数名)を(値)に定める』のように使います。', sadameru);\n        }\n        let isExport = this.isExportDefault;\n        if (this.check2(['{', 'word', '}'])) {\n            this.get();\n            const attrNode = this.get();\n            if (attrNode === null) {\n                throw NakoSyntaxError.fromNode('定める『' + word.value + '』の定義エラー', word);\n            }\n            const attr = attrNode.value;\n            if (attr === '公開') {\n                isExport = true;\n            }\n            else if (attr === '非公開') {\n                isExport = false;\n            }\n            else if (attr === 'エクスポート') {\n                isExport = true;\n            }\n            else {\n                this.logger.warn(`不明な変数属性『${attr}』が指定されています。`);\n            }\n            this.get();\n        }\n        // 変数を生成する\n        const nameToken = this.createVar(word, true, isExport);\n        return {\n            type: 'def_local_var',\n            name: nameToken,\n            vartype: '定数',\n            isExport,\n            value,\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    yIncDec() {\n        const map = this.peekSourceMap();\n        const action = this.get(); // (増やす|減らす)\n        if (action === null) {\n            return null;\n        }\n        // 『Nずつ増やして繰り返す』文か？\n        if (this.check('繰返')) {\n            this.pushStack({ type: 'word', value: action.value, josi: action.josi, ...map, end: this.peekSourceMap() });\n            return this.yFor();\n        }\n        // スタックから引数をポップ\n        let value = this.popStack(['だけ', '']);\n        if (!value) {\n            value = { type: 'number', value: 1, josi: 'だけ', ...map, end: this.peekSourceMap() };\n        }\n        const word = this.popStack(['を']);\n        if (!word || (word.type !== 'word' && word.type !== '配列参照')) {\n            throw NakoSyntaxError.fromNode(`『${action.type}』文で定数が見当たりません。『(変数名)を(値)だけ${action.type}』のように使います。`, action);\n        }\n        // 減らすなら-1かける\n        if (action.value === '減') {\n            value = { type: 'op', operator: '*', left: value, right: { type: 'number', value: -1, line: action.line }, josi: '', ...map };\n        }\n        return {\n            type: 'inc',\n            name: word,\n            value,\n            josi: action.josi,\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n    yCall() {\n        if (this.isEOF()) {\n            return null;\n        }\n        // スタックに積んでいく\n        while (!this.isEOF()) {\n            if (this.check('ここから')) {\n                this.get();\n            }\n            // 代入\n            if (this.check('代入')) {\n                return this.yDainyu();\n            }\n            if (this.check('定める')) {\n                return this.ySadameru();\n            }\n            // 制御構文\n            if (this.check('回')) {\n                return this.yRepeatTime();\n            }\n            if (this.check('間')) {\n                return this.yWhile();\n            }\n            if (this.check('繰返') || this.check('増繰返') || this.check('減繰返')) {\n                return this.yFor();\n            }\n            if (this.check('反復')) {\n                return this.yForEach();\n            }\n            if (this.check('条件分岐')) {\n                return this.ySwitch();\n            }\n            if (this.check('戻る')) {\n                return this.yReturn();\n            }\n            if (this.check('増') || this.check('減')) {\n                return this.yIncDec();\n            }\n            // C言語風関数\n            if (this.check2([['func', 'word'], '('])) { // C言語風\n                const cur = this.peek();\n                if (cur && cur.josi === '') {\n                    const t = this.yValue(); // yValueにてC言語風呼び出しをパース\n                    if (t) {\n                        const josi = t.josi || '';\n                        if (t.type === 'func' && (t.josi === '' || RenbunJosi.indexOf(josi) >= 0)) {\n                            t.josi = '';\n                            return t; // 関数なら値とする\n                        }\n                        this.pushStack(t);\n                    }\n                    if (this.check('comma')) {\n                        this.get();\n                    }\n                    continue;\n                }\n            }\n            // なでしこ式関数\n            if (this.check('func')) {\n                const r = this.yCallFunc();\n                if (r === null) {\n                    continue;\n                }\n                // 「〜する間」の形ならスタックに積む。\n                if (this.check('間')) {\n                    this.pushStack(r);\n                    continue;\n                }\n                // 関数呼び出しの直後に、四則演算があるか?\n                if (!this.checkTypes(operatorList)) {\n                    return r; // 関数呼び出しの後に演算子がないのでそのまま関数呼び出しを戻す\n                }\n                // 四則演算があった場合、計算してスタックに載せる\n                const s = this.yGetArgOperator(r);\n                this.pushStack(s);\n                continue;\n            }\n            // 値のとき → スタックに載せる\n            const t = this.yGetArg();\n            if (t) {\n                this.pushStack(t);\n                continue;\n            }\n            break;\n        } // end of while\n        // 助詞が余ってしまった場合\n        if (this.stack.length > 0) {\n            if (this.isReadingCalc) {\n                return this.popStack();\n            }\n            this.logger.debug('--- stack dump ---\\n' + JSON.stringify(this.stack, null, 2) + '\\npeek: ' + JSON.stringify(this.peek(), null, 2));\n            let msgDebug = `不完全な文です。${this.stack.map((n) => this.nodeToStr(n, { depth: 0 }, true)).join('、')}が解決していません。`;\n            let msg = `不完全な文です。${this.stack.map((n) => this.nodeToStr(n, { depth: 0 }, false)).join('、')}が解決していません。`;\n            // 各ノードについて、更に詳細な情報があるなら表示\n            for (const n of this.stack) {\n                const d0 = this.nodeToStr(n, { depth: 0 }, false);\n                const d1 = this.nodeToStr(n, { depth: 1 }, false);\n                if (d0 !== d1) {\n                    msgDebug += `${this.nodeToStr(n, { depth: 0 }, true)}は${this.nodeToStr(n, { depth: 1 }, true)}として使われています。`;\n                    msg += `${d0}は${d1}として使われています。`;\n                }\n            }\n            const first = this.stack[0];\n            const last = this.stack[this.stack.length - 1];\n            this.logger.debug(msgDebug, first);\n            throw NakoSyntaxError.fromNode(msg, first, last);\n        }\n        return this.popStack([]);\n    }\n    /** @returns {Ast | null} */\n    yCallFunc() {\n        const map = this.peekSourceMap();\n        const t = this.get();\n        if (!t) {\n            return null;\n        }\n        const f = t.meta;\n        const funcName = t.value;\n        // (関数)には ... 構文 ... https://github.com/kujirahand/nadesiko3/issues/66\n        let funcObj = null;\n        if (t.josi === 'には') {\n            try {\n                funcObj = this.yMumeiFunc();\n            }\n            catch (err) {\n                throw NakoSyntaxError.fromNode(`『${t.value}には...』で無名関数の定義で以下の間違いがあります。\\n${err.message}`, t);\n            }\n            if (funcObj === null) {\n                throw NakoSyntaxError.fromNode('『Fには』構文がありましたが、関数定義が見当たりません。', t);\n            }\n        }\n        if (!f || typeof f.josi === 'undefined') {\n            throw NakoSyntaxError.fromNode('関数の定義でエラー。', t);\n        }\n        // 最近使った関数を記録\n        this.recentlyCalledFunc.push({ name: funcName, ...f });\n        // 呼び出す関数が非同期呼び出しが必要(asyncFn)ならマーク\n        if (f && f.asyncFn) {\n            this.usedAsyncFn = true;\n        }\n        // 関数の引数を取り出す処理\n        const args = [];\n        let nullCount = 0;\n        let valueCount = 0;\n        for (let i = f.josi.length - 1; i >= 0; i--) {\n            while (true) {\n                // スタックから任意の助詞を持つ値を一つ取り出す、助詞がなければ末尾から得る\n                let popArg = this.popStack(f.josi[i]);\n                if (popArg !== null) {\n                    valueCount++;\n                }\n                else if (i < f.josi.length - 1 || !f.isVariableJosi) {\n                    nullCount++;\n                    popArg = funcObj;\n                }\n                else {\n                    break;\n                }\n                if (popArg !== null && f.funcPointers !== undefined && f.funcPointers[i] !== null) {\n                    if (popArg.type === 'func') { // 引数が関数の参照渡しに該当する場合、typeを『func_pointer』に変更\n                        popArg.type = 'func_pointer';\n                    }\n                    else {\n                        const varname = (f.varnames) ? f.varnames[i] : `${i + 1}番目の引数`;\n                        throw NakoSyntaxError.fromNode(`関数『${t.value}』の引数『${varname}』には関数オブジェクトが必要です。`, t);\n                    }\n                }\n                args.unshift(popArg);\n                if (i < f.josi.length - 1 || !f.isVariableJosi) {\n                    break;\n                }\n            }\n        }\n        // 引数が不足しているとき(つまり、引数にnullがあるとき)、自動的に『変数「それ」』で補完される。\n        // ただし、nullが1つだけなら、変数「それ」で補完されるが、2つ以上あるときは、エラーにする\n        if (nullCount >= 2 && (valueCount > 0 || t.josi === '' || RenbunJosi.indexOf(t.josi) >= 0)) {\n            throw NakoSyntaxError.fromNode(`関数『${t.value}』の引数が不足しています。`, t);\n        }\n        this.usedFuncs.add(t.value);\n        // 関数呼び出しのAstを構築\n        const funcNode = {\n            type: 'func',\n            name: t.value,\n            args,\n            josi: t.josi,\n            ...map,\n            end: this.peekSourceMap()\n        };\n        // 「プラグイン名設定」ならば、そこでスコープを変更することを意味する (#1112)\n        if (funcNode.name === 'プラグイン名設定') {\n            if (args.length > 0 && args[0]) {\n                let fname = '' + args[0].value;\n                if (fname === 'メイン') {\n                    fname = '' + args[0].file;\n                }\n                this.namespaceStack.push(this.modName);\n                this.isExportStack.push(this.isExportDefault);\n                this.modName = NakoLexer.filenameToModName(fname);\n                this.modList.push(this.modName);\n            }\n        }\n        else if (funcNode.name === '名前空間ポップ') { // (#1409)\n            const space = this.namespaceStack.pop();\n            if (space) {\n                this.modName = space;\n            }\n            const isexport = this.isExportStack.pop();\n            if (isexport != null) {\n                this.isExportDefault = isexport;\n            }\n        }\n        // 言い切りならそこで一度切る\n        if (t.josi === '') {\n            return funcNode;\n        }\n        // 「**して、**」の場合も一度切る\n        if (RenbunJosi.indexOf(t.josi) >= 0) {\n            funcNode.josi = 'して';\n            return funcNode;\n        }\n        // 続き\n        funcNode.meta = f;\n        this.pushStack(funcNode);\n        return null;\n    }\n    /** @returns {Ast | null} */\n    yLet() {\n        const map = this.peekSourceMap();\n        // 通常の変数\n        if (this.check2(['word', 'eq'])) {\n            const word = this.peek();\n            let threw = false;\n            try {\n                if (this.accept(['word', 'eq', this.yCalc]) || this.accept(['word', 'eq', this.ySentence])) {\n                    if (this.y[2].type === 'eol') {\n                        throw new Error('値が空です。');\n                    }\n                    if (this.check('comma')) {\n                        this.get();\n                    } // skip comma (ex) name1=val1, name2=val2\n                    const nameToken = this.getVarName(this.y[0]);\n                    const valueToken = this.y[2];\n                    return {\n                        type: 'let',\n                        name: nameToken,\n                        value: valueToken,\n                        ...map,\n                        end: this.peekSourceMap()\n                    };\n                }\n                else {\n                    threw = true;\n                    this.logger.debug(`${this.nodeToStr(word, { depth: 1 }, true)}への代入文で計算式に書き間違いがあります。`, word);\n                    throw NakoSyntaxError.fromNode(`${this.nodeToStr(word, { depth: 1 }, false)}への代入文で計算式に書き間違いがあります。`, map);\n                }\n            }\n            catch (err) {\n                if (threw) {\n                    throw err;\n                }\n                this.logger.debug(`${this.nodeToStr(word, { depth: 1 }, true)}への代入文で計算式に以下の書き間違いがあります。\\n${err.message}`, word);\n                throw NakoSyntaxError.fromNode(`${this.nodeToStr(word, { depth: 1 }, false)}への代入文で計算式に以下の書き間違いがあります。\\n${err.message}`, map);\n            }\n        }\n        // let_array ?\n        if (this.check2(['word', '@'])) {\n            const la = this.yLetArrayAt(map);\n            if (this.check('comma')) {\n                this.get();\n            } // skip comma (ex) name1=val1, name2=val2\n            if (la) {\n                la.checkInit = this.flagCheckArrayInit;\n                return la;\n            }\n        }\n        if (this.check2(['word', '['])) {\n            const lb = this.yLetArrayBracket(map);\n            if (this.check('comma')) {\n                this.get();\n            } // skip comma (ex) name1=val1, name2=val2\n            if (lb) {\n                lb.checkInit = this.flagCheckArrayInit;\n                return lb;\n            }\n        }\n        // ローカル変数定義\n        if (this.accept(['word', 'とは'])) {\n            const wordToken = this.y[0];\n            if (!this.checkTypes(['変数', '定数'])) {\n                throw NakoSyntaxError.fromNode('ローカル変数『' + wordToken.value + '』の定義エラー', wordToken);\n            }\n            const vtype = this.getCur(); // 変数 or 定数\n            let isExport = this.isExportDefault;\n            if (this.check2(['{', 'word', '}'])) {\n                this.get();\n                const attrNode = this.get();\n                if (attrNode === null) {\n                    throw NakoSyntaxError.fromNode('ローカル変数『' + wordToken.value + '』の定義エラー', wordToken);\n                }\n                const attr = attrNode.value;\n                if (attr === '公開') {\n                    isExport = true;\n                }\n                else if (attr === '非公開') {\n                    isExport = false;\n                }\n                else if (attr === 'エクスポート') {\n                    isExport = true;\n                }\n                else {\n                    this.logger.warn(`不明な変数属性『${attr}』が指定されています。`);\n                }\n                this.get();\n            }\n            const word = this.createVar(wordToken, vtype.type === '定数', isExport);\n            // 初期値がある？\n            let value = null;\n            if (this.check('eq')) {\n                this.get();\n                value = this.yCalc();\n            }\n            if (this.check('comma')) {\n                this.get();\n            } // skip comma (ex) name1=val1, name2=val2\n            return {\n                type: 'def_local_var',\n                name: word,\n                vartype: vtype.type,\n                isExport,\n                value,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // ローカル変数定義（その２）\n        if (this.accept(['変数', 'word', 'eq', this.yCalc])) {\n            const word = this.createVar(this.y[1], false, this.isExportDefault);\n            return {\n                type: 'def_local_var',\n                name: word,\n                vartype: '変数',\n                value: this.y[3],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['変数', 'word', '{', 'word', '}', 'eq', this.yCalc])) {\n            let isExport = this.isExportDefault;\n            const attr = this.y[3].value;\n            if (attr === '公開') {\n                isExport = true;\n            }\n            else if (attr === '非公開') {\n                isExport = false;\n            }\n            else if (attr === 'エクスポート') {\n                isExport = true;\n            }\n            else {\n                this.logger.warn(`不明な変数属性『${attr}』が指定されています。`);\n            }\n            const word = this.createVar(this.y[1], false, isExport);\n            return {\n                type: 'def_local_var',\n                name: word,\n                vartype: '変数',\n                isExport,\n                value: this.y[6],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['定数', 'word', 'eq', this.yCalc])) {\n            const word = this.createVar(this.y[1], true, this.isExportDefault);\n            return {\n                type: 'def_local_var',\n                name: word,\n                vartype: '定数',\n                value: this.y[3],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['定数', 'word', '{', 'word', '}', 'eq', this.yCalc])) {\n            let isExport = this.isExportDefault;\n            const attr = this.y[3].value;\n            if (attr === '公開') {\n                isExport = true;\n            }\n            else if (attr === '非公開') {\n                isExport = false;\n            }\n            else if (attr === 'エクスポート') {\n                isExport = true;\n            }\n            else {\n                this.logger.warn(`不明な定数属性『${attr}』が指定されています。`);\n            }\n            const word = this.createVar(this.y[1], true, isExport);\n            return {\n                type: 'def_local_var',\n                name: word,\n                vartype: '定数',\n                isExport,\n                value: this.y[6],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 複数定数への代入 #563\n        if (this.accept(['定数', this.yJSONArray, 'eq', this.yCalc])) {\n            const names = this.y[1];\n            // check array\n            if (names && names.value instanceof Array) {\n                for (const i in names.value) {\n                    if (names.value[i].type !== 'word') {\n                        throw NakoSyntaxError.fromNode(`複数定数の代入文${i + 1}番目でエラー。『定数[A,B,C]=[1,2,3]』の書式で記述してください。`, this.y[0]);\n                    }\n                }\n            }\n            else {\n                throw NakoSyntaxError.fromNode('複数定数の代入文でエラー。『定数[A,B,C]=[1,2,3]』の書式で記述してください。', this.y[0]);\n            }\n            names.value = this.createVarList(names.value, true, this.isExportDefault);\n            return {\n                type: 'def_local_varlist',\n                names: names.value,\n                vartype: '定数',\n                value: this.y[3],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 複数変数への代入 #563\n        if (this.accept(['変数', this.yJSONArray, 'eq', this.yCalc])) {\n            const names = this.y[1];\n            // check array\n            if (names && names.value instanceof Array) {\n                for (const i in names.value) {\n                    if (names.value[i].type !== 'word') {\n                        throw NakoSyntaxError.fromNode(`複数変数の代入文${i + 1}番目でエラー。『変数[A,B,C]=[1,2,3]』の書式で記述してください。`, this.y[0]);\n                    }\n                }\n            }\n            else {\n                throw NakoSyntaxError.fromNode('複数変数の代入文でエラー。『変数[A,B,C]=[1,2,3]』の書式で記述してください。', this.y[0]);\n            }\n            names.value = this.createVarList(names.value, false, this.isExportDefault);\n            return {\n                type: 'def_local_varlist',\n                names: names.value,\n                vartype: '変数',\n                value: this.y[3],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 複数変数への代入 #563\n        if (this.check2(['word', 'comma', 'word'])) {\n            // 2 word\n            if (this.accept(['word', 'comma', 'word', 'eq', this.yCalc])) {\n                let names = [this.y[0], this.y[2]];\n                names = this.createVarList(names, false, this.isExportDefault);\n                return {\n                    type: 'def_local_varlist',\n                    names,\n                    vartype: '変数',\n                    value: this.y[4],\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n            // 3 word\n            if (this.accept(['word', 'comma', 'word', 'comma', 'word', 'eq', this.yCalc])) {\n                let names = [this.y[0], this.y[2], this.y[4]];\n                names = this.createVarList(names, false, this.isExportDefault);\n                return {\n                    type: 'def_local_varlist',\n                    names,\n                    vartype: '変数',\n                    value: this.y[6],\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n            // 4 word\n            if (this.accept(['word', 'comma', 'word', 'comma', 'word', 'comma', 'word', 'eq', this.yCalc])) {\n                let names = [this.y[0], this.y[2], this.y[4], this.y[6]];\n                names = this.createVarList(names, false, this.isExportDefault);\n                return {\n                    type: 'def_local_varlist',\n                    names,\n                    vartype: '変数',\n                    value: this.y[8],\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n            // 5 word\n            if (this.accept(['word', 'comma', 'word', 'comma', 'word', 'comma', 'word', 'comma', 'word', 'eq', this.yCalc])) {\n                let names = [this.y[0], this.y[2], this.y[4], this.y[6], this.y[8]];\n                names = this.createVarList(names, false, this.isExportDefault);\n                return {\n                    type: 'def_local_varlist',\n                    names,\n                    vartype: '変数',\n                    value: this.y[10],\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n        }\n        return null;\n    }\n    /**\n     * 配列のインデックスが1から始まる場合を考慮するか\n     * @param {Ast} node\n     * @returns\n     */\n    checkArrayIndex(node) {\n        // 配列が0から始まるのであればそのまま返す\n        if (this.arrayIndexFrom === 0) {\n            return node;\n        }\n        // 配列が1から始まるのであれば演算を加えて返す\n        return {\n            ...node,\n            'type': 'op',\n            'operator': '-',\n            'left': node,\n            'right': {\n                ...node,\n                'type': 'number',\n                'value': this.arrayIndexFrom\n            }\n        };\n    }\n    /**\n     * 配列のインデックスを逆順にするのを考慮するか\n     * @param {Ast[]| null} ary\n     */\n    checkArrayReverse(ary) {\n        if (!ary) {\n            return [];\n        }\n        if (!this.flagReverseArrayIndex) {\n            return ary;\n        }\n        // 二次元以上の配列変数のアクセスを[y][x]ではなく[x][y]と順序を変更する\n        if (ary.length <= 1) {\n            return ary;\n        }\n        return ary.reverse();\n    }\n    /** @returns {Ast | null} */\n    yLetArrayAt(map) {\n        // 一次元配列\n        if (this.accept(['word', '@', this.yValue, 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: [this.checkArrayIndex(this.y[2])],\n                value: this.y[4],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 二次元配列\n        if (this.accept(['word', '@', this.yValue, '@', this.yValue, 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4])]),\n                value: this.y[6],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 三次元配列\n        if (this.accept(['word', '@', this.yValue, '@', this.yValue, '@', this.yValue, 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4]), this.checkArrayIndex(this.y[6])]),\n                value: this.y[8],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 二次元配列(カンマ指定)\n        if (this.accept(['word', '@', this.yValue, 'comma', this.yValue, 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4])]),\n                value: this.y[6],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 三次元配列(カンマ指定)\n        if (this.accept(['word', '@', this.yValue, 'comma', this.yValue, 'comma', this.yValue, 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4]), this.checkArrayIndex(this.y[6])]),\n                value: this.y[8],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        return null;\n    }\n    /** @returns {Ast | null} */\n    yLetArrayBracket(map) {\n        // 一次元配列\n        if (this.accept(['word', '[', this.yCalc, ']', 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: [this.checkArrayIndex(this.y[2])],\n                value: this.y[5],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 二次元配列\n        if (this.accept(['word', '[', this.yCalc, ']', '[', this.yCalc, ']', 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[5])]),\n                value: this.y[8],\n                tag: '2',\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['word', '[', this.yCalc, 'comma', this.yCalc, ']', 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4])]),\n                value: this.y[7],\n                tag: '2',\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 三次元配列\n        if (this.accept(['word', '[', this.yCalc, ']', '[', this.yCalc, ']', '[', this.yCalc, ']', 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[5]), this.checkArrayIndex(this.y[8])]),\n                value: this.y[11],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['word', '[', this.yCalc, 'comma', this.yCalc, 'comma', this.yCalc, ']', 'eq', this.yCalc])) {\n            return {\n                type: 'let_array',\n                name: this.getVarName(this.y[0]),\n                index: this.checkArrayReverse([this.checkArrayIndex(this.y[2]), this.checkArrayIndex(this.y[4]), this.checkArrayIndex(this.y[6])]),\n                value: this.y[9],\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        return null;\n    }\n    /** @returns {Ast | null} */\n    yCalc() {\n        const map = this.peekSourceMap();\n        if (this.check('eol')) {\n            return null;\n        }\n        // 値を一つ読む\n        const t = this.yGetArg();\n        if (!t) {\n            return null;\n        }\n        // 助詞がある？ つまり、関数呼び出しがある？\n        if (t.josi === '') {\n            return t;\n        } // 値だけの場合\n        // 関数の呼び出しがあるなら、スタックに載せて関数読み出しを呼ぶ\n        const tmpReadingCalc = this.isReadingCalc;\n        this.isReadingCalc = true;\n        this.pushStack(t);\n        const t1 = this.yCall();\n        this.isReadingCalc = tmpReadingCalc;\n        if (!t1) {\n            // 関数がなければ、先ほど積んだ値をスタックから取り出して返す\n            return this.popStack();\n        }\n        // 計算式をfCalcとする\n        let fCalc = t1;\n        // それが連文か助詞を読んで確認\n        if (RenbunJosi.indexOf(t1.josi || '') >= 0) {\n            // 連文なら右側を読んで左側とくっつける\n            const t2 = this.yCalc();\n            if (t2) {\n                fCalc = {\n                    type: 'renbun',\n                    left: t1,\n                    right: t2,\n                    josi: t2.josi,\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n        }\n        // 演算子があれば続ける\n        const op = this.peek();\n        if (!op) {\n            return fCalc;\n        }\n        if (opPriority[op.type]) {\n            return this.yGetArgOperator(fCalc);\n        }\n        return fCalc;\n    }\n    /** @returns {Ast | null} */\n    yValueKakko() {\n        if (!this.check('(')) {\n            return null;\n        }\n        const t = this.get(); // skip '('\n        if (!t) {\n            throw new Error('[System Error] check したのに get できない');\n        }\n        this.saveStack();\n        const v = this.yCalc() || this.ySentence();\n        if (v === null) {\n            const v2 = this.get();\n            this.logger.debug('(...)の解析エラー。' + this.nodeToStr(v2, { depth: 1 }, true) + 'の近く', t);\n            throw NakoSyntaxError.fromNode('(...)の解析エラー。' + this.nodeToStr(v2, { depth: 1 }, false) + 'の近く', t);\n        }\n        if (!this.check(')')) {\n            this.logger.debug('(...)の解析エラー。' + this.nodeToStr(v, { depth: 1 }, true) + 'の近く', t);\n            throw NakoSyntaxError.fromNode('(...)の解析エラー。' + this.nodeToStr(v, { depth: 1 }, false) + 'の近く', t);\n        }\n        const closeParent = this.get(); // skip ')'\n        this.loadStack();\n        if (closeParent) {\n            v.josi = closeParent.josi;\n        }\n        return v;\n    }\n    /** @returns {Ast | null} */\n    yValue() {\n        const map = this.peekSourceMap();\n        // カンマなら飛ばす #877\n        if (this.check('comma')) {\n            this.get();\n        }\n        // プリミティブな値\n        if (this.checkTypes(['number', 'bigint', 'string'])) {\n            return this.getCur();\n        } // Token To Ast\n        // 丸括弧\n        if (this.check('(')) {\n            return this.yValueKakko();\n        }\n        // マイナス記号\n        if (this.check2(['-', 'number']) || this.check2(['-', 'word']) || this.check2(['-', 'func'])) {\n            const m = this.get(); // skip '-'\n            const v = this.yValue();\n            const josi = (v && v.josi) ? v.josi : '';\n            const line = (m && m.line) ? m.line : 0;\n            return {\n                type: 'op',\n                operator: '*',\n                left: { type: 'number', value: -1, line },\n                right: v || [],\n                josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // NOT\n        if (this.check('not')) {\n            this.get(); // skip '!'\n            const v = this.yValue();\n            const josi = (v && v.josi) ? v.josi : '';\n            return {\n                type: 'not',\n                value: v,\n                josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // JSON object\n        const a = this.yJSONArray();\n        if (a) {\n            return a;\n        }\n        const o = this.yJSONObject();\n        if (o) {\n            return o;\n        }\n        // 一語関数\n        const splitType = operatorList.concat(['eol', ')', ']', 'ならば', '回', '間', '反復', '条件分岐']);\n        if (this.check2(['func', splitType])) {\n            const tt = this.get();\n            if (!tt) {\n                throw new Error('[System Error] 正しく値が取れませんでした。');\n            }\n            const f = this.getVarNameRef(tt);\n            this.usedFuncs.add(f.value);\n            // 引数の個数をチェック\n            const meta = f.meta;\n            const args = [];\n            if (!meta) {\n                throw NakoSyntaxError.fromNode(`一語関数『${f.name}』は存在しません。`, tt);\n            }\n            if (meta.josi && meta.josi.length === 1) {\n                args.push({ type: 'word', value: 'それ' });\n            }\n            else if (meta.josi && meta.josi.length >= 2) {\n                throw NakoSyntaxError.fromNode(`関数『${f.name}』で引数が指定されていません。${meta.josi.length}個の引数を指定してください。`, tt);\n            }\n            return {\n                type: 'func',\n                name: f.value,\n                args,\n                josi: f.josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // C風関数呼び出し FUNC(...)\n        if (this.check2([['func', 'word'], '(']) && this.peekDef().josi === '') {\n            const f = this.peek();\n            if (this.accept([['func', 'word'], '(', this.yGetArgParen, ')'])) {\n                const ff = this.getVarNameRef(this.y[0]);\n                const args = this.y[2];\n                const funcName = ff.value;\n                this.usedFuncs.add(funcName);\n                // 引数の個数をチェック\n                const meta = ff.meta;\n                if (meta && meta.josi) {\n                    // 引数の個数が異なる場合\n                    if (meta.josi.length === args.length) {\n                        // ok\n                    }\n                    else if (meta.isVariableJosi) {\n                        // ok\n                    }\n                    else { // 引数の個数が違う\n                        throw NakoSyntaxError.fromNode(`関数『${ff.value}』で引数${args.length}個が指定されましたが、${meta.josi.length}個の引数を指定してください。`, ff);\n                    }\n                }\n                return {\n                    type: 'func',\n                    name: funcName,\n                    args,\n                    josi: this.y[3].josi,\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n            }\n            throw NakoSyntaxError.fromNode('C風関数呼び出しのエラー', f || NewEmptyToken());\n        }\n        // 関数呼び出し演算子(core #83)で廃止\n        if (this.check2(['func', '←'])) {\n            throw new Error('関数呼び出し演算子は廃止されました。');\n        }\n        // 無名関数(関数オブジェクト)\n        if (this.check('def_func')) {\n            return this.yMumeiFunc();\n        }\n        // 変数\n        const word = this.yValueWord();\n        if (word) {\n            return word;\n        }\n        // その他\n        return null;\n    }\n    yValueWordGetIndex(ast) {\n        if (!ast.index) {\n            ast.index = [];\n        }\n        // word @ a, b, c\n        if (this.check('@')) {\n            if (this.accept(['@', this.yValue, 'comma', this.yValue, 'comma', this.yValue])) {\n                ast.index.push(this.checkArrayIndex(this.y[1]));\n                ast.index.push(this.checkArrayIndex(this.y[3]));\n                ast.index.push(this.checkArrayIndex(this.y[5]));\n                ast.index = this.checkArrayReverse(ast.index);\n                ast.josi = this.y[5].josi;\n                return true;\n            }\n            if (this.accept(['@', this.yValue, 'comma', this.yValue])) {\n                ast.index.push(this.checkArrayIndex(this.y[1]));\n                ast.index.push(this.checkArrayIndex(this.y[3]));\n                ast.index = this.checkArrayReverse(ast.index);\n                ast.josi = this.y[3].josi;\n                return true;\n            }\n            if (this.accept(['@', this.yValue])) {\n                ast.index.push(this.checkArrayIndex(this.y[1]));\n                ast.josi = this.y[1].josi;\n                return true;\n            }\n            throw NakoSyntaxError.fromNode('変数の後ろの『@要素』の指定が不正です。', ast);\n        }\n        if (this.check('[')) {\n            if (this.accept(['[', this.yCalc, ']'])) {\n                ast.index.push(this.checkArrayIndex(this.y[1]));\n                ast.josi = this.y[2].josi;\n                return true;\n            }\n        }\n        if (this.check('[')) {\n            if (this.accept(['[', this.yCalc, 'comma', this.yCalc, ']'])) {\n                const index = [\n                    this.checkArrayIndex(this.y[1]),\n                    this.checkArrayIndex(this.y[3])\n                ];\n                ast.index = this.checkArrayReverse(index);\n                ast.josi = this.y[4].josi;\n                return true;\n            }\n        }\n        if (this.check('[')) {\n            if (this.accept(['[', this.yCalc, 'comma', this.yCalc, 'comma', this.yCalc, ']'])) {\n                const index = [\n                    this.checkArrayIndex(this.y[1]),\n                    this.checkArrayIndex(this.y[3]),\n                    this.checkArrayIndex(this.y[5])\n                ];\n                ast.index = this.checkArrayReverse(index);\n                ast.josi = this.y[6].josi;\n                return true;\n            }\n        }\n        return false;\n    }\n    /** @returns {Ast | null} */\n    yValueWord() {\n        const map = this.peekSourceMap();\n        if (this.check('word')) {\n            const t = this.getCur();\n            const word = this.getVarNameRef(t);\n            // word[n] || word@n\n            if (word.josi === '' && this.checkTypes(['[', '@'])) {\n                const ast = {\n                    type: '配列参照',\n                    name: word,\n                    index: [],\n                    josi: '',\n                    ...map,\n                    end: this.peekSourceMap()\n                };\n                while (!this.isEOF()) {\n                    if (!this.yValueWordGetIndex(ast)) {\n                        break;\n                    }\n                }\n                if (ast.index && ast.index.length === 0) {\n                    throw NakoSyntaxError.fromNode(`配列『${word.value}』アクセスで指定ミス`, word);\n                }\n                return ast;\n            }\n            return word; // Token to Ast\n        }\n        return null;\n    }\n    /** 変数を生成 */\n    createVar(word, isConst, isExport) {\n        let gname = word.value;\n        const typeName = isConst ? 'const' : 'var';\n        if (this.funcLevel === 0) {\n            // global ?\n            if (gname.indexOf('__') < 0) {\n                gname = this.modName + '__' + gname;\n            }\n            this.funclist[gname] = { type: typeName, value: '', isExport };\n            word.value = gname;\n            return word;\n        }\n        else {\n            // local\n            this.localvars[gname] = { type: typeName, value: '' };\n            return word;\n        }\n    }\n    /** 変数名を検索して解決する\n     * @param {Ast|Token} word\n     * @return {Ast|Token}\n     */\n    getVarName(word) {\n        // check word name\n        const f = this.findVar(word.value);\n        if (f) {\n            if (f && f.scope === 'global') {\n                word.value = f.name;\n            }\n            return word;\n        }\n        // 変数が見つからない\n        this.createVar(word, false, this.isExportDefault);\n        return word;\n    }\n    /** 変数名を検索して解決する */\n    getVarNameRef(word) {\n        // check word name\n        const f = this.findVar(word.value);\n        if (!f) { // 変数が見つからない\n            if (this.funcLevel === 0 && word.value.indexOf('__') < 0) {\n                word.value = this.modName + '__' + word.value;\n            }\n        }\n        else if (f && f.scope === 'global') {\n            word.value = f.name;\n        }\n        return word;\n    }\n    /** 複数の変数名を検索して解決する */\n    createVarList(words, isConst, isExport) {\n        for (let i = 0; i < words.length; i++) {\n            words[i] = this.createVar(words[i], isConst, isExport);\n        }\n        return words;\n    }\n    yJSONObjectValue() {\n        const a = [];\n        const firstToken = this.peek();\n        if (!firstToken) {\n            return null;\n        }\n        while (!this.isEOF()) {\n            while (this.check('eol')) {\n                this.get();\n            }\n            if (this.check('}')) {\n                break;\n            }\n            if (this.accept(['word', ':', this.yCalc])) {\n                this.y[0].type = 'string'; // キー名の文字列記号省略の場合\n                a.push({\n                    key: this.y[0],\n                    value: this.y[2]\n                });\n            }\n            else if (this.accept(['string', ':', this.yCalc])) {\n                a.push({\n                    key: this.y[0],\n                    value: this.y[2]\n                });\n            }\n            else if (this.check('word')) {\n                const w = this.getCur();\n                w.type = 'string';\n                a.push({\n                    key: w,\n                    value: w\n                });\n            }\n            else if (this.checkTypes(['string', 'number'])) {\n                const w = this.getCur();\n                a.push({\n                    key: w,\n                    value: w\n                });\n            }\n            else {\n                throw NakoSyntaxError.fromNode('辞書オブジェクトの宣言で末尾の『}』がありません。', firstToken);\n            }\n            if (this.check('comma')) {\n                this.get();\n            }\n        }\n        return a;\n    }\n    /** @returns {Ast | null} */\n    yJSONObject() {\n        const map = this.peekSourceMap();\n        if (this.accept(['{', '}'])) {\n            return {\n                type: 'json_obj',\n                value: [],\n                josi: this.y[1].josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['{', this.yJSONObjectValue, '}'])) {\n            return {\n                type: 'json_obj',\n                value: this.y[1],\n                josi: this.y[2].josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 辞書初期化に終わりがなかった場合 (エラーチェックのため) #958\n        if (this.accept(['{', this.yJSONObjectValue])) {\n            throw NakoSyntaxError.fromNode('辞書型変数の初期化が『}』で閉じられていません。', this.y[1]);\n        }\n        return null;\n    }\n    yJSONArrayValue() {\n        if (this.check('eol')) {\n            this.get();\n        }\n        const v1 = this.yCalc();\n        if (v1 === null) {\n            return null;\n        }\n        if (this.check('comma')) {\n            this.get();\n        }\n        const a = [v1];\n        while (!this.isEOF()) {\n            if (this.check('eol')) {\n                this.get();\n            }\n            if (this.check(']')) {\n                break;\n            }\n            const v2 = this.yCalc();\n            if (v2 === null) {\n                break;\n            }\n            if (this.check('comma')) {\n                this.get();\n            }\n            a.push(v2);\n        }\n        return a;\n    }\n    /** @returns {Ast | null} */\n    yJSONArray() {\n        const map = this.peekSourceMap();\n        if (this.accept(['[', ']'])) {\n            return {\n                type: 'json_array',\n                value: [],\n                josi: this.y[1].josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        if (this.accept(['[', this.yJSONArrayValue, ']'])) {\n            return {\n                type: 'json_array',\n                value: this.y[1],\n                josi: this.y[2].josi,\n                ...map,\n                end: this.peekSourceMap()\n            };\n        }\n        // 配列に終わりがなかった場合 (エラーチェックのため) #958\n        if (this.accept(['[', this.yJSONArrayValue])) {\n            throw NakoSyntaxError.fromNode('配列変数の初期化が『]』で閉じられていません。', this.y[1]);\n        }\n        return null;\n    }\n    /** エラー監視構文 */\n    yTryExcept() {\n        const map = this.peekSourceMap();\n        if (!this.check('エラー監視')) {\n            return null;\n        }\n        const kansi = this.getCur(); // skip エラー監視\n        const block = this.yBlock();\n        if (!this.check2(['エラー', 'ならば'])) {\n            throw NakoSyntaxError.fromNode('エラー構文で『エラーならば』がありません。' +\n                '『エラー監視..エラーならば..ここまで』を対で記述します。', kansi);\n        }\n        this.get(); // skip エラー\n        this.get(); // skip ならば\n        const errBlock = this.yBlock();\n        if (this.check('ここまで')) {\n            this.get();\n        }\n        else {\n            throw NakoSyntaxError.fromNode('『ここまで』がありません。『エラー監視』...『エラーならば』...『ここまで』を対応させてください。', map);\n        }\n        return {\n            type: 'try_except',\n            block,\n            errBlock: errBlock || [],\n            josi: '',\n            ...map,\n            end: this.peekSourceMap()\n        };\n    }\n}\n","import { NewEmptyToken } from './nako_types.mjs';\n/**\n * なでしこの構文解析のためのユーティリティクラス\n */\nexport class NakoParserBase {\n    constructor(logger) {\n        this.logger = logger;\n        this.stackList = []; // 関数定義の際にスタックが混乱しないように整理する\n        this.tokens = [];\n        this.usedFuncs = new Set();\n        /** @type {import('./nako3.mjs').Ast[]} */\n        this.stack = [];\n        this.index = 0;\n        /** トークン出現チェック(accept関数)に利用する\n         * @type {import('./nako3.mjs').Ast[]}\n         */\n        this.y = [];\n        /** モジュル名 @type {string} */\n        this.modName = 'inline';\n        this.namespaceStack = [];\n        /**\n         * 利用するモジュールの名前一覧\n         * @type {Array<string>}\n         */\n        this.modList = [];\n        /** グローバル変数・関数の確認用 */\n        this.funclist = {};\n        this.funcLevel = 0;\n        this.usedAsyncFn = false; // asyncFnの呼び出しがあるかどうか\n        /**\n         * ローカル変数の確認用\n         * @type {Object.<string,Object>}\n         */\n        this.localvars = { 'それ': { type: 'var', value: '' } };\n        /** コード生成器の名前 @type {string} */\n        this.genMode = 'sync'; // #637\n        /** 配列のインデックスが先頭要素(#1140) @type {int} */\n        this.arrayIndexFrom = 0;\n        /** 配列のインデックス順序を反対にするか(#1140) @type {boolean} */\n        this.flagReverseArrayIndex = false;\n        /** 配列を自動的に初期化するか(#1140) @type {boolean} */\n        this.flagCheckArrayInit = false;\n        /** 最近呼び出した関数(余剰エラーの報告に使う) */\n        this.recentlyCalledFunc = [];\n        // 構文解析に利用する - 現在計算式を読んでいるかどうか\n        this.isReadingCalc = false;\n        // エクスポート設定が未設定の関数・変数に対する既定値\n        this.isExportDefault = true;\n        this.isExportStack = [];\n        this.moduleExport = {};\n        this.init();\n    }\n    init() {\n        this.funclist = {}; // 関数の一覧\n        this.moduleExport = {};\n        this.reset();\n    }\n    reset() {\n        this.tokens = []; // 字句解析済みのトークンの一覧を保存\n        this.index = 0; // tokens[] のどこまで読んだかを管理する\n        this.stack = []; // 計算用のスタック ... 直接は操作せず、pushStack() popStack() を介して使う\n        this.y = []; // accept()で解析済みのトークンを配列で得るときに使う\n        this.genMode = 'sync'; // #637, #1056\n    }\n    setFuncList(funclist) {\n        this.funclist = funclist;\n    }\n    setModuleExport(moduleexport) {\n        this.moduleExport = moduleexport;\n    }\n    /**\n     * 特定の助詞を持つ要素をスタックから一つ下ろす、指定がなければ末尾を下ろす\n     * @param {string[]} josiList 下ろしたい助詞の配列\n     */\n    popStack(josiList = undefined) {\n        if (!josiList) {\n            const t = this.stack.pop();\n            if (t) {\n                return t;\n            }\n            return null;\n        }\n        // josiList にマッチする助詞を探す\n        for (let i = this.stack.length - 1; i >= 0; i--) {\n            const t = this.stack[i];\n            if (josiList.length === 0 || josiList.indexOf(t.josi) >= 0) {\n                this.stack.splice(i, 1); // remove stack\n                this.logger.trace('POP :' + JSON.stringify(t));\n                return t;\n            }\n        }\n        // 該当する助詞が見つからなかった場合\n        return null;\n    }\n    /**\n     * saveStack と loadStack は対で使う。\n     * 関数定義などでスタックが混乱しないように配慮するためのもの\n     */\n    saveStack() {\n        this.stackList.push(this.stack);\n        this.stack = [];\n    }\n    loadStack() {\n        this.stack = this.stackList.pop();\n    }\n    /** 変数名を探す\n     * @param {string} name\n     * @returns {any}変数名の情報\n     */\n    findVar(name) {\n        // ローカル変数？\n        if (this.localvars[name]) {\n            return {\n                name,\n                scope: 'local',\n                info: this.localvars[name]\n            };\n        }\n        // モジュール名を含んでいる?\n        if (name.indexOf('__') >= 0) {\n            if (this.funclist[name]) {\n                return {\n                    name,\n                    scope: 'global',\n                    info: this.funclist[name]\n                };\n            }\n            else {\n                return undefined;\n            }\n        }\n        // グローバル変数（自身）？\n        const gnameSelf = `${this.modName}__${name}`;\n        if (this.funclist[gnameSelf]) {\n            return {\n                name: gnameSelf,\n                scope: 'global',\n                info: this.funclist[gnameSelf]\n            };\n        }\n        // グローバル変数（モジュールを検索）？\n        for (const mod of this.modList) {\n            const gname = `${mod}__${name}`;\n            const exportDefault = this.moduleExport[mod];\n            if (this.funclist[gname] && (this.funclist[gname].isExport === true || (this.funclist[gname].isExport !== false && exportDefault !== false))) {\n                return {\n                    name: gname,\n                    scope: 'global',\n                    info: this.funclist[gname]\n                };\n            }\n        }\n        // システム変数 (funclistを普通に検索)\n        if (this.funclist[name]) {\n            return {\n                name,\n                scope: 'system',\n                info: this.funclist[name]\n            };\n        }\n        return undefined;\n    }\n    /**\n     * 計算用に要素をスタックに積む\n     */\n    pushStack(item) {\n        this.logger.trace('PUSH:' + JSON.stringify(item));\n        this.stack.push(item);\n    }\n    /**\n     * トークンの末尾に達したか\n     */\n    isEOF() {\n        return (this.index >= this.tokens.length);\n    }\n    getIndex() {\n        return this.index;\n    }\n    /**\n     * カーソル位置にある単語の型を確かめる\n     */\n    check(ttype) {\n        return (this.tokens[this.index].type === ttype);\n    }\n    /**\n     * カーソル位置以降にある単語の型を確かめる 2単語以上に対応\n     * @param a [単語1の型, 単語2の型, ... ]\n     */\n    check2(a) {\n        for (let i = 0; i < a.length; i++) {\n            const idx = i + this.index;\n            if (this.tokens.length <= idx) {\n                return false;\n            }\n            if (a[i] === '*') {\n                continue;\n            } // ワイルドカード(どんなタイプも許容)\n            const t = this.tokens[idx];\n            if (a[i] instanceof Array) {\n                if (a[i].indexOf(t.type) < 0) {\n                    return false;\n                }\n                continue;\n            }\n            if (t.type !== a[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * カーソル位置の型を確認するが、複数の種類を確かめられる\n     */\n    checkTypes(a) {\n        const type = this.tokens[this.index].type;\n        return (a.indexOf(type) >= 0);\n    }\n    /**\n     * check2の高度なやつ、型名の他にコールバック関数を指定できる\n     * 型にマッチしなければ false を返し、カーソルを巻き戻す\n     */\n    accept(types) {\n        const y = [];\n        const tmpIndex = this.index;\n        const rollback = () => {\n            this.index = tmpIndex;\n            return false;\n        };\n        for (let i = 0; i < types.length; i++) {\n            if (this.isEOF()) {\n                return rollback();\n            }\n            const type = types[i];\n            if (type == null) {\n                return rollback();\n            }\n            if (typeof type === 'string') {\n                const token = this.get();\n                if (token && token.type !== type) {\n                    return rollback();\n                }\n                y[i] = token;\n                continue;\n            }\n            if (typeof type === 'function') {\n                const f = type.bind(this);\n                const r = f(y);\n                if (r === null) {\n                    return rollback();\n                }\n                y[i] = r;\n                continue;\n            }\n            if (type instanceof Array) {\n                if (!this.checkTypes(type)) {\n                    return rollback();\n                }\n                y[i] = this.get();\n                continue;\n            }\n            throw new Error('System Error : accept broken : ' + typeof type);\n        }\n        this.y = y;\n        return true;\n    }\n    /**\n     * カーソル語句を取得して、カーソルを後ろに移動する\n     */\n    get() {\n        if (this.isEOF()) {\n            return null;\n        }\n        return this.tokens[this.index++];\n    }\n    /** カーソル語句を取得してカーソルを進める、取得できなければエラーを出す */\n    getCur() {\n        if (this.isEOF()) {\n            throw new Error('トークンが取得できません。');\n        }\n        const t = this.tokens[this.index++];\n        if (!t) {\n            throw new Error('トークンが取得できません。');\n        }\n        return t;\n    }\n    unget() {\n        if (this.index > 0) {\n            this.index--;\n        }\n    }\n    /** 解析中のトークンを返す */\n    peek(i = 0) {\n        if (this.isEOF()) {\n            return null;\n        }\n        return this.tokens[this.index + i];\n    }\n    /** 解析中のトークンを返す、無理なら def を返す */\n    peekDef(def = null) {\n        if (this.isEOF()) {\n            if (!def) {\n                def = NewEmptyToken();\n            }\n            return def;\n        }\n        return this.tokens[this.index];\n    }\n    /**\n     * 現在のカーソル語句のソースコード上の位置を取得する。\n     */\n    peekSourceMap() {\n        const token = this.peek();\n        if (token === null) {\n            return { startOffset: undefined, endOffset: undefined, file: undefined, line: 0, column: 0 };\n        }\n        return { startOffset: token.startOffset, endOffset: token.endOffset, file: token.file, line: token.line, column: token.column };\n    }\n    /**\n     * depth: 表示する深さ\n     * typeName: 先頭のtypeの表示を上書きする場合に設定する\n     * @param {{ depth: number, typeName?: string }} opts\n     * @param {boolean} debugMode\n     */\n    nodeToStr(node, opts, debugMode) {\n        const depth = opts.depth - 1;\n        const typeName = (name) => (opts.typeName !== undefined) ? opts.typeName : name;\n        const debug = debugMode ? (' debug: ' + JSON.stringify(node, null, 2)) : '';\n        if (!node) {\n            return '(NULL)';\n        }\n        switch (node.type) {\n            case 'not':\n                if (depth >= 0) {\n                    const subNode = node.value;\n                    return `${typeName('')}『${this.nodeToStr(subNode, { depth }, debugMode)}に演算子『not』を適用した式${debug}』`;\n                }\n                else {\n                    return `${typeName('演算子')}『not』`;\n                }\n            case 'op': {\n                const node2 = node;\n                let operator = node2.operator || '';\n                const table = { eq: '＝', not: '!', gt: '>', lt: '<', and: 'かつ', or: 'または' };\n                if (operator in table) {\n                    operator = table[operator];\n                }\n                if (depth >= 0) {\n                    const left = this.nodeToStr(node2.left, { depth }, debugMode);\n                    const right = this.nodeToStr(node2.right, { depth }, debugMode);\n                    if (node2.operator === 'eq') {\n                        return `${typeName('')}『${left}と${right}が等しいかどうかの比較${debug}』`;\n                    }\n                    return `${typeName('')}『${left}と${right}に演算子『${operator}』を適用した式${debug}』`;\n                }\n                else {\n                    return `${typeName('演算子')}『${operator}${debug}』`;\n                }\n            }\n            case 'number':\n                return `${typeName('数値')}${node.value}`;\n            case 'bigint':\n                return `${typeName('巨大整数')}${node.value}`;\n            case 'string':\n                return `${typeName('文字列')}『${node.value}${debug}』`;\n            case 'word':\n                return `${typeName('単語')}『${node.value}${debug}』`;\n            case 'func':\n                return `${typeName('関数')}『${node.name || node.value}${debug}』`;\n            case 'eol':\n                return '行の末尾';\n            case 'eof':\n                return 'ファイルの末尾';\n            default: {\n                let name = node.name;\n                if (name) {\n                    name = node.value;\n                }\n                if (typeof name !== 'string') {\n                    name = node.type;\n                }\n                return `${typeName('')}『${name}${debug}』`;\n            }\n        }\n    }\n}\n","/**\n * nako_prepare.js\n * 字句解析の前の前処理。全角文字を半角文字に変換するのが主な処理。\n * ただし、コメントや文字列の中は変換しないように考慮して変換する。\n */\nclass ReplaceHistory {\n    constructor(from, to, index) {\n        this.from = from;\n        this.to = to;\n        this.index = index;\n    }\n}\nclass ConvertResult {\n    constructor(text, sourcePosition) {\n        this.text = text;\n        this.sourcePosition = sourcePosition;\n    }\n}\n/**\n * 置換後の位置から置換前の位置へマッピングできる文字列\n */\nexport class Replace {\n    constructor(code) {\n        this.history = [];\n        this.code = code;\n    }\n    getText() {\n        return this.code;\n    }\n    replaceAll(from, to) {\n        while (true) {\n            const index = this.getText().indexOf(from);\n            if (index === -1) {\n                break;\n            }\n            if (from.length !== to.length) {\n                this.history.unshift(new ReplaceHistory(from.length, to.length, index));\n            }\n            this.code = this.code.replace(from, to);\n        }\n    }\n    getSourcePosition(i) {\n        // 少し遅い。パース時間1.4秒に対して0.15秒かかる。iが単調増加することを利用して高速化できるはず。\n        for (const item of this.history) {\n            if (i >= item.index + item.to) { // 置換範囲より後ろ\n                i += item.from - item.to;\n            }\n            else if (item.index <= i && i < item.index + item.to) { // 置換範囲\n                // 置換文字列が2文字以上のとき、最後の文字は最後の文字へマップする。それ以外は最初の文字へマップする。\n                if (item.to >= 2 && i === item.index + item.to - 1) {\n                    i = item.index + item.from - 1;\n                }\n                else {\n                    i = item.index;\n                }\n            }\n        }\n        return i;\n    }\n}\n/**\n * 字句解析を行う前に全角文字を半角に揃える\n *    [memo]\n *    ただし、文字列部分だけは、そのまま全角で出力するようにする\n *    for https://github.com/kujirahand/nadesiko3/issues/94\n */\nexport class NakoPrepare {\n    /** 唯一のインスタンスを返す */\n    static getInstance() {\n        if (!NakoPrepare._instance) {\n            NakoPrepare._instance = new NakoPrepare();\n        }\n        return NakoPrepare._instance;\n    }\n    constructor() {\n        // 単純な変換テーブル\n        this.convertTable = new Map([\n            // ハイフンへの変換\n            // 参考) https://hydrocul.github.io/wiki/blog/2014/1101-hyphen-minus-wave-tilde\n            // 0x2d: true, // ASCIIのハイフン\n            [0x2010, '-'],\n            [0x2011, '-'],\n            [0x2013, '-'],\n            [0x2014, '-'],\n            [0x2015, '-'],\n            [0x2212, '-'],\n            // チルダの変換\n            // 0x7e: true,\n            [0x02dc, '~'],\n            [0x02F7, '~'],\n            [0x2053, '~'],\n            [0x223c, '~'],\n            [0x301c, '~'],\n            [0xFF5E, '~'],\n            // スペースの変換\n            // 参考) http://anti.rosx.net/etc/memo/002_space.html\n            // 0x20: true,\n            [0x2000, ' '],\n            [0x2002, ' '],\n            [0x2003, ' '],\n            [0x2004, ' '],\n            [0x2005, ' '],\n            [0x2006, ' '],\n            [0x2007, ' '],\n            [0x2009, ' '],\n            [0x200A, ' '],\n            [0x200B, ' '],\n            [0x202F, ' '],\n            [0x205F, ' '],\n            [0x3000, ' '],\n            [0x3164, ' '],\n            // その他の変換\n            // [0x09, ' '], // TAB --> SPC\n            [0x203B, '#'],\n            [0x3002, ';'],\n            [0x3010, '['],\n            [0x3011, ']'],\n            // 読点は「,」に変換する (#877)\n            [0x3001, ','],\n            [0xFF0C, ','],\n            [0x2716, '*'],\n            [0x2795, '+'],\n            [0x2796, '-'],\n            [0x2797, '÷'] // ÷の絵文字 (#1183)\n        ]);\n    }\n    // 一文字だけ変換\n    /**\n     * @param {string} ch\n     */\n    convert1ch(ch) {\n        if (!ch) {\n            return '';\n        }\n        const c = ch.codePointAt(0) || 0;\n        // テーブルによる変換\n        const c2 = this.convertTable.get(c) || '';\n        if (c2) {\n            return c2;\n        }\n        // ASCIIエリア\n        if (c < 0x7F) {\n            return ch;\n        }\n        // 全角半角単純変換可能 --- '！' - '～'\n        if (c >= 0xFF01 && c <= 0xFF5E) {\n            const c2 = c - 0xFEE0;\n            return String.fromCodePoint(c2);\n        }\n        return ch;\n    }\n    /** convert code */\n    convert(code) {\n        if (!code) {\n            return [];\n        }\n        const src = new Replace(code);\n        // 改行コードを統一\n        src.replaceAll('\\r\\n', '\\n');\n        src.replaceAll('\\r', '\\n');\n        let flagStr = false; // 文字列リテラル内かどうか\n        let flagStr2 = false; // 絵文字による文字列リテラル内かどうか\n        let endOfStr = ''; // 文字列リテラルを終了させる記号\n        const res = [];\n        let left = 0; // 現在処理中の部分文字列の左端の位置\n        let str = ''; // 文字列リテラルの値\n        // 一文字ずつ全角を半角に置換する\n        let i = 0;\n        while (i < src.getText().length) {\n            const c = src.getText().charAt(i);\n            const ch2 = src.getText().substr(i, 2);\n            // 文字列のとき\n            if (flagStr) {\n                if (c === endOfStr) {\n                    flagStr = false;\n                    res.push(new ConvertResult(str + endOfStr, src.getSourcePosition(left)));\n                    i++;\n                    left = i;\n                    continue;\n                }\n                str += c;\n                i++;\n                continue;\n            }\n            // 絵文字制御による文字列のとき\n            if (flagStr2) {\n                if (ch2 === endOfStr) {\n                    flagStr2 = false;\n                    if (endOfStr === '＊／') {\n                        endOfStr = '*/';\n                    } // 強制変換\n                    res.push(new ConvertResult(str + endOfStr, src.getSourcePosition(left)));\n                    i += 2;\n                    left = i;\n                    continue;\n                }\n                str += c;\n                i++;\n                continue;\n            }\n            // 文字列判定\n            if (c === '「') {\n                res.push(new ConvertResult(c, src.getSourcePosition(left)));\n                i++;\n                left = i;\n                flagStr = true;\n                endOfStr = '」';\n                str = '';\n                continue;\n            }\n            if (c === '『') {\n                res.push(new ConvertResult(c, src.getSourcePosition(left)));\n                i++;\n                left = i;\n                flagStr = true;\n                endOfStr = '』';\n                str = '';\n                continue;\n            }\n            if (c === '“') {\n                res.push(new ConvertResult(c, src.getSourcePosition(left)));\n                i++;\n                left = i;\n                flagStr = true;\n                endOfStr = '”';\n                str = '';\n                continue;\n            }\n            // JavaScriptの内部的には文字列はUTF-16で扱われてるので charAt を使う場合 絵文字が2文字扱いになる --- #726\n            if (ch2 === '🌴' || ch2 === '🌿') {\n                res.push(new ConvertResult(ch2, src.getSourcePosition(left)));\n                i += 2;\n                left = i;\n                flagStr2 = true;\n                endOfStr = ch2;\n                str = '';\n                continue;\n            }\n            const c1 = this.convert1ch(c);\n            if (c1 === '\"' || c1 === '\\'') {\n                res.push(new ConvertResult(c1, src.getSourcePosition(left)));\n                i++;\n                left = i;\n                flagStr = true;\n                endOfStr = c;\n                str = '';\n                continue;\n            }\n            // ラインコメントを飛ばす (#725)\n            if (c1 === '#') {\n                res.push(new ConvertResult(c1, src.getSourcePosition(left)));\n                i++;\n                left = i;\n                flagStr = true; // 本当はコメントだけど便宜上\n                endOfStr = '\\n';\n                str = '';\n                continue;\n            }\n            // ラインコメントを飛ばす\n            if (ch2 === '//' || ch2 === '／／') {\n                res.push(new ConvertResult('//', src.getSourcePosition(left))); // 強制的に'//'とする\n                i += 2;\n                left = i;\n                flagStr = true;\n                endOfStr = '\\n';\n                str = '';\n                continue;\n            }\n            // 複数行コメント内を飛ばす\n            if (ch2 === '／＊') {\n                res.push(new ConvertResult('/*', src.getSourcePosition(left))); // 強制変換\n                i += 2;\n                left = i;\n                flagStr2 = true;\n                endOfStr = '＊／';\n                str = '';\n                continue;\n            }\n            // 複数行コメント内を飛ばす (#731)\n            if (ch2 === '/*') {\n                res.push(new ConvertResult(ch2, src.getSourcePosition(left)));\n                i += 2;\n                left = i;\n                flagStr2 = true;\n                endOfStr = '*/';\n                str = '';\n                continue;\n            }\n            // 変換したものを追加\n            res.push(new ConvertResult(c1, src.getSourcePosition(left)));\n            i++;\n            left = i;\n        }\n        if (flagStr || flagStr2) {\n            res.push(new ConvertResult(str + endOfStr, src.getSourcePosition(left)));\n        }\n        return res;\n    }\n}\n/** なでしこのソースコードのモード(!インデント構文など)が設定されているか調べる */\nexport function checkNakoMode(code, modeNames) {\n    // 先頭の256文字について調べる\n    code = code.substring(0, 256);\n    // 全角半角の揺れを吸収\n    code = code.replace(/(！|💡)/, '!');\n    // 範囲コメントを削除\n    code = code.replace(/\\/\\*.*?\\*\\//g, '');\n    // 毎文調べる\n    const lines = code.split(/[;。\\n]/, 30);\n    for (let line of lines) {\n        line = line.replace(/^\\s+/, '').replace(/\\s+$/, ''); // trim\n        if (modeNames.indexOf(line) >= 0) {\n            return true;\n        }\n    }\n    return false;\n}\n","/**\n * よく使う処理をまとめたもの\n */\nimport { NewEmptyToken } from './nako_types.mjs';\n/**\n * トークンの内容をデバッグ出力する関数\n * @param tokens トークンの一覧\n * @returns 文字列\n */\nexport function debugTokens(tokens) {\n    const result = [];\n    for (let i = 0; i < tokens.length; i++) {\n        const t = tokens[i];\n        const ftype = t.type;\n        const fvalue = t.value;\n        let s = `[${ftype}:${fvalue}]`;\n        if (ftype === fvalue) {\n            s = ftype;\n        }\n        if (ftype === 'comma') {\n            s = ',';\n        }\n        if (ftype === 'string') {\n            s = `\"${fvalue}\"`;\n        }\n        if (ftype === 'number') {\n            s = `(${fvalue})`;\n        }\n        if (ftype === 'word') {\n            s = `[word:${fvalue}]`;\n        }\n        if (!result[t.line]) {\n            result[t.line] = makeIndent(t.indent);\n        }\n        result[t.line] += s + t.josi + '|';\n    }\n    return result.join('\\n');\n}\nexport function makeIndent(n) {\n    let s = '';\n    for (let i = 0; i < n; i++) {\n        s += ' ';\n    }\n    return s;\n}\nlet lastTokenInfo = NewEmptyToken();\nexport function newToken(type, value, templateToken = undefined) {\n    if (templateToken) {\n        lastTokenInfo = templateToken;\n    }\n    const t = NewEmptyToken(type, value, lastTokenInfo.indent, lastTokenInfo.line, lastTokenInfo.file);\n    return t;\n}\n","/** インデント構文を処理するモジュール */\nimport { NewEmptyToken } from './nako_types.mjs';\nimport { NakoIndentError } from '../src/nako_errors.mjs';\nimport { debugTokens, newToken } from './nako_tools.mjs';\nconst IS_DEBUG = false;\nfunction isSkipWord(t) {\n    if (t.type === '違えば') {\n        return true;\n    }\n    if (t.type === 'word' && t.value === 'エラー' && t.josi === 'ならば') {\n        return true;\n    }\n    return false;\n}\n/** インラインインデント構文 --- 末尾の\":\"をインデントを考慮して\"ここまで\"を挿入 (#1215) */\nexport function convertInlineIndent(tokens) {\n    //\n    // 0:もし、A=0ならば:\n    // 2:  もし、B=0ならば:\n    // 4:    「A=0,B=0」を表示。\n    // 2:  違えば:\n    // 4:    「A=0,B!=0」を表示。\n    // 5:違えば:\n    // 6:  「A!=0」を表示。\n    //\n    const lines = splitTokens(tokens, 'eol');\n    const blockIndents = [];\n    let checkICount = -1;\n    let jsonObjLevel = 0;\n    let jsonArrayLevel = 0;\n    const checkJsonSyntax = (line) => {\n        // JSONのオブジェクトがあるか？\n        line.forEach((t) => {\n            if (t.type === '{') {\n                jsonObjLevel++;\n            }\n            if (t.type === '}') {\n                jsonObjLevel--;\n            }\n            if (t.type === '[') {\n                jsonArrayLevel++;\n            }\n            if (t.type === ']') {\n                jsonArrayLevel--;\n            }\n        });\n    };\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        // 空行は飛ばす || コメント行だけの行も飛ばす\n        if (IsEmptyLine(line)) {\n            continue;\n        }\n        const leftToken = GetLeftTokens(line);\n        // JSONの途中であればブロックの変更は行わない\n        if (jsonObjLevel > 0 || jsonArrayLevel > 0) {\n            checkJsonSyntax(line);\n            continue;\n        }\n        // インデントの終了を確認する必要があるか？\n        if (checkICount >= 0) {\n            const lineICount = leftToken.indent;\n            while (checkICount >= lineICount) {\n                const tFirst = leftToken;\n                // console.log('@@', lineICount, '>>', checkICount, tFirst.type)\n                if (isSkipWord(tFirst) && (checkICount === lineICount)) { // 「違えば」や「エラーならば」\n                    // 「ここまで」の挿入不要 / ただしネストした際の「違えば」(上記の5の状態なら必要)\n                }\n                else {\n                    // ここまでを挿入する\n                    lines[i - 1].push(newToken('ここまで', 'ここまで', tFirst));\n                    lines[i - 1].push(newToken('eol', '\\n', tFirst));\n                }\n                blockIndents.pop();\n                if (blockIndents.length > 0) {\n                    checkICount = blockIndents[blockIndents.length - 1];\n                }\n                else {\n                    checkICount = -1;\n                    break;\n                }\n            }\n        }\n        // JSONの途中であればブロックの変更は行わない\n        checkJsonSyntax(line);\n        if (jsonObjLevel > 0 || jsonArrayLevel > 0) {\n            continue;\n        }\n        // 末尾の「:」をチェック\n        const tLast = getLastTokenWithoutEOL(line);\n        if (tLast.type === ':') {\n            // 末尾の「:」を削除\n            lines[i] = lines[i].filter(t => t !== tLast);\n            checkICount = tLast.indent;\n            blockIndents.push(checkICount);\n        }\n    }\n    if (lines.length > 0 && blockIndents.length > 0) {\n        // トークン情報を得るため、直近のトークンを得る\n        let t = tokens[0];\n        for (let i = lines.length - 1; i >= 0; i--) {\n            const line = lines[i];\n            if (line.length > 0) {\n                t = line[line.length - 1];\n                break;\n            }\n        }\n        // ここまでを差し込む\n        for (let i = 0; i < blockIndents.length; i++) {\n            lines[lines.length - 1].push(newToken('ここまで', 'ここまで', t));\n            lines[lines.length - 1].push(newToken('eol', '\\n', t));\n        }\n    }\n    const result = joinTokenLines(lines);\n    if (IS_DEBUG) {\n        console.log('###', debugTokens(result));\n    }\n    return result;\n}\n/** 行ごとに分割していたトークンをくっつける */\nexport function joinTokenLines(lines) {\n    const r = [];\n    for (const line of lines) {\n        for (const t of line) {\n            r.push(t);\n        }\n    }\n    return r;\n}\nfunction getLastTokenWithoutEOL(line) {\n    const len = line.length;\n    if (len === 0) {\n        return NewEmptyToken('?');\n    }\n    let res = line[len - 1];\n    if (res.type === 'eol') {\n        if (len >= 2) {\n            res = line[len - 2];\n        }\n    }\n    return res;\n}\nexport function splitTokens(tokens, delimiter) {\n    const result = [];\n    let line = [];\n    let kakko = 0;\n    for (const t of tokens) {\n        line.push(t);\n        if (t.type === '{') {\n            kakko++;\n        }\n        else if (t.type === '}') {\n            kakko--;\n        }\n        else if (kakko === 0 && t.type === delimiter) {\n            result.push(line);\n            line = [];\n        }\n    }\n    if (line.length > 0) {\n        result.push(line);\n    }\n    return result;\n}\n/** トークン行が空かどうか調べる */\nfunction IsEmptyLine(line) {\n    if (line.length === 0) {\n        return true;\n    }\n    for (let j = 0; j < line.length; j++) {\n        const ty = line[j].type;\n        if (ty === 'eol' || ty === 'line_comment' || ty === 'range_comment') {\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/** コメントを除去した最初のトークンを返す */\nfunction GetLeftTokens(line) {\n    for (let i = 0; i < line.length; i++) {\n        const t = line[i].type;\n        if (t === 'eol' || t === 'line_comment' || t === 'range_comment') {\n            continue;\n        }\n        return line[i];\n    }\n    return line[0];\n}\n// インデント構文のキーワード\nconst INDENT_MODE_KEYWORDS = ['!インデント構文', '!ここまでだるい', '💡インデント構文', '💡ここまでだるい'];\n/** インデント構文 --- インデントを見て\"ここまで\"を自動挿入 (#596) */\nexport function convertIndentSyntax(tokens) {\n    // インデント構文の変換が必要か?\n    if (!useIndentSynax(tokens)) {\n        return tokens;\n    }\n    // 『ここまで』があったらエラーを出す\n    for (const t of tokens) {\n        if (t.type === 'ここまで') {\n            // エラーを出す\n            throw new NakoIndentError('インデント構文が有効化されているときに『ここまで』を使うことはできません。', t.line, t.file);\n        }\n    }\n    // JSON構文のチェック\n    let jsonObjLevel = 0;\n    let jsonArrayLevel = 0;\n    const checkJsonSyntax = (line) => {\n        // JSONのオブジェクトがあるか？\n        line.forEach((t) => {\n            if (t.type === '{') {\n                jsonObjLevel++;\n            }\n            if (t.type === '}') {\n                jsonObjLevel--;\n            }\n            if (t.type === '[') {\n                jsonArrayLevel++;\n            }\n            if (t.type === ']') {\n                jsonArrayLevel--;\n            }\n        });\n    };\n    // 行ごとにトークンを分割\n    const blockIndents = [];\n    const lines = splitTokens(tokens, 'eol');\n    let lastI = 0;\n    // 各行を確認する\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        // 空行は飛ばす || コメント行だけの行も飛ばす\n        if (IsEmptyLine(line)) {\n            continue;\n        }\n        // JSON構文のチェック\n        if (jsonArrayLevel > 0 || jsonObjLevel > 0) {\n            checkJsonSyntax(line);\n            continue;\n        }\n        const leftToken = GetLeftTokens(line);\n        const curI = leftToken.indent;\n        if (curI === lastI) {\n            continue;\n        }\n        // ブロックの終了?\n        // 0: 3回\n        // 2:   もし、1 > 1ならば\n        // 4:     1を表示\n        // 2:   違えば\n        // 4:     2を表示\n        // 0:\n        // ブロックの終了?\n        if (lastI >= 0) {\n            while (lastI > curI) {\n                const blockIndentTopLast = blockIndents[blockIndents.length - 1][1];\n                // console.log('@@[', i, ']', lastI, '>', curI, '@', blockIndentTopLast, leftToken.type)\n                if (isSkipWord(leftToken) && blockIndentTopLast === curI) {\n                    // 「違えば」などなら不要 (ただし、違えばがネストしている場合は必要)\n                }\n                else {\n                    const t = lines[i - 1][0];\n                    lines[i - 1].push(newToken('ここまで', 'ここまで', t));\n                    lines[i - 1].push(newToken('eol', '\\n', t));\n                }\n                blockIndents.pop();\n                if (blockIndents.length > 0) {\n                    lastI = blockIndents[blockIndents.length - 1][0];\n                }\n                else {\n                    lastI = 0;\n                    break;\n                }\n            }\n        }\n        if (jsonArrayLevel > 0 || jsonObjLevel > 0) {\n            continue;\n        }\n        // JSON構文のチェック\n        checkJsonSyntax(line);\n        // ブロックの開始？\n        if (curI > lastI) {\n            blockIndents.push([curI, lastI]);\n            // console.log('@@@push', curI)\n            lastI = curI;\n            continue;\n        }\n    }\n    // 末尾に「ここまで」を追加する\n    for (let i = 0; i < blockIndents.length; i++) {\n        // トークン情報を得るため、直近のトークンを得る\n        let t = tokens[0];\n        for (let i = lines.length - 1; i >= 0; i--) {\n            const line = lines[i];\n            if (line.length > 0) {\n                t = line[line.length - 1];\n                break;\n            }\n        }\n        lines[lines.length - 1].push(newToken('ここまで', 'ここまで', t));\n        lines[lines.length - 1].push(newToken('eol', '\\n', t));\n    }\n    const result = joinTokenLines(lines);\n    // console.log('###', debugTokens(result))\n    return result;\n}\nfunction useIndentSynax(tokens) {\n    // インデント構文が必要かチェック (最初の100個をチェック)\n    for (let i = 0; i < tokens.length; i++) {\n        if (i > 100) {\n            break;\n        }\n        const t = tokens[i];\n        if (t.type === 'line_comment' && (INDENT_MODE_KEYWORDS.indexOf(t.value) >= 0)) {\n            return true;\n        }\n    }\n    return false;\n}\n","/**\n * DNCLに対応する構文\n */\n// import { NakoIndentError } from './nako_errors.mjs'\nimport { NewEmptyToken } from './nako_types.mjs';\nimport { joinTokenLines, splitTokens } from './nako_indent_inline.mjs';\n// DNCLモードのキーワード\nconst DNCL_KEYWORDS = ['!DNCLモード', '💡DNCLモード'];\n// 単純な置換チェック\nconst DNCL_SIMPLES = {\n    '←:←': ['eq', '='],\n    '÷:÷': ['÷÷', '÷÷'],\n    '{:{': ['[', '['],\n    '}:}': [']', ']'],\n    'word:を実行': ['ここまで', 'ここまで'],\n    'word:乱数': ['word', '乱数範囲'],\n    'word:表示': ['word', '連続表示']\n};\n/**\n * DNCLのソースコードをなでしこに変換する\n */\nexport function convertDNCL(tokens) {\n    if (!useDNCLmode(tokens)) {\n        return tokens;\n    }\n    // 一行ずつに分ける\n    const lines = splitTokens(tokens, 'eol');\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (line.length <= 1) {\n            continue;\n        } // 空行は飛ばす\n        // 行頭の | はただのインデント\n        for (let j = 0; j < line.length; j++) {\n            if (line[j].type === '|') {\n                line[j].type = 'range_comment';\n                continue;\n            }\n            break;\n        }\n        // 後判定の繰り返しの実装のため\n        const t = line[0];\n        if (t.type === 'word' && t.value === '繰返') {\n            line.splice(0, line.length, NewEmptyToken('word', '後判定', t.indent, t.line, t.file), NewEmptyToken('word', '繰返', t.indent, t.line, t.file));\n        }\n        // ^\\s*を,?(.+)になるまで(繰り返す|実行する)/\n        const fi = findTokens(line, ['word:なる', 'word:繰返']);\n        if (fi > 0) {\n            replaceAtohantei(line, fi);\n        }\n        const fi2 = findTokens(line, ['word:なる', 'word:実行']);\n        if (fi2 > 0) {\n            replaceAtohantei(line, fi2);\n        }\n        // もし(条件)でないならば → もし(条件)でなければ\n        const nai = findTokens(line, ['word:ない']);\n        if (nai >= 1) {\n            const tt = line[nai];\n            if (tt.josi === 'ならば') {\n                line[nai - 1].josi = 'でなければ';\n                line.splice(nai, 1);\n            }\n        }\n        // 二進で表示 (255) → 二進表示(255)\n        for (;;) {\n            const ni = findTokens(line, ['word:二進', 'word:表示']);\n            if (ni < 0) {\n                break;\n            }\n            line[ni].value = '二進表示';\n            line[ni].josi = '';\n            line.splice(ni + 1, 1);\n        }\n        // '改行なしで表示' → '連続無改行表示'\n        for (;;) {\n            const ni = findTokens(line, ['word:改行', 'word:表示']);\n            if (ni < 0) {\n                break;\n            }\n            // ここ「改行なしで表示」でも「改行ありで表示」でも同じになってしまう\n            // なでしこの制限のため仕方なし\n            // 「改行ありで表示」は今のところDNCLに存在しないので無視する\n            // もし将来的に区別が必要なら、プリプロセス処理でマクロ的に置換処理を行うことで対応できると思う\n            const t = line[ni];\n            t.value = '連続無改行表示';\n            t.josi = '';\n            line.splice(ni + 1, 1);\n        }\n        // 'を実行し,そうでなければ': '違えば',\n        for (;;) {\n            const ni = findTokens(line, ['word:を実行', 'comma:,', 'word:そう']);\n            if (ni < 0) {\n                break;\n            }\n            const sou = line[ni + 2];\n            if (sou.josi === 'でなければ') {\n                sou.type = '違えば';\n                sou.value = '違えば';\n                sou.josi = '';\n                line.splice(ni, 3, sou);\n                continue;\n            }\n            else if (sou.josi === 'で') {\n                const nakumosi = line[ni + 3];\n                if (nakumosi.value.substring(0, 4) === 'なくもし') {\n                    sou.type = '違えば';\n                    sou.value = '違えば';\n                    sou.josi = '';\n                    line.splice(ni, 3, sou);\n                    if (nakumosi.value.length > 4) {\n                        const nakumosiTudukiStr = nakumosi.value.substring(4);\n                        const nakumosiToken = NewEmptyToken('word', nakumosiTudukiStr, nakumosi.indent, nakumosi.line, nakumosi.file);\n                        if (nakumosiTudukiStr.match(/^\\d/)) {\n                            nakumosiToken.type = 'number';\n                        }\n                        line.splice(ni + 2, 0, nakumosiToken);\n                        nakumosi.value = nakumosi.value.substring(0, 4);\n                    }\n                    nakumosi.type = 'もし';\n                    nakumosi.value = 'もし';\n                    nakumosi.josi = '';\n                    continue;\n                }\n            }\n            break;\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら\n        for (;;) {\n            const ni = findTokens(line, ['word:増', 'word:ら']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '増繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら\n        for (;;) {\n            const ni = findTokens(line, ['word:減', 'word:ら']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '減繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // を繰り返す → ここまで\n        for (;;) {\n            const ni = findTokens(line, ['word:を繰り返']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'ここまで';\n            fu.value = 'ここまで';\n            fu.josi = '';\n        }\n        // 'のすべての要素を0にする'\n        // 'のすべての要素に0を代入する'\n        for (;;) {\n            const ni = findTokens(line, ['word:すべて', 'word:要素']);\n            if (ni >= 1) {\n                replaceAllElementV(line, ni);\n            }\n            else {\n                break;\n            }\n        }\n        // 'のすべての値を0にする'\n        for (;;) {\n            const ni = findTokens(line, ['word:すべて', 'word:値']);\n            if (ni >= 1) {\n                replaceAllElementV(line, ni);\n            }\n            else {\n                break;\n            }\n        }\n        // 一つずつチェック\n        let j = 0;\n        while (j < line.length) {\n            const t = line[j];\n            // 減と増の分割\n            if (t.type === 'word' && t.value.length >= 2) {\n                const c = t.value.charAt(t.value.length - 1);\n                if (c === '減' || c === '増') {\n                    t.value = t.value.substring(0, t.value.length - 1);\n                    t.josi = 'だけ';\n                    line.splice(j + 1, 0, NewEmptyToken('word', c, t.indent, t.line, t.file));\n                }\n                j++;\n                continue;\n            }\n            j++;\n        }\n    }\n    // 最後に単純な置換を行う\n    for (let i = 0; i < tokens.length; i++) {\n        const t = tokens[i];\n        const a = DNCL_SIMPLES[t.type + ':' + t.value];\n        if (a !== undefined) {\n            t.type = a[0];\n            t.value = a[1];\n        }\n    }\n    tokens = joinTokenLines(lines);\n    return tokens;\n}\nfunction replaceAllElementV(line, ni) {\n    //\n    // const ni = findTokens(line, ['word:すべて', 'word:要素'])\n    //\n    const t = line[ni];\n    line[ni - 1].josi = '';\n    const eq = NewEmptyToken('eq', '=', t.indent, t.line, t.file);\n    const begin = NewEmptyToken('[', '[', t.indent, t.line, t.file);\n    const end = NewEmptyToken(']', ']', t.indent, t.line, t.file);\n    end.josi = 'に';\n    const val = line[ni + 2];\n    val.josi = '';\n    const times = NewEmptyToken('number', 100, t.indent, t.line, t.file);\n    times.josi = 'を';\n    const mul = NewEmptyToken('word', '掛', t.indent, t.line, t.file);\n    line.splice(ni, 4, eq, begin, val, end, times, mul);\n}\nfunction replaceAtohantei(tokens, fi) {\n    // `ここまで、(${r[1]})になるまでの間`\n    const wo = findTokens(tokens, ['word:を']);\n    if (wo >= 0) {\n        tokens[wo].type = 'ここまで';\n        tokens[wo].value = 'ここまで';\n    }\n    const ga = findTokens(tokens, ['word:が']);\n    if (ga >= 0) {\n        tokens[ga].type = 'ここまで';\n        tokens[ga].value = 'ここまで';\n    }\n    // なる:まで(fi) 実行(fi+1)\n    tokens[fi + 1].value = '間';\n}\nfunction findTokens(tokens, findTypeValue) {\n    const findA = findTypeValue.map(s => s.split(':'));\n    for (let i = 0; i < tokens.length; i++) {\n        let flag = true;\n        for (let j = 0; j < findA.length; j++) {\n            const f = findA[j];\n            const idx = i + j;\n            if (idx >= tokens.length) {\n                return -1;\n            }\n            if (tokens[idx].type === f[0] && tokens[idx].value === f[1]) {\n                continue;\n            }\n            else {\n                flag = false;\n                break;\n            }\n        }\n        if (flag) {\n            return i;\n        }\n    }\n    return -1;\n}\nfunction useDNCLmode(tokens) {\n    // 先頭の100語調べる\n    for (let i = 0; i < tokens.length; i++) {\n        if (i > 100) {\n            break;\n        }\n        const t = tokens[i];\n        if (t.type === 'line_comment' && DNCL_KEYWORDS.indexOf(t.value) >= 0) {\n            t.type = 'DNCLモード';\n            return true;\n        }\n    }\n    return false;\n}\nexport const NakoDncl = {\n    convert: convertDNCL\n};\n","/**\n * DNCL ver2 に対応する構文\n */\n// import { NakoIndentError } from './nako_errors.mjs'\nimport { NewEmptyToken } from './nako_types.mjs';\nimport { joinTokenLines, splitTokens } from './nako_indent_inline.mjs';\nimport { newToken, debugTokens } from './nako_tools.mjs';\nconst IS_DEBUG = false;\nconst DNCL_ARRAY_INIT_COUNT = 30;\n// DNCL2モードのキーワード\nconst DNCL2_KEYWORDS = ['!DNCL2モード', '💡DNCL2モード', '!DNCL2', '💡DNCL2'];\n// 単純な置換チェック\nconst DNCL_SIMPLES = {\n    '←:←': ['eq', '='],\n    '÷:÷': ['÷÷', '÷÷'],\n    '{:{': ['[', '['],\n    '}:}': [']', ']'],\n    // 'word:and': ['and', 'かつ'],\n    // 'word:or': ['or', 'または'],\n    'word:not': ['not', '!'],\n    'word:乱数': ['word', '乱数範囲'],\n    'word:表示': ['word', '連続表示']\n};\n/**\n * DNCLのソースコードをなでしこに変換する\n */\nexport function convertDNCL2(tokens) {\n    if (!useDNCL2mode(tokens)) {\n        return tokens;\n    }\n    // 一行ずつに分ける\n    const lines = splitTokens(tokens, 'eol');\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (line.length <= 1) {\n            continue;\n        } // 空行は飛ばす\n        // --- 制御構文の変換 ---\n        // もし(条件)でないならば → もし(条件)でなければ\n        const nai = findTokens(line, ['word:ない']);\n        if (nai >= 1) {\n            const tt = line[nai];\n            if (tt.josi === 'ならば') {\n                line[nai - 1].josi = 'でなければ';\n                line.splice(nai, 1);\n            }\n        }\n        // そうでなければ(そう|でなければ) or そうでなく → 違えば\n        for (let ni = 0; ni < line.length; ni++) {\n            const t = line[ni];\n            if ((t.value === 'そう' || t.value === 'それ') && (t.josi === 'でなければ' || t.josi === 'でなく')) {\n                t.type = '違えば';\n                t.value = '違えば';\n                t.josi = '';\n            }\n        }\n        // 'を実行し,そうでなければ': '違えば',\n        for (;;) {\n            const ni = findTokens(line, ['word:を実行', 'comma:,', 'word:そう']);\n            if (ni < 0) {\n                break;\n            }\n            const sou = line[ni + 2];\n            if (sou.josi === 'でなければ') {\n                sou.type = '違えば';\n                sou.value = '違えば';\n                sou.josi = '';\n                line.splice(ni, 3, sou);\n                continue;\n            }\n            else if (sou.josi === 'で') {\n                const nakumosi = line[ni + 3];\n                if (nakumosi.value.substring(0, 4) === 'なくもし') {\n                    sou.type = '違えば';\n                    sou.value = '違えば';\n                    sou.josi = '';\n                    line.splice(ni, 3, sou);\n                    if (nakumosi.value.length > 4) {\n                        const nakumosiTudukiStr = nakumosi.value.substring(4);\n                        const nakumosiToken = NewEmptyToken('word', nakumosiTudukiStr, nakumosi.indent, nakumosi.line, nakumosi.file);\n                        if (nakumosiTudukiStr.match(/^\\d/)) {\n                            nakumosiToken.type = 'number';\n                        }\n                        line.splice(ni + 2, 0, nakumosiToken);\n                        nakumosi.value = nakumosi.value.substring(0, 4);\n                    }\n                    nakumosi.type = 'もし';\n                    nakumosi.value = 'もし';\n                    nakumosi.josi = '';\n                    continue;\n                }\n            }\n            break;\n        }\n        // 'そうでなく': '違えば',\n        for (;;) {\n            const ni = findTokens(line, ['word:そう', 'word:なく']);\n            if (ni < 0) {\n                break;\n            }\n            const sou = line[ni];\n            if (sou.josi === 'で') {\n                sou.type = '違えば';\n                sou.value = '違えば';\n                sou.josi = '';\n                line.splice(ni + 1, 1);\n                // console.log('@@@', line.map(v => v.value).join('|'))\n                continue;\n            }\n            break;\n        }\n        // 'そうでなくもし': '違えば,もし'\n        for (;;) {\n            const ni = findTokens(line, ['word:そう', 'word:なくもし']);\n            if (ni < 0) {\n                break;\n            }\n            const sou = line[ni];\n            const nakumosi = line[ni + 1];\n            sou.type = '違えば';\n            sou.value = '違えば';\n            sou.josi = '';\n            nakumosi.type = 'もし';\n            nakumosi.value = 'もし';\n            nakumosi.josi = '';\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら\n        for (;;) {\n            const ni = findTokens(line, ['word:増', 'word:ら']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '増繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら\n        for (;;) {\n            const ni = findTokens(line, ['word:減', 'word:ら']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '減繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら繰り返(す)\n        for (;;) {\n            const ni = findTokens(line, ['word:増', 'word:ら繰り返']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '増繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // Iを1から100まで1(ずつ)|増やしな(が)|ら繰り返す\n        for (;;) {\n            const ni = findTokens(line, ['word:減', 'word:ら繰り返']);\n            if (ni < 0) {\n                break;\n            }\n            const fu = line[ni];\n            fu.type = 'word';\n            fu.value = '減繰返';\n            fu.josi = '';\n            line.splice(ni, 2, fu);\n        }\n        // --- 配列変数周りの変換 ---\n        for (let i = 0; i < line.length; i++) {\n            // 配列|Hindoの|すべての|(要素に|値に)|10を|代入する\n            if (tokenEq([['word:配列', 'word:配列変数'], 'word', 'word:すべて', ['word:要素', 'word:値'], '*', 'word:代入'], line, i)) {\n                const varToken = line[i + 1];\n                varToken.josi = '';\n                const valToken = line[i + 4];\n                valToken.josi = '';\n                line.splice(i, 6, varToken, newToken('eq', '=', varToken), newToken('word', '掛'), newToken('(', '('), newToken('[', '['), valToken, newToken(']', ']'), newToken('comma', ','), newToken('number', DNCL_ARRAY_INIT_COUNT), newToken(')', ')'));\n                i += 6; // skip\n            }\n            // Hensuの|すべての|(要素を|値を)|0に|する\n            if (tokenEq(['word', 'word:すべて', ['word:要素', 'word:値'], ['number', 'string', 'word'], 'word:する'], line, i)) {\n                const varToken = line[i];\n                varToken.josi = '';\n                const valToken = line[i + 3];\n                valToken.josi = '';\n                line.splice(i, 5, varToken, newToken('eq', '=', varToken), newToken('word', '掛'), newToken('(', '('), newToken('[', '['), valToken, newToken(']', ']'), newToken('comma', ','), newToken('number', DNCL_ARRAY_INIT_COUNT), newToken(')', ')'));\n            }\n            // 配列変数 | xxを | 初期化する\n            if (tokenEq([['word:配列変数', 'word:配列'], 'word', 'word:初期化'], line, i)) {\n                const varToken = line[i + 1];\n                varToken.josi = '';\n                line.splice(i, 3, varToken, newToken('eq', '=', varToken), newToken('word', '掛'), newToken('(', '('), newToken('[', '['), newToken('number', 0), newToken(']', ']'), newToken('comma', ','), newToken('number', DNCL_ARRAY_INIT_COUNT), newToken(')', ')'));\n            }\n        }\n        // --- その他の変換 ---\n        // 二進で表示 (255) → 二進表示(255)\n        for (;;) {\n            const ni = findTokens(line, ['word:二進', 'word:表示']);\n            if (ni < 0) {\n                break;\n            }\n            line[ni].value = '二進表示';\n            line[ni].josi = '';\n            line.splice(ni + 1, 1);\n        }\n        // '改行なしで表示' → '連続無改行表示'\n        for (;;) {\n            const ni = findTokens(line, ['word:改行', 'word:表示']);\n            if (ni < 0) {\n                break;\n            }\n            // ここ「改行なしで表示」でも「改行ありで表示」でも同じになってしまう\n            // なでしこの制限のため仕方なし\n            // 「改行ありで表示」は今のところDNCLに存在しないので無視する\n            // もし将来的に区別が必要なら、プリプロセス処理でマクロ的に置換処理を行うことで対応できると思う\n            const t = line[ni];\n            t.value = '連続無改行表示';\n            t.josi = '';\n            line.splice(ni + 1, 1);\n        }\n        // 一つずつチェック\n        let j = 0;\n        while (j < line.length) {\n            const t = line[j];\n            // 減と増の分割\n            if (t.type === 'word' && t.value.length >= 2) {\n                const c = t.value.charAt(t.value.length - 1);\n                if (c === '減' || c === '増') {\n                    t.value = t.value.substring(0, t.value.length - 1);\n                    t.josi = 'だけ';\n                    line.splice(j + 1, 0, NewEmptyToken('word', c, t.indent, t.line, t.file));\n                }\n                j++;\n                continue;\n            }\n            j++;\n        }\n    }\n    // 最後に単純な置換を行う\n    for (let i = 0; i < tokens.length; i++) {\n        const t = tokens[i];\n        const a = DNCL_SIMPLES[t.type + ':' + t.value];\n        if (a !== undefined) {\n            t.type = a[0];\n            t.value = a[1];\n        }\n    }\n    tokens = joinTokenLines(lines);\n    if (IS_DEBUG) {\n        console.log('@@@---DNCL:tokens---');\n        console.log(debugTokens(tokens));\n        console.log('@@@/---DNCL:tokens---');\n    }\n    return tokens;\n}\n/**\n * トークンが合致するかを確認する\n * @param typeValues ['word:それ']のようなタイプ名と値の配列/'*'でワイルドカードが使える/\":\"がなればタイプだけ確認/配列で選択\n * @param lines 差し替え\n * @param fromIndex 検索場所\n * @returns 合致したかどうか\n */\nfunction tokenEq(typeValues, lines, fromIndex) {\n    const check = (pattern, t) => {\n        if (pattern instanceof Array) {\n            for (let i = 0; i < pattern.length; i++) {\n                if (check(pattern[i], t)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        if (pattern === '*') {\n            return true;\n        }\n        if (pattern.indexOf(':') < 0) {\n            if (pattern === t.type) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        const tv = `${t.type}:${t.value}`;\n        if (pattern === tv) {\n            return true;\n        }\n        return false;\n    };\n    for (let i = 0; i < typeValues.length; i++) {\n        const idx = i + fromIndex;\n        if (idx >= lines.length) {\n            return false;\n        }\n        const pat = typeValues[i];\n        const t = lines[idx];\n        if (!check(pat, t)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction findTokens(tokens, findTypeValue) {\n    const findA = findTypeValue.map(s => s.split(':'));\n    for (let i = 0; i < tokens.length; i++) {\n        let flag = true;\n        for (let j = 0; j < findA.length; j++) {\n            const f = findA[j];\n            const idx = i + j;\n            if (idx >= tokens.length) {\n                return -1;\n            }\n            if (tokens[idx].type === f[0] && tokens[idx].value === f[1]) {\n                continue;\n            }\n            else {\n                flag = false;\n                break;\n            }\n        }\n        if (flag) {\n            return i;\n        }\n    }\n    return -1;\n}\nfunction useDNCL2mode(tokens) {\n    // 先頭の100語調べる\n    for (let i = 0; i < tokens.length; i++) {\n        if (i > 100) {\n            break;\n        }\n        const t = tokens[i];\n        if (t.type === 'line_comment' && DNCL2_KEYWORDS.indexOf(t.value) >= 0) {\n            t.type = 'DNCL2モード';\n            return true;\n        }\n    }\n    return false;\n}\n","/** prepareとtokenizeのソースマッピング */\nexport class SourceMappingOfTokenization {\n    /**\n       * @param {number} sourceCodeLength\n       * @param {PreprocessItem[]} preprocessed\n       */\n    constructor(sourceCodeLength, preprocessed) {\n        /** @private @readonly */\n        this.sourceCodeLength = sourceCodeLength;\n        /** @private @readonly */\n        this.preprocessed = preprocessed;\n        let i = 0;\n        /** @private @readonly @type {number[]} */\n        this.cumulativeSum = [];\n        for (const el of preprocessed) {\n            this.cumulativeSum.push(i);\n            i += el.text.length;\n        }\n        /** @private */\n        this.lastIndex = 0;\n        /** @private */\n        this.lastPreprocessedCodePosition = 0;\n    }\n    /**\n       * preprocess後の文字列上のoffsetからソースコード上のoffsetへ変換\n       * @param {number} preprocessedCodePosition\n       * @returns {number}\n       */\n    map(preprocessedCodePosition) {\n        const i = this.findIndex(preprocessedCodePosition);\n        return Math.min(this.preprocessed[i].sourcePosition + (preprocessedCodePosition - this.cumulativeSum[i]), i === this.preprocessed.length - 1 ? this.sourceCodeLength : this.preprocessed[i + 1].sourcePosition - 1);\n    }\n    /**\n       * @param {number} preprocessedCodePosition\n       * @returns {number}\n       */\n    findIndex(preprocessedCodePosition) {\n        // 連続アクセスに対する高速化\n        if (preprocessedCodePosition < this.lastPreprocessedCodePosition) {\n            this.lastIndex = 0;\n        }\n        this.lastPreprocessedCodePosition = preprocessedCodePosition;\n        for (let i = this.lastIndex; i < this.preprocessed.length - 1; i++) {\n            if (preprocessedCodePosition < this.cumulativeSum[i + 1]) {\n                this.lastIndex = i;\n                return i;\n            }\n        }\n        this.lastIndex = this.preprocessed.length - 1;\n        return this.preprocessed.length - 1;\n    }\n}\nexport class SourceMappingOfIndentSyntax {\n    /**\n       * @param {string} codeAfterProcessingIndentationSyntax\n       * @param {readonly number[]} linesInsertedByIndentationSyntax\n       * @param {readonly { lineNumber: number, len: number }[]} linesDeletedByIndentationSyntax\n       */\n    constructor(codeAfterProcessingIndentationSyntax, linesInsertedByIndentationSyntax, linesDeletedByIndentationSyntax) {\n        /** @private @type {{ offset: number, len: number }[]} */\n        this.lines = [];\n        /** @private @readonly */\n        this.linesInsertedByIndentationSyntax = linesInsertedByIndentationSyntax;\n        /** @private @readonly */\n        this.linesDeletedByIndentationSyntax = linesDeletedByIndentationSyntax;\n        let offset = 0;\n        for (const line of codeAfterProcessingIndentationSyntax.split('\\n')) {\n            this.lines.push({ offset, len: line.length });\n            offset += line.length + 1;\n        }\n        /** @private */\n        this.lastLineNumber = 0;\n        /** @private */\n        this.lastOffset = 0;\n    }\n    /**\n       * @param {number | null} startOffset\n       * @param {number | null} endOffset\n       * @returns {{ startOffset: number | null, endOffset: number | null }}\n       */\n    map(startOffset, endOffset) {\n        if (startOffset === null) {\n            return { startOffset, endOffset };\n        }\n        // 何行目かを判定\n        const tokenLine = this.getLineNumber(startOffset);\n        for (const insertedLine of this.linesInsertedByIndentationSyntax) {\n            // インデント構文の処理後のソースコードの `insertedLine` 行目にあるトークンのソースマップ情報を削除する。\n            if (tokenLine === insertedLine) {\n                startOffset = null;\n                endOffset = null;\n                break;\n            }\n            // インデント構文の処理後のソースコードの `insertedLine` 行目以降にあるトークンのoffsetから\n            // `linesInsertedByIndentationSyntax[i]` 行目の文字数（\\rを含む） を引く。\n            if (tokenLine > insertedLine) {\n                // \"\\n\"の分1足す\n                startOffset -= this.lines[insertedLine].len + 1;\n                if (endOffset !== null) {\n                    endOffset -= this.lines[insertedLine].len + 1;\n                }\n            }\n        }\n        for (const deletedLine of this.linesDeletedByIndentationSyntax) {\n            if (tokenLine >= deletedLine.lineNumber) {\n                // \"\\n\"の分1足す\n                if (startOffset !== null) {\n                    startOffset += deletedLine.len + 1;\n                }\n                if (endOffset !== null) {\n                    endOffset += deletedLine.len + 1;\n                }\n            }\n        }\n        return { startOffset, endOffset };\n    }\n    /**\n       * @param {number} offset\n       * @returns {number}\n       * @private\n       */\n    getLineNumber(offset) {\n        // 連続アクセスに対する高速化\n        if (offset < this.lastOffset) {\n            this.lastLineNumber = 0;\n        }\n        this.lastOffset = offset;\n        for (let i = this.lastLineNumber; i < this.lines.length - 1; i++) {\n            if (offset < this.lines[i + 1].offset) {\n                this.lastLineNumber = i;\n                return i;\n            }\n        }\n        this.lastLineNumber = this.lines.length - 1;\n        return this.lines.length - 1;\n    }\n}\n/** offsetから (line, column) へ変換する。 */\nexport class OffsetToLineColumn {\n    /**\n       * @param {string} code\n       */\n    constructor(code) {\n        /** @private @type {number[]} */\n        this.lineOffsets = [];\n        // 各行の先頭位置を先に計算しておく\n        let offset = 0;\n        for (const line of code.split('\\n')) {\n            this.lineOffsets.push(offset);\n            offset += line.length + 1;\n        }\n        /** @private */\n        this.lastLineNumber = 0;\n        /** @private */\n        this.lastOffset = 0;\n    }\n    /**\n       * @param {number} offset\n       * @param {boolean} oneBasedLineNumber trueのときlineを1から始める\n       * @returns {{ line: number, column: number }}\n       */\n    map(offset, oneBasedLineNumber) {\n        // 連続アクセスに対する高速化\n        if (offset < this.lastOffset) {\n            this.lastLineNumber = 0;\n        }\n        this.lastOffset = offset;\n        for (let i = this.lastLineNumber; i < this.lineOffsets.length - 1; i++) {\n            if (offset < this.lineOffsets[i + 1]) {\n                this.lastLineNumber = i;\n                return {\n                    line: i + (oneBasedLineNumber ? 1 : 0),\n                    column: offset - this.lineOffsets[i]\n                };\n            }\n        }\n        this.lastLineNumber = this.lineOffsets.length - 1;\n        return {\n            line: this.lineOffsets.length - 1 + (oneBasedLineNumber ? 1 : 0),\n            column: offset - this.lineOffsets[this.lineOffsets.length - 1]\n        };\n    }\n}\n/**\n * preCodeの分、ソースマップのoffset、行数、列数を減らす。\n * @type {<T extends {line?: number, column?: number, startOffset: number | null, endOffset: number | null }>(sourceMap: T, preCode: string) => T}\n */\nexport function subtractSourceMapByPreCodeLength(sourceMap, preCode) {\n    // offsetは単純に引くだけでよい\n    if (typeof sourceMap.startOffset === 'number') {\n        sourceMap.startOffset -= preCode.length;\n    }\n    if (typeof sourceMap.endOffset === 'number') {\n        sourceMap.endOffset -= preCode.length;\n    }\n    // たとえば preCode = 'abc\\ndef\\nghi' のとき、line -= 2 して、先頭行なら column -= 3 もする。\n    if (preCode !== '') {\n        const lines = preCode.split('\\n');\n        if (typeof sourceMap.line === 'number') {\n            sourceMap.line -= lines.length - 1;\n        }\n        if (sourceMap.line === 0 && typeof sourceMap.column === 'number') {\n            sourceMap.column -= lines[lines.length - 1].length;\n        }\n    }\n    return sourceMap;\n}\n","/**\n * ブラウザとNode.jsでテキストへの色付けを共通化するためのコード\n */\n/**\n * ANSI escape code の一部\n */\nconst color = { reset: '\\x1b[0m', bold: '\\x1b[1m', black: '\\x1b[30m', red: '\\x1b[31m', green: '\\x1b[32m', yellow: '\\x1b[33m', blue: '\\x1b[34m', magenta: '\\x1b[35m', cyan: '\\x1b[36m', white: '\\x1b[37m' };\n// 30 ~ 37\nconst colorNames = ['black', 'red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'white'];\n/** @param {string} t */\nconst escapeHTML = (t) => t.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n/**\n * ANSI escape code で色付けしたテキストを、HTMLやブラウザのconsole.log用のフォーマットに変換する。\n * たとえば `convertColorTextFormat(`foo${color.red}bar`).html` で `\"foobar\"` の `\"bar\"` の部分が赤く表示されるHTMLを取得できる。\n * @param {string} text\n * @returns {{ nodeConsole: string, noColor: string, html: string, browserConsole: string[] }}\n */\nconst convertColorTextFormat = (text) => {\n    // textから [ANSI escape code](https://en.wikipedia.org/wiki/ANSI_escape_code) を削除して、色の無いテキストを作る。\n    // eslint-disable-next-line no-control-regex\n    const noColor = text.replace(/\\x1b\\[\\d+m/g, '');\n    // nodeConsoleからbrowserConsoleを作る\n    /** @type {string[]} */\n    const browserConsoleStyles = [];\n    let consoleColor = 'inherit'; // 文字色\n    let consoleFontWeight = 'inherit'; // 文字の太さ\n    // /\\x1b\\[(\\d+)m/ で正規表現マッチし、それぞれを %c で置換すると同時に browserConsoleStyles にCSSでの表現をpushする。\n    // console.log(browserConsoleText, ...browserConsoleStyles) で表示することを想定。\n    const browserConsoleText = text === noColor\n        ? noColor\n        // eslint-disable-next-line no-control-regex\n        : text.replace(/\\x1b\\[(\\d+)m/g, (_, m1str) => {\n            const m1 = +m1str;\n            if (m1 === 0) {\n                consoleColor = 'inherit';\n                consoleFontWeight = 'inherit';\n            }\n            if (m1 === 1) {\n                consoleFontWeight = 'bold';\n            }\n            if (m1 >= 30 && m1 <= 37) {\n                consoleColor = colorNames[m1 - 30];\n            }\n            browserConsoleStyles.push(`color: ${consoleColor}; font-weight: ${consoleFontWeight};`);\n            return '%c';\n        });\n    // nodeConsoleからhtmlを作る\n    let htmlColor = 'inherit'; // 文字色\n    let htmlFontWeight = 'inherit'; // 文字の太さ\n    // textが色情報を含まないならそれをそのまま使い、含むなら全体を <span>で囲んで、更に、ANSI escape code で囲まれた部分を対応する style を付けた <span> で囲む。\n    // eslint-disable-next-line multiline-ternary\n    const html = text === noColor ? noColor : ('<span>' + escapeHTML(text)\n        // eslint-disable-next-line no-control-regex\n        .replace(/\\x1b\\[(\\d+)m/g, (_, m1str) => {\n        const m1 = +m1str;\n        if (m1 === 0) { // リセット\n            htmlColor = 'inherit';\n            htmlFontWeight = 'inherit';\n        }\n        if (m1 === 1) { // 太字化\n            htmlFontWeight = 'bold';\n        }\n        if (m1 >= 30 && m1 <= 37) { // 文字色の変更\n            htmlColor = colorNames[m1 - 30];\n        }\n        return `</span><span style=\"color: ${htmlColor}; font-weight: ${htmlFontWeight};\">`;\n    }) + '</span>');\n    // 各表現を返す。\n    return {\n        noColor,\n        nodeConsole: text === noColor\n            ? noColor // textが色の情報を含まないならnoColorを返す。\n            : text + '\\x1b[0m',\n        html,\n        browserConsole: [browserConsoleText, ...browserConsoleStyles]\n    };\n};\nexport const NakoColors = { convertColorTextFormat, colorNames, color };\n","/** NakoLogger */\nimport { NakoError, NakoRuntimeError } from './nako_errors.mjs';\nimport { NakoColors } from './nako_colors.mjs';\n/**\n * ログレベル - 数字が高いほど優先度が高い。\n */\nclass LogLevel {\n    // string to level no\n    static fromS(levelStr) {\n        let level = LogLevel.trace;\n        switch (levelStr) {\n            case 'all':\n                level = LogLevel.all;\n                break;\n            case 'trace':\n                level = LogLevel.trace;\n                break;\n            case 'debug':\n                level = LogLevel.debug;\n                break;\n            case 'info':\n                level = LogLevel.info;\n                break;\n            case 'warn':\n                level = LogLevel.warn;\n                break;\n            case 'error':\n                level = LogLevel.error;\n                break;\n            case 'stdout':\n                level = LogLevel.stdout;\n                break;\n            default:\n                throw new Error('[NakoLogger] unknown logger level:' + levelStr);\n        }\n        return level;\n    }\n    static toString(level) {\n        const levels = ['all', 'trace', 'debug', 'info', 'warn', 'error', 'stdout'];\n        return levels[level];\n    }\n}\n// level no\nLogLevel.all = 0;\nLogLevel.trace = 1;\nLogLevel.debug = 2;\nLogLevel.info = 3;\nLogLevel.warn = 4;\nLogLevel.error = 5;\nLogLevel.stdout = 6;\nexport { LogLevel };\n/**\n * エラー位置を日本語で表示する。\n * たとえば `stringifyPosition({ file: \"foo.txt\", line: 5 })` は `\"foo.txt(6行目):\"` を出力する。\n */\nfunction stringifyPosition(p) {\n    if (!p) {\n        return '';\n    }\n    return `${p.file || ''}${p.line === undefined ? '' : `(${p.line + 1}行目): `}`;\n}\n/**\n * コンパイラのログ情報を出力するためのクラス。\n * trace(), debug(), info(), warn(), error() はそれぞれメッセージに `[警告]` などのタグとエラー位置の日本語表現を付けて表示する。\n * error() は引数にエラーオブジェクトを受け取ることもでき、その場合エラーオブジェクトからエラーメッセージとエラー位置が取り出される。\n */\nexport class NakoLogger {\n    constructor() {\n        this.listeners = [];\n        this.logs = '';\n        this.position = '';\n    }\n    getErrorLogs() {\n        return [this.logs.replace(/\\s+$/, ''), this.position];\n    }\n    clear() {\n        this.logs = '';\n        this.position = '';\n    }\n    /**\n     * sendメソッドで送られた情報を受け取るコールバックを設定する。\n     * @param levelStr\n     * @param callback\n     */\n    addListener(levelStr, callback) {\n        const level = LogLevel.fromS(levelStr);\n        this.listeners.push({ level, callback });\n    }\n    /**\n     * addListenerメソッドで設定したコールバックを取り外す。\n     * @param {LogListener} callback\n     */\n    removeListener(callback) {\n        this.listeners = this.listeners.filter((l) => l.callback !== callback);\n    }\n    /** 本体開発時のデバッグ情報（debugより更に詳細な情報）\n     * @param {string} message\n     * @param {Position | null} position\n     */\n    trace(message, position = null) {\n        this.sendI(LogLevel.trace, `${NakoColors.color.bold}[デバッグ情報（詳細）]${NakoColors.color.reset}${stringifyPosition(position)}${message}`, position);\n    }\n    /** 本体開発時のデバッグ情報\n     * @param {string} message\n     * @param {Position | null} position\n     */\n    debug(message, position = null) {\n        this.sendI(LogLevel.debug, `${NakoColors.color.bold}[デバッグ情報]${NakoColors.color.reset}${stringifyPosition(position)}${message}`, position);\n    }\n    /** ユーザープログラムのデバッグ情報（あまり重要ではないもの）\n     * @param {string} message\n     * @param {Position | null} position\n     */\n    info(message, position = null) {\n        this.sendI(LogLevel.info, `${NakoColors.color.bold}${NakoColors.color.blue}[情報]${NakoColors.color.reset}${stringifyPosition(position)}${message}`, position);\n    }\n    /** ユーザープログラムのデバッグ情報（重要なもの）\n     * @param {string} message\n     * @param {Position | null} position\n     */\n    warn(message, position = null) {\n        this.sendI(LogLevel.warn, `${NakoColors.color.bold}${NakoColors.color.green}[警告]${NakoColors.color.reset}${stringifyPosition(position)}${message}`, position);\n    }\n    /** エラーメッセージ\n     * @param {string | Error} message\n     * @param {Position | null} position\n     */\n    error(message, position = null) {\n        // NakoErrorか判定 (`message instanceof NakoError`では判定できない場合がある)\n        if (message instanceof Error && typeof message.type === 'string') {\n            // NakoErrorか\n            const etype = message.type;\n            switch (etype) {\n                case 'NakoRuntimeError':\n                case 'NakoError':\n                    if (message instanceof NakoError) {\n                        const e = message;\n                        let pos = position;\n                        if (pos === null || pos === undefined) {\n                            pos = { file: e.file, line: e.line || 0, startOffset: 0, endOffset: 0 };\n                        }\n                        this.sendI(LogLevel.error, e.message, pos);\n                        return;\n                    }\n            }\n        }\n        if (message instanceof Error) {\n            // 一般のエラーの場合は、messageのみ取得できる。\n            message = message.message;\n        }\n        this.sendI(LogLevel.error, `${NakoColors.color.bold}${NakoColors.color.red}[エラー]${NakoColors.color.reset}${stringifyPosition(position)}${message}`, position);\n    }\n    /** RuntimeErrorを生成する */\n    runtimeError(error, posStr) {\n        const e = new NakoRuntimeError(error, posStr);\n        return e;\n    }\n    /** ユーザープログラムのデバッグ情報（すべて)\n     * @param {string} message\n     * @param {Position | null} position\n     */\n    stdout(message, position = null) {\n        this.sendI(LogLevel.stdout, `${message}`, position);\n    }\n    /** 指定したlevelのlistenerにメッセージを送る。htmlやbrowserConsoleは無ければnodeConsoleから生成する。 */\n    send(levelStr, nodeConsole, position, html = null, browserConsole = null) {\n        const i = LogLevel.fromS(levelStr);\n        this.sendI(i, nodeConsole, position, html, browserConsole);\n    }\n    /** 指定したlevelのlistenerにメッセージを送る。htmlやbrowserConsoleは無ければnodeConsoleから生成する。 */\n    sendI(level, nodeConsole, position, html = null, browserConsole = null) {\n        const makeData = () => {\n            // nodeConsoleからnoColor, nodeCondoleなどの形式を生成する。\n            const formats = NakoColors.convertColorTextFormat(nodeConsole);\n            // ログが複数行から構成される場合は、htmlでの表現にborderを設定する。\n            let style = '';\n            if (nodeConsole.includes('\\n')) {\n                style += 'border-top: 1px solid #8080806b; border-bottom: 1px solid #8080806b;';\n            }\n            // 各イベントリスナーが受け取るデータ\n            const data = {\n                noColor: formats.noColor,\n                nodeConsole: formats.nodeConsole,\n                browserConsole: browserConsole || formats.browserConsole,\n                html: `<div style=\"${style}\">` + (html || formats.html) + '</div>',\n                level: LogLevel.toString(level),\n                position\n            };\n            return data;\n        };\n        // エラーならログに追加\n        if (level === LogLevel.error) {\n            const data = makeData();\n            this.logs += data.noColor + '\\n';\n            if (position && this.position !== null) {\n                this.position = `l${position.line}:${position.file}`;\n            }\n        }\n        // 登録したリスナーに通知する\n        for (const l of this.listeners) {\n            if (l.level <= level) {\n                const data = makeData();\n                l.callback(data);\n            }\n        }\n    }\n}\n","import { NakoColors } from './nako_colors.mjs';\n/**\n * コンパイルされたなでしこのプログラムで、グローバル空間のthisが指すオブジェクト\n */\nexport class NakoGlobal {\n    /**\n     * @param compiler\n     * @param gen\n     */\n    constructor(compiler, gen, guid = 0) {\n        this.guid = guid;\n        this.lastJSCode = '';\n        // ユーザーのプログラムから編集される変数\n        this.__locals = {};\n        this.__varslist = [\n            { ...compiler.__varslist[0] },\n            { ...compiler.__varslist[1] },\n            { ...compiler.__varslist[2] } // local [2][3][4][5] ...\n        ];\n        this.numFailures = 0;\n        this.index = 0;\n        this.nextIndex = -1;\n        this.__code = [];\n        this.__callstack = [];\n        this.__stack = [];\n        this.__labels = [];\n        this.__genMode = gen.genMode;\n        // バージョン情報の引き継ぎ\n        this.version = compiler.version;\n        this.coreVersion = compiler.coreVersion;\n        // PluginSystemとdestroy()から参照するため\n        this.__module = { ...compiler.__module }; // shallow copy\n        this.pluginfiles = { ...compiler.getPluginfiles() };\n        // PluginWorkerでユーザー定義関数のJavaScriptコードをworkerのコンパイラのインスタンスへコピーするため\n        this.gen = gen;\n        // 以下のメソッドで使うため\n        this.logger = compiler.getLogger();\n        this.compiler = compiler;\n    }\n    clearLog() {\n        this.__varslist[0]['表示ログ'] = '';\n    }\n    get log() {\n        let s = this.__varslist[0]['表示ログ'];\n        s = s.replace(/\\s+$/, '');\n        return s;\n    }\n    /**\n     * 「ナデシコ」命令のためのメソッド\n     */\n    runEx(code, fname, opts, preCode = '') {\n        // スコープを共有して実行\n        opts.preCode = preCode;\n        opts.nakoGlobal = this;\n        return this.compiler.runSync(code, fname, opts);\n    }\n    async runAsync(code, fname, opts, preCode = '') {\n        // スコープを共有して実行\n        opts.preCode = preCode;\n        opts.nakoGlobal = this;\n        return await this.compiler.runAsync(code, fname, opts);\n    }\n    /**\n     * テスト実行のためのメソッド\n     * @param {{ name: string, f: () => void }[]} tests\n     */\n    _runTests(tests) {\n        let text = `${NakoColors.color.bold}テストの実行結果${NakoColors.color.reset}\\n`;\n        let pass = 0;\n        let numFailures = 0;\n        for (const t of tests) {\n            try {\n                t.f();\n                text += `${NakoColors.color.green}✔${NakoColors.color.reset} ${t.name}\\n`;\n                pass++;\n            }\n            catch (err) {\n                text += `${NakoColors.color.red}☓${NakoColors.color.reset} ${t.name}: ${err.message}\\n`;\n                numFailures++;\n            }\n        }\n        if (numFailures > 0) {\n            text += `${NakoColors.color.green}成功 ${pass}件 ${NakoColors.color.red}失敗 ${numFailures}件`;\n        }\n        else {\n            text += `${NakoColors.color.green}成功 ${pass}件`;\n        }\n        this.numFailures = numFailures;\n        this.logger.stdout(text);\n    }\n    /**\n     * 毎プラグインの「!クリア」関数を実行\n     */\n    clearPlugins() {\n        // 実行している関数をすべて終了させる\n        // プラグインのクリア関数を呼び出す\n        const clearName = '!クリア';\n        for (const pname in this.pluginfiles) {\n            const po = this.__module[pname];\n            if (po[clearName] && po[clearName].fn) {\n                po[clearName].fn(this);\n            }\n        }\n    }\n    /**\n     * 各種リセット処理\n     */\n    reset() {\n        this.clearPlugins();\n    }\n    destroy() {\n        this.reset();\n    }\n}\n","/** plugin_math */\nexport default {\n    '初期化': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            // 初期化不要\n        }\n    },\n    // @三角関数\n    'SIN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.sin(v);\n        }\n    },\n    'COS': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.cos(v);\n        }\n    },\n    'TAN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.tan(v);\n        }\n    },\n    'ARCSIN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.asin(v);\n        }\n    },\n    'ARCCOS': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.acos(v);\n        }\n    },\n    'ARCTAN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return Math.atan(v);\n        }\n    },\n    'ATAN2': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (y, x) {\n            return Math.atan2(y, x);\n        }\n    },\n    '座標角度計算': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (XY) {\n            return Math.atan2(XY[1], XY[0]) * 180 / Math.PI;\n        }\n    },\n    'RAD2DEG': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return v / Math.PI * 180;\n        }\n    },\n    'DEG2RAD': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return (v / 180) * Math.PI;\n        }\n    },\n    '度変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return v / Math.PI * 180;\n        }\n    },\n    'ラジアン変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return (v / 180) * Math.PI;\n        }\n    },\n    // @算術関数\n    'SIGN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (v) {\n            return (parseFloat(v) === 0) ? 0 : (v > 0) ? 1 : -1;\n        }\n    },\n    '符号': {\n        type: 'func',\n        josi: [['の']],\n        pure: false,\n        // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n        fn: function (v, sys) {\n            return sys.__exec('SIGN', [v]);\n        }\n    },\n    'ABS': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.abs(a);\n        }\n    },\n    '絶対値': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.abs(a);\n        }\n    },\n    'EXP': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.exp(a);\n        }\n    },\n    'HYPOT': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return Math.hypot(a, b);\n        }\n    },\n    '斜辺': {\n        type: 'func',\n        josi: [['と'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            return Math.hypot(a, b);\n        }\n    },\n    'LN': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.log(a);\n        }\n    },\n    'LOG': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.log(a);\n        }\n    },\n    'LOGN': {\n        type: 'func',\n        josi: [['で'], ['の']],\n        pure: true,\n        fn: function (a, b) {\n            if (a === 2) {\n                return Math.LOG2E * Math.log(b);\n            }\n            if (a === 10) {\n                return Math.LOG10E * Math.log(b);\n            }\n            return Math.log(b) / Math.log(a);\n        }\n    },\n    'FRAC': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return a % 1;\n        }\n    },\n    '小数部分': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return a % 1;\n        }\n    },\n    '整数部分': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.trunc(a);\n        }\n    },\n    '乱数': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.floor(Math.random() * a);\n        }\n    },\n    '乱数範囲': {\n        type: 'func',\n        josi: [['から'], ['までの', 'の']],\n        pure: true,\n        fn: function (a, b) {\n            return (Math.floor(Math.random() * (b - a + 1)) + a);\n        }\n    },\n    'SQRT': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.sqrt(a);\n        }\n    },\n    '平方根': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            return Math.sqrt(a);\n        }\n    },\n    // @数値切上切捨丸め\n    'ROUND': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return Math.round(v);\n        }\n    },\n    '四捨五入': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (v) {\n            return Math.round(v);\n        }\n    },\n    '小数点切上': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            const base = Math.pow(10, b);\n            return Math.ceil(a * base) / base;\n        }\n    },\n    '小数点切下': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            const base = Math.pow(10, b);\n            return Math.floor(a * base) / base;\n        }\n    },\n    '小数点四捨五入': {\n        type: 'func',\n        josi: [['を'], ['で']],\n        pure: true,\n        fn: function (a, b) {\n            const base = Math.pow(10, b);\n            return Math.round(a * base) / base;\n        }\n    },\n    'CEIL': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return Math.ceil(v);\n        }\n    },\n    '切上': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return Math.ceil(v);\n        }\n    },\n    'FLOOR': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return Math.floor(v);\n        }\n    },\n    '切捨': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (v) {\n            return Math.floor(v);\n        }\n    }\n};\n","export const options = {\n    delimiter: ',',\n    eol: '\\r\\n'\n};\nexport function resetEnv() {\n    options.delimiter = ',';\n    options.eol = '\\r\\n';\n}\nexport function parse(txt, delimiter = undefined) {\n    // delimiter\n    if (delimiter === undefined) {\n        delimiter = options.delimiter;\n    }\n    // check txt\n    txt = '' + txt + '\\n';\n    // convert CRLF to LF, and CR to LF\n    txt = txt.replace(/(\\r\\n|\\r)/g, '\\n');\n    // trim right\n    txt = txt.replace(/\\s+$/, '') + '\\n';\n    // set pattern\n    const patToDelim = '^(.*?)([\\\\' + delimiter + '\\\\n])';\n    const reToDelim = new RegExp(patToDelim);\n    // if value is number then convert to float\n    const convType = function (v) {\n        if (typeof (v) === 'string') {\n            if (v.search(/^[0-9.]+$/) >= 0) {\n                v = parseFloat(v); // convert number\n            }\n        }\n        return v;\n    };\n    // parse txt\n    const res = [];\n    let cells = [];\n    let c = '';\n    while (txt !== '') {\n        // first check delimiter (because /^\\s+/ skip delimiter'\\t') (#3)\n        c = txt.charAt(0);\n        if (c === delimiter) {\n            txt = txt.substring(1);\n            cells.push('');\n            continue;\n        }\n        // second check LF (#7)\n        if (c === '\\n') {\n            cells.push('');\n            res.push(cells);\n            cells = [];\n            txt = txt.substring(1);\n            continue;\n        }\n        // trim white space\n        txt = txt.replace(/^\\s+/, '');\n        c = txt.charAt(0);\n        // no data\n        if (c === delimiter) {\n            console.log('delimiter');\n            cells.push('');\n            txt = txt.substring(delimiter.length);\n            continue;\n        }\n        // written using the dialect of Excel\n        if (c === '=' && txt.charAt(1) === '\"') {\n            txt = txt.substring(1);\n            continue;\n        }\n        // number or simple string\n        if (c !== '\"') { // number or simple str\n            const m = reToDelim.exec(txt);\n            if (!m) {\n                cells.push(convType(txt));\n                res.push(cells);\n                cells = [];\n                break;\n            }\n            if (m[2] === '\\n') {\n                cells.push(convType(m[1]));\n                res.push(cells);\n                cells = [];\n            }\n            else if (m[2] === delimiter) {\n                cells.push(convType(m[1]));\n            }\n            txt = txt.substring(m[0].length);\n            continue;\n        }\n        // \"\" ... blank data\n        if (txt.substring(0, 2) === '\"\"') {\n            cells.push('');\n            txt = txt.substring(2);\n            continue;\n        }\n        // \"...\"\n        let i = 1;\n        let s = '';\n        while (i < txt.length) {\n            const c1 = txt.charAt(i);\n            const c2 = txt.charAt(i + 1);\n            // console.log(\"@\" + c1 + c2);\n            // 2quote => 1quote char\n            if (c1 === '\"' && c2 === '\"') {\n                i += 2;\n                s += '\"';\n                continue;\n            }\n            if (c1 === '\"') {\n                i++;\n                if (c2 === delimiter) {\n                    i++;\n                    cells.push(convType(s));\n                    s = '';\n                    break;\n                }\n                if (c2 === '\\n') {\n                    i++;\n                    cells.push(convType(s));\n                    res.push(cells);\n                    cells = [];\n                    break;\n                }\n                // if (c2 === \" \" || c2 === \"\\t\") {\n                i++;\n                continue;\n            }\n            s += c1;\n            i++;\n        }\n        txt = txt.substr(i);\n    }\n    if (cells.length > 0)\n        res.push(cells);\n    return res;\n}\nexport function stringify(ary, delimiter = undefined, eol = undefined) {\n    // check arguments\n    if (delimiter === undefined) {\n        delimiter = options.delimiter;\n    }\n    if (eol === undefined) {\n        eol = options.eol;\n    }\n    const valueConv = genValueConverter(delimiter);\n    if (ary === undefined)\n        return '';\n    let r = '';\n    for (let i = 0; i < ary.length; i++) {\n        const cells = ary[i];\n        if (cells === undefined) {\n            r += eol;\n            continue;\n        }\n        for (let j = 0; j < cells.length; j++) {\n            cells[j] = valueConv(cells[j]);\n        }\n        r += cells.join(delimiter) + eol;\n    }\n    // replace return code\n    r = r.replace(/(\\r\\n|\\r|\\n)/g, eol);\n    return r;\n}\nexport function replaceEolMark(eol) {\n    eol = eol.replace(/\\n\\r/g, '[CRLF]');\n    eol = eol.replace(/\\r/g, '[CR]');\n    eol = eol.replace(/\\n/g, '[LF]');\n    return eol;\n}\nfunction genValueConverter(delimiter) {\n    return function (s) {\n        s = '' + s;\n        let fQuot = false;\n        if (s.indexOf('\\n') >= 0 || s.indexOf('\\r') >= 0) {\n            fQuot = true;\n        }\n        if (s.indexOf(delimiter) >= 0) {\n            fQuot = true;\n        }\n        if (s.indexOf('\"') >= 0) {\n            fQuot = true;\n            s = s.replace(/\"/g, '\"\"');\n        }\n        if (fQuot)\n            s = '\"' + s + '\"';\n        return s;\n    };\n}\n","import { options, parse, stringify } from './nako_csv.mjs';\nconst PluginCSV = {\n    '初期化': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            // 基本的に初期化不要\n        }\n    },\n    // @CSV操作\n    'CSV取得': {\n        type: 'func',\n        josi: [['を', 'の', 'で']],\n        pure: true,\n        fn: function (str) {\n            options.delimiter = ',';\n            return parse(str);\n        }\n    },\n    'TSV取得': {\n        type: 'func',\n        josi: [['を', 'の', 'で']],\n        pure: true,\n        fn: function (str) {\n            options.delimiter = '\\t';\n            return parse(str);\n        }\n    },\n    '表CSV変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (a) {\n            options.delimiter = ',';\n            return stringify(a);\n        }\n    },\n    '表TSV変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (a) {\n            options.delimiter = '\\t';\n            return stringify(a);\n        }\n    }\n};\nexport default PluginCSV;\n","export default {\n    '初期化': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (sys.__promise == null) {\n                sys.__promise = {\n                    setLastPromise: function (promise) {\n                        sys.__v0['そ'] = promise;\n                        return promise;\n                    }\n                };\n            }\n        }\n    },\n    // @非同期処理の保証の定数\n    'そ': { type: 'const', value: '' },\n    // @非同期処理の保証\n    '動時': {\n        type: 'func',\n        josi: [['を', 'で']],\n        pure: true,\n        fn: function (callback, sys) {\n            return sys.__promise.setLastPromise(new Promise((resolve, reject) => {\n                return callback(resolve, reject);\n            }));\n        },\n        return_none: false\n    },\n    '成功時': {\n        type: 'func',\n        josi: [['を'], ['の', 'が', 'に']],\n        pure: true,\n        fn: function (callback, promise, sys) {\n            return sys.__promise.setLastPromise(promise.then((result) => {\n                sys.__v0['対象'] = result;\n                return callback(result);\n            }));\n        },\n        return_none: false\n    },\n    '処理時': {\n        type: 'func',\n        josi: [['を'], ['の', 'が', 'に']],\n        pure: true,\n        fn: function (cbFunc, promise, sys) {\n            return sys.__promise.setLastPromise(promise.then((result) => {\n                sys.__v0['対象'] = result;\n                return cbFunc(true, result, sys);\n            }, (reason) => {\n                sys.__v0['対象'] = reason;\n                return cbFunc(false, reason, sys);\n            }));\n        },\n        return_none: false\n    },\n    '失敗時': {\n        type: 'func',\n        josi: [['を'], ['の', 'が', 'に']],\n        pure: true,\n        fn: function (callback, promise, sys) {\n            return sys.__promise.setLastPromise(promise.catch((err) => {\n                sys.__v0['対象'] = err;\n                return callback(err);\n            }));\n        },\n        return_none: false\n    },\n    '終了時': {\n        type: 'func',\n        josi: [['を'], ['の', 'が', 'に']],\n        pure: true,\n        fn: function (callback, promise, sys) {\n            return sys.__promise.setLastPromise(promise.finally(() => {\n                return callback();\n            }));\n        },\n        return_none: false\n    },\n    '束': {\n        type: 'func',\n        josi: [['と', 'を']],\n        pure: true,\n        fn: function (...args) {\n            const sys = args.pop();\n            return sys.__promise.setLastPromise(Promise.all(args));\n        },\n        return_none: false\n    }\n};\n","/**\n * file: plugin_test.js\n * テスト実行用プラグイン\n */\nexport default {\n    // @テスト\n    'ASSERT等': {\n        type: 'func',\n        josi: [['と'], ['が']],\n        pure: true,\n        fn: function (a, b) {\n            if (a !== b) {\n                throw new Error(`不一致 [実際]${a} [期待]${b}`);\n            }\n            return true;\n        }\n    },\n    'テスト実行': {\n        type: 'func',\n        josi: [['と'], ['で']],\n        pure: false,\n        fn: function (a, b, sys) {\n            sys.__exec('ASSERT等', [a, b, sys]);\n        }\n    },\n    'テスト等': {\n        type: 'func',\n        josi: [['と'], ['が']],\n        pure: false,\n        fn: function (a, b, sys) {\n            sys.__exec('ASSERT等', [a, b, sys]);\n        }\n    }\n};\n","// parser / lexer\nimport { NakoParser } from './nako_parser3.mjs';\nimport { NakoLexer } from './nako_lexer.mjs';\nimport { NakoPrepare } from './nako_prepare.mjs';\nimport { generateJS, NakoGenOptions } from './nako_gen.mjs';\nimport { NakoGenASync } from './nako_gen_async.mjs';\nimport { convertInlineIndent, convertIndentSyntax } from './nako_indent_inline.mjs';\nimport { convertDNCL } from './nako_from_dncl.mjs';\nimport { convertDNCL2 } from './nako_from_dncl2.mjs';\nimport { SourceMappingOfTokenization, SourceMappingOfIndentSyntax, OffsetToLineColumn, subtractSourceMapByPreCodeLength } from './nako_source_mapping.mjs';\nimport { NakoLexerError, NakoImportError, NakoSyntaxError, InternalLexerError } from './nako_errors.mjs';\nimport { NakoLogger } from './nako_logger.mjs';\nimport { NakoGlobal } from './nako_global.mjs';\n// version info\nimport coreVersion from './nako_core_version.mjs';\n// basic plugins\nimport PluginSystem from './plugin_system.mjs';\nimport PluginMath from './plugin_math.mjs';\nimport PluginCSV from './plugin_csv.mjs';\nimport PluginPromise from './plugin_promise.mjs';\nimport PluginTest from './plugin_test.mjs';\nconst cloneAsJSON = (x) => JSON.parse(JSON.stringify(x));\n/** コンパイラ実行オプションを生成 */\nexport function newCompilerOptions(initObj = {}) {\n    if (typeof initObj !== 'object') {\n        initObj = {};\n    }\n    initObj.testOnly = initObj.testOnly || false;\n    initObj.resetEnv = initObj.resetEnv || false;\n    initObj.resetAll = initObj.resetAll || false;\n    initObj.preCode = initObj.preCode || '';\n    initObj.nakoGlobal = initObj.nakoGlobal || null;\n    return initObj;\n}\n/** なでしこコンパイラ */\nexport class NakoCompiler {\n    /**\n     * @param {undefined | {'useBasicPlugin':true|false}} options\n     */\n    constructor(options = undefined) {\n        if (options === undefined) {\n            options = { useBasicPlugin: true };\n        }\n        // 環境のリセット\n        this.__varslist = [{}, {}, {}]; // このオブジェクトは変更しないこと (this.gen.__varslist と共有する)\n        this.__locals = {}; // ローカル変数\n        this.__self = this;\n        this.__vars = this.__varslist[2];\n        this.__v0 = this.__varslist[0];\n        this.__v1 = this.__varslist[1];\n        // バージョンを設定\n        this.version = coreVersion.version;\n        this.coreVersion = coreVersion.version;\n        this.__globals = []; // 生成した NakoGlobal のインスタンスを保持\n        this.__globalObj = null;\n        this.__module = {}; // requireなどで取り込んだモジュールの一覧\n        this.pluginFunclist = {}; // プラグインで定義された関数\n        this.funclist = {}; // プラグインで定義された関数 + ユーザーが定義した関数\n        this.moduleExport = {};\n        this.pluginfiles = {}; // 取り込んだファイル一覧\n        this.commandlist = new Set(); // プラグインで定義された定数・変数・関数の名前\n        this.nakoFuncList = {}; // __v1に配置するJavaScriptのコードで定義された関数\n        this.eventList = []; // 実行前に環境を変更するためのイベント\n        this.codeGenerateor = {}; // コードジェネレータ\n        this.debugOption = { useDebug: false, waitTime: 0 };\n        this.logger = new NakoLogger();\n        this.filename = 'main.nako3';\n        /**\n         * 取り込み文を置換するためのオブジェクト。\n         * 正規化されたファイル名がキーになり、取り込み文の引数に指定された正規化されていないファイル名はaliasに入れられる。\n         * JavaScriptファイルによるプラグインの場合、contentは空文字列。\n         * funclistはシンタックスハイライトの高速化のために事前に取り出した、ファイルが定義する関数名のリスト。\n         */\n        this.dependencies = {};\n        this.usedFuncs = new Set();\n        this.numFailures = 0;\n        if (options.useBasicPlugin) {\n            this.addBasicPlugins();\n        }\n        // 必要なオブジェクトを覚えておく\n        this.prepare = NakoPrepare.getInstance();\n        this.parser = new NakoParser(this.logger);\n        this.lexer = new NakoLexer(this.logger);\n        // 関数一覧を設定\n        this.lexer.setFuncList(this.funclist);\n        this.lexer.setModuleExport(this.moduleExport);\n    }\n    /** モジュール(名前空間)の一覧を取得する */\n    getModList() {\n        return this.lexer.modList;\n    }\n    getLogger() {\n        return this.logger;\n    }\n    getNakoFuncList() {\n        return this.nakoFuncList;\n    }\n    getNakoFunc(name) {\n        return this.nakoFuncList[name];\n    }\n    getPluginfiles() {\n        return this.pluginfiles;\n    }\n    /**\n     * 基本的なプラグインを追加する\n     */\n    addBasicPlugins() {\n        this.addPluginObject('PluginSystem', PluginSystem);\n        this.addPluginObject('PluginMath', PluginMath);\n        this.addPluginObject('PluginPromise', PluginPromise);\n        this.addPluginObject('PluginAssert', PluginTest);\n        this.addPluginObject('PluginCSV', PluginCSV);\n    }\n    /**\n     * loggerを新しいインスタンスで置き換える。\n     */\n    replaceLogger() {\n        const logger = this.lexer.logger = this.parser.logger = this.logger = new NakoLogger();\n        return logger;\n    }\n    /**\n     * ファイル内のrequire文の位置を列挙する。出力の配列はstartでソートされている。\n     * @param {Token[]} tokens rawtokenizeの出力\n     */\n    static listRequireStatements(tokens) {\n        const requireStatements = [];\n        for (let i = 0; i + 2 < tokens.length; i++) {\n            // not (string|string_ex) '取り込み'\n            if (!(tokens[i].type === 'not' &&\n                (tokens[i + 1].type === 'string' || tokens[i + 1].type === 'string_ex') &&\n                tokens[i + 2].value === '取込')) {\n                continue;\n            }\n            requireStatements.push({\n                ...tokens[i],\n                start: i,\n                end: i + 3,\n                value: tokens[i + 1].value + '',\n                firstToken: tokens[i],\n                lastToken: tokens[i + 2]\n            });\n            i += 2;\n        }\n        return requireStatements;\n    }\n    /**\n     * プログラムが依存するファイルを再帰的に取得する。\n     * - 依存するファイルがJavaScriptファイルの場合、そのファイルを実行して評価結果をthis.addPluginFileに渡す。\n     * - 依存するファイルがなでしこ言語の場合、ファイルの中身を取得して変数に保存し、再帰する。\n     *\n     * @param {string} code\n     * @param {string} filename\n     * @param {string} preCode\n     * @param {LoaderTool} tools 実行環境 (ブラウザ or Node.js) によって外部ファイルの取得・実行方法は異なるため、引数でそれらを行う関数を受け取る。\n     *  - resolvePath は指定した名前をもつファイルを検索し、正規化されたファイル名を返す関数。返されたファイル名はreadNako3かreadJsの引数になる。\n     *  - readNako3は指定されたファイルの中身を返す関数。\n     *  - readJsは指定したファイルをJavaScriptのプログラムとして実行し、`export default` でエクスポートされた値を返す関数。\n     * @returns {Promise<unknown> | void}\n     * @protected\n     */\n    _loadDependencies(code, filename, preCode, tools) {\n        const dependencies = {};\n        const compiler = new NakoCompiler({ useBasicPlugin: true });\n        /**\n         * @param {any} item\n         * @param {any} tasks\n         */\n        const loadJS = (item, tasks) => {\n            // jsならプラグインとして読み込む。(ESMでは必ず動的に読む)\n            const obj = tools.readJs(item.filePath, item.firstToken);\n            tasks.push(obj.task.then((res) => {\n                const pluginFuncs = res();\n                this.addPluginFile(item.value, item.filePath, pluginFuncs, false);\n                dependencies[item.filePath].funclist = pluginFuncs;\n                dependencies[item.filePath].moduleExport = {};\n                dependencies[item.filePath].addPluginFile = () => { this.addPluginFile(item.value, item.filePath, pluginFuncs, false); };\n            }));\n        };\n        const loadNako3 = (item, tasks) => {\n            // nako3ならファイルを読んでdependenciesに保存する。\n            const content = tools.readNako3(item.filePath, item.firstToken);\n            const registerFile = (code) => {\n                // シンタックスハイライトの高速化のために、事前にファイルが定義する関数名のリストを取り出しておく。\n                // preDefineFuncはトークン列に変更を加えるため、事前にクローンしておく。\n                // 「プラグイン名設定」を行う (#956)\n                const modName = NakoLexer.filenameToModName(item.filePath);\n                code = `『${modName}』に名前空間設定;『${modName}』にプラグイン名設定;` + code + ';名前空間ポップ;';\n                const tokens = this.rawtokenize(code, 0, item.filePath);\n                dependencies[item.filePath].tokens = tokens;\n                const funclist = {};\n                const moduleexport = {};\n                NakoLexer.preDefineFunc(cloneAsJSON(tokens), this.logger, funclist, moduleexport);\n                dependencies[item.filePath].funclist = funclist;\n                dependencies[item.filePath].moduleExport = moduleexport;\n                // 再帰\n                return loadRec(code, item.filePath, '');\n            };\n            // 取り込み構文における問題を減らすため、必ず非同期でプログラムを読み込む仕様とした #1219\n            tasks.push(content.task.then((res) => registerFile(res)));\n        };\n        const loadRec = (code, filename, preCode) => {\n            const tasks = [];\n            // 取り込みが必要な情報一覧を調べる(トークン分割して、取り込みタグを得る)\n            const tags = NakoCompiler.listRequireStatements(compiler.rawtokenize(code, 0, filename, preCode));\n            // パスを解決する\n            const tagsResolvePath = tags.map((v) => ({ ...v, ...tools.resolvePath(v.value, v.firstToken, filename) }));\n            // 取り込み開始\n            for (const item of tagsResolvePath) {\n                // 2回目以降の読み込み\n                // eslint-disable-next-line no-prototype-builtins\n                if (dependencies.hasOwnProperty(item.filePath)) {\n                    dependencies[item.filePath].alias.add(item.value);\n                    continue;\n                }\n                // 初回の読み込み\n                // eslint-disable-next-line @typescript-eslint/no-empty-function\n                dependencies[item.filePath] = { tokens: [], alias: new Set([item.value]), addPluginFile: () => { }, funclist: {}, moduleExport: {} };\n                if (item.type === 'js' || item.type === 'mjs') {\n                    loadJS(item, tasks);\n                }\n                else if (item.type === 'nako3') {\n                    loadNako3(item, tasks);\n                }\n                else {\n                    throw new NakoImportError(`ファイル『${item.value}』を読み込めません。ファイルが存在しないか未対応の拡張子です。`, item.firstToken.file, item.firstToken.line);\n                }\n            }\n            if (tasks.length > 0) {\n                return Promise.all(tasks);\n            }\n            return undefined;\n        };\n        try {\n            const result = loadRec(code, filename, preCode);\n            // 非同期な場合のエラーハンドリング\n            if (result !== undefined) {\n                result.catch((err) => {\n                    // 読み込みに失敗したら処理を中断する\n                    this.logger.error(err.msg);\n                    this.numFailures++;\n                });\n            }\n            // すべてが終わってからthis.dependenciesに代入する。そうしないと、「実行」ボタンを連打した場合など、\n            // loadDependencies() が並列実行されるときに正しく動作しない。\n            this.dependencies = dependencies;\n            return result;\n        }\n        catch (err) {\n            // 同期処理では素直に例外を投げる\n            this.logger.error('' + err);\n            throw err;\n        }\n    }\n    /**\n     * コードを単語に分割する\n     * @param code なでしこのプログラム\n     * @param line なでしこのプログラムの行番号\n     * @param filename\n     * @param preCode\n     * @returns トークンのリスト\n     */\n    rawtokenize(code, line, filename, preCode = '') {\n        if (!code.startsWith(preCode)) {\n            throw new Error('codeの先頭にはpreCodeを含める必要があります。');\n        }\n        // 名前空間のモジュールリストに自身を追加\n        const modName = NakoLexer.filenameToModName(filename);\n        const modList = this.getModList();\n        if (modList.indexOf(modName) < 0) {\n            modList.unshift(modName);\n        }\n        // 全角半角の統一処理\n        const preprocessed = this.prepare.convert(code);\n        const tokenizationSourceMapping = new SourceMappingOfTokenization(code.length, preprocessed);\n        const indentationSyntaxSourceMapping = new SourceMappingOfIndentSyntax(code, [], []);\n        const offsetToLineColumn = new OffsetToLineColumn(code);\n        // トークン分割\n        let tokens;\n        try {\n            tokens = this.lexer.tokenize(preprocessed.map((v) => v.text).join(''), line, filename);\n        }\n        catch (err) {\n            if (!(err instanceof InternalLexerError)) {\n                throw err;\n            }\n            // エラー位置をソースコード上の位置に変換して返す\n            const dest = indentationSyntaxSourceMapping.map(tokenizationSourceMapping.map(err.preprocessedCodeStartOffset), tokenizationSourceMapping.map(err.preprocessedCodeEndOffset));\n            const line = dest.startOffset === null ? err.line : offsetToLineColumn.map(dest.startOffset, false).line;\n            const map = subtractSourceMapByPreCodeLength({ ...dest, line }, preCode);\n            throw new NakoLexerError(err.msg, map.startOffset, map.endOffset, map.line, filename);\n        }\n        // DNCL ver2 (core #41)\n        tokens = convertDNCL2(tokens);\n        // DNCL ver1 (#1140)\n        tokens = convertDNCL(tokens);\n        // インデント構文を変換 #596\n        tokens = convertIndentSyntax(tokens);\n        // インラインインデントを変換 #1215\n        tokens = convertInlineIndent(tokens);\n        // ソースコード上の位置に変換\n        tokens = tokens.map((token) => {\n            const dest = indentationSyntaxSourceMapping.map(tokenizationSourceMapping.map(token.preprocessedCodeOffset || 0), tokenizationSourceMapping.map((token.preprocessedCodeOffset || 0) + (token.preprocessedCodeLength || 0)));\n            let line = token.line;\n            let column = 0;\n            if (token.type === 'eol' && dest.endOffset !== null) {\n                // eolはnako_genで `line = ${eolToken.line};` に変換されるため、\n                // 行末のeolのlineは次の行の行数を表す必要がある。\n                const out = offsetToLineColumn.map(dest.endOffset, false);\n                line = out.line;\n                column = out.column;\n            }\n            else if (dest.startOffset !== null) {\n                const out = offsetToLineColumn.map(dest.startOffset, false);\n                line = out.line;\n                column = out.column;\n            }\n            return {\n                ...token,\n                ...subtractSourceMapByPreCodeLength({ line, column, startOffset: dest.startOffset, endOffset: dest.endOffset }, preCode),\n                rawJosi: token.josi\n            };\n        });\n        return tokens;\n    }\n    /**\n     * 単語の属性を構文解析に先立ち補正する\n     * @param {Token[]} tokens トークンのリスト\n     * @param {boolean} isFirst 最初の呼び出しかどうか\n     * @param {string} filename\n     * @returns コード (なでしこ)\n     */\n    converttoken(tokens, isFirst, filename) {\n        const tok = this.lexer.replaceTokens(tokens, isFirst, filename);\n        return tok;\n    }\n    /**\n     * 環境のリセット\n     * {NakoResetOption|undefined}\n     */\n    reset(options = undefined) {\n        if (!options || options.needToClearPlugin) {\n            // (メモ) #1245\n            // 通常、リセット処理では、プラグインの!クリアを呼ぶ。\n            // しかし、エディタではクリアイベントを呼ぶと、時計などのコンテンツが止まってしまう\n            // そのため、例外的にオプションを指定すると、プラグインのクリアイベントを呼ばない\n            this.clearPlugins();\n        }\n        /**\n         * なでしこのローカル変数をスタックで管理\n         * __varslist[0] プラグイン領域\n         * __varslist[1] なでしこグローバル領域\n         * __varslist[2] 最初のローカル変数 ( == __vars }\n         */\n        this.__varslist = [this.__varslist[0], {}, {}];\n        this.__v0 = this.__varslist[0];\n        this.__v1 = this.__varslist[1];\n        this.__vars = this.__varslist[2];\n        this.__locals = {};\n        // プラグイン命令以外を削除する。\n        this.funclist = {};\n        for (const name of Object.keys(this.__v0)) {\n            const original = this.pluginFunclist[name];\n            if (!original) {\n                continue;\n            }\n            this.funclist[name] = JSON.parse(JSON.stringify(original));\n        }\n        this.lexer.setFuncList(this.funclist);\n        this.moduleExport = {};\n        this.lexer.setModuleExport(this.moduleExport);\n        this.logger.clear();\n    }\n    /**\n     * typeがcodeのトークンを単語に分割するための処理\n     * @param {string} code\n     * @param {number} line\n     * @param {string} filename\n     * @param {number | null} startOffset\n     * @returns\n     * @private\n     */\n    lexCodeToken(code, line, filename, startOffset) {\n        // 単語に分割\n        let tokens = this.rawtokenize(code, line, filename, '');\n        // 文字列内位置からファイル内位置へ変換\n        if (startOffset === null) {\n            for (const token of tokens) {\n                token.startOffset = undefined;\n                token.endOffset = undefined;\n            }\n        }\n        else {\n            for (const token of tokens) {\n                if (token.startOffset !== undefined) {\n                    token.startOffset += startOffset;\n                }\n                if (token.endOffset !== undefined) {\n                    token.endOffset += startOffset;\n                }\n            }\n        }\n        // convertTokenで消されるコメントのトークンを残す\n        const commentTokens = tokens.filter((t) => t.type === 'line_comment' || t.type === 'range_comment')\n            .map((v) => ({ ...v })); // clone\n        tokens = this.converttoken(tokens, false, filename);\n        return { tokens, commentTokens };\n    }\n    /**\n     * 再帰的にrequire文を置換する。\n     * .jsであれば削除し、.nako3であればそのファイルのトークン列で置換する。\n     * @param {TokenWithSourceMap[]} tokens\n     * @param {Set<string>} [includeGuard]\n     * @returns {Token[]} 削除された取り込み文のトークン\n     */\n    replaceRequireStatements(tokens, includeGuard = new Set()) {\n        /** @type {TokenWithSourceMap[]} */\n        const deletedTokens = [];\n        for (const r of NakoCompiler.listRequireStatements(tokens).reverse()) {\n            // C言語のinclude guardと同じ仕組みで無限ループを防ぐ。\n            if (includeGuard.has(r.value)) {\n                deletedTokens.push(...tokens.splice((r.start || 0), (r.end || 0) - (r.start || 0)));\n                continue;\n            }\n            const filePath = Object.keys(this.dependencies).find((key) => this.dependencies[key].alias.has(r.value));\n            if (filePath === undefined) {\n                if (!r.firstToken) {\n                    throw new Error(`ファイル『${r.value}』が読み込まれていません。`);\n                }\n                throw new NakoLexerError(`ファイル『${r.value}』が読み込まれていません。`, r.firstToken.startOffset || 0, r.firstToken.endOffset || 0, r.firstToken.line, r.firstToken.file);\n            }\n            this.dependencies[filePath].addPluginFile();\n            const children = cloneAsJSON(this.dependencies[filePath].tokens);\n            includeGuard.add(r.value);\n            deletedTokens.push(...this.replaceRequireStatements(children, includeGuard));\n            deletedTokens.push(...tokens.splice(r.start || 0, (r.end || 0) - (r.start || 0), ...children));\n        }\n        return deletedTokens;\n    }\n    /**\n     * replaceRequireStatementsのシンタックスハイライト用の実装。\n     * @param {TokenWithSourceMap[]} tokens\n     * @returns {TokenWithSourceMap[]} 削除された取り込み文のトークン\n     */\n    removeRequireStatements(tokens) {\n        /** @type {TokenWithSourceMap[]} */\n        const deletedTokens = [];\n        for (const r of NakoCompiler.listRequireStatements(tokens).reverse()) {\n            // プラグイン命令のシンタックスハイライトのために、addPluginFileを呼んで関数のリストをthis.dependencies[filePath].funclistに保存させる。\n            const filePath = Object.keys(this.dependencies).find((key) => this.dependencies[key].alias.has(r.value));\n            if (filePath !== undefined) {\n                this.dependencies[filePath].addPluginFile();\n            }\n            // 全ての取り込み文を削除する。そうしないとトークン化に時間がかかりすぎる。\n            deletedTokens.push(...tokens.splice(r.start || 0, (r.end || 0) - (r.start || 0)));\n        }\n        return deletedTokens;\n    }\n    /** 字句解析を行う */\n    lex(code, filename = 'main.nako3', preCode = '', syntaxHighlighting = false) {\n        // 単語に分割\n        let tokens = this.rawtokenize(code, 0, filename, preCode);\n        // require文を再帰的に置換する\n        const requireStatementTokens = syntaxHighlighting ? this.removeRequireStatements(tokens) : this.replaceRequireStatements(tokens, undefined);\n        for (const t of requireStatementTokens) {\n            if (t.type === 'word' || t.type === 'not') {\n                t.type = 'require';\n            }\n        }\n        if (requireStatementTokens.length >= 3) {\n            // modList を更新\n            for (let i = 0; i < requireStatementTokens.length; i += 3) {\n                let modName = requireStatementTokens[i + 1].value;\n                modName = NakoLexer.filenameToModName(modName);\n                if (this.lexer.modList.indexOf(modName) < 0) {\n                    this.lexer.modList.push(modName);\n                }\n            }\n        }\n        // convertTokenで消されるコメントのトークンを残す\n        const commentTokens = tokens.filter((t) => t.type === 'line_comment' || t.type === 'range_comment')\n            .map((v) => ({ ...v })); // clone\n        tokens = this.converttoken(tokens, true, filename);\n        for (let i = 0; i < tokens.length; i++) {\n            if (tokens[i] && tokens[i].type === 'code') {\n                const children = this.lexCodeToken(tokens[i].value, tokens[i].line, filename, tokens[i].startOffset || 0);\n                commentTokens.push(...children.commentTokens);\n                tokens.splice(i, 1, ...children.tokens);\n                i--;\n            }\n        }\n        this.logger.trace('--- lex ---\\n' + JSON.stringify(tokens, null, 2));\n        return { commentTokens, tokens, requireTokens: requireStatementTokens };\n    }\n    /**\n     * コードをパースしてASTにする\n     */\n    parse(code, filename, preCode = '') {\n        // 関数リストを字句解析と構文解析に登録\n        this.lexer.setFuncList(this.funclist);\n        this.parser.setFuncList(this.funclist);\n        // 関数リストを字句解析と構文解析に登録\n        this.lexer.setModuleExport(this.moduleExport);\n        this.parser.setModuleExport(this.moduleExport);\n        // 字句解析を行う\n        const lexerOutput = this.lex(code, filename, preCode);\n        // 構文木を作成\n        let ast;\n        try {\n            this.parser.genMode = 'sync'; // set default\n            ast = this.parser.parse(lexerOutput.tokens, filename);\n        }\n        catch (err) {\n            if (typeof err.startOffset !== 'number') {\n                throw NakoSyntaxError.fromNode(err.message, lexerOutput.tokens[this.parser.getIndex()]);\n            }\n            throw err;\n        }\n        // 使用したシステム関数の一覧を this.usedFuns に入れる(エディタなどで利用される)\n        this.usedFuncs = this.parser.usedFuncs; // 全ての関数呼び出し\n        this.deleteUnNakoFuncs(); // システム関数以外を削除\n        this.logger.trace('--- ast ---\\n' + JSON.stringify(ast, null, 2));\n        return ast;\n    }\n    getUsedFuncs(ast) {\n        const queue = [ast];\n        this.usedFuncs = new Set();\n        while (queue.length > 0) {\n            const ast_ = queue.pop();\n            if (ast_ !== null && ast_ !== undefined && ast_.block !== null && ast_.block !== undefined) {\n                this.getUsedAndDefFuncs(queue, JSON.parse(JSON.stringify(ast_.block)));\n            }\n        }\n        return this.deleteUnNakoFuncs();\n    }\n    getUsedAndDefFuncs(astQueue, blockQueue) {\n        while (blockQueue.length > 0) {\n            const block = blockQueue.pop();\n            if (block !== null && block !== undefined) {\n                this.getUsedAndDefFunc(block, astQueue, blockQueue);\n            }\n        }\n    }\n    getUsedAndDefFunc(block, astQueue, blockQueue) {\n        if (['func', 'func_pointer'].includes(block.type) && block.name !== null && block.name !== undefined) {\n            this.usedFuncs.add(block.name);\n        }\n        astQueue.push([block, block.block]);\n        // eslint-disable-next-line prefer-spread\n        blockQueue.push.apply(blockQueue, [block.value].concat(block.args));\n    }\n    deleteUnNakoFuncs() {\n        for (const func of this.usedFuncs) {\n            if (!this.commandlist.has(func)) {\n                this.usedFuncs.delete(func);\n            }\n        }\n        return this.usedFuncs;\n    }\n    /**\n     * プログラムをコンパイルしてランタイム用のJavaScriptのコードを返す\n     * @param code コード (なでしこ)\n     * @param filename\n     * @param isTest テストかどうか\n     * @param preCode\n     */\n    compile(code, filename, isTest = false, preCode = '') {\n        const opt = newCompilerOptions();\n        opt.testOnly = isTest;\n        opt.preCode = preCode;\n        const res = this.compileFromCode(code, filename, opt);\n        return res.runtimeEnv;\n    }\n    /** parse & generate  */\n    compileFromCode(code, filename, options = undefined) {\n        if (filename === '') {\n            filename = 'main.nako3';\n        }\n        if (options === undefined) {\n            options = newCompilerOptions();\n        }\n        try {\n            if (options.resetEnv) {\n                this.reset();\n            }\n            if (options.resetAll) {\n                this.clearPlugins();\n            }\n            // onBeforeParse\n            this.eventList.filter(o => o.eventName === 'beforeParse').map(e => e.callback(code));\n            // parse\n            const ast = this.parse(code, filename, options.preCode);\n            // onBeforeGenerate\n            this.eventList.filter(o => o.eventName === 'beforeGenerate').map(e => e.callback(ast));\n            // generate\n            const outCode = this.generateCode(ast, new NakoGenOptions(options.testOnly));\n            // onAfterGenerate\n            this.eventList.filter(o => o.eventName === 'afterGenerate').map(e => e.callback(outCode));\n            return outCode;\n        }\n        catch (e) {\n            this.logger.error(e);\n            throw e;\n        }\n    }\n    /**\n     * プログラムをコンパイルしてJavaScriptのコードオブジェクトを返す\n     * @param ast\n     * @param opt テストかどうか\n     */\n    generateCode(ast, opt) {\n        // Select Code Generator #637\n        const mode = ast.genMode || '';\n        // normal mode\n        if (mode === 'sync') {\n            return generateJS(this, ast, opt);\n        }\n        // 非推奨の非同期モード #1164\n        if (mode === '非同期モード') {\n            this.logger.warn('『!非同期モード』の利用は非推奨です。[詳細](https://github.com/kujirahand/nadesiko3/issues/1164)');\n            return NakoGenASync.generate(this, ast, opt.isTest);\n        }\n        // その他のコードジェネレータ(PHPなど)\n        const genObj = this.codeGenerateor[mode];\n        if (!genObj) {\n            throw new Error(`コードジェネレータの「${mode}」はサポートされていません。`);\n        }\n        return genObj.generate(this, ast, opt.isTest);\n    }\n    /** コードジェネレータを追加する */\n    addCodeGenerator(mode, obj) {\n        this.codeGenerateor[mode] = obj;\n    }\n    /** (非推奨)\n     * @param code\n     * @param fname\n     * @param isReset\n     * @param isTest テストかどうか。stringの場合は1つのテストのみ。\n     * @param [preCode]\n     * @deprecated 代わりにrunAsyncメソッドを使ってください。(core #52)\n     */\n    async _run(code, fname, isReset, isTest, preCode = '') {\n        const opts = newCompilerOptions({\n            resetEnv: isReset,\n            resetAll: isReset,\n            testOnly: isTest,\n            preCode\n        });\n        return this._runEx(code, fname, opts);\n    }\n    /** 各プラグインをリセットする */\n    clearPlugins() {\n        // 他に実行している「なでしこ」があればクリアする\n        this.__globals.forEach((sys) => {\n            sys.__varslist[0].forceClose = true; // core #56\n            sys.reset();\n        });\n        this.__globals = []; // clear\n    }\n    /**\n     * 環境を指定してJavaScriptのコードを実行する\n     * @param code JavaScriptのコード\n     * @param nakoGlobal 実行環境\n     */\n    evalJS(code, nakoGlobal) {\n        this.__globalObj = nakoGlobal; // 現在のnakoGlobalを記録\n        this.__globalObj.lastJSCode = code;\n        // 実行前に環境を初期化するイベントを実行(beforeRun)\n        this.eventList.filter(o => o.eventName === 'beforeRun').map(e => e.callback(nakoGlobal));\n        try {\n            // eslint-disable-next-line no-new-func\n            const f = new Function(nakoGlobal.lastJSCode);\n            f.apply(nakoGlobal);\n        }\n        catch (err) {\n            // なでしこコードのエラーは抑止してログにのみ記録\n            nakoGlobal.numFailures++;\n            this.getLogger().error(err);\n            throw err;\n        }\n        // 実行後に終了イベントを実行(finish)\n        this.eventList.filter(o => o.eventName === 'finish').map(e => e.callback(nakoGlobal));\n    }\n    /**\n     * 同期的になでしこのプログラムcodeを実行する\n     * @param code なでしこのプログラム\n     * @param filename ファイル名\n     * @param options オプション\n     * @returns 実行に利用したグローバルオブジェクト\n     * @deprecated 代わりにrunAsyncメソッドを使ってください。(core #52)\n     */\n    runSync(code, filename, options = undefined) {\n        // コンパイル\n        options = newCompilerOptions(options);\n        const out = this.compileFromCode(code, filename, options);\n        // 実行前に環境を生成\n        const nakoGlobal = this.getNakoGlobal(options, out.gen, filename);\n        // 実行\n        this.evalJS(out.runtimeEnv, nakoGlobal);\n        return nakoGlobal;\n    }\n    /**\n     * 非同期になでしこのプログラムcodeを実行する\n     * @param code なでしこのプログラム\n     * @param filename ファイル名\n     * @param options オプション\n     * @returns 実行に利用したグローバルオブジェクト\n     */\n    async runAsync(code, filename, options = undefined) {\n        // コンパイル\n        options = newCompilerOptions(options);\n        const out = this.compileFromCode(code, filename, options);\n        // 実行前に環境を生成\n        const nakoGlobal = this.getNakoGlobal(options, out.gen, filename);\n        // 実行\n        this.evalJS(out.runtimeEnv, nakoGlobal);\n        return nakoGlobal;\n    }\n    getNakoGlobal(options, gen, filename) {\n        // オプションを参照\n        let g = options.nakoGlobal;\n        if (!g) {\n            // 空ならば前回の値を参照(リセットするなら新規で作成する)\n            if (this.__globals.length > 0 && options.resetAll === false && options.resetEnv === false) {\n                g = this.__globals[this.__globals.length - 1];\n            }\n            else {\n                g = new NakoGlobal(this, gen, (this.__globals.length + 1));\n            }\n            // 名前空間を設定\n            g.__varslist[0]['名前空間'] = NakoLexer.filenameToModName(filename);\n        }\n        if (this.__globals.indexOf(g) < 0) {\n            this.__globals.push(g);\n        }\n        return g;\n    }\n    /**\n     * イベントを登録する\n     * @param eventName イベント名\n     * @param callback コールバック関数\n     */\n    addListener(eventName, callback) {\n        this.eventList.push({ eventName, callback });\n    }\n    /**\n     * テストを実行する\n     * @param code\n     * @param fname\n     * @param preCode\n     * @param testOnly\n     */\n    test(code, fname, preCode = '', testOnly = false) {\n        const options = newCompilerOptions();\n        options.preCode = preCode;\n        options.testOnly = testOnly;\n        return this.runSync(code, fname, options);\n    }\n    /**\n     * なでしこのプログラムを実行（他に実行しているインスタンスはそのまま）\n     * @param code\n     * @param fname\n     * @param [preCode]\n     * @deprecated 代わりに runAsync を使ってください。\n     */\n    run(code, fname = 'main.nako3', preCode = '') {\n        const options = newCompilerOptions();\n        options.preCode = preCode;\n        return this.runSync(code, fname, options);\n    }\n    /**\n     * JavaScriptのみで動くコードを取得する場合\n     * @param code\n     * @param filename\n     * @param opt\n     */\n    compileStandalone(code, filename, opt = null) {\n        if (opt === null) {\n            opt = new NakoGenOptions();\n        }\n        const ast = this.parse(code, filename);\n        return this.generateCode(ast, opt).standalone;\n    }\n    /**\n     * プラグイン・オブジェクトを追加\n     * @param po プラグイン・オブジェクト\n     * @param persistent falseのとき、次以降の実行では使えない\n     */\n    addPlugin(po, persistent = true) {\n        // 変数のメタ情報を確認\n        const __v0 = this.__varslist[0];\n        if (__v0.meta === undefined) {\n            __v0.meta = {};\n        }\n        // プラグインの値をオブジェクトにコピー\n        for (const key in po) {\n            const v = po[key];\n            this.funclist[key] = v;\n            if (persistent) {\n                this.pluginFunclist[key] = JSON.parse(JSON.stringify(v));\n            }\n            if (v.type === 'func') {\n                __v0[key] = v.fn;\n            }\n            else if (v.type === 'const' || v.type === 'var') {\n                __v0[key] = v.value;\n                __v0.meta[key] = {\n                    readonly: (v.type === 'const')\n                };\n            }\n            else {\n                console.error('[プラグイン追加エラー]', v);\n                throw new Error('プラグインの追加でエラー。');\n            }\n            // コマンドを登録するか?\n            if (key === '初期化' || key.substring(0, 1) === '!') { // 登録しない関数名\n                continue;\n            }\n            this.commandlist.add(key);\n        }\n    }\n    /**\n     * プラグイン・オブジェクトを追加(ブラウザ向け)\n     * @param objName オブジェクト名\n     * @param po 関数リスト\n     * @param persistent falseのとき、次以降の実行では使えない\n     */\n    addPluginObject(objName, po, persistent = true) {\n        this.__module[objName] = po;\n        this.pluginfiles[objName] = '*';\n        // 初期化をチェック\n        if (typeof (po['初期化']) === 'object') {\n            const def = po['初期化'];\n            delete po['初期化'];\n            const initKey = `!${objName}:初期化`;\n            po[initKey] = def;\n        }\n        // メタ情報をチェック (#1034)\n        if (po.meta && po.meta.value && typeof (po.meta) === 'object') {\n            const meta = po.meta;\n            delete po.meta;\n            const pluginName = meta.value.pluginName || objName;\n            const metaKey = `__${pluginName}`.replace('-', '__');\n            po[metaKey] = meta;\n        }\n        this.addPlugin(po, persistent);\n    }\n    /**\n     * プラグイン・ファイルを追加(Node.js向け)\n     * @param objName オブジェクト名\n     * @param fpath ファイルパス\n     * @param po 登録するオブジェクト\n     * @param persistent falseのとき、次以降の実行では使えない\n     */\n    addPluginFile(objName, fpath, po, persistent = true) {\n        // Windowsのパスがあると、JSファイル書き出しでエラーになるので、置換する\n        if (objName.indexOf('\\\\') >= 0) {\n            objName = objName.replace(/\\\\/g, '/');\n        }\n        this.addPluginObject(objName, po, persistent);\n        if (this.pluginfiles[objName] === undefined) {\n            this.pluginfiles[objName] = fpath;\n        }\n    }\n    /**\n     * 関数を追加する\n     * @param {string} key 関数名\n     * @param {string[][]} josi 助詞\n     * @param {Function} fn 関数\n     * @param {boolean} returnNone 値を返す関数の場合はfalseを指定\n     * @param {boolean} asyncFn Promiseを返す関数かを指定\n     */\n    addFunc(key, josi, fn, returnNone = true, asyncFn = false) {\n        this.funclist[key] = { josi, fn, type: 'func', return_none: returnNone, asyncFn, pure: true };\n        this.pluginFunclist[key] = cloneAsJSON(this.funclist[key]);\n        this.__varslist[0][key] = fn;\n    }\n    /** (非推奨) 互換性のため ... 関数を追加する\n     * @deprecated 代わりにaddFuncを使ってください\n    */\n    setFunc(key, josi, fn, returnNone = true, asyncFn = false) {\n        this.addFunc(key, josi, fn, returnNone, asyncFn);\n    }\n    /**\n     * プラグイン関数を参照する\n     * @param key プラグイン関数の関数名\n     * @returns プラグイン・オブジェクト\n     */\n    getFunc(key) {\n        return this.funclist[key];\n    }\n    /** 同期的になでしこのプログラムcodeを実行する\n     * @deprecated 代わりにrunAsyncメソッドを使ってください。(core #52)\n     */\n    _runEx(code, filename, opts, preCode = '', nakoGlobal = undefined) {\n        // コンパイル\n        opts.preCode = preCode;\n        if (nakoGlobal) {\n            opts.nakoGlobal = nakoGlobal;\n        }\n        return this.runSync(code, filename, opts);\n    }\n    /** 同期的になでしこのプログラムcodeを実行する\n     * @param code\n     * @param fname\n     * @param opts\n     * @param [preCode]\n     * @deprecated 代わりにrunAsyncメソッドを使ってください。(core #52)\n     */\n    runEx(code, fname, opts, preCode = '') {\n        return this._runEx(code, fname, opts, preCode);\n    }\n    /**\n     * (非推奨) なでしこのプログラムを実行（他に実行しているインスタンスもリセットする)\n     * @param code\n     * @param fname\n     * @param [preCode]\n     */\n    async runReset(code, fname = 'main.nako3', preCode = '') {\n        const opts = newCompilerOptions({ resetAll: true, resetEnv: true });\n        return this._runEx(code, fname, opts, preCode);\n    }\n}\n","import { NakoIndentError } from './nako_errors.mjs';\nimport { NakoPrepare, checkNakoMode } from './nako_prepare.mjs';\n// インデント構文のキーワード\nconst INDENT_MODE_KEYWORDS = ['!インデント構文', '!ここまでだるい'];\n/**\n * インデント構文指定があればコードを変換する\n */\nfunction convert(code, filename = 'main.nako3') {\n    // インデント構文の適用が必要か？\n    if (checkNakoMode(code, INDENT_MODE_KEYWORDS)) {\n        return convertForIndentMode(code, filename);\n    }\n    return { code, insertedLines: [], deletedLines: [] };\n}\n/**\n * インデント構文指定があるかチェックする\n */\nfunction isIndentSyntaxEnabled(code) {\n    return checkNakoMode(code, INDENT_MODE_KEYWORDS);\n}\n/** ありえない改行マークを定義 */\nconst defSpecialRetMark = '🍷🍷改行🍹黐黑鼘鼶齈▨🍺🍺🍶🍶';\nlet SpecialRetMark = defSpecialRetMark;\n/** code中にありえない改行マーク生成しモジュール内の変数SpecialRetMarkに設定 */\nexport function checkSpecialRetMark(code) {\n    SpecialRetMark = defSpecialRetMark;\n    while (code.indexOf(SpecialRetMark) >= 0) {\n        // 適当な文字を足してユニークにする(一応漢字領域で生成)\n        const c = String.fromCodePoint(Math.floor(Math.random() * 40952) + 0x4E00);\n        SpecialRetMark += c + c;\n    }\n    return SpecialRetMark;\n}\n/**\n * ソースコードのある1行の中のコメントを全て取り除く。\n * 事前にreplaceRetMarkによって文字列や範囲コメント内の改行文字が置換されている必要がある。\n */\nexport function removeCommentsFromLine(src) {\n    const prepare = NakoPrepare.getInstance(); // `※`, `／/`, `／＊` といったパターン全てに対応するために必要\n    const len = src.length;\n    let result = '';\n    let eos = '';\n    let i = 0;\n    let isComment = false;\n    while (i < len) {\n        const c = src.charAt(i);\n        const ch2 = src.substring(i, 2);\n        const cPrepared = prepare.convert1ch(c);\n        const ch2Prepared = ch2.split('').map((c) => prepare.convert1ch(c)).join('');\n        // eosか?\n        if (eos !== '') {\n            // srcのi文字目以降がeosで始まるなら文字列を終了、そうでなければ1文字進める\n            if (eos === (eos.length === 1 ? cPrepared : ch2Prepared)) {\n                if (!isComment) {\n                    result += src.substr(i, eos.length);\n                }\n                i += eos.length;\n                isComment = false;\n                eos = '';\n            }\n            else {\n                if (!isComment) {\n                    result += c;\n                }\n                i++;\n            }\n            continue;\n        }\n        // 文字列の改行\bも無視する\n        switch (cPrepared) {\n            case '\"':\n            case '\\'':\n                eos = c;\n                result += c;\n                i++;\n                continue;\n            case '「':\n                eos = '」';\n                result += c;\n                i++;\n                continue;\n            case '『':\n                eos = '』';\n                result += c;\n                i++;\n                continue;\n            case '“':\n                eos = '”';\n                result += c;\n                i++;\n                continue;\n            case '{':\n                eos = '}';\n                result += c;\n                i++;\n                continue;\n            case '[':\n                eos = ']';\n                result += c;\n                i++;\n                continue;\n        }\n        switch (ch2) {\n            case '🌴':\n                eos = '🌴';\n                result += ch2;\n                i += 2;\n                continue;\n            case '🌿':\n                eos = '🌿';\n                result += ch2;\n                i += 2;\n                continue;\n        }\n        // 行コメント\n        if (cPrepared === '#') {\n            eos = '\\n';\n            isComment = true;\n            i++;\n            continue;\n        }\n        if (ch2Prepared === '//') {\n            eos = '\\n';\n            isComment = true;\n            i += 2;\n            continue;\n        }\n        // 範囲コメント\n        if (ch2Prepared === '/*') {\n            eos = '*/';\n            isComment = true;\n            i += 2;\n            continue;\n        }\n        result += c;\n        i++;\n    }\n    return result;\n}\n/** インデントモードのための変換処理 */\nfunction convertForIndentMode(code, filename) {\n    // returns => {{ code: string, insertedLines: number[], deletedLines: { lineNumber: number, len: number }[] }}\n    const insertedLines = [];\n    const deletedLines = [];\n    const END = 'ここまで‰';\n    const code2 = replaceRetMark(code); // 文字列の中などの改行を置換\n    const lines = code2.split('\\n');\n    const lines2 = [];\n    const indentStack = [];\n    let lastIndent = 0;\n    // 元ソースコードの中に特殊改行マークが含まれるかチェックして含まれるならもっと複雑な特殊マークを動的に生成\n    checkSpecialRetMark(code);\n    let lineCount = -1;\n    lines.forEach((line) => {\n        lineCount += line.split(SpecialRetMark).length;\n        // trim line\n        // eslint-disable-next-line no-irregular-whitespace\n        if (/^[ 　・\\t]*$/.test(line)) {\n            deletedLines.push({ lineNumber: lines2.length, len: line.length });\n            return;\n        }\n        // eslint-disable-next-line no-irregular-whitespace\n        const lineTrimed = removeCommentsFromLine(line).replace(/^[ 　・\\t]+/, '').replace(/\\s+$/, '');\n        if (lineTrimed === '') {\n            lines2.push(line);\n            return;\n        }\n        if (lineTrimed === 'ここまで') {\n            throw new NakoIndentError('インデント構文が有効化されているときに『ここまで』を使うことはできません。', lineCount, filename);\n        }\n        // check indent\n        const indent = countIndent(line);\n        if (lastIndent === indent) {\n            lines2.push(line);\n            return;\n        }\n        // indent\n        if (lastIndent < indent) {\n            indentStack.push(lastIndent);\n            lastIndent = indent;\n            lines2.push(line);\n            return;\n        }\n        // unindent\n        if (lastIndent > indent) {\n            // 5回\n            //   3回\n            //     1を表示\n            //   |\n            // |\n            lastIndent = indent;\n            while (indentStack.length > 0) {\n                const n = indentStack.pop() || 0;\n                if (n === indent) {\n                    if (lineTrimed.substring(0, 3) !== '違えば') {\n                        insertedLines.push(lines2.length);\n                        lines2.push(makeIndent(n) + END);\n                    }\n                    lines2.push(line);\n                    return;\n                }\n                if (indent < n) {\n                    insertedLines.push(lines2.length);\n                    lines2.push(makeIndent(n) + END);\n                    continue;\n                }\n            }\n        }\n    });\n    // 残りのインデントを処理\n    while (indentStack.length > 0) {\n        const n = indentStack.pop() || 0;\n        insertedLines.push(lines2.length);\n        lines2.push(makeIndent(n) + END);\n    }\n    // 特別マーカーを改行に置換\n    const lines3 = [];\n    for (let i = 0; i < lines2.length; i++) {\n        if (lines2[i].includes(SpecialRetMark)) {\n            const lines4 = lines2[i].split(SpecialRetMark);\n            // 置換されたマーカーの数だけ、それ以降の行数をずらす。\n            // unindentによって挿入された行がSpecialRetMarkを含むことはない。\n            for (let j = 0; j < insertedLines.length; j++) {\n                if (lines3.length < insertedLines[j]) {\n                    insertedLines[j] += lines4.length - 1;\n                }\n            }\n            for (let j = 0; j < deletedLines.length; j++) {\n                if (lines3.length < deletedLines[j].lineNumber) {\n                    deletedLines[j].lineNumber += lines4.length - 1;\n                }\n            }\n            lines3.push(...lines4);\n        }\n        else {\n            lines3.push(lines2[i]);\n        }\n    }\n    return { code: lines3.join('\\n'), insertedLines, deletedLines };\n}\n/**\n * count分だけ字下げする\n * @param {number} count\n */\nfunction makeIndent(count) {\n    let s = '';\n    for (let i = 0; i < count; i++) {\n        s += ' ';\n    }\n    return s;\n}\n/**\n * インデント部分を取り出す\n */\nexport function getIndent(line) {\n    // eslint-disable-next-line no-irregular-whitespace\n    const m = /^([ 　・\\t]*)/.exec(removeCommentsFromLine(line));\n    if (!m) {\n        return '';\n    }\n    return m[1];\n}\n/**\n * インデントの個数を数える\n */\nexport function countIndent(line) {\n    let cnt = 0;\n    for (let i = 0; i < line.length; i++) {\n        const ch = line.charAt(i);\n        if (ch === ' ') {\n            cnt++;\n            continue;\n        }\n        if (ch === '　') {\n            cnt += 2;\n            continue;\n        }\n        if (ch === '・') {\n            cnt += 2;\n            continue;\n        }\n        if (ch === '\\t') {\n            cnt += 4;\n            continue;\n        }\n        break;\n    }\n    return cnt;\n}\nexport function replaceRetMark(src) {\n    const prepare = NakoPrepare.getInstance(); // `※`, `／/`, `／＊` といったパターン全てに対応するために必要\n    const len = src.length;\n    let result = '';\n    let eos = '';\n    let i = 0;\n    while (i < len) {\n        const c = src.charAt(i);\n        const ch2 = src.substr(i, 2);\n        const cPrepared = prepare.convert1ch(c);\n        const ch2Prepared = ch2.split('').map((c) => prepare.convert1ch(c)).join('');\n        // eosか?\n        if (eos !== '') {\n            // srcのi文字目以降がeosで始まるなら文字列を終了、そうでなければ1文字進める\n            if (eos === (eos.length === 1 ? cPrepared : ch2Prepared)) {\n                result += src.substr(i, eos.length);\n                i += eos.length;\n                eos = '';\n            }\n            else {\n                if (c === '\\n') {\n                    result += SpecialRetMark;\n                }\n                else {\n                    result += c;\n                }\n                i++;\n            }\n            continue;\n        }\n        // 文字列の改行\bも無視する\n        switch (cPrepared) {\n            case '\"':\n            case '\\'':\n                eos = c;\n                result += c;\n                i++;\n                continue;\n            case '「':\n                eos = '」';\n                result += c;\n                i++;\n                continue;\n            case '『':\n                eos = '』';\n                result += c;\n                i++;\n                continue;\n            case '“':\n                eos = '”';\n                result += c;\n                i++;\n                continue;\n            case '{':\n                eos = '}';\n                result += c;\n                i++;\n                continue;\n            case '[':\n                eos = ']';\n                result += c;\n                i++;\n                continue;\n        }\n        switch (ch2) {\n            case '🌴':\n                eos = '🌴';\n                result += ch2;\n                i += 2;\n                continue;\n            case '🌿':\n                eos = '🌿';\n                result += ch2;\n                i += 2;\n                continue;\n        }\n        // 行コメント\n        if (cPrepared === '#') {\n            eos = '\\n';\n            result += c;\n            i++;\n            continue;\n        }\n        if (ch2Prepared === '//') {\n            eos = '\\n';\n            result += ch2;\n            i += 2;\n            continue;\n        }\n        // 範囲コメント\n        if (ch2Prepared === '/*') {\n            eos = '*/';\n            result += ch2;\n            i += 2;\n            continue;\n        }\n        result += c;\n        i++;\n    }\n    return result;\n}\n/**\n * コードのインデントの構造を取得する。\n * 空白行や複数行にまたがる構文を考慮する。\n * インデント構文が有効化されていない場合にも使われる。\n */\nexport function getBlockStructure(code) {\n    const result = {\n        lines: [],\n        pairs: [],\n        parents: [],\n        spaces: [] // 各行のインデントの文字列\n    };\n    const lines = replaceRetMark(code).split('\\n');\n    const stack = [];\n    let lineCount = 0;\n    let prev = countIndent(lines[0]);\n    for (const line of lines) {\n        const numLines = line.split(SpecialRetMark).length;\n        const line2 = removeCommentsFromLine(line);\n        // eslint-disable-next-line no-irregular-whitespace\n        const current = (line2.replace(/^[ 　・\\t]+/, '') === '')\n            ? prev\n            : countIndent(line2);\n        result.lines.push(...Array(numLines).fill(current));\n        result.spaces.push(...Array(numLines).fill(getIndent(line2)));\n        if (prev < current) {\n            stack.push(lineCount - 1);\n        }\n        else if (prev > current) {\n            const last = stack.pop();\n            if (last !== undefined) {\n                result.pairs.push([last, lineCount]);\n            }\n        }\n        const parent = stack[stack.length - 1] !== undefined ? stack[stack.length - 1] : null;\n        result.parents.push(...Array(numLines).fill(parent));\n        prev = current;\n        lineCount += numLines;\n    }\n    // スタックが余ったらコードの末尾とペアにする。\n    for (const item of stack) {\n        result.pairs.push([item, lineCount]);\n    }\n    return result;\n}\nexport default {\n    convert,\n    getBlockStructure,\n    getIndent,\n    countIndent,\n    isIndentSyntaxEnabled\n};\n","// @ts-nocheck\n/* eslint-disable no-template-curly-in-string */\n/** なでしこのtokenのtypeをscope（CSSのクラス名）に変換する。 */\nimport { OffsetToLineColumn } from '../core/src/nako_source_mapping.mjs';\nimport { NakoError } from '../core/src/nako_errors.mjs';\nimport NakoIndent from '../core/src/nako_indent.mjs';\nimport { NakoPrepare } from '../core/src/nako_prepare.mjs';\n// alias\nconst getBlockStructure = NakoIndent.getBlockStructure;\nconst getIndent = NakoIndent.getIndent;\nconst countIndent = NakoIndent.countIndent;\nconst isIndentSyntaxEnabled = NakoIndent.isIndentSyntaxEnabled;\n/**\n * シンタックスハイライトでは一般にテキストの各部分に 'comment.line' のようなラベルを付け、各エディタテーマがそのそれぞれの色を設定する。\n * ace editor では例えば 'comment.line' が付いた部分はクラス .ace_comment.ace_line が付いたHTMLタグで囲まれ、各テーマはそれに対応するCSSを実装する。\n * @returns TokenType\n */\nexport function getScope(token) {\n    switch (token.type) {\n        case 'line_comment': return 'comment.line';\n        case 'range_comment': return 'comment.block';\n        case 'def_test': return 'keyword.control';\n        case 'def_func': return 'keyword.control';\n        case 'func': return 'entity.name.function';\n        case 'number': return 'constant.numeric';\n        // 独立した助詞\n        case 'とは':\n        case 'ならば':\n        case 'でなければ':\n            return 'keyword.control';\n        // 制御構文\n        case 'ここから':\n        case 'ここまで':\n        case 'もし':\n        case '違えば':\n        case 'require':\n            return 'keyword.control';\n        // 予約語\n        case '回':\n        case '間':\n        case '繰り返す':\n        case '反復':\n        case '抜ける':\n        case '続ける':\n        case '戻る':\n        case '先に':\n        case '次に':\n        case '代入':\n        case '逐次実行':\n        case '条件分岐':\n        case '取込':\n        case 'エラー監視':\n        case 'エラー':\n        case '変数':\n        case '実行速度優先':\n            return 'keyword.control';\n        case '定める':\n        case '定数':\n            return 'support.constant';\n        // 演算子\n        case 'shift_r0':\n        case 'shift_r':\n        case 'shift_l':\n        case 'gteq':\n        case 'lteq':\n        case 'noteq':\n        case 'eq':\n        case 'not':\n        case 'gt':\n        case 'lt':\n        case 'and':\n        case 'or':\n        case '@':\n        case '+':\n        case '-':\n        case '**':\n        case '*':\n        case '÷÷':\n        case '/':\n        case '%':\n        case '^':\n        case '&':\n            return 'keyword.operator';\n        case 'string':\n        case 'string_ex':\n            return 'string.other';\n        case 'word':\n            if (['そう', 'それ', '回数', '対象キー', '対象'].includes(token.value)) {\n                return 'variable.language';\n            }\n            else {\n                return 'variable.other';\n            }\n        default:\n            return 'markup.other';\n    }\n}\n/**\n * @param {TokenWithSourceMap} compilerToken\n * @param {NakoCompiler} nako3\n * @param {string} value\n * @param {boolean} includesLastCharacter\n * @param {boolean} underlineJosi\n */\nexport function getEditorTokens(compilerToken, nako3, value, includesLastCharacter, underlineJosi) {\n    const type = getScope(compilerToken);\n    const docHTML = getDocumentationHTML(compilerToken, nako3);\n    // 助詞があれば助詞の部分を分割する。\n    // 最後の文字が現在の行に含まれないときは助詞を表示しない。そうしないと例えば `「文字列\\n」を表示` の「列」の部分に下線が引かれてしまう。\n    if (compilerToken.rawJosi && value.length >= compilerToken.rawJosi.length && includesLastCharacter && underlineJosi) {\n        return [\n            { type, docHTML, value: value.slice(0, -compilerToken.rawJosi.length) },\n            { type: type + '.markup.underline', docHTML, value: value.slice(-compilerToken.josi.length) }\n        ];\n    }\n    return [\n        { type, docHTML, value }\n    ];\n}\n/**\n * `name` が定義されたプラグインの名前を返す。\n */\nexport function findPluginName(name, nako3) {\n    for (const pluginName of Object.keys(nako3.__module)) {\n        if (Object.keys(nako3.__module[pluginName]).includes(name)) {\n            return pluginName;\n        }\n    }\n    return null;\n}\n/**\n * i = 0, 1, 2, ... に対して 'A', 'B', 'C', ... 'Z', 'AA', 'AB', ... を返す。\n */\nexport function createParameterName(i) {\n    const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\n    return i.toString(26).split('').map((v) => alphabet[parseInt(v, 26)]).join('');\n}\n/**\n * パラメータの定義を表す文字列を生成する。例えば `[['と', 'の'], ['を']]` に対して `'（Aと|Aの、Bを）'` を返す、パラメータが無い場合、空文字列を返す。\n */\nexport function createParameterDeclaration(josi) {\n    const args = josi.map((union, i) => union.map((v) => `${createParameterName(i)}${v}`).join('|')).join('、');\n    if (args !== '') {\n        return `（${args}）`;\n    }\n    else {\n        return '';\n    }\n}\n// https://stackoverflow.com/a/6234804\nexport function escapeHTML(t) {\n    return t\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n}\n/**\n * 関数のドキュメントを返す。\n */\nexport function getDocumentationHTML(token, nako3) {\n    const meta = (text) => `<span class=\"tooltip-plugin-name\">${escapeHTML(text)}</span>`;\n    if (token.type === 'func') {\n        const pluginName = findPluginName(token.value + '', nako3) || (token.meta && token.meta.file ? token.meta.file : null);\n        const josi = (token.meta && token.meta.josi) ? createParameterDeclaration(token.meta.josi) : ''; // {関数} のとき token.meta.josi が存在しない\n        if (pluginName) {\n            return escapeHTML(josi + token.value) + meta(pluginName);\n        }\n        return escapeHTML(josi + token.value);\n    }\n    else if (token.type === 'word') {\n        /** @type {string | null} */\n        const pluginName = findPluginName(token.value + '', nako3) || (token.meta && token.meta.file ? token.meta.file : null);\n        if (pluginName) {\n            return escapeHTML(token.value + '') + meta(pluginName);\n        }\n    }\n    return null;\n}\n/**\n * ace editor ではエディタの文字列の全ての部分に何らかの `type` を付けなければならない。\n * なでしこのエディタでは 'markup.other' をデフォルト値として使うことにした。\n * @returns {EditorToken[]}\n */\nconst getDefaultTokens = (row, doc) => [{ type: 'markup.other', value: doc.getLine(row), docHTML: null }];\n/**\n * 一時的にloggerを無効化する。そうしないとシンタックスハイライトの更新のたびにloggerへコンパイルエラーや警告が送られて、結果のボックスに行が追加されてしまう。\n * @type {<T>(nako3: NakoCompiler, f: () => T) => T}\n */\nconst withoutLogger = (nako3, f) => {\n    const logger = nako3.logger;\n    try {\n        nako3.replaceLogger();\n        return f();\n    }\n    finally {\n        nako3.logger = logger;\n    }\n};\n/**\n * プログラムをlexerでtokenizeした後、ace editor 用のトークン列に変換する。\n * @param lines\n * @param nako3\n * @param underlineJosi\n */\nexport function tokenize(lines, nako3, underlineJosi) {\n    const code = lines.join('\\n');\n    // 取り込み文を含めてしまうと依存ファイルが大きい時に時間がかかってしまうため、\n    // 取り込み文を無視してトークン化してから、依存ファイルで定義された関数名と一致するトークンを関数のトークンへ変換する。\n    nako3.reset({ needToClearPlugin: false });\n    const lexerOutput = withoutLogger(nako3, () => nako3.lex(code, 'main.nako3', undefined, true));\n    lexerOutput.commentTokens = lexerOutput.commentTokens.filter((t) => t.file === 'main.nako3');\n    lexerOutput.requireTokens = lexerOutput.requireTokens.filter((t) => t.file === 'main.nako3');\n    lexerOutput.tokens = lexerOutput.tokens.filter((t) => t.file === 'main.nako3');\n    // 外部ファイルで定義された関数名に一致するトークンのtypeをfuncに変更する。\n    // 取り込んでいないファイルも参照される問題や、関数名の重複がある場合に正しくない情報を表示する問題がある。\n    // eslint-disable-next-line no-lone-blocks\n    {\n        /** @type {Record<string, object>} */\n        for (const [file, { funclist }] of Object.entries(nako3.dependencies)) {\n            for (const token of lexerOutput.tokens) {\n                if (token.type === 'word' && token.value !== 'それ' && funclist[token.value]) {\n                    token.type = 'func';\n                    // meta.file に定義元のファイル名を持たせる。\n                    token.meta = { ...funclist[token.value + ''], file };\n                }\n            }\n        }\n    }\n    // eol、eof、長さが1未満のトークン、位置を特定できないトークンを消す\n    /** @type {(TokenWithSourceMap & { startOffset: number, endOffset: number })[]} */\n    // @ts-ignore\n    const tokens = [...lexerOutput.tokens, ...lexerOutput.commentTokens, ...lexerOutput.requireTokens].filter((t) => t.type !== 'eol' && t.type !== 'eof' &&\n        typeof t.startOffset === 'number' && typeof t.endOffset === 'number' &&\n        t.startOffset < t.endOffset);\n    // startOffsetでソートする\n    tokens.sort((a, b) => (a.startOffset || 0) - (b.startOffset || 0));\n    // 各行について、余る文字の無いようにエディタのトークンに変換する。\n    // 複数のトークンが重なることはないと仮定する。\n    let lineStartOffset = 0;\n    let tokenIndex = 0;\n    // 実際に必要なプロパティはtype, valueだけで、docは独自に追加した。\n    /** @type {EditorToken[][]} */\n    const editorTokens = []; // 各行のエディタのトークン\n    for (let i = 0; i < lines.length; i++) {\n        editorTokens.push([]);\n        const lineEndOffset = lineStartOffset + lines[i].length;\n        let offset = lineStartOffset;\n        // 現在の行にかかっているトークンまで飛ばす\n        while (tokenIndex < tokens.length &&\n            tokens[tokenIndex].endOffset <= lineStartOffset) {\n            tokenIndex++;\n        }\n        // 行全体を完全にまたがっているトークンが存在する場合\n        if (tokenIndex < tokens.length &&\n            tokens[tokenIndex].startOffset <= lineStartOffset &&\n            tokens[tokenIndex].endOffset >= lineEndOffset) {\n            editorTokens[i].push(...getEditorTokens(tokens[tokenIndex], nako3, lines[i], tokens[tokenIndex].endOffset <= lineEndOffset, underlineJosi));\n        }\n        else {\n            // 行頭をまたがっているトークンが存在する場合\n            if (tokenIndex < tokens.length &&\n                tokens[tokenIndex].startOffset <= lineStartOffset) {\n                editorTokens[i].push(...getEditorTokens(tokens[tokenIndex], nako3, code.slice(offset, tokens[tokenIndex].endOffset), true, underlineJosi));\n                offset = tokens[tokenIndex].endOffset;\n                tokenIndex++;\n            }\n            // 行頭も行末もまたがっていないトークンを処理する\n            while (tokenIndex < tokens.length &&\n                tokens[tokenIndex].endOffset < lineEndOffset) {\n                // このトークンと直前のトークンの間に隙間があるなら、埋める\n                if (offset < tokens[tokenIndex].startOffset) {\n                    editorTokens[i].push({\n                        type: 'markup.other',\n                        docHTML: null,\n                        value: code.slice(offset, tokens[tokenIndex].startOffset)\n                    });\n                    offset = tokens[tokenIndex].startOffset;\n                }\n                // 現在のトークンを使う\n                editorTokens[i].push(...getEditorTokens(tokens[tokenIndex], nako3, code.slice(offset, tokens[tokenIndex].endOffset), true, underlineJosi));\n                offset = tokens[tokenIndex].endOffset;\n                tokenIndex++;\n            }\n            // 行末をまたがっているトークンが存在する場合\n            if (tokenIndex < tokens.length &&\n                tokens[tokenIndex].startOffset < lineEndOffset) {\n                // トークンの前の隙間\n                if (offset < tokens[tokenIndex].startOffset) {\n                    editorTokens[i].push({\n                        type: 'markup.other',\n                        docHTML: null,\n                        value: code.slice(offset, tokens[tokenIndex].startOffset)\n                    });\n                    offset = tokens[tokenIndex].startOffset;\n                }\n                // トークンを使う\n                editorTokens[i].push(...getEditorTokens(tokens[tokenIndex], nako3, code.slice(tokens[tokenIndex].startOffset, lineEndOffset), tokens[tokenIndex].endOffset <= lineEndOffset, underlineJosi));\n            }\n            else {\n                editorTokens[i].push({\n                    type: 'markup.other',\n                    docHTML: null,\n                    value: code.slice(offset, lineEndOffset)\n                });\n            }\n        }\n        lineStartOffset += lines[i].length + 1;\n    }\n    return { editorTokens, lexerOutput };\n}\n/**\n * エディタ上にエラーメッセージの波線とgutterの赤いマークとエラーメッセージのポップアップを設定するためのクラス。\n */\nexport class EditorMarkers {\n    /**\n       * @param {any} session\n       * @param {AceDocument} doc\n       * @param {TypeofAceRange} AceRange\n       * @param {boolean} disable\n       */\n    constructor(session, doc, AceRange, disable) {\n        this.session = session;\n        this.doc = doc;\n        this.AceRange = AceRange;\n        /** @type {any[]} */\n        this.markers = [];\n        this.hasAnnotations = false;\n        this.disable = disable;\n    }\n    /**\n       * @param {number} startLine\n       * @param {number | null} startColumn\n       * @param {number | null} endLine\n       * @param {number | null} endColumn\n       * @param {(row: number) => string} getLine\n       * @returns {[number, number, number, number]}\n       */\n    static fromNullable(startLine, startColumn, endLine, endColumn, getLine) {\n        if (startColumn === null) {\n            startColumn = 0;\n        }\n        if (endLine === null) {\n            endLine = startLine;\n        }\n        if (endColumn === null) {\n            endColumn = getLine(endLine).length;\n        }\n        // 最低でも1文字分の長さをとる\n        if (startLine === endLine && startColumn === endColumn) {\n            endColumn++;\n        }\n        return [startLine, startColumn, endLine, endColumn];\n    }\n    /**\n       * @param {string} code @param {number} startOffset @param {number} endOffset\n       * @returns {[number, number, number, number]}\n       */\n    static fromOffset(code, startOffset, endOffset) {\n        const offsetToLineColumn = new OffsetToLineColumn(code);\n        const start = offsetToLineColumn.map(startOffset, false);\n        const end = offsetToLineColumn.map(endOffset, false);\n        return [start.line, start.column, end.line, end.column];\n    }\n    /**\n       * @param {string} code\n       * @param {{ line?: number, startOffset?: number | null, endOffset?: number | null, message: string }} error\n       * @param {(row: number) => string} getLine\n       * @returns {[number, number, number, number]}\n       */\n    static fromError(code, error, getLine) {\n        if (typeof error.startOffset === 'number' && typeof error.endOffset === 'number') {\n            // 完全な位置を取得できる場合\n            return this.fromOffset(code, error.startOffset, error.endOffset);\n        }\n        else if (typeof error.line === 'number') {\n            // 行全体の場合\n            return this.fromNullable(error.line, null, null, null, getLine);\n        }\n        else {\n            // 位置が不明な場合\n            return this.fromNullable(0, null, null, null, getLine);\n        }\n    }\n    /**\n       * @param {number} startLine\n       * @param {number | null} startColumn\n       * @param {number | null} endLine\n       * @param {number | null} endColumn\n       * @param {string} message\n       * @param {'warn' | 'error'} type\n       */\n    add(startLine, startColumn, endLine, endColumn, message, type) {\n        if (this.disable) {\n            return;\n        }\n        const range = new this.AceRange(...EditorMarkers.fromNullable(startLine, startColumn, endLine, endColumn, (row) => this.doc.getLine(row)));\n        this.markers.push(this.session.addMarker(range, 'marker-' + (type === 'warn' ? 'yellow' : 'red'), 'text', false));\n        // typeは 'error' | 'warning' | 'info'\n        this.session.setAnnotations([{ row: startLine, column: startColumn, text: message, type: type === 'warn' ? 'warning' : 'error' }]);\n        this.hasAnnotations = true;\n    }\n    /**\n       * @param {string} code\n       * @param {{ line?: number, startOffset?: number | null, endOffset?: number | null, message: string }} error\n       * @param {'warn' | 'error'} type\n       */\n    addByError(code, error, type) {\n        this.add(...EditorMarkers.fromError(code, error, (row) => this.doc.getLine(row)), error.message, type);\n    }\n    /**\n       * 全てのエラーメッセージを削除する。\n       */\n    clear() {\n        for (const marker of this.markers) {\n            this.session.removeMarker(marker);\n        }\n        this.markers.length = 0;\n        if (this.hasAnnotations) {\n            this.session.clearAnnotations();\n            this.hasAnnotations = false;\n        }\n    }\n}\n/**\n * ace editor のBackgroundTokenizerを上書きして、シンタックスハイライトを自由に表示するためのクラス。\n * ace editor ではシンタックスハイライトのために正規表現ベースのBackgroundTokenizerクラスを用意し定期的にトークン化を\n * 行っているが、正規表現ではなくなでしこのコンパイラの出力を使うためにはそれを上書きする必要がある。\n */\nexport class BackgroundTokenizer {\n    /**\n       * @param {AceDocument} doc\n       * @param {NakoCompiler} nako3\n       * @param {(firstRow: number, lastRow: number, ms: number) => void} onTokenUpdate\n       * @param {(code: string, err: Error) => void} onCompileError\n       * @param {boolean} underlineJosi\n       */\n    constructor(doc, nako3, onTokenUpdate, onCompileError, underlineJosi) {\n        this.onUpdate = onTokenUpdate;\n        this.doc = doc;\n        this.dirty = true;\n        this.nako3 = nako3;\n        this.onCompileError = onCompileError;\n        this.underlineJosi = underlineJosi;\n        // オートコンプリートで使うために、直近のtokenizeの結果を保存しておく\n        /** @type {ReturnType<NakoCompiler['lex']> | null} */\n        this.lastLexerOutput = null;\n        // 各行のパース結果。\n        // typeはscopeのこと。配列の全要素のvalueを結合した文字列がその行の文字列と等しくなる必要がある。\n        /** @type {EditorToken[][]} */\n        this.lines = this.doc.getAllLines().map((line) => [{ type: 'markup.other', value: line, docHTML: null }]);\n        // this.lines は外部から勝手に編集されてしまうため、コピーを持つ\n        /** @type {{ code: string, lines: string } | null} */\n        this.cache = null;\n        this.deleted = false;\n        /** @public */\n        this.enabled = true;\n        const update = () => {\n            if (this.deleted) {\n                return;\n            }\n            if (this.dirty && this.enabled) {\n                const startTime = Date.now();\n                this.dirty = false;\n                const code = this.doc.getAllLines().join('\\n');\n                try {\n                    const startTime = Date.now();\n                    const out = tokenize(this.doc.getAllLines(), nako3, this.underlineJosi);\n                    this.lastLexerOutput = out.lexerOutput;\n                    this.lines = out.editorTokens;\n                    this.cache = { code, lines: JSON.stringify(this.lines) };\n                    // ファイル全体の更新を通知する。\n                    onTokenUpdate(0, this.doc.getLength() - 1, Date.now() - startTime);\n                }\n                catch (e) {\n                    onCompileError(code, e);\n                }\n                // tokenizeに時間がかかる場合、文字を入力できるように次回の実行を遅くする。\n                setTimeout(update, Math.max(100, Math.min(5000, (Date.now() - startTime) * 5)));\n            }\n            else {\n                setTimeout(update, 100);\n            }\n        };\n        // コンストラクタが返る前にコールバックを呼ぶのはバグの元になるため一瞬待つ。\n        // たとえば `const a = new BackgroundTokenizer(..., () => { /* aを使った処理 */ }, ...)` がReferenceErrorになる。\n        setTimeout(() => { update(); }, 0);\n    }\n    dispose() {\n        this.deleted = true;\n    }\n    /**\n       * テキストに変更があったときに呼ばれる。IME入力中には呼ばれない。\n       * @param {{ action: string, start: { row: number, column: number }, end: { row: number, column: number }, lines: string[] }} delta\n       */\n    $updateOnChange(delta) {\n        this.dirty = true;\n        const startRow = delta.start.row;\n        const endRow = delta.end.row;\n        if (startRow === endRow) { // 1行の編集\n            if (delta.action === 'insert' && this.lines[startRow]) { // 行内に文字列を挿入\n                const columnStart = delta.start.column;\n                // updateOnChangeはIME入力中には呼ばれない。composition_placeholder を消さないとIME確定後の表示がずれる。\n                const oldTokens = this.lines[startRow]\n                    .filter((v) => v.type !== 'composition_placeholder');\n                /** @type {EditorToken[]} */\n                const newTokens = [];\n                let i = 0;\n                let offset = 0;\n                // columnStartより左のトークンはそのまま保持する\n                while (i < oldTokens.length && offset + oldTokens[i].value.length <= columnStart) {\n                    newTokens.push(oldTokens[i]);\n                    offset += oldTokens[i].value.length;\n                    i++;\n                }\n                // columnStartに重なっているトークンがあれば、2つに分割する\n                if (i < oldTokens.length && offset < columnStart) {\n                    newTokens.push({ type: oldTokens[i].type, value: oldTokens[i].value.slice(0, columnStart - offset), docHTML: null });\n                    newTokens.push({ type: 'markup.other', value: delta.lines[0], docHTML: null });\n                    newTokens.push({ type: oldTokens[i].type, value: oldTokens[i].value.slice(columnStart - offset), docHTML: null });\n                    i++;\n                }\n                else {\n                    newTokens.push({ type: 'markup.other', value: delta.lines[0], docHTML: null });\n                }\n                // columnStartより右のトークンもそのまま保持する\n                while (i < oldTokens.length) {\n                    newTokens.push(oldTokens[i]);\n                    i++;\n                }\n                this.lines[startRow] = newTokens;\n            }\n            else {\n                this.lines[startRow] = getDefaultTokens(startRow, this.doc);\n            }\n        }\n        else if (delta.action === 'remove') { // 範囲削除\n            this.lines.splice(startRow, endRow - startRow + 1, getDefaultTokens(startRow, this.doc));\n        }\n        else { // 行の挿入\n            this.lines.splice(startRow, 1, ...Array(endRow - startRow + 1).fill(null).map((_, i) => getDefaultTokens(i + startRow, this.doc)));\n        }\n    }\n    /**\n       * tokenizerの出力を返す。文字入力したときに呼ばれる。\n       * @param {number} row\n       */\n    getTokens(row) {\n        // IME入力中はthis.lines[row]に自動的にnullが設定される。その場合新しく行のトークン列を生成して返さなければならない。\n        // 返した配列には自動的にIMEの入力用のテキストボックスであるcomposition_placeholderが挿入される。\n        if (!this.lines[row]) {\n            let ok = false;\n            if (this.enabled) {\n                // tokenizeは非常に遅いため、キャッシュを使えるならそれを使う。\n                const code = this.doc.getAllLines().join('\\n');\n                if (this.cache !== null && this.cache.code === code) {\n                    ok = true;\n                }\n                else {\n                    try {\n                        const lines = tokenize(this.doc.getAllLines(), this.nako3, this.underlineJosi);\n                        this.cache = { code, lines: JSON.stringify(lines.editorTokens) };\n                        ok = true;\n                    }\n                    catch (e) {\n                        if (!(e instanceof NakoError)) {\n                            console.error(e);\n                        }\n                    }\n                }\n            }\n            if (ok && this.cache !== null) {\n                this.lines[row] = JSON.parse(this.cache.lines)[row];\n            }\n            else {\n                this.lines[row] = getDefaultTokens(row, this.doc);\n            }\n        }\n        return this.lines[row];\n    }\n    // ace側から呼ばれるが無視するメソッド\n    // @ts-ignore\n    start(startRow) { }\n    // @ts-ignore\n    fireUpdateEvent(firstRow, lastRow) { }\n    // @ts-ignore\n    setDocument(doc) { }\n    scheduleStart() { }\n    // @ts-ignore\n    setTokenizer(tokenizer) { }\n    stop() { }\n    // @ts-ignore\n    getState(row) { return 'start'; }\n}\n/**\n * シンタックスハイライト以外のエディタの挙動の定義。\n */\nexport class LanguageFeatures {\n    /**\n       * @param {TypeofAceRange} AceRange\n       * @param {NakoCompiler} nako3\n       */\n    constructor(AceRange, nako3) {\n        this.AceRange = AceRange;\n        this.nako3 = nako3;\n    }\n    /**\n       * Ctrl + / の動作の定義。\n       * @param {string} state\n       * @param {Session} session\n       * @param {number} startRow\n       * @param {number} endRow\n       */\n    static toggleCommentLines(state, { doc }, startRow, endRow) {\n        const prepare = NakoPrepare.getInstance();\n        /**\n             * @param {string} line\n             * @returns {{ type: 'blank' | 'code' } | { type: 'comment', start: number, len: number }}\n             */\n        const parseLine = (line) => {\n            // 先頭の空白を消す\n            const indent = getIndent(line);\n            if (indent === line) {\n                return { type: 'blank' };\n            }\n            line = line.substring(indent.length);\n            // 先頭がコメントの開始文字かどうか確認する\n            const ch2 = line.substring(0, 2).split('').map((c) => prepare.convert1ch(c)).join('');\n            if (ch2.substring(0, 1) === '#') {\n                return { type: 'comment', start: indent.length, len: 1 + (line.charAt(1) === ' ' ? 1 : 0) };\n            }\n            if (ch2 === '//') {\n                return { type: 'comment', start: indent.length, len: 2 + (line.charAt(2) === ' ' ? 1 : 0) };\n            }\n            return { type: 'code' };\n        };\n        /** @type {number[]} */\n        const rows = [];\n        for (let i = startRow; i <= endRow; i++) {\n            rows.push(i);\n        }\n        // 全ての行が空白行ならコメントアウト、全ての行が行コメントで始まるか空白行ならアンコメント、そうでなければコメントアウト。\n        if (!rows.every((row) => parseLine(doc.getLine(row)).type === 'blank') &&\n            rows.every((row) => parseLine(doc.getLine(row)).type !== 'code')) {\n            // アンコメント\n            for (const row of rows) {\n                // 行コメントで始まる行ならアンコメントする。\n                // 行コメントの直後にスペースがあるなら、それも1文字だけ削除する。\n                const line = parseLine(doc.getLine(row));\n                if (line.type === 'comment') {\n                    doc.removeInLine(row, line.start, line.start + line.len);\n                }\n            }\n        }\n        else {\n            // 最もインデントの低い行のインデント数を数える\n            const minIndent = Math.min(...rows.map((row) => countIndent(doc.getLine(row))));\n            // コメントアウトする\n            for (const row of rows) {\n                const line = doc.getLine(row);\n                let column = line.length;\n                for (let i = 0; i < line.length; i++) {\n                    if (countIndent(line.slice(0, i)) >= minIndent) {\n                        column = i;\n                        break;\n                    }\n                }\n                doc.insertInLine({ row, column }, '// ');\n            }\n        }\n    }\n    /**\n       * 文字を入力するたびに呼ばれる。trueを返すとautoOutdentが呼ばれる。\n       * @param {string} state\n       * @param {string} line\n       * @param {string} input\n       * @returns {boolean}\n       */\n    static checkOutdent(state, line, input) {\n        // 特定のキーワードの入力が終わったタイミングでインデントを自動修正する。\n        // '違えば'のautoOutdentは「もし」と「条件分岐」のどちらのものか見分けが付かないため諦める。\n        // 「ここ|ま」（縦線がカーソル）の状態で「で」を打つとtrueになってしまう問題があるが、修正するには引数が足りない。\n        // eslint-disable-next-line no-irregular-whitespace\n        return /^[ 　・\\t]*ここまで$/.test(line + input);\n    }\n    /**\n       * checkOutdentがtrueを返したときに呼ばれる。\n       * @param {string} state\n       * @param {Session} session\n       * @param {number} row\n       * @returns {void}\n       */\n    autoOutdent(state, { doc }, row) {\n        // 1行目なら何もしない\n        if (row === 0) {\n            return;\n        }\n        const prevLine = doc.getLine(row - 1);\n        let indent;\n        if (LanguageFeatures.isBlockStart(prevLine)) {\n            // 1つ前の行が「〜ならば」などのブロック開始行なら、その行に合わせる。\n            indent = getIndent(prevLine);\n        }\n        else {\n            // そうでなければ、1つ前の行のインデントから1段階outdentした位置に合わせる。\n            const s = this.getBlockStructure(doc.getAllLines().join('\\n'));\n            const parent = s.parents[row];\n            indent = parent !== null ? s.spaces[parent] : '';\n        }\n        // 置換する\n        const oldIndent = getIndent(doc.getLine(row));\n        doc.replace(new this.AceRange(row, 0, row, oldIndent.length), indent);\n    }\n    /**\n       * エンターキーを押して行が追加されたときに挿入する文字列を指定する。\n       * @param {string} state\n       * @param {string} line 改行前にカーソルがあった行の文字列\n       * @param {string} tab タブ文字（デフォルトでは \"    \"）\n       */\n    static getNextLineIndent(state, line, tab) {\n        // ●で始まるか、特定のキーワードで終わる場合にマッチする。\n        if (this.isBlockStart(line)) {\n            return getIndent(line) + tab;\n        }\n        return getIndent(line);\n    }\n    /** @param {string} line */\n    static isBlockStart(line) {\n        // eslint-disable-next-line no-irregular-whitespace\n        return /^[ 　・\\t]*●|(ならば|なければ|ここから|条件分岐|違えば|回|繰り返(す|し)|の間|反復|とは|には|エラー監視|エラーならば|実行速度優先)、?\\s*$/.test(line);\n    }\n    /**\n       * オートコンプリート\n       * @param {number} row\n       * @param {string} prefix getCompletionPrefixの出力\n       * @param {NakoCompiler} nako3\n       * @param {BackgroundTokenizer} backgroundTokenizer\n       */\n    static getCompletionItems(row, prefix, nako3, backgroundTokenizer) {\n        /**\n             * keyはcaption。metaは候補の横に薄く表示されるテキスト。\n             * @type {Map<string, { value: string, meta: Set<string>, score: number }>}\n             */\n        const result = new Map();\n        /** 引数のリストを含まない、関数名だけのリスト @type {Set<string>} */\n        const values = new Set();\n        /**\n             * オートコンプリートの項目を追加する。すでに存在するならマージする。\n             * @param {string} caption @param {string} value @param {string} meta\n             */\n        const addItem = (caption, value, meta) => {\n            const item = result.get(caption);\n            if (item) {\n                item.meta.add(meta);\n            }\n            else {\n                // 日本語の文字数は英語よりずっと多いため、ただ一致する文字数を数えるだけで十分。\n                const score = prefix.split('').filter((c) => value.includes(c)).length;\n                result.set(caption, { value, meta: new Set([meta]), score });\n                values.add(value);\n            }\n        };\n        // プラグイン関数\n        for (const name of Object.keys(nako3.__varslist[0])) {\n            if (name.startsWith('!')) { // 「!PluginBrowser:初期化」などを除外\n                continue;\n            }\n            const f = nako3.funclist[name];\n            if (typeof f !== 'object' || f === null) {\n                continue;\n            }\n            const pluginName = findPluginName(name, nako3) || 'プラグイン';\n            if (f.type === 'func') {\n                addItem(createParameterDeclaration(f.josi) + name, name, pluginName);\n            }\n            else {\n                addItem(name, name, pluginName);\n            }\n        }\n        // 依存ファイルが定義した関数名\n        for (const [file, { funclist }] of Object.entries(nako3.dependencies)) {\n            for (const [name, f] of Object.entries(funclist)) {\n                const josi = (f && f.type === 'func') ? createParameterDeclaration(f.josi) : '';\n                addItem(josi + name, name, file);\n            }\n        }\n        // 現在のファイル内に存在する名前\n        if (backgroundTokenizer.lastLexerOutput !== null) {\n            for (const token of backgroundTokenizer.lastLexerOutput.tokens) {\n                const name = token.value + '';\n                // 同じ行のトークンの場合、自分自身にマッチしている可能性が高いため除外する。\n                // すでに定義されている場合も、定義ではなく参照の可能性が高いため除外する。\n                if (token.line === row || values.has(name)) {\n                    continue;\n                }\n                if (token.type === 'word') {\n                    addItem(name, name, '変数');\n                }\n                else if (token.type === 'func') {\n                    const f = nako3.funclist[name];\n                    const josi = (f && f.type === 'func') ? createParameterDeclaration(f.josi) : '';\n                    addItem(josi + name, name, '関数');\n                }\n            }\n        }\n        return Array.from(result.entries()).map(([caption, data]) => ({ caption, ...data, meta: Array.from(data.meta).join(', ') }));\n    }\n    /**\n       * スニペット\n       */\n    /** @param {string} text */\n    static getSnippets(text) {\n        // インデント構文が有効化されているなら「ここまで」を消す\n        const indentSyntax = isIndentSyntaxEnabled(text);\n        /** @param {string} en @param {string} jp @param {string} snippet */\n        const item = (en, jp, snippet) => indentSyntax\n            ? { caption: en, meta: `\\u21E5 ${jp}`, score: 1, snippet: snippet.replace(/\\t*ここまで(\\n|$)/g, '').replace(/\\t/g, '    ') }\n            : { caption: en, meta: `\\u21E5 ${jp}`, score: 1, snippet: snippet.replace(/\\t/g, '    ') };\n        return [\n            item('if', 'もし〜ならば', 'もし${1:1=1}ならば\\n\\t${2:1を表示}\\n違えば\\n\\t${3:2を表示}\\nここまで\\n'),\n            item('times', '〜回', '${1:3}回\\n\\t${2:1を表示}\\nここまで\\n'),\n            item('for', '繰り返す', '${1:N}で${2:1}から${3:3}まで繰り返す\\n\\t${4:Nを表示}\\nここまで\\n'),\n            item('while', '〜の間', '${1:N<2の間}\\n\\tN=N+1\\nここまで\\n'),\n            item('foreach', '〜を反復', '${1:[1,2,3]}を反復\\n\\t${2:対象を表示}\\nここまで\\n'),\n            item('switch', '〜で条件分岐', '${1:N}で条件分岐\\n\\t${2:1}ならば\\n\\t\\t${3:1を表示}\\n\\tここまで\\n\\t${4:2}ならば\\n\\t\\t${5:2を表示}\\n\\tここまで\\n\\t違えば\\n\\t\\t${6:3を表示}\\n\\tここまで\\nここまで\\n'),\n            item('function', '●〜とは', '●（${1:AとBを}）${2:足す}とは\\n\\t${3:A+Bを戻す}\\nここまで\\n'),\n            item('test', '●テスト:〜とは', '●テスト:${2:足す}とは\\n\\t1と2を足す\\n\\tそれと3がASSERT等しい\\nここまで\\n'),\n            item('try', 'エラー監視', 'エラー監視\\n\\t${1:1のエラー発生}\\nエラーならば\\n\\t${2:2を表示}\\nここまで\\n')\n        ];\n    }\n    /**\n       * @param {string} line\n       * @param {NakoCompiler} nako3\n       */\n    static getCompletionPrefix(line, nako3) {\n        /** @type {ReturnType<NakoCompiler['lex']>[\"tokens\"] | null} */\n        let tokens = null;\n        // ひらがなとアルファベットとカタカナと漢字のみオートコンプリートする。\n        if (line.length === 0 || !/[ぁ-んa-zA-Zァ-ヶー\\u3005\\u4E00-\\u9FCF]/.test(line[line.length - 1])) {\n            return '';\n        }\n        // 現在の行のカーソルより前の部分をlexerにかける。速度を優先して1行だけ処理する。\n        try {\n            nako3.reset();\n            tokens = withoutLogger(nako3, () => nako3.lex(line, 'completion.nako3', undefined, true)).tokens\n                .filter((t) => t.type !== 'eol' && t.type !== 'eof');\n        }\n        catch (e) {\n            if (!(e instanceof NakoError)) {\n                console.error(e);\n            }\n        }\n        if (tokens === null || tokens.length === 0 || !tokens[tokens.length - 1].value) {\n            return '';\n        }\n        const prefix = tokens[tokens.length - 1].value + '';\n        // 単語の先頭がひらがなではなく末尾がひらがなのとき、助詞を打っている可能性が高いためオートコンプリートしない。\n        if (/[ぁ-ん]/.test(prefix[prefix.length - 1]) && !/[ぁ-ん]/.test(prefix[0])) {\n            return '';\n        }\n        // 最後のトークンの値を、オートコンプリートで既に入力した部分とする。\n        return prefix;\n    }\n    /**\n       * 文字を打つたびに各行についてこの関数が呼ばれる。'start'を返した行はfold可能な範囲の先頭の行になる。\n       * @param {Session} session\n       * @param {string} foldStyle\n       * @param {number} row\n       * @returns {'start' | ''}\n       */\n    getFoldWidget({ doc }, foldStyle, row) {\n        // 速度が重要なため正規表現でマッチする。\n        return LanguageFeatures.isBlockStart(doc.getLine(row)) ? 'start' : '';\n    }\n    /**\n       * getFoldWidgetが'start'を返した行に設置されるfold用のボタンが押されたときに呼ばれる。\n       * @param {Session} session\n       * @param {string} foldStyle\n       * @param {number} row\n       * @returns {AceRange | null} foldする範囲\n       */\n    getFoldWidgetRange({ doc }, foldStyle, row) {\n        const pair = this.getBlockStructure(doc.getAllLines().join('\\n')).pairs.find((v) => v[0] === row);\n        if (pair !== undefined) {\n            return new this.AceRange(pair[0], doc.getLine(pair[0]).length, pair[1] - 1, doc.getLine(pair[1] - 1).length);\n        }\n        return null;\n    }\n    /**\n       * @param {AceDocument} doc\n       * @returns {CodeLens[]}\n       */\n    static getCodeLens(doc) {\n        const results = [];\n        for (const [row, line] of Array.from(doc.getAllLines().entries())) {\n            // eslint-disable-next-line no-irregular-whitespace\n            const matches = /^[ 　・\\t]*●テスト:(.+?)(?:とは|$)/.exec(line);\n            if (matches !== null) {\n                results.push({\n                    start: { row },\n                    command: { title: 'テストを実行', id: 'runTest', arguments: [matches[1]] }\n                });\n            }\n        }\n        return results;\n    }\n    /**\n       * @param {string} code\n       * @returns {ReturnType<getBlockStructure>}\n       * @private\n       */\n    getBlockStructure(code) {\n        // キャッシュ\n        if (!this.blockStructure || this.blockStructure.code !== code) {\n            // @ts-ignore\n            this.blockStructure = { code, data: getBlockStructure(code) };\n        }\n        return this.blockStructure.data;\n    }\n}\n/**\n * 複数ファイルを表示するための最低限のAPIを提供する。\n * @typedef {{ content: string, cursor: { range: AceRange, reversed: boolean }, scroll: { top: number, left: number }, undoManger: any }} EditorTabState\n */\nclass EditorTabs {\n    /**\n       * @param {AceEditor} editor\n       * @param {TypeofAceRange} AceRange\n       * @param {any} UndoManager\n       */\n    constructor(editor, AceRange, UndoManager) {\n        this.editor = editor;\n        this.AceRange = AceRange;\n        this.UndoManager = UndoManager;\n    }\n    /** @param {string} content @returns {EditorTabState} */\n    newTab(content) {\n        return {\n            content,\n            cursor: { range: new this.AceRange(0, 0, 0, 0), reversed: false },\n            scroll: { left: 0, top: 0 },\n            undoManger: new this.UndoManager()\n        };\n    }\n    /** @returns {EditorTabState} */\n    getTab() {\n        return {\n            content: this.editor.getValue(),\n            cursor: { range: this.editor.session.selection.getRange(), reversed: this.editor.session.selection.isBackwards() },\n            scroll: { left: this.editor.session.getScrollLeft(), top: this.editor.session.getScrollTop() },\n            undoManger: this.editor.session.getUndoManager()\n        };\n    }\n    /** @param {EditorTabState} state */\n    setTab(state) {\n        this.editor.setValue(state.content);\n        this.editor.session.selection.setRange(state.cursor.range, state.cursor.reversed);\n        this.editor.session.setScrollLeft(state.scroll.left);\n        this.editor.session.setScrollTop(state.scroll.top);\n        this.editor.session.setUndoManager(state.undoManger);\n    }\n}\nclass Options {\n    /** Save Options */\n    static save(editor) {\n        try {\n            /** @type {any} */\n            const obj = {};\n            for (const key of ['syntaxHighlighting', 'keyboardHandler', 'theme', 'fontSize', 'wrap', 'useSoftTabs', 'tabSize', 'showInvisibles', 'enableLiveAutocompletion', 'indentedSoftWrap', 'underlineJosi']) {\n                obj[key] = editor.getOption(key);\n            }\n            localStorage.setItem('nako3EditorOptions', JSON.stringify(obj));\n        }\n        catch (e) {\n            // JSON.stringify のエラー、localStorageのエラーなど\n            console.error(e);\n            return null;\n        }\n    }\n    /** @param {AceEditor} editor */\n    static load(editor) {\n        try {\n            if (!window.localStorage) {\n                return null;\n            }\n            const text = window.localStorage.getItem('nako3EditorOptions');\n            if (text === null) {\n                return null;\n            }\n            const json = JSON.parse(text);\n            if (['ace/keyboard/vscode', 'ace/keyboard/emacs', 'ace/keyboard/sublime', 'ace/keyboard/vim'].includes(json.keyboardHandler)) {\n                editor.setOption('keyboardHandler', json.keyboardHandler);\n            }\n            if (['ace/theme/xcode', 'ace/theme/monokai'].includes(json.theme)) {\n                editor.setOption('theme', json.theme);\n            }\n            if (typeof json.fontSize === 'number') {\n                editor.setOption('fontSize', Math.min(48, Math.max(6, json.fontSize)));\n            }\n            for (const key of ['syntaxHighlighting', 'wrap', 'useSoftTabs', 'showInvisibles', 'enableLiveAutocompletion', 'indentedSoftWrap', 'underlineJosi']) {\n                if (typeof json[key] === 'boolean') {\n                    editor.setOption(key, json[key]);\n                }\n            }\n            if (typeof json.tabSize === 'number') {\n                editor.setOption('tabSize', Math.min(16, Math.max(0, json.tabSize)));\n            }\n        }\n        catch (e) {\n            // JSONのパースエラー、localStorageのエラーなど\n            console.error(e);\n            return null;\n        }\n    }\n    /** OptionPanelクラスをなでしこ用に書き換える。 */\n    static initPanel(OptionPanel, editor) {\n        const panel = new OptionPanel(editor); // editorはエラーが飛ばなければ何でも良い\n        // ページ内で一度だけ呼ぶ\n        if (this.done) {\n            return;\n        }\n        this.done = true;\n        // renderメソッドを呼ぶとrenderOptionGroupにoptionGroups.Main、optionGroups.More が順に渡されることを利用して、optionGroupsを書き換える。\n        let isMain = true;\n        panel.renderOptionGroup = (group) => {\n            if (isMain) { // Main\n                for (const key of Object.keys(group)) {\n                    delete group[key];\n                }\n                // スマートフォンでも見れるように、文字数は最小限にする\n                group['シンタックスハイライト'] = {\n                    path: 'syntaxHighlighting'\n                };\n                group['キーバインド'] = {\n                    path: 'keyboardHandler',\n                    type: 'select',\n                    items: [\n                        { caption: 'VSCode', value: 'ace/keyboard/vscode' },\n                        { caption: 'Emacs', value: 'ace/keyboard/emacs' },\n                        { caption: 'Sublime', value: 'ace/keyboard/sublime' },\n                        { caption: 'Vim', value: 'ace/keyboard/vim' }\n                    ]\n                };\n                group['カラーテーマ'] = {\n                    path: 'theme',\n                    type: 'select',\n                    items: [\n                        { caption: 'ライト', value: 'ace/theme/xcode' },\n                        { caption: 'ダーク', value: 'ace/theme/monokai' }\n                    ]\n                };\n                group['文字サイズ'] = {\n                    path: 'fontSize',\n                    type: 'number',\n                    defaultValue: 16\n                };\n                group['行の折り返し'] = {\n                    path: 'wrap',\n                    type: 'select',\n                    items: [\n                        { caption: 'なし', value: 'off' },\n                        { caption: 'あり', value: 'free' }\n                    ]\n                };\n                group['ソフトタブ'] = [{\n                        path: 'useSoftTabs'\n                    }, {\n                        ariaLabel: 'Tab Size',\n                        path: 'tabSize',\n                        type: 'number',\n                        values: [2, 3, 4, 8, 16]\n                    }];\n                group['空白文字を表示'] = {\n                    path: 'showInvisibles'\n                };\n                group['常に自動補完'] = {\n                    path: 'enableLiveAutocompletion'\n                };\n                group['折り返した行をインデント'] = {\n                    path: 'indentedSoftWrap'\n                };\n                group['助詞に下線を引く'] = {\n                    path: 'underlineJosi'\n                };\n                isMain = false;\n            }\n            else { // More\n                for (const key of Object.keys(group)) {\n                    delete group[key];\n                }\n            }\n        };\n        panel.render();\n        // 設定メニューは ace/ext/settings_menu.js の showSettingsMenu 関数によって開かれる。\n        // showSettingsMenu 関数は new OptionPanel(editor).render() で新しい設定パネルのインスタンスを生成するため、\n        // renderメソッドを上書きすることで、生成されたインスタンスにアクセスできる。\n        const render = OptionPanel.prototype.render;\n        OptionPanel.prototype.render = function (...args) {\n            render.apply(this, ...args); // 元の処理\n            // OptionPanel.setOption() で発火される setOption イベントをキャッチする\n            this.on('setOption', () => {\n                console.log('設定を保存しました。');\n                Options.save(this.editor);\n            });\n        };\n    }\n}\n/**\n * ace/ext/language_tools の設定がグローバル変数で保持されているため、こちら側でもグローバル変数で管理しないと、エディタが複数あるときに正しく動かない。\n * - captionはオートコンプリートの候補として表示されるテキスト\n * - metaはcaptionのテキストの右に薄く表示されるテキスト\n * - docHTMLはその更に右に独立したウィンドウで表示されるHTMLによる説明\n * - valueは決定したときに実際に挿入される文字列。プレースホルダーを配置するなら代わりにsnippetに値を設定する。\n *\n * @typedef {{\n *     getCompletions(\n *         editor: any,\n *         session: Session,\n *         pos: { row: number, column: number },\n *         prefix: any,\n *         callback: (\n *             a: null,\n *             b: { meta: string, caption: string, value?: string, score: number, docHTML?: string, snippet?: string }[]\n *         ) => void\n *     ): void\n *     getDocTooltip?(item: any): void\n * }} Completer\n * @type {Completer[]}\n */\nconst completers = [];\nlet editorIdCounter = 0;\n/**\n * 指定したidのHTML要素をなでしこ言語のエディタにする。\n *\n * - ace editor がグローバルに読み込まれている必要がある。\n * - wnako3_editor.css を読み込む必要がある。\n * - readonly にするには data-nako3-readonly=\"true\" を設定する。\n * - エラー位置の表示を無効化するには data-nako3-disable-marker=\"true\" を設定する。\n * - 縦方向にリサイズ可能にするには nako3-resizable=\"true\" を設定する。\n * - デバイスが遅いときにシンタックスハイライトを無効化する機能を切るには nako3-force-syntax-highlighting=\"true\" を設定する。\n *\n * @param {string | Element} idOrElement HTML要素\n * @param {import('./wnako3')} nako3\n * @param {any} ace\n */\nexport function setupEditor(idOrElement, nako3, ace) {\n    /** @type {AceEditor} */\n    const editor = ace.edit(idOrElement);\n    const element = typeof idOrElement === 'string' ? document.getElementById(idOrElement) : idOrElement;\n    if (element === null) {\n        throw new Error(`[wnako3_editor] idが ${idOrElement} のHTML要素は存在しません。`);\n    }\n    /** @type {TypeofAceRange} */\n    const AceRange = ace.require('ace/range').Range;\n    const editorMarkers = new EditorMarkers(editor.session, editor.session.bgTokenizer.doc, AceRange, !!element.dataset.nako3DisableMarker);\n    if (element.classList.contains('nako3_ace_mounted')) {\n        // 同じエディタを誤って複数回初期化すると、ace editor の挙動を書き換えているせいで\n        // 意図しない動作をしたため、すでにエディタとして使われていないことを確認する。\n        throw new Error('なでしこ言語のエディタの初期化処理を同一のHTML要素に対して複数回適用しました。');\n    }\n    // lang=\"ja\" があると表示がずれる問題の修正 #839\n    element.setAttribute('lang', 'en');\n    // 以前のバージョンではnako3_editorをhtmlに直接付けていたため、互換性のためnako3_editorとは別のクラス名を使用する。\n    element.classList.add('nako3_ace_mounted');\n    element.classList.add('nako3_editor'); // CSSのため\n    const readonly = element.dataset.nako3Readonly;\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!!readonly) {\n        element.classList.add('readonly');\n        editor.setReadOnly(true);\n    }\n    editor.setFontSize(16);\n    /** @param {Session} session */\n    const resetEditorTokens = (session) => {\n        // 一旦テキスト全体を消してから、元に戻す\n        /** @type {AceDocument} */\n        const doc = session.doc;\n        const lines = doc.getAllLines();\n        const range = session.selection.getRange();\n        doc.removeFullLines(0, doc.getLength());\n        doc.insert({ row: 0, column: 0 }, lines.join('\\n'));\n        session.selection.setRange(range, false);\n    };\n    ace.require('ace/config').defineOptions(editor.constructor.prototype, 'editor', {\n        syntaxHighlighting: {\n            /** @type {(this: AceEditor, value: boolean) => void} */\n            set: function (value) {\n                this.session.bgTokenizer.enabled = value;\n                resetEditorTokens(this.session);\n            },\n            initialValue: true\n        },\n        underlineJosi: {\n            /** @type {(this: AceEditor, value: boolean) => void} */\n            set: function (value) {\n                this.session.bgTokenizer.underlineJosi = value;\n                resetEditorTokens(this.session);\n            },\n            initialValue: true\n        }\n    });\n    editor.setOptions({\n        wrap: 'free',\n        indentedSoftWrap: false,\n        showPrintMargin: false\n    });\n    ace.require('ace/keybindings/vscode');\n    editor.setKeyboardHandler('ace/keyboard/vscode');\n    // ドキュメントのホバー\n    const Tooltip = ace.require('ace/tooltip').Tooltip;\n    const tooltip = new Tooltip(editor.container);\n    const event = ace.require('ace/lib/event');\n    event.addListener(editor.renderer.content, 'mouseout', () => {\n        // マウスカーソルがエディタの外に出たら、tooltipを隠す\n        tooltip.hide();\n    });\n    editor.on('mousemove', (e) => {\n        // マウスカーソルがトークンに重なったときにtooltipを表示する。モバイル端末の場合はトークンにカーソルが当たったときに表示される。\n        const pos = e.getDocumentPosition();\n        // getTokenAtはcolumnが行末より大きいとき行末のトークンを返してしまう。\n        if (pos.column >= e.editor.session.getLine(pos.row).length) {\n            tooltip.hide();\n            return;\n        }\n        // getTokenAtは実際よりも1文字右のトークンを取得してしまうため、columnに1を足している。\n        /** @type {EditorToken} */\n        const token = e.editor.session.getTokenAt(pos.row, pos.column + 1);\n        if (token === null || !token.docHTML) {\n            // ドキュメントが存在しないトークンならtooltipを表示しない\n            tooltip.hide();\n            return;\n        }\n        tooltip.setHtml(token.docHTML);\n        tooltip.show(null, e.clientX, e.clientY);\n    });\n    editor.session.on('change', () => {\n        // モバイル端末でドキュメントが存在するトークンを編集するときにツールチップが消えない問題を解消するために、文字を打ったらtooltipを隠す。\n        tooltip.hide();\n        // 文字入力したらマーカーを消す\n        editorMarkers.clear();\n    });\n    editor.on('guttermousedown', (e) => {\n        const target = e.domEvent.target;\n        if (target.className.indexOf('ace_gutter-cell') === -1) {\n            return;\n        }\n        if (!editor.isFocused()) {\n            return;\n        }\n        const row = e.getDocumentPosition().row;\n        const editorId = e.editor.editorId || 0;\n        if (target.className.indexOf('ace_breakpoint') === -1) {\n            e.editor.session.setBreakpoint(row);\n            window.postMessage({ action: 'breakpoint:on', row, editorId });\n        }\n        else {\n            e.editor.session.clearBreakpoint(row);\n            window.postMessage({ action: 'breakpoint:off', row, editorId });\n        }\n        // console.log('BREAKPOINT=', row, 'editorId=', editorId)\n        e.stop();\n    });\n    const forceSyntaxHighlighting = !!element.dataset.nako3ForceSyntaxHighlighting;\n    let isFirstTime = true;\n    const oldBgTokenizer = editor.session.bgTokenizer;\n    const backgroundTokenizer = new BackgroundTokenizer(editor.session.bgTokenizer.doc, nako3, (firstRow, lastRow, ms) => {\n        oldBgTokenizer._signal('update', { data: { first: firstRow, last: lastRow } });\n        // 処理が遅い場合シンタックスハイライトを無効化する。\n        if (ms > 220 && editor.getOption('syntaxHighlighting') && !readonly && !forceSyntaxHighlighting && isFirstTime) {\n            isFirstTime = false;\n            slowSpeedMessage.classList.add('visible');\n            editor.setOption('syntaxHighlighting', false);\n            setTimeout(() => {\n                slowSpeedMessage.classList.remove('visible');\n            }, 13000);\n        }\n    }, (code, err) => { editorMarkers.addByError(code, err, 'error'); }, \n    /** @type {boolean} */ (editor.getOption('underlineJosi')));\n    // オートコンプリートを有効化する\n    editor.setOptions({\n        enableBasicAutocompletion: true,\n        enableSnippets: true,\n        enableLiveAutocompletion: true\n    });\n    const editorId = editorIdCounter++;\n    editor.wnako3EditorId = editorId;\n    // オートコンプリートのcompleterを設定する\n    completers.push({\n        getCompletions(editor, session, pos, prefix, callback) {\n            if (editor.wnako3EditorId !== editorId) {\n                callback(null, []);\n            }\n            else {\n                const items = LanguageFeatures.getCompletionItems(pos.row, prefix, nako3, backgroundTokenizer);\n                // 完全に一致する候補があればオートコンプリートしない。（Aceエディタでの挙動が微妙なため。）\n                if (items.some((v) => v.value === prefix)) {\n                    callback(null, []);\n                    return;\n                }\n                callback(null, items);\n            }\n        }\n    }, { getCompletions(editor, session, pos, prefix, callback) { callback(null, (editor.wnako3EditorId !== editorId) ? [] : LanguageFeatures.getSnippets(editor.session.doc.getAllLines().join('\\n'))); } });\n    ace.require('ace/ext/language_tools').setCompleters(completers);\n    // オートコンプリートの単語の区切りが日本語に対応していないため、メソッドを上書きして対応させる。\n    // 文字を入力するたびに呼ばれ、''以外を返すとその文字列をもとにしてautocompletionが始まる。\n    ace.require('ace/autocomplete/util').getCompletionPrefix = (/** @type {AceEditor} */ editor) => {\n        const pos = editor.getCursorPosition();\n        return LanguageFeatures.getCompletionPrefix(editor.session.doc.getLine(pos.row).slice(0, pos.column), nako3);\n    };\n    // エディタの挙動の設定\n    const languageFeatures = new LanguageFeatures(AceRange, nako3);\n    const oop = ace.require('ace/lib/oop');\n    const TextMode = ace.require('ace/mode/text').Mode;\n    const Mode = function () {\n        this.HighlightRules = new TextMode().HighlightRules;\n        this.foldingRules = {\n            getFoldWidget: languageFeatures.getFoldWidget.bind(languageFeatures),\n            getFoldWidgetRange: languageFeatures.getFoldWidgetRange.bind(languageFeatures)\n        };\n    };\n    oop.inherits(Mode, TextMode);\n    Mode.prototype.toggleCommentLines = LanguageFeatures.toggleCommentLines.bind(LanguageFeatures);\n    Mode.prototype.getNextLineIndent = LanguageFeatures.getNextLineIndent.bind(LanguageFeatures);\n    Mode.prototype.checkOutdent = LanguageFeatures.checkOutdent.bind(LanguageFeatures);\n    Mode.prototype.autoOutdent = languageFeatures.autoOutdent.bind(languageFeatures);\n    editor.session.setMode(new Mode());\n    // tokenizer （シンタックスハイライト）の上書き\n    editor.session.bgTokenizer.stop();\n    editor.session.bgTokenizer = backgroundTokenizer;\n    editor.setTheme('ace/theme/xcode');\n    // 設定メニューの上書き\n    // なでしこ用に上書きした設定の削除やテキストの和訳をする。\n    Options.load(editor);\n    const OptionPanel = ace.require('ace/ext/options').OptionPanel;\n    Options.initPanel(OptionPanel, editor);\n    // 右下のボタン全体を囲むdiv\n    const buttonContainer = document.createElement('div');\n    buttonContainer.classList.add('button-container');\n    editor.container.appendChild(buttonContainer);\n    // 遅い端末へのメッセージのボタン\n    const slowSpeedMessage = document.createElement('span');\n    slowSpeedMessage.classList.add('slow-speed-message');\n    slowSpeedMessage.innerHTML = '<span>エディタの|応答速度が|低下したため|シンタックス|ハイライトを|無効化|しました。</span>'.replace(/\\|/g, '</span><span>');\n    buttonContainer.appendChild(slowSpeedMessage);\n    // テストの定義の上に「テストを実行」ボタンを表示する\n    /** @type {{ name: 'test', callback: (testName: string | undefined) => void }[]} */\n    const codeLensListeners = [];\n    try {\n        const CodeLens = ace.require('ace/ext/code_lens');\n        editor.setOption('enableCodeLens', true);\n        editor.commands.addCommand({\n            name: 'runTest',\n            exec: (/** @type {AceEditor} */ editor, /** @type {any[]} */ args) => {\n                codeLensListeners\n                    .filter((v) => v.name === 'test')\n                    .forEach((f) => f.callback(args[0]));\n            }\n        });\n        CodeLens.registerCodeLensProvider(editor, {\n            provideCodeLenses: (/** @type {Session} */ session, /** @type {(_: null, arr: CodeLens[]) => void} */ callback) => {\n                callback(null, codeLensListeners.some((v) => v.name === 'test') ? LanguageFeatures.getCodeLens(session.doc) : []);\n            }\n        });\n    }\n    catch (e) {\n        console.error(e); // ext/code_lens のscriptタグが読み込まれていない場合など。\n    }\n    // 「全画面」ボタン\n    const exitFullscreen = () => {\n        editor.container.classList.remove('fullscreen');\n        editor.renderer.setScrollMargin(0, 0, 0, 0); // marginを元に戻す\n    };\n    const fullscreenButton = document.createElement('span');\n    fullscreenButton.classList.add('editor-button');\n    fullscreenButton.innerText = '全画面';\n    fullscreenButton.addEventListener('click', (e) => {\n        if (editor.container.classList.contains('fullscreen')) {\n            exitFullscreen();\n        }\n        else {\n            editor.container.classList.add('fullscreen');\n            editor.renderer.setScrollMargin(20, 20, 0, 0); // 上下に少し隙間を開ける\n        }\n        e.preventDefault();\n    });\n    buttonContainer.appendChild(fullscreenButton);\n    // 「設定」ボタン\n    const settingsButton = document.createElement('span');\n    settingsButton.classList.add('editor-button');\n    settingsButton.innerText = '設定';\n    settingsButton.addEventListener('click', (e) => {\n        exitFullscreen();\n        editor.execCommand('showSettingsMenu');\n        e.preventDefault();\n    });\n    buttonContainer.appendChild(settingsButton);\n    // 複数ファイルの切り替え\n    const UndoManager = ace.require('ace/undomanager').UndoManager;\n    const editorTabs = new EditorTabs(editor, AceRange, UndoManager);\n    // リサイズ可能にする\n    const resizable = element.dataset.nako3Resizable;\n    if (resizable) {\n        new MutationObserver(() => { editor.resize(); }).observe(editor.container, { attributes: true });\n        editor.renderer.setScrollMargin(4, 0, 4, 0);\n        editor.container.classList.add('resizable');\n    }\n    const retokenize = () => { backgroundTokenizer.dirty = true; };\n    /**\n       * プログラムを実行して、エラーがあればエディタ上に波線を表示する。出力はoutputContainerに表示する。\n       * methodが'test'のとき、testNameを指定すると1つのテストだけ実行できる。\n       */\n    const run = (opts) => {\n        const code = editor.getValue();\n        const preCode = opts.preCode || ''; // プログラムの前に自動的に挿入されるコード\n        // loggerを新しいインスタンスに置き換える。そうしないとどのエディタで起きたエラー（や警告や出力）なのかが分からない。\n        const logger = nako3.replaceLogger();\n        if (opts.outputContainer) {\n            const c = opts.outputContainer;\n            logger.addListener('info', ({ html }) => {\n                if (!c) {\n                    console.log(html);\n                }\n                c.style.display = 'block';\n                c.innerHTML += html;\n            });\n            opts.outputContainer.classList.add('nako3-output-container');\n        }\n        let filename = opts.file || 'main.nako3';\n        // 警告とエラーをエディタ上に表示する。\n        logger.addListener('info', ({ position, noColor, level }) => {\n            if (position && (position.file === filename && (level === 'warn' || level === 'error'))) {\n                editorMarkers.addByError(code, { ...position, message: noColor }, level);\n            }\n        });\n        // 依存ファイルを読み込む。\n        const promise = nako3.loadDependencies(preCode + code, filename, preCode, opts.localFiles || {})\n            .then(async () => {\n            // プログラムを実行する。\n            if (!filename) {\n                filename = 'main.nako3';\n            }\n            if (opts.method === 'test') {\n                return nako3.test(preCode + code, filename, preCode, opts.testName);\n            }\n            else if (opts.method === 'compile') {\n                return nako3.compile(preCode + code, filename, false, preCode);\n            }\n            else {\n                const opt = { resetEnv: true, resetAll: true, preCode };\n                return await nako3.runAsync(preCode + code, filename, opt);\n            }\n        })\n            .catch((err) => {\n            // エラーはloggerに送られるため何もしなくて良い\n            // しかし念のため console.error で出力\n            console.error('[wnako3_editor]', err, nako3.__globalObj);\n        })\n            .then(async (res) => {\n            // 読み込んだ依存ファイルの情報を使って再度シンタックスハイライトする。\n            retokenize();\n            // シンタックスハイライトが終わるのを待つ\n            while (backgroundTokenizer.dirty) {\n                await new Promise((resolve) => setTimeout(resolve, 0));\n            }\n            return res;\n        })\n            .catch((err) => {\n            console.error('[wnako3_editor::run::promise::catch]', err);\n        });\n        return { promise, logger, code };\n    };\n    return { editor, editorMarkers, editorTabs, retokenize, run, codeLensListeners };\n}\nexport default {\n    tokenize,\n    setupEditor,\n    LanguageFeatures,\n    EditorMarkers,\n    BackgroundTokenizer\n};\n","// 実際のバージョン定義 (自動生成されるので以下を編集しない)\nconst nakoVersion = {\n    version: '3.4.21',\n    major: 3,\n    minor: 4,\n    patch: 21\n};\nexport default nakoVersion;\n","// @ts-nocheck\nexport default {\n    // @色定数\n    '水色': { type: 'const', value: 'aqua' },\n    '紫色': { type: 'const', value: 'fuchsia' },\n    '緑色': { type: 'const', value: 'lime' },\n    '青色': { type: 'const', value: 'blue' },\n    '赤色': { type: 'const', value: 'red' },\n    '黄色': { type: 'const', value: 'yellow' },\n    '黒色': { type: 'const', value: 'black' },\n    '白色': { type: 'const', value: 'white' },\n    '茶色': { type: 'const', value: 'maroon' },\n    '灰色': { type: 'const', value: 'gray' },\n    '金色': { type: 'const', value: 'gold' },\n    '黄金色': { type: 'const', value: 'gold' },\n    '銀色': { type: 'const', value: 'silver' },\n    '白金色': { type: 'const', value: 'silver' },\n    'オリーブ色': { type: 'const', value: 'olive' },\n    'ベージュ色': { type: 'const', value: 'beige' },\n    'アリスブルー色': { type: 'const', value: 'aliceblue' },\n    'RGB': {\n        type: 'func',\n        josi: [['と'], ['と'], ['で', 'の']],\n        pure: true,\n        fn: function (r, g, b) {\n            const z2 = (v) => {\n                const v2 = '00' + v.toString(16);\n                return v2.substr(v2.length - 2, 2);\n            };\n            return '#' + z2(r) + z2(g) + z2(b);\n        },\n        return_none: false\n    },\n    '色混': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (a) {\n            const z2 = (v) => {\n                const v2 = '00' + v.toString(16);\n                return v2.substr(v2.length - 2, 2);\n            };\n            if (!a) {\n                throw new Error('『色混ぜる』の引数には配列を指定します');\n            }\n            if (a.length < 3) {\n                throw new Error('『色混ぜる』の引数には[RR,GG,BB]形式の配列を指定します');\n            }\n            return '#' + z2(a[0]) + z2(a[1]) + z2(a[2]);\n        },\n        return_none: false\n    }\n};\n","export default {\n    // @システム\n    'WNAKOバージョン': { type: 'const', value: '?' },\n    '終': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // v3.3.74以降 plguin_system.mjsと挙動が同じになった\n            // デバッグモードでなければ例外を投げることでプログラムを終了させる\n            if (sys && sys.__v0) {\n                sys.__v0.forceClose = true;\n                if (!sys.__v0.useDebug) {\n                    throw new Error('__終わる__');\n                }\n            }\n            else {\n                throw new Error('__終わる__');\n            }\n        },\n        return_none: true\n    },\n    'OS取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            const ua = window.navigator.userAgent.toLowerCase();\n            if (ua.indexOf('windows') !== -1) {\n                return 'windows';\n            }\n            if (ua.indexOf('android') !== -1) {\n                return 'android';\n            }\n            if (ua.indexOf('iphone') !== -1) {\n                return 'iphone';\n            }\n            if (ua.indexOf('ipad') !== -1) {\n                return 'ipad';\n            }\n            if (ua.indexOf('mac os x') !== -1) {\n                return 'darwin';\n            }\n            if (ua.indexOf('macintosh') !== -1) {\n                return 'darwin';\n            }\n            if (ua.indexOf('cros') !== -1) {\n                return 'chromeos';\n            }\n            if (ua.indexOf('ubuntu') !== -1) {\n                return 'ubuntu';\n            }\n            if (ua.indexOf('linux') !== -1) {\n                return 'linux';\n            }\n            return 'unknown';\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @ダイアログ\n    '言': {\n        type: 'func',\n        josi: [['と', 'を']],\n        pure: true,\n        fn: function (s) {\n            window.alert(s);\n        },\n        return_none: true\n    },\n    '尋': {\n        type: 'func',\n        josi: [['と', 'を']],\n        pure: true,\n        fn: function (s, sys) {\n            const r = window.prompt(s);\n            if (!r) {\n                return sys.__v0['空'];\n            }\n            if (/^[-+]?[0-9]+(\\.[0-9]+)?$/.test(r)) {\n                return parseFloat(r);\n            }\n            if (/^[-+－＋]?[0-9０-９]+([.．][0-9０-９]+)?$/.test(r)) {\n                return parseFloat(r.replace(/[－＋０-９．]/g, c => {\n                    return String.fromCharCode(c.charCodeAt(0) - 0xFEE0);\n                }));\n            }\n            return r;\n        }\n    },\n    '文字尋': {\n        type: 'func',\n        josi: [['と', 'を']],\n        pure: true,\n        fn: function (s, sys) {\n            const r = window.prompt(s);\n            if (!r) {\n                return sys.__v0['空'];\n            }\n            return r;\n        }\n    },\n    '二択': {\n        type: 'func',\n        josi: [['で', 'の', 'と', 'を']],\n        pure: true,\n        fn: function (s) {\n            return window.confirm(s);\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @ブラウザ操作\n    'ブラウザ移動': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (url, sys) {\n            window.location.href = url;\n        }\n    },\n    'ブラウザ戻': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            window.history.back(-1);\n        }\n    },\n    'ブラウザURL': { type: 'const', value: '' } // @NぶらうざURL\n};\n","export default {\n    // @HTTPとAJAX\n    'HTTP取得': {\n        type: 'func',\n        josi: [['の', 'から', 'を']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            return sys.__exec('AJAXテキスト取得', [url, sys]);\n        }\n    },\n    'AJAX受信': {\n        type: 'func',\n        josi: [['から', 'を']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            return sys.__exec('AJAXテキスト取得', [url, sys]);\n        }\n    },\n    'AJAX受信時': {\n        type: 'func',\n        josi: [['で'], ['から', 'を']],\n        pure: true,\n        fn: function (callback, url, sys) {\n            sys.__exec('AJAX送信時', [callback, url, sys]);\n        },\n        return_none: true\n    },\n    'AJAX送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            return sys.__exec('AJAXテキスト取得', [url, sys]);\n        }\n    },\n    'AJAX送信時': {\n        type: 'func',\n        josi: [['の'], ['まで', 'へ', 'に']],\n        pure: true,\n        fn: function (callback, url, sys) {\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            fetch(url, options).then(res => {\n                // もし301であれば自動でリダイレクトするため,200だけをチェックすれば良い\n                if (res.status !== 200) {\n                    return sys.__v0['AJAX:ONERROR'](res.status);\n                }\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                callback(text, sys);\n            }).catch(err => {\n                sys.__v0['AJAX:ONERROR'](err);\n            });\n        },\n        return_none: true\n    },\n    'AJAXオプション': { type: 'const', value: '' },\n    'AJAXオプション設定': {\n        type: 'func',\n        josi: [['に', 'へ', 'と']],\n        pure: true,\n        fn: function (option, sys) {\n            sys.__v0['AJAXオプション'] = option;\n        },\n        return_none: true\n    },\n    'AJAXオプションPOST設定': {\n        type: 'func',\n        josi: [['を', 'で']],\n        pure: true,\n        fn: function (params, sys) {\n            const bodyData = sys.__exec('POSTデータ生成', [params, sys]);\n            const options = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: bodyData\n            };\n            sys.__v0['AJAXオプション'] = options;\n        },\n        return_none: true\n    },\n    'AJAX失敗時': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (callback, sys) {\n            sys.__v0['AJAX:ONERROR'] = callback;\n        }\n    },\n    'AJAXテキスト取得': {\n        type: 'func',\n        josi: [['から', 'を']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            const res = await fetch(url, options);\n            const txt = await res.text();\n            return txt;\n        },\n        return_none: false\n    },\n    'AJAX_JSON取得': {\n        type: 'func',\n        josi: [['から']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            const res = await fetch(url, options);\n            const txt = await res.json();\n            return txt;\n        },\n        return_none: false\n    },\n    'AJAXバイナリ取得': {\n        type: 'func',\n        josi: [['から']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (url, sys) {\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            const res = await fetch(url, options);\n            const bin = await res.blob();\n            return bin;\n        },\n        return_none: false\n    },\n    // @GETとPOST\n    'GET送信時': {\n        type: 'func',\n        josi: [['の'], ['まで', 'へ', 'に']],\n        pure: true,\n        fn: function (callback, url, sys) {\n            sys.__exec('AJAX送信時', [callback, url, sys]);\n        },\n        return_none: true\n    },\n    'POST送信時': {\n        type: 'func',\n        josi: [['の'], ['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (callback, url, params, sys) {\n            const bodyData = sys.__exec('POSTデータ生成', [params, sys]);\n            const options = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: bodyData\n            };\n            fetch(url, options).then(res => {\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                callback(text);\n            }).catch(err => {\n                sys.__v0['AJAX:ONERROR'](err);\n            });\n        }\n    },\n    'POSTフォーム送信時': {\n        type: 'func',\n        josi: [['の'], ['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (callback, url, params, sys) {\n            const fd = new FormData();\n            for (const key in params) {\n                fd.set(key, params[key]);\n            }\n            const options = {\n                method: 'POST',\n                body: fd\n            };\n            fetch(url, options).then(res => {\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                callback(text);\n            }).catch(err => {\n                sys.__v0['AJAX:ONERROR'](err);\n            });\n        }\n    },\n    'POSTデータ生成': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (params, sys) {\n            const flist = [];\n            for (const key in params) {\n                const v = params[key];\n                const kv = encodeURIComponent(key) + '=' + encodeURIComponent(v);\n                flist.push(kv);\n            }\n            return flist.join('&');\n        }\n    },\n    'POST送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        asyncFn: true,\n        fn: function (url, params, sys) {\n            return new Promise((resolve, reject) => {\n                const bodyData = sys.__exec('POSTデータ生成', [params, sys]);\n                const options = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded'\n                    },\n                    body: bodyData\n                };\n                fetch(url, options).then(res => {\n                    return res.text();\n                }).then(text => {\n                    resolve(text);\n                }).catch(err => {\n                    reject(err.message);\n                });\n            });\n        }\n    },\n    'POSTフォーム送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        asyncFn: true,\n        fn: function (url, params, sys) {\n            return new Promise((resolve, reject) => {\n                const fd = new FormData();\n                for (const key in params) {\n                    fd.set(key, params[key]);\n                }\n                const options = {\n                    method: 'POST',\n                    body: fd\n                };\n                fetch(url, options).then(res => {\n                    return res.text();\n                }).then(text => {\n                    resolve(text);\n                }).catch(err => {\n                    reject(err.message);\n                });\n            });\n        }\n    },\n    // @HTTPとAJAX(保証)\n    'AJAX保障送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に']],\n        pure: true,\n        fn: function (url, sys) {\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            return fetch(url, options);\n        },\n        return_none: false\n    },\n    'HTTP保障取得': {\n        type: 'func',\n        josi: [['の', 'から', 'を']],\n        pure: true,\n        fn: function (url, sys) {\n            return sys.__exec('AJAX保障送信', [url, sys]);\n        },\n        return_none: false\n    },\n    'POST保障送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (url, params, sys) {\n            const bodyData = sys.__exec('POSTデータ生成', [params, sys]);\n            const options = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: bodyData\n            };\n            return fetch(url, options);\n        },\n        return_none: false\n    },\n    'POSTフォーム保障送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (url, params, sys) {\n            const fd = new FormData();\n            for (const key in params) {\n                fd.set(key, params[key]);\n            }\n            const options = {\n                method: 'POST',\n                body: fd\n            };\n            return fetch(url, options);\n        },\n        return_none: false\n    },\n    'AJAX内容取得': {\n        type: 'func',\n        josi: [['から'], ['で']],\n        pure: true,\n        fn: function (res, type, sys) {\n            type = type.toString().toUpperCase();\n            if (type === 'TEXT' || type === 'テキスト') {\n                return res.text();\n            }\n            else if (type === 'JSON') {\n                return res.json();\n            }\n            else if (type === 'BLOB') {\n                return res.blob();\n            }\n            else if (type === 'ARRAY' || type === '配列') {\n                return res.arrayBuffer();\n            }\n            else if (type === 'BODY' || type === '本体') {\n                return res.body;\n            }\n            return res.body();\n        },\n        return_none: false\n    },\n    // @Blob\n    'BLOB作成': {\n        type: 'func',\n        josi: [['を', 'から'], ['で']],\n        pure: true,\n        fn: function (data, options) {\n            if (!(data instanceof Array)) {\n                data = [data];\n            }\n            return new Blob(data, options);\n        }\n    },\n    // @HTTPとAJAX(非推奨)\n    'AJAX逐次送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に']],\n        pure: true,\n        fn: function (url, sys) {\n            if (!sys.resolve) {\n                throw new Error('『AJAX逐次送信』は『逐次実行』構文内で利用する必要があります。');\n            }\n            sys.resolveCount++;\n            const resolve = sys.resolve;\n            const reject = sys.reject;\n            let options = sys.__v0['AJAXオプション'];\n            if (options === '') {\n                options = { method: 'GET' };\n            }\n            fetch(url, options).then(res => {\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                resolve();\n            }).catch(err => {\n                reject(err.message);\n            });\n        },\n        return_none: true\n    },\n    'HTTP逐次取得': {\n        type: 'func',\n        josi: [['の', 'から', 'を']],\n        pure: true,\n        fn: function (url, sys) {\n            if (!sys.resolve) {\n                throw new Error('『HTTP逐次取得』は『逐次実行』構文内で利用する必要があります。');\n            }\n            sys.__exec('AJAX逐次送信', [url, sys]);\n        },\n        return_none: true\n    },\n    'POST逐次送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (url, params, sys) {\n            if (!sys.resolve) {\n                throw new Error('『POST送信』は『逐次実行』構文内で利用する必要があります。');\n            }\n            sys.resolveCount++;\n            const resolve = sys.resolve;\n            const reject = sys.reject;\n            const bodyData = sys.__exec('POSTデータ生成', [params, sys]);\n            const options = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: bodyData\n            };\n            fetch(url, options).then(res => {\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                resolve(text);\n            }).catch(err => {\n                reject(err.message);\n            });\n        },\n        return_none: true\n    },\n    'POSTフォーム逐次送信': {\n        type: 'func',\n        josi: [['まで', 'へ', 'に'], ['を']],\n        pure: true,\n        fn: function (url, params, sys) {\n            if (!sys.resolve) {\n                throw new Error('『POSTフォーム逐次送信』は『逐次実行』構文内で利用する必要があります。');\n            }\n            sys.resolveCount++;\n            const resolve = sys.resolve;\n            const reject = sys.reject;\n            const fd = new FormData();\n            for (const key in params) {\n                fd.set(key, params[key]);\n            }\n            const options = {\n                method: 'POST',\n                body: fd\n            };\n            fetch(url, options).then(res => {\n                return res.text();\n            }).then(text => {\n                sys.__v0['対象'] = text;\n                resolve(text);\n            }).catch(err => {\n                reject(err.message);\n            });\n        },\n        return_none: true\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @DOM操作\n    'DOCUMENT': { type: 'const', value: '' },\n    'WINDOW': { type: 'const', value: '' },\n    'NAVIGATOR': { type: 'const', value: '' },\n    'DOM要素ID取得': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (id) {\n            return document.getElementById(id);\n        }\n    },\n    'DOM要素取得': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (q) {\n            if (typeof q === 'string') {\n                return document.querySelector(q);\n            }\n            return q;\n        }\n    },\n    'DOM要素全取得': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (q) {\n            return Array.from(document.querySelectorAll(q));\n        }\n    },\n    'タグ一覧取得': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (tag) {\n            return Array.from(document.getElementsByTagName(tag));\n        }\n    },\n    'DOM子要素取得': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (pa, q, sys) {\n            pa = sys.__query(pa, 'DOM子要素取得', true);\n            if (!pa.querySelector) {\n                throw new Error('『DOM子要素取得』で親要素がDOMではありません。');\n            }\n            return pa.querySelector(q);\n        }\n    },\n    'DOM子要素全取得': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (pa, q, sys) {\n            pa = sys.__query(pa, 'DOM子要素全取得', true);\n            if (!pa.querySelectorAll) {\n                throw new Error('『DOM子要素全取得』で親要素がDOMではありません。');\n            }\n            return Array.from(pa.querySelectorAll(q));\n        }\n    },\n    'DOMイベント設定': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, event, funcStr, sys) {\n            dom = sys.__query(dom, 'DOMイベント設定', false);\n            dom[event] = sys.__findVar(funcStr, null);\n        },\n        return_none: true\n    },\n    'DOMテキスト設定': {\n        type: 'func',\n        josi: [['に', 'の', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, text, sys) {\n            dom = sys.__query(dom, 'DOMテキスト設定', false);\n            const tag = dom.tagName.toUpperCase();\n            if (tag === 'INPUT' || tag === 'TEXTAREA') {\n                dom.value = text;\n            }\n            else if (tag === 'SELECT') {\n                for (let i = 0; i < dom.options.length; i++) {\n                    const v = dom.options[i].value;\n                    if (String(v) === text) {\n                        dom.selectedIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                dom.innerHTML = text;\n            }\n        },\n        return_none: true\n    },\n    'DOMテキスト取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (dom, sys) {\n            dom = sys.__query(dom, 'DOMテキスト取得', true);\n            if (!dom) {\n                return '';\n            }\n            const tag = dom.tagName.toUpperCase();\n            // input or textarea\n            if (tag === 'INPUT' || tag === 'TEXTAREA') {\n                return dom.value;\n            }\n            // select\n            if (tag === 'SELECT') {\n                const idx = dom.selectedIndex;\n                if (idx < 0) {\n                    return null;\n                }\n                return dom.options[idx].value;\n            }\n            return dom.innerHTML;\n        }\n    },\n    'DOM_HTML設定': {\n        type: 'func',\n        josi: [['に', 'の', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, text, sys) {\n            dom = sys.__query(dom, 'DOM_HTML設定', false);\n            dom.innerHTML = text;\n        },\n        return_none: true\n    },\n    'DOM_HTML取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (dom, sys) {\n            dom = sys.__query(dom, 'DOM_HTML取得', true);\n            if (!dom) {\n                return '';\n            }\n            return dom.innerHTML;\n        }\n    },\n    'テキスト設定': {\n        type: 'func',\n        josi: [['に', 'の', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, v, sys) {\n            return sys.__exec('DOMテキスト設定', [dom, v, sys]);\n        }\n    },\n    'テキスト取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (dom, sys) {\n            return sys.__exec('DOMテキスト取得', [dom, sys]);\n        }\n    },\n    'HTML設定': {\n        type: 'func',\n        josi: [['に', 'の', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, v, sys) {\n            return sys.__exec('DOM_HTML設定', [dom, v, sys]);\n        }\n    },\n    'HTML取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (dom, sys) {\n            return sys.__exec('DOM_HTML取得', [dom, sys]);\n        }\n    },\n    'DOM属性設定': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        uses: ['DOM和属性'],\n        pure: true,\n        fn: function (dom, s, v, sys) {\n            dom = sys.__query(dom, 'DOM属性設定', false);\n            const wa = sys.__v0['DOM和属性'];\n            if (wa[s]) {\n                s = wa[s];\n            }\n            // domのプロパティを確認して存在すればその値を設定する #1392\n            if (s in dom) {\n                dom[s] = v;\n            }\n            else {\n                dom.setAttribute(s, v);\n            }\n        },\n        return_none: true\n    },\n    'DOM属性取得': {\n        type: 'func',\n        josi: [['の', 'から'], ['を']],\n        uses: ['DOM和属性'],\n        pure: true,\n        fn: function (dom, s, sys) {\n            dom = sys.__query(dom, 'DOM属性取得', true);\n            if (!dom) {\n                return '';\n            }\n            const wa = sys.__v0['DOM和属性'];\n            if (wa[s]) {\n                s = wa[s];\n            }\n            // domのプロパティを確認して存在すればその値を取得する #1392\n            if (s in dom) {\n                return dom[s];\n            }\n            return dom.getAttribute(s);\n        }\n    },\n    'DOM和属性': {\n        type: 'const',\n        value: {\n            '幅': 'width',\n            '高さ': 'height',\n            '高': 'height',\n            'タイプ': 'type',\n            'データ': 'data',\n            '名前': 'name',\n            'ID': 'id',\n            '読取専用': 'readOnly',\n            '読み取り専用': 'readOnly',\n            '無効化': 'disabled'\n        }\n    },\n    'DOM和スタイル': {\n        type: 'const',\n        value: {\n            '幅': 'width',\n            '高さ': 'height',\n            '高': 'height',\n            '背景色': 'background-color',\n            '色': 'color',\n            'マージン': 'margin',\n            '余白': 'padding',\n            '文字サイズ': 'font-size',\n            '行揃え': 'text-align',\n            '左': 'left',\n            '右': 'right',\n            '中央': 'center',\n            'ボーダー': 'border',\n            'ボックス表示': 'display',\n            'なし': 'none',\n            'ブロック': 'block',\n            '表示位置': 'float',\n            '重なり': 'z-index',\n            '読取専用': 'readOnly',\n            '読み取り専用': 'readOnly',\n            'readonly': 'readOnly'\n        }\n    },\n    'DOMスタイル設定': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        uses: ['DOM和スタイル'],\n        pure: true,\n        fn: function (dom, s, v, sys) {\n            dom = sys.__query(dom, 'DOMスタイル設定', false);\n            const wa = sys.__v0['DOM和スタイル'];\n            if (wa[s] !== undefined) {\n                s = wa[s];\n            }\n            if (wa[v] !== undefined) {\n                v = wa[v];\n            }\n            dom.style[s] = v;\n        },\n        return_none: true\n    },\n    'DOMスタイル一括設定': {\n        type: 'func',\n        josi: [['に', 'へ'], ['を']],\n        uses: ['DOM和スタイル'],\n        pure: true,\n        fn: function (dom, values, sys) {\n            dom = sys.__query(dom, 'DOMスタイル一括設定', false);\n            if (dom instanceof window.HTMLElement) {\n                dom = [dom];\n            }\n            const wa = sys.__v0['DOM和スタイル'];\n            // 列挙したDOM一覧を全てスタイル変更する\n            for (let i = 0; i < dom.length; i++) {\n                const e = dom[i];\n                for (const key in values) {\n                    let s = key;\n                    let v = values[key];\n                    if (wa[s] !== undefined) {\n                        s = wa[s];\n                    }\n                    if (wa[v] !== undefined) {\n                        v = wa[v];\n                    }\n                    e.style[s] = v;\n                }\n            }\n        },\n        return_none: true\n    },\n    'DOMスタイル取得': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        uses: ['DOM和スタイル'],\n        pure: true,\n        fn: function (dom, style, sys) {\n            dom = sys.__query(dom, 'DOMスタイル取得', true);\n            if (!dom) {\n                return '';\n            }\n            const wa = sys.__v0['DOM和スタイル'];\n            if (wa[style]) {\n                style = wa[style];\n            }\n            return dom.style[style];\n        }\n    },\n    'DOMスタイル一括取得': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        uses: ['DOM和スタイル'],\n        pure: true,\n        fn: function (dom, style, sys) {\n            const res = {};\n            dom = sys.__query(dom, 'DOMスタイル一括取得', true);\n            if (!dom) {\n                return res;\n            }\n            if (style instanceof String) {\n                style = [style];\n            }\n            const wa = sys.__v0['DOM和スタイル'];\n            if (style instanceof Array) {\n                style.forEach((key) => {\n                    if (wa[key]) {\n                        key = wa[key];\n                    }\n                    res[key] = dom.style[key];\n                });\n                return res;\n            }\n            if (style instanceof Object) {\n                for (let key in style) {\n                    if (wa[key]) {\n                        key = wa[key];\n                    }\n                    res[key] = dom.style[key];\n                }\n                return res;\n            }\n            return dom.style[style];\n        }\n    },\n    'DOM要素作成': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (tag) {\n            return document.createElement(tag);\n        }\n    },\n    'DOM子要素追加': {\n        type: 'func',\n        josi: [['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (pa, el, sys) {\n            pa = sys.__query(pa, 'DOM子要素追加', false);\n            el = sys.__query(el, 'DOM子要素追加', false);\n            pa.appendChild(el);\n        }\n    },\n    'DOM子要素削除': {\n        type: 'func',\n        josi: [['から'], ['を']],\n        pure: true,\n        fn: function (pa, el, sys) {\n            pa = sys.__query(pa, 'DOM子要素削除', false);\n            el = sys.__query(el, 'DOM子要素削除', false);\n            pa.removeChild(el);\n        }\n    },\n    '注目': {\n        type: 'func',\n        josi: [['を', 'へ', 'に']],\n        pure: true,\n        fn: function (dom, sys) {\n            dom = sys.__query(dom, '注目', true);\n            if (dom && dom.focus) {\n                dom.focus();\n            }\n        },\n        return_none: true\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @DOM操作とイベント\n    '対象イベント': { type: 'const', value: '' },\n    'DOMイベント追加': {\n        type: 'func',\n        josi: [['の'], ['に', 'へ'], ['を']],\n        pure: true,\n        fn: function (dom, event, funcStr, sys) {\n            sys.__addEvent(dom, event, funcStr, null);\n        },\n        return_none: true\n    },\n    'DOMイベント削除': {\n        type: 'func',\n        josi: [['の'], ['から'], ['を']],\n        pure: true,\n        fn: function (dom, event, funcStr, sys) {\n            sys.__removeEvent(dom, event, funcStr);\n        },\n        return_none: true\n    },\n    'DOMイベント発火時': {\n        type: 'func',\n        josi: [['で'], ['の'], ['が']],\n        pure: true,\n        fn: function (callback, dom, event, sys) {\n            sys.__addEvent(dom, event, callback, null);\n        },\n        return_none: true\n    },\n    'DOMイベント処理停止': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (event, sys) {\n            event.preventDefault();\n        },\n        return_none: true\n    },\n    'クリック時': {\n        type: 'func',\n        josi: [['で'], ['を']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'click', func, null);\n        },\n        return_none: true\n    },\n    '読込時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'load', func, null);\n        },\n        return_none: true\n    },\n    'フォーム送信時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'submit', func, null);\n        },\n        return_none: true\n    },\n    '押キー': { type: 'const', value: '' },\n    'キー押時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'keydown', func, sys.__keyHandler);\n        },\n        return_none: true\n    },\n    'キー離時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'keyup', func, sys.__keyHandler);\n        },\n        return_none: true\n    },\n    'キータイピング時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'keypress', func, sys.__keyHandler);\n        },\n        return_none: true\n    },\n    'マウスX': { type: 'const', value: 0 },\n    'マウスY': { type: 'const', value: 0 },\n    'マウス押時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'mousedown', func, sys.__mouseHandler);\n        },\n        return_none: true\n    },\n    'マウス移動時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'mousemove', func, sys.__mouseHandler);\n        },\n        return_none: true\n    },\n    'マウス離時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'mouseup', func, sys.__mouseHandler);\n        },\n        return_none: true\n    },\n    'タッチX': { type: 'const', value: 0 },\n    'タッチY': { type: 'const', value: 0 },\n    'タッチ配列': { type: 'const', value: [] },\n    'タッチイベント計算': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (e, sys) {\n            return sys.__touchHandler(e, sys);\n        }\n    },\n    'タッチ開始時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'touchstart', func, sys.__touchHandler);\n        },\n        return_none: true\n    },\n    'タッチ時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'touchmove', func, sys.__touchHandler);\n        },\n        return_none: true\n    },\n    'タッチ終了時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'touchend', func, sys.__touchHandler);\n        },\n        return_none: true\n    },\n    'タッチキャンセル時': {\n        type: 'func',\n        josi: [['で'], ['を', 'の']],\n        pure: true,\n        fn: function (func, dom, sys) {\n            sys.__addEvent(dom, 'touchcancel', func, sys.__touchHandler);\n        },\n        return_none: true\n    },\n    '画面更新時実行': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (func, sys) {\n            func = sys.__findVar(func, null); // 文字列指定なら関数に変換\n            if (!func) {\n                throw new Error('『画面更新時実行』で関数の取得に失敗しました。');\n            }\n            sys.__requestAnimationFrameLastId = window.requestAnimationFrame(func);\n            return sys.__requestAnimationFrameLastId;\n        }\n    },\n    '画面更新処理取消': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (id, sys) {\n            window.cancelAnimationFrame(id);\n            if (sys.__requestAnimationFrameLastId === id) {\n                sys.__requestAnimationFrameLastId = 0;\n            }\n        },\n        return_none: true\n    }\n};\n","export default {\n    // @DOM部品操作\n    'DOM親要素': { type: 'const', value: '' },\n    'DOM部品個数': { type: 'const', value: 0 },\n    'DOM部品オプション': { type: 'const', value: { '自動改行': false, 'テーブル背景色': ['#AA4040', '#ffffff', '#fff0f0'] } },\n    'DOM親要素設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (el, sys) {\n            if (typeof el === 'string') {\n                el = document.querySelector(el) || document.getElementById(el);\n            }\n            sys.__v0['DOM親要素'] = el;\n            return el;\n        }\n    },\n    'DOM親部品設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (el, sys) {\n            return sys.__exec('DOM親要素設定', [el, sys]);\n        }\n    },\n    'DOMスキン': { type: 'const', value: '' },\n    'DOMスキン辞書': { type: 'const', value: {} },\n    'DOMスキン設定': {\n        type: 'func',\n        josi: [['を', 'に', 'の']],\n        pure: true,\n        fn: function (skin, sys) {\n            sys.__v0['DOMスキン'] = skin;\n        },\n        return_none: true\n    },\n    'DOM部品作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (elm, sys) {\n            const parent = sys.__v0['DOM親要素'];\n            const btn = (typeof (elm) === 'string') ? document.createElement(elm) : elm;\n            btn.id = 'nadesi-dom-' + sys.__v0['DOM部品個数'];\n            // スキン適用\n            const func = sys.__v0['DOMスキン辞書'][sys.__v0['DOMスキン']];\n            if (typeof (func) === 'function') {\n                func(elm, btn, sys);\n            }\n            // DOM追加\n            parent.appendChild(btn);\n            sys.__v0['DOM部品個数']++;\n            // オプションを適用\n            const opt = sys.__v0['DOM部品オプション'];\n            if (opt['自動改行']) {\n                parent.appendChild(document.createElement('br'));\n            }\n            return btn;\n        }\n    },\n    'ボタン作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (label, sys) {\n            const btn = sys.__exec('DOM部品作成', ['button', sys]);\n            btn.innerHTML = label;\n            return btn;\n        }\n    },\n    'エディタ作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (text, sys) {\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'text';\n            inp.value = text;\n            return inp;\n        }\n    },\n    'テキストエリア作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (text, sys) {\n            const te = sys.__exec('DOM部品作成', ['textarea', sys]);\n            te.value = text;\n            return te;\n        }\n    },\n    'ラベル作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (text, sys) {\n            const lbl = sys.__exec('DOM部品作成', ['span', sys]);\n            lbl.innerHTML = text;\n            return lbl;\n        }\n    },\n    'キャンバス作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (size, sys) {\n            const cv = sys.__exec('DOM部品作成', ['canvas', sys]);\n            cv.width = size[0];\n            cv.height = size[1];\n            cv.style.width = size[0];\n            cv.style.height = size[1];\n            // 描画中キャンバスを移動する\n            sys.__exec('描画開始', [cv, sys]);\n            return cv;\n        }\n    },\n    '画像作成': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (url, sys) {\n            const img = sys.__exec('DOM部品作成', ['img', sys]);\n            img.src = url;\n            return img;\n        }\n    },\n    '改行作成': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const br = sys.__exec('DOM部品作成', ['br', sys]);\n            return br;\n        }\n    },\n    'チェックボックス作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (text, sys) {\n            // チェックボックスは、<span><input><label></span>で成り立つように構築\n            const span = document.createElement('span');\n            const inp = document.createElement('input');\n            inp.type = 'checkbox';\n            inp.id = 'nadesi-dom-' + sys.__v0['DOM部品個数'];\n            sys.__v0['DOM部品個数']++;\n            const label = document.createElement('label');\n            label.innerHTML = text;\n            label.htmlFor = inp.id;\n            span.appendChild(inp);\n            span.appendChild(label);\n            // 親部品に追加\n            sys.__exec('DOM部品作成', [span, sys]);\n            return inp;\n        }\n    },\n    'セレクトボックス作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (options, sys) {\n            const dom = document.createElement('select');\n            for (let i = 0; i < options.length; i++) {\n                const item = document.createElement('option');\n                item.value = options[i];\n                item.appendChild(document.createTextNode(options[i]));\n                dom.appendChild(item);\n            }\n            // 親部品に追加\n            sys.__exec('DOM部品作成', [dom, sys]);\n            return dom;\n        }\n    },\n    'セレクトボックスアイテム設定': {\n        type: 'func',\n        josi: [['を'], ['へ', 'に']],\n        pure: true,\n        fn: function (options, dom, sys) {\n            if (typeof dom === 'string') {\n                dom = document.querySelector(dom);\n            }\n            // 既存のoptionsをクリア\n            dom.options.length = 0;\n            // アイテムを追加\n            for (let i = 0; i < options.length; i++) {\n                const item = document.createElement('option');\n                item.value = options[i];\n                item.appendChild(document.createTextNode(options[i]));\n                dom.appendChild(item);\n            }\n        },\n        return_none: true\n    },\n    '色選択ボックス作成': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'color';\n            return inp;\n        }\n    },\n    '日付選択ボックス作成': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'date';\n            return inp;\n        }\n    },\n    'パスワード入力エディタ作成': {\n        type: 'func',\n        josi: [['の', 'で']],\n        pure: true,\n        fn: function (s, sys) {\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'password';\n            inp.value = s;\n            return inp;\n        }\n    },\n    '値指定バー作成': {\n        type: 'func',\n        josi: [['の', 'で']],\n        pure: true,\n        fn: function (range, sys) {\n            if (!(range instanceof Array) || range.length < 2) {\n                range = [0, 100, 50];\n            }\n            if (range.length <= 2) { // 3つ目を省略したとき\n                range.push(Math.floor((range[1] - range[0]) / 2));\n            }\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'range';\n            inp.min = range[0];\n            inp.max = range[1];\n            inp.value = range[2];\n            return inp;\n        }\n    },\n    '送信ボタン作成': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (label, sys) {\n            const inp = sys.__exec('DOM部品作成', ['input', sys]);\n            inp.type = 'submit';\n            inp.value = label;\n            return inp;\n        }\n    },\n    'フォーム作成': {\n        type: 'func',\n        josi: [['で', 'の'], ['を']],\n        pure: true,\n        fn: function (obj, s, sys) {\n            const frm = sys.__exec('DOM部品作成', ['form', sys]);\n            // 可能ならformにobjの値を移し替える\n            if (obj instanceof Object) {\n                for (const key in obj) {\n                    if (frm[key]) {\n                        frm[key] = obj[key];\n                    }\n                }\n            }\n            // 入力項目をtableで作る\n            const rows = s.split('\\n');\n            const table = document.createElement('table');\n            for (const rowIndex in rows) {\n                let row = '' + (rows[rowIndex]);\n                if (row === '') {\n                    continue;\n                }\n                if (row.indexOf('=') < 0) {\n                    row += '=';\n                }\n                const cols = row.split('=');\n                const key = cols[0];\n                const val = cols[1];\n                // key\n                const th = document.createElement('th');\n                th.innerHTML = sys.__tohtmlQ(key);\n                // val\n                const td = document.createElement('td');\n                if (val.substring(0, 2) === '?(') {\n                    // select box\n                    const it = val.substring(2) + ')';\n                    const ita = it.split(')');\n                    const its = ita[0];\n                    const def = ita[1];\n                    const items = its.split('|');\n                    const select = document.createElement('select');\n                    select.name = key;\n                    for (const it of items) {\n                        const option = document.createElement('option');\n                        option.value = it;\n                        option.text = it;\n                        select.appendChild(option);\n                    }\n                    const idx = items.indexOf(def);\n                    if (idx >= 0) {\n                        select.selectedIndex = idx;\n                    }\n                    td.appendChild(select);\n                }\n                else {\n                    // input element\n                    const inp = document.createElement('input');\n                    td.appendChild(inp);\n                    inp.id = 'nako3form_' + key;\n                    if (val === '?送信' || val === '?submit') {\n                        inp.type = 'submit';\n                        inp.value = val.substring(1);\n                        if (key !== '') {\n                            inp.name = key;\n                        }\n                    }\n                    else if (val.substring(0, 2) === '?c') {\n                        inp.type = 'color';\n                        inp.value = val.substring(2);\n                        inp.name = key;\n                    }\n                    else {\n                        inp.type = 'text';\n                        inp.value = val;\n                        inp.name = key;\n                    }\n                }\n                const tr = document.createElement('tr');\n                tr.appendChild(th);\n                tr.appendChild(td);\n                table.appendChild(tr);\n            }\n            frm.appendChild(table);\n            return frm;\n        }\n    },\n    'フォーム入力一括取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (dom) {\n            if (typeof (dom) === 'string') {\n                dom = document.querySelector(dom);\n            }\n            const res = {};\n            const getChildren = (pa) => {\n                if (!pa || !pa.childNodes) {\n                    return;\n                }\n                for (let i = 0; i < pa.childNodes.length; i++) {\n                    const el = pa.childNodes[i];\n                    if (!el.tagName) {\n                        return;\n                    }\n                    const tag = el.tagName.toLowerCase();\n                    if (tag === 'input') {\n                        if (el.type === 'checkbox') {\n                            res[el.name] = el.checked ? el.value : '';\n                            continue;\n                        }\n                        res[el.name] = el.value;\n                        continue;\n                    }\n                    else if (tag === 'textarea') {\n                        res[el.name] = el.value;\n                    }\n                    else if (tag === 'select') {\n                        if (el.selectedIndex >= 0) {\n                            res[el.name] = el.options[el.selectedIndex].value;\n                        }\n                        else {\n                            res[el.name] = '';\n                        }\n                    }\n                    getChildren(el);\n                }\n            };\n            getChildren(dom);\n            return res;\n        }\n    },\n    'テーブル作成': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (aa, sys) {\n            if (typeof (aa) === 'string') {\n                const rr = [];\n                const rows = aa.split('\\n');\n                for (const row of rows) {\n                    rr.push(row.split(','));\n                }\n                aa = rr;\n            }\n            const bgColor = JSON.parse(JSON.stringify(sys.__v0['DOM部品オプション']['テーブル背景色']));\n            for (let i = 0; i < 3; i++) {\n                bgColor.push('');\n            }\n            const bgHead = bgColor.shift();\n            const table = sys.__exec('DOM部品作成', ['table', sys]);\n            for (let i = 0; i < aa.length; i++) {\n                const rowNo = i;\n                const row = aa[rowNo];\n                const tr = document.createElement('tr');\n                for (let col of row) {\n                    col = '' + col;\n                    const td = document.createElement((rowNo === 0) ? 'th' : 'td');\n                    td.innerHTML = sys.__tohtml(col);\n                    // 色指定\n                    if (bgHead !== '') {\n                        td.style.backgroundColor = (rowNo === 0) ? bgHead : bgColor[rowNo % 2];\n                        td.style.color = (rowNo === 0) ? 'white' : 'black';\n                    }\n                    if (col.match(/^(\\+|-)?\\d+(\\.\\d+)?$/)) { // number?\n                        td.style.textAlign = 'right';\n                    }\n                    tr.appendChild(td);\n                }\n                table.appendChild(tr);\n            }\n            return table;\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @HTML操作\n    'HTML変換': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (text) {\n            return String(text)\n                .replace(/&/g, '&amp;')\n                .replace(/>/g, '&gt;')\n                .replace(/</g, '&lt;');\n        }\n    },\n    // @クリップボード\n    'クリップボード設定': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        asyncFn: true,\n        fn: async function (text) {\n            // Clipboard APIをサポートしているか\n            if (navigator.clipboard) {\n                await navigator.clipboard.writeText(text);\n                return;\n            }\n            // Clipboard APIをサポートしていない場合\n            const tmp = document.createElement('div');\n            const pre = document.createElement('pre');\n            pre.style.webkitUserSelect = 'auto';\n            pre.style.userSelect = 'auto';\n            tmp.appendChild(pre).textContent = text;\n            // 画面外へ表示する\n            tmp.style.position = 'fixed';\n            tmp.right = '200%';\n            document.body.appendChild(tmp);\n            document.getSelection().selectAllChildren(tmp);\n            document.execCommand('copy');\n            document.body.removeChild(tmp);\n        },\n        return_none: true\n    },\n    'クリップボード取得時': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (f, sys) {\n            // Clipboard APIをサポートしているか\n            if (navigator.clipboard) {\n                if (typeof (f) === 'string') {\n                    f = sys.__findFunc(f, 'クリップボード取得時');\n                }\n                const pm = navigator.clipboard.readText();\n                pm.then(text => {\n                    sys.__v0['対象'] = text;\n                    f(sys);\n                });\n            }\n            else {\n                throw new Error('Clipbard APIが利用できません。');\n            }\n        }\n    },\n    'クリップボード取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        asyncFn: true,\n        fn: async function (sys) {\n            // Clipboard APIをサポートしているか\n            if (navigator.clipboard) {\n                const result = await navigator.clipboard.readText();\n                return result;\n            }\n            else {\n                throw new Error('Clipbard APIが利用できません。');\n            }\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @ローカルストレージ\n    '保存': {\n        type: 'func',\n        josi: [['を'], ['に', 'へ']],\n        pure: true,\n        fn: function (v, key, sys) {\n            sys.__exec('ローカルストレージ保存', [v, key, sys]);\n        },\n        return_none: true\n    },\n    '開': {\n        type: 'func',\n        josi: [['を', 'から', 'の']],\n        pure: true,\n        fn: function (key, sys) {\n            return sys.__exec('ローカルストレージ読', [key, sys]);\n        },\n        return_none: false\n    },\n    '読': {\n        type: 'func',\n        josi: [['を', 'から', 'の']],\n        pure: true,\n        fn: function (key, sys) {\n            return sys.__exec('ローカルストレージ読', [key, sys]);\n        },\n        return_none: false\n    },\n    '存在': {\n        type: 'func',\n        josi: [['が']],\n        pure: true,\n        fn: function (key) {\n            const s = window.localStorage.getItem(key);\n            return (s !== null);\n        },\n        return_none: false\n    },\n    'ローカルストレージ保存': {\n        type: 'func',\n        josi: [['を'], ['に', 'へ']],\n        pure: true,\n        fn: function (v, key, sys) {\n            let body = v;\n            if (sys.__v0['保存オプション']) {\n                if ((sys.__v0['保存オプション'].indexOf('json') >= 0)) {\n                    body = JSON.stringify(body);\n                }\n                else if (sys.__v0['保存オプション'] === 'raw') {\n                    // なにもしない\n                }\n            }\n            window.localStorage[key] = body;\n        },\n        return_none: true\n    },\n    'ローカルストレージ読': {\n        type: 'func',\n        josi: [['を', 'から', 'の']],\n        pure: true,\n        fn: function (key, sys) {\n            const v = window.localStorage[key];\n            if (sys.__v0['保存オプション'] && (sys.__v0['保存オプション'].indexOf('json') >= 0)) {\n                try {\n                    return JSON.parse(v);\n                }\n                catch (e) {\n                    console.log('ローカルストレージ『' + key + '』の読み込みに失敗');\n                }\n            }\n            return v;\n        },\n        return_none: false\n    },\n    'ローカルストレージキー列挙': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const keys = [];\n            for (const key in window.localStorage) {\n                keys.push(key);\n            }\n            return keys;\n        },\n        return_none: false\n    },\n    'ローカルストレージキー削除': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (key) {\n            window.localStorage.removeItem(key);\n        },\n        return_none: true\n    },\n    'ローカルストレージ全削除': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            window.localStorage.clear();\n        },\n        return_none: true\n    },\n    'ローカルストレージ有効確認': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function () {\n            return (typeof window.localStorage !== 'undefined');\n        },\n        return_none: false\n    },\n    '保存オプション': { type: 'const', value: 'json' },\n    '保存オプション設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (v, sys) {\n            v = v.toUpperCase(v);\n            sys.__v0['保存オプション'] = v;\n        },\n        return_none: true\n    }\n};\n","/* eslint-disable quote-props */\nconst errMsgCanvasInit = '描画を行うためには、HTML内にcanvasを配置し、idを振って『描画開始』命令に指定します。';\nexport default {\n    // @描画\n    '描画開始': {\n        type: 'func',\n        josi: [['の', 'へ', 'で']],\n        pure: true,\n        fn: function (cv, sys) {\n            if (typeof cv === 'string') {\n                cv = document.querySelector(cv) || document.getElementById(cv);\n            }\n            if (!cv) {\n                throw new Error('『描画開始』でCanvasを取得できませんでした。');\n            }\n            sys.__canvas = cv;\n            sys.__ctx = cv.getContext('2d');\n            sys.__fillStyle = 'black';\n            sys.__strokeStyle = 'black';\n            sys.__v0['描画中キャンバス'] = cv;\n            sys.__v0['描画中コンテキスト'] = sys.__ctx;\n        },\n        return_none: true\n    },\n    '描画中キャンバス': { type: 'const', value: null },\n    '描画中コンテキスト': { type: 'const', value: null },\n    'キャンバス状態保存': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.save();\n        },\n        return_none: true\n    },\n    'キャンバス状態復元': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.restore();\n        },\n        return_none: true\n    },\n    '線色設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (v, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__strokeStyle = v;\n            if (v !== '') {\n                sys.__ctx.strokeStyle = v;\n            }\n        },\n        return_none: true\n    },\n    '塗色設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (v, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__fillStyle = v;\n            if (v !== '') {\n                sys.__ctx.fillStyle = v;\n            }\n        },\n        return_none: true\n    },\n    '線描画': {\n        type: 'func',\n        josi: [['から'], ['へ', 'まで']],\n        pure: true,\n        fn: function (a, b, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.beginPath();\n            sys.__ctx.moveTo(a[0], a[1]);\n            sys.__ctx.lineTo(b[0], b[1]);\n            sys.__ctx.stroke();\n        },\n        return_none: true\n    },\n    '線太設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (v, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.lineWidth = v;\n        },\n        return_none: true\n    },\n    '四角描画': {\n        type: 'func',\n        josi: [['の', 'へ', 'に']],\n        pure: true,\n        fn: function (b, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            if (sys.__fillStyle === '' && sys.__strokeStyle === '') {\n                return;\n            }\n            sys.__ctx.beginPath();\n            sys.__ctx.rect(b[0], b[1], b[2], b[3]);\n            if (sys.__fillStyle !== '') {\n                sys.__ctx.fill();\n            }\n            if (sys.__strokeStyle !== '') {\n                sys.__ctx.stroke();\n            }\n        },\n        return_none: true\n    },\n    '全描画クリア': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.clearRect(0, 0, sys.__canvas.width, sys.__canvas.height);\n        },\n        return_none: true\n    },\n    '描画クリア': {\n        type: 'func',\n        josi: [['の', 'へ', 'に']],\n        pure: true,\n        fn: function (b, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            if (!(b instanceof Array)) {\n                b = [];\n            }\n            if (b.length === 0) {\n                b = [0, 0, sys.__canvas.width, sys.__canvas.height];\n            }\n            else if (b.length <= 2) {\n                b.unshift(0);\n                b.unshift(0);\n            }\n            sys.__ctx.clearRect(b[0], b[1], b[2], b[3]);\n        },\n        return_none: true\n    },\n    '円描画': {\n        type: 'func',\n        josi: [['へ', 'に'], ['の']],\n        pure: true,\n        fn: function (xy, r, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            if (sys.__fillStyle === '' && sys.__strokeStyle === '') {\n                return;\n            }\n            sys.__ctx.beginPath();\n            sys.__ctx.arc(xy[0], xy[1], r, 0, 2 * Math.PI, false);\n            if (sys.__fillStyle !== '') {\n                sys.__ctx.fill();\n            }\n            if (sys.__strokeStyle !== '') {\n                sys.__ctx.stroke();\n            }\n        },\n        return_none: true\n    },\n    '楕円描画': {\n        type: 'func',\n        josi: [['へ', 'に', 'の']],\n        pure: true,\n        fn: function (args, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            if (!args) {\n                throw new Error('楕円描画の引数配列が無効です');\n            }\n            if (args.length < 4) {\n                throw new Error('楕円描画の引数配列が不足しています');\n            }\n            if (args.length < 7) {\n                if (!args[4]) {\n                    args[4] = 0;\n                }\n                if (!args[5]) {\n                    args[5] = 0;\n                }\n                if (!args[6]) {\n                    args[6] = Math.PI * 2;\n                }\n                if (!args[7]) {\n                    args[7] = true;\n                }\n            }\n            if (sys.__fillStyle === '' && sys.__strokeStyle === '') {\n                return;\n            }\n            sys.__ctx.beginPath();\n            sys.__ctx.ellipse(...args);\n            if (sys.__fillStyle !== '') {\n                sys.__ctx.fill();\n            }\n            if (sys.__strokeStyle !== '') {\n                sys.__ctx.stroke();\n            }\n        },\n        return_none: true\n    },\n    '多角形描画': {\n        type: 'func',\n        josi: [['で', 'の', 'を']],\n        pure: true,\n        fn: function (a, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            if (sys.__fillStyle === '' && sys.__strokeStyle === '') {\n                return;\n            }\n            sys.__ctx.beginPath();\n            const p = a[0];\n            sys.__ctx.moveTo(p[0], p[1]);\n            for (let i = 1; i < a.length; i++) {\n                const t = a[i];\n                sys.__ctx.lineTo(t[0], t[1]);\n            }\n            sys.__ctx.lineTo(p[0], p[1]);\n            if (sys.__fillStyle !== '') {\n                sys.__ctx.fill();\n            }\n            if (sys.__strokeStyle !== '') {\n                sys.__ctx.stroke();\n            }\n        },\n        return_none: true\n    },\n    '画像読': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (url, sys) {\n            const img = new window.Image();\n            img.src = url;\n            img.crossOrigin = 'Anonymous';\n            return img;\n        }\n    },\n    '画像読待': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        asyncFn: true,\n        fn: function (url) {\n            return new Promise((resolve, reject) => {\n                const img = new window.Image();\n                img.src = url;\n                img.crossOrigin = 'Anonymous';\n                img.onload = () => { resolve(img); };\n                img.onerror = () => {\n                    reject(new Error(`『画像読待』で読込みエラー。URL=『${url}』`));\n                };\n            });\n        }\n    },\n    '画像逐次読': {\n        type: 'func',\n        josi: [['の', 'を']],\n        pure: true,\n        fn: function (url, sys) {\n            if (sys.resolve === undefined) {\n                throw new Error('『画像逐次読』は『逐次実行』構文で使ってください。');\n            }\n            sys.resolveCount++;\n            const img = new window.Image();\n            img.src = url;\n            img.crossOrigin = 'Anonymous';\n            img.onload = () => {\n                sys.__v0['対象'] = img;\n                sys.resolve();\n            };\n            img.onerror = () => {\n                sys.__v0['対象'] = '';\n                sys.reject();\n            };\n            return img;\n        }\n    },\n    '画像読時': {\n        type: 'func',\n        josi: [['で'], ['の', 'を']],\n        pure: true,\n        fn: function (f, url, sys) {\n            // 関数オブジェクトを得る\n            const func = sys.__findVar(f, null); // 文字列指定なら関数に変換\n            // 画像を読む\n            const img = new window.Image();\n            img.src = url;\n            img.crossOrigin = 'Anonymous';\n            img.onload = () => {\n                sys.__v0['対象'] = img;\n                func(sys);\n            };\n            img.onerror = () => {\n                sys.__v0['対象'] = '';\n                func(sys);\n            };\n        },\n        return_none: true\n    },\n    '画像描画': {\n        type: 'func',\n        josi: [['の', 'を'], ['へ', 'に']],\n        pure: true,\n        fn: function (img, xy, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            const drawFunc = (im, ctx) => {\n                if (xy.length === 2) {\n                    ctx.drawImage(im, xy[0], xy[1]);\n                }\n                else if (xy.length === 4) {\n                    ctx.drawImage(im, xy[0], xy[1], xy[2], xy[3]);\n                }\n                else if (xy.length === 8) {\n                    ctx.drawImage(im, xy[0], xy[1], xy[2], xy[3], xy[4], xy[5], xy[6], xy[7]);\n                }\n                else {\n                    throw new Error('『画像描画』の第二引数の配列要素は2,4,8個のいずれかです。');\n                }\n            };\n            if (typeof img === 'string') {\n                const image = new window.Image();\n                image.src = img;\n                image.crossOrigin = 'Anonymous';\n                image.onload = () => {\n                    drawFunc(image, sys.__ctx);\n                };\n                return image;\n            }\n            else {\n                drawFunc(img, sys.__ctx);\n                return img;\n            }\n        },\n        return_none: false\n    },\n    '画像部分描画': {\n        type: 'func',\n        josi: [['の'], ['を', 'から'], ['へ', 'に']],\n        pure: true,\n        fn: function (img, sxy, dxy, sys) {\n            const errArgLen = '『画像部分描画』に使える引数は画像と、描画する座標へ2つか、' +\n                '描画する座標とその位置の4つか、使用する座標と使用する位置と描画する座標と大きさの8つだけです。';\n            if (img && sxy) {\n                if (!Array.isArray(sxy) && Array.isArray(img)) { // 逆になっていれば入れ替える\n                    // eslint-disable-next-line no-proto\n                    if (typeof sxy === 'string' || String(sxy.__proto__) === '[object HTMLImageElement]') {\n                        const sw = img;\n                        img = sxy;\n                        sxy = sw;\n                    }\n                }\n            }\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            const drawFunc = (im, ctx) => {\n                if (!dxy) {\n                    if (!sxy) {\n                        ctx.drawImage(im);\n                    }\n                    else if (sxy.length >= 2) { // もしsxyがあるのにdxyがなかったらdxyを代わりにする\n                        dxy = sxy;\n                        sxy = undefined;\n                    }\n                }\n                if (dxy.length === 2) {\n                    ctx.drawImage(im, dxy[0], dxy[1]);\n                }\n                else if (dxy.length === 4) {\n                    if (!sxy) {\n                        ctx.drawImage(im, dxy[0], dxy[1], dxy[2], dxy[3]);\n                    }\n                    else if (sxy.length === 4) {\n                        ctx.drawImage(im, sxy[0], sxy[1], sxy[2], sxy[3], dxy[0], dxy[1], dxy[2], dxy[3]);\n                    }\n                    else {\n                        throw new Error(errArgLen);\n                    }\n                }\n                else {\n                    throw new Error(errArgLen);\n                }\n            };\n            if (typeof img === 'string') {\n                const image = new window.Image();\n                image.src = img;\n                image.crossOrigin = 'Anonymous';\n                image.onload = () => {\n                    drawFunc(image, sys.__ctx);\n                };\n                return image;\n            }\n            else {\n                drawFunc(img, sys.__ctx);\n                return img;\n            }\n        },\n        return_none: false\n    },\n    '描画フォント設定': {\n        type: 'func',\n        josi: [['を', 'の', 'で', 'に']],\n        pure: true,\n        fn: function (n, sys) {\n            // 数値だけならフォントサイズのみの指定\n            if (typeof n === 'number') {\n                n = n + 'px sans-serif';\n            }\n            // ピクセル数のみの指定なら適当にフォントを足す\n            if (/^[0-9]+(px|em)$/.test(n)) {\n                n = n + ' sans-serif';\n            }\n            sys.__ctx.font = n;\n        },\n        return_none: true\n    },\n    '文字描画': {\n        type: 'func',\n        josi: [['へ', 'に'], ['の', 'を']],\n        pure: true,\n        fn: function (xy, s, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.fillText(s, xy[0], xy[1]);\n        },\n        return_none: true\n    },\n    '文字描画幅取得': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (s, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            return sys.__ctx.measureText(s);\n        },\n        return_none: true\n    },\n    '描画起点設定': {\n        type: 'func',\n        josi: [['へ', 'に']],\n        pure: true,\n        fn: function (xy, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.translate(xy[0], xy[1]);\n        },\n        return_none: true\n    },\n    '描画回転': {\n        type: 'func',\n        josi: [['だけ', 'に', 'へ']],\n        pure: true,\n        fn: function (a, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.rotate(a * Math.PI / 180);\n        },\n        return_none: true\n    },\n    '描画拡大': {\n        type: 'func',\n        josi: [['だけ', 'に', 'へ']],\n        pure: true,\n        fn: function (xy, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.scale(xy[0], xy[1]);\n        },\n        return_none: true\n    },\n    '描画変換マトリクス設定': {\n        type: 'func',\n        josi: [['だけ', 'に', 'へ']],\n        pure: true,\n        fn: function (a, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.setTransform(a[0], a[1], a[2], a[3], a[4], a[5], a[6]);\n        },\n        return_none: true\n    },\n    '描画変換マトリクス追加': {\n        type: 'func',\n        josi: [['だけ', 'に', 'へ']],\n        pure: true,\n        fn: function (a, sys) {\n            if (!sys.__ctx) {\n                throw new Error(errMsgCanvasInit);\n            }\n            sys.__ctx.transform(a[0], a[1], a[2], a[3], a[4], a[5], a[6]);\n        },\n        return_none: true\n    },\n    '描画データURL変換': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const cv = sys.__v0['描画中キャンバス'];\n            const url = cv.toDataURL('image/png');\n            return url;\n        }\n    },\n    '描画データBLOB変換': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        asyncFn: true,\n        fn: function (sys) {\n            return new Promise((resolve, reject) => {\n                const cv = sys.__v0['描画中キャンバス'];\n                cv.toBlob((result) => { resolve(result); }, 'image/png');\n            });\n        }\n    },\n    '描画ダウンロードリンク作成': {\n        type: 'func',\n        josi: [['へ', 'に']],\n        pure: true,\n        fn: function (dom, sys) {\n            if (typeof dom === 'string') {\n                dom = document.querySelector(dom);\n            }\n            if (!dom) {\n                throw new Error('『描画ダウンロードリンク作成』でDOMが見当たりません。');\n            }\n            const cv = sys.__v0['描画中キャンバス'];\n            if (!cv) {\n                throw new Error('『描画ダウンロード』で描画中キャンバスが設定されていません。');\n            }\n            dom.href = cv.toDataURL('image/png');\n            dom.download = 'canvas.png';\n        },\n        return_none: true\n    },\n    '描画ダウンロード': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const cv = sys.__v0['描画中キャンバス'];\n            if (!cv) {\n                throw new Error('『描画ダウンロード』で描画中キャンバスが設定されていません。');\n            }\n            const a = document.createElement('a');\n            a.href = cv.toDataURL('image/png');\n            a.download = 'canvas.png';\n            a.click();\n            return true;\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @位置情報\n    '位置情報取得時': {\n        type: 'func',\n        josi: [['の', 'に', 'へ']],\n        pure: true,\n        fn: function (func, sys) {\n            let cb = func;\n            if (typeof cb === 'string') {\n                cb = sys.__findVar(cb);\n            }\n            if (!('geolocation' in navigator)) {\n                throw new Error('関数『位置情報取得時』は使えません。');\n            }\n            navigator.geolocation.getCurrentPosition((position) => {\n                sys.__v0['対象'] = [\n                    position.coords.latitude,\n                    position.coords.longitude\n                ];\n                cb(position);\n            });\n        },\n        return_none: true\n    },\n    '位置情報監視時': {\n        type: 'func',\n        josi: [['の', 'に', 'へ']],\n        pure: true,\n        fn: function (func, sys) {\n            let cb = func;\n            if (typeof cb === 'string') {\n                cb = sys.__findVar(cb);\n            }\n            if (!('geolocation' in navigator)) {\n                throw new Error('関数『位置情報監視時』は使えません。');\n            }\n            return navigator.geolocation.watchPosition((position) => {\n                sys.__v0['対象'] = [\n                    position.coords.latitude,\n                    position.coords.longitude\n                ];\n                cb(position);\n            });\n        },\n        return_none: false\n    },\n    '位置情報監視停止': {\n        type: 'func',\n        josi: [['の']],\n        pure: true,\n        fn: function (wid, sys) {\n            navigator.geolocation.clearWatch(wid);\n        },\n        return_none: true\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @音声合成\n    '話': {\n        type: 'func',\n        josi: [['と', 'を', 'の']],\n        pure: true,\n        fn: function (s, sys) {\n            const msg = sys.__exec('音声合成発話オブジェクト取得', [s, sys]);\n            window.speechSynthesis.speak(msg);\n            console.log('#話す:', s);\n            return s;\n        }\n    },\n    '話終': {\n        type: 'func',\n        josi: [['と', 'を', 'の']],\n        pure: true,\n        asyncFn: true,\n        fn: function (s, sys) {\n            return new Promise((resolve, reject) => {\n                try {\n                    const msg = sys.__exec('音声合成発話オブジェクト取得', [s, sys]);\n                    msg.onend = () => { resolve(); };\n                    window.speechSynthesis.speak(msg);\n                    console.log('#話す:', s);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            });\n        }\n    },\n    '話終時': {\n        type: 'func',\n        josi: [['で'], ['と', 'を', 'の']],\n        pure: true,\n        fn: function (callback, s, sys) {\n            const msg = sys.__exec('音声合成発話オブジェクト取得', [s, sys]);\n            msg.onend = (e) => {\n                console.log('#話終時');\n                sys.__v0['対象イベント'] = e;\n                callback(sys);\n            };\n            window.speechSynthesis.speak(msg);\n            console.log('#話す:', s);\n            return s;\n        }\n    },\n    '音声合成発話オブジェクト取得': {\n        type: 'func',\n        josi: [['の', 'で']],\n        pure: true,\n        fn: function (s, sys) {\n            // 話者の特定\n            let voice = sys.__v0['話:話者'];\n            if (!voice) {\n                voice = sys.__exec('話者設定', ['ja', sys]);\n            }\n            // インスタンス作成\n            const msg = new SpeechSynthesisUtterance(s);\n            msg.voice = voice;\n            if (voice) {\n                msg.lang = voice.lang;\n            } // 必ず話者の特定に成功している訳ではない\n            msg.rate = sys.__v0['話者速度'];\n            msg.pitch = sys.__v0['話者声高'];\n            msg.volume = sys.__v0['話者音量'];\n            return msg;\n        }\n    },\n    '話者一覧取得': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // 対応している？\n            if (!('SpeechSynthesisUtterance' in window)) {\n                throw new Error('音声合成APIに対応していません');\n            }\n            return window.speechSynthesis.getVoices();\n        }\n    },\n    '話者設定': {\n        type: 'func',\n        josi: [['に', 'へ']],\n        pure: true,\n        fn: function (v, sys) {\n            // 対応している？\n            if (!('SpeechSynthesisUtterance' in window)) {\n                throw new Error('音声合成APIに対応していません');\n            }\n            // 文字列で値を指定\n            if (typeof v === 'string') {\n                // 話者を特定する\n                const voices = window.speechSynthesis.getVoices();\n                for (const i of voices) {\n                    if (i.lang.indexOf(v) >= 0 || i.name === v) {\n                        const msg = new SpeechSynthesisUtterance();\n                        msg.voice = i;\n                        msg.lang = i.lang;\n                        sys.__v0['話:話者'] = i;\n                        console.log('#話者:', i.name);\n                        return i;\n                    }\n                }\n            }\n            // 話者一覧取得で得たオブジェクトを直接指定した場合\n            if (typeof v === 'object') {\n                sys.__v0['話:話者'] = v;\n                return v;\n            }\n            return undefined;\n        }\n    },\n    '話者速度': { type: 'const', value: 1.0 },\n    '話者声高': { type: 'const', value: 1.0 },\n    '話者音量': { type: 'const', value: 1.0 },\n    '話者詳細設定': {\n        type: 'func',\n        josi: [['で', 'に', 'へ']],\n        pure: true,\n        fn: function (obj, sys) {\n            const changeFunc = (key, v) => {\n                if (key === '速度') {\n                    sys.__v0['話者速度'] = v;\n                }\n                if (key === '声高' || key === 'ピッチ') {\n                    sys.__v0['話者声高'] = v;\n                }\n                if (key === '音量') {\n                    sys.__v0['話者音量'] = v;\n                }\n            };\n            // 一括変更\n            for (const key in obj) {\n                const v = obj[key];\n                changeFunc(key, v);\n            }\n        }\n    }\n};\n","// @ts-nocheck\nexport default {\n    // @WebSocket\n    'WS接続完了時': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (callback, sys) {\n            sys.__v0['WS:ONOPEN'] = callback;\n        },\n        return_none: true\n    },\n    'WS受信時': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (callback, sys) {\n            sys.__v0['WS:ONMESSAGE'] = callback;\n        },\n        return_none: true\n    },\n    'WSエラー発生時': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (callback, sys) {\n            sys.__v0['WS:ONERROR'] = callback;\n        },\n        return_none: true\n    },\n    'WS接続': {\n        type: 'func',\n        josi: [['に', 'へ', 'の']],\n        pure: true,\n        fn: function (s, sys) {\n            const ws = new WebSocket(s);\n            ws.onopen = () => {\n                const cbOpen = sys.__v0['WS:ONOPEN'];\n                if (cbOpen) {\n                    cbOpen(sys);\n                }\n            };\n            ws.onerror = (err) => {\n                const cbError = sys.__v0['WS:ONERROR'];\n                if (cbError) {\n                    cbError(err, sys);\n                }\n                console.log('WSエラー', err);\n            };\n            ws.onmessage = (e) => {\n                sys.__v0['対象'] = e.data;\n                const cbMsg = sys.__v0['WS:ONMESSAGE'];\n                if (cbMsg) {\n                    cbMsg(sys);\n                }\n            };\n            sys.__v0['WS:SOCKET'] = ws;\n            return ws;\n        }\n    },\n    'WS送信': {\n        type: 'func',\n        josi: [['を', 'と']],\n        pure: true,\n        fn: function (s, sys) {\n            const ws = sys.__v0['WS:SOCKET'];\n            ws.send(s);\n        }\n    },\n    'WS切断': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            const ws = sys.__v0['WS:SOCKET'];\n            ws.close();\n        }\n    }\n};\n","/* eslint-disable quote-props */\nexport default {\n    // @オーディオ\n    'オーディオ開': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (url, sys) {\n            const a = new Audio();\n            a.src = url;\n            return a;\n        },\n        return_none: false\n    },\n    'オーディオ再生': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ再生する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.loop = false;\n            obj.play();\n        },\n        return_none: true\n    },\n    'オーディオループ再生': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ再生する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.loop = true;\n            obj.play();\n        },\n        return_none: true\n    },\n    'オーディオ停止': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ停止する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.pause();\n            obj.currentTime = 0; // 暫定\n            // オーディオ停止で再生位置が0に戻らない問題(#715)\n            setTimeout(() => {\n                obj.currentTime = 0; // しっかりと設定\n            }, 10);\n        },\n        return_none: true\n    },\n    'オーディオ一時停止': {\n        type: 'func',\n        josi: [['を']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ一時停止する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.pause();\n        },\n        return_none: true\n    },\n    'オーディオ音量取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ長取得する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            return obj.volume;\n        }\n    },\n    'オーディオ音量設定': {\n        type: 'func',\n        josi: [['を'], ['に', 'へ']],\n        pure: true,\n        fn: function (obj, v, sys) {\n            if (!obj) {\n                throw new Error('オーディオ長取得する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.volume = v;\n        },\n        return_none: true\n    },\n    'オーディオ長取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ長取得する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            return obj.duration;\n        }\n    },\n    'オーディオ再生位置取得': {\n        type: 'func',\n        josi: [['の', 'から']],\n        pure: true,\n        fn: function (obj, sys) {\n            if (!obj) {\n                throw new Error('オーディオ再生位置取得する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            return obj.currentTime;\n        }\n    },\n    'オーディオ再生位置設定': {\n        type: 'func',\n        josi: [['を'], ['に', 'へ']],\n        pure: true,\n        fn: function (obj, v, sys) {\n            if (!obj) {\n                throw new Error('オーディオ停止する前に、オーディオ開くで音声ファイルを読み込んでください');\n            }\n            obj.currentTime = v;\n        },\n        return_none: true\n    }\n};\n","// plugin_browser\n// @ts-nocheck\nimport PartBrowserColor from './plugin_browser_color.mjs';\nimport PartBrowserSystem from './plugin_browser_system.mjs';\nimport PartBrowserDialog from './plugin_browser_dialog.mjs';\nimport PartBrowserLocation from './plugin_browser_location.mjs';\nimport PartBrowserAjax from './plugin_browser_ajax.mjs';\nimport PartBrowserDomBasic from './plugin_browser_dom_basic.mjs';\nimport PartBrowserDomEvent from './plugin_browser_dom_event.mjs';\nimport PartBrowserDomParts from './plugin_browser_dom_parts.mjs';\nimport PartBrowserHtml from './plugin_browser_html.mjs';\nimport PartBrowserStorage from './plugin_browser_storage.mjs';\nimport PartBrowserCanvas from './plugin_browser_canvas.mjs';\nimport PartBrowserGeolocation from './plugin_browser_geolocation.mjs';\nimport PartBrowserSpeech from './plugin_browser_speech.mjs';\nimport PartBrowserWebsocket from './plugin_browser_websocket.mjs';\nimport PartBrowserAudio from './plugin_browser_audio.mjs';\nimport PartBrowserHotkey from './plugin_browser_hotkey.mjs';\nimport PartBrowserChart from './plugin_browser_chart.mjs';\nimport PartBrowserCrypto from './plugin_browser_crypto.mjs';\nconst BrowserParts = [\n    PartBrowserColor,\n    PartBrowserSystem,\n    PartBrowserDialog,\n    PartBrowserLocation,\n    PartBrowserAjax,\n    PartBrowserDomBasic,\n    PartBrowserDomEvent,\n    PartBrowserDomParts,\n    PartBrowserHtml,\n    PartBrowserStorage,\n    PartBrowserCanvas,\n    PartBrowserGeolocation,\n    PartBrowserSpeech,\n    PartBrowserWebsocket,\n    PartBrowserAudio,\n    PartBrowserHotkey,\n    PartBrowserChart,\n    PartBrowserCrypto\n];\nconst PluginBrowser = {\n    'meta': {\n        type: 'const',\n        value: {\n            pluginName: 'plugin_browser',\n            pluginVersion: '3.2.24',\n            nakoRuntime: ['wnako'],\n            nakoVersion: '^3.2.24' // 要求なでしこバージョン\n        }\n    },\n    '初期化': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            /* eslint no-global-assign: 0 */\n            const doc = (typeof document === 'undefined') ? { 'body': {} } : document;\n            const win = (typeof window === 'undefined') ? { 'location': { 'href': 'http://localhost/' } } : window;\n            const nav = (typeof navigator === 'undefined') ? {} : navigator;\n            const loc = (typeof win.location === 'undefined') ? { 'href': 'http://localhost/' } : win.location;\n            // 定数を初期化\n            sys.__v0['AJAX:ONERROR'] = (err) => { console.log(err); };\n            // オブジェクトを初期化\n            sys.__v0.DOCUMENT = doc;\n            sys.__v0.WINDOW = win;\n            sys.__v0.NAVIGATOR = nav;\n            sys.__v0['DOM親要素'] = doc.body;\n            sys.__v0['ブラウザURL'] = loc.href;\n            // 便利なメソッドを定義\n            sys.__tohtml = (text) => {\n                return ('' + text)\n                    .replace(/&/g, '&amp;')\n                    .replace(/>/g, '&gt;')\n                    .replace(/</g, '&lt;');\n            };\n            sys.__tohtmlQ = (text) => {\n                return sys.__tohtml(text)\n                    .replace(/\"/g, '&#34;')\n                    .replace(/'/g, '&#39;');\n            };\n            // 「!クリア」でDOMイベントを削除するため\n            sys.__dom_events = []; // [{}, {}, {} ...]\n            // DOM追加イベント\n            sys.__addEvent = (dom, event, func, setHandler) => {\n                // dom\n                if (typeof (dom) === 'string') {\n                    dom = doc.querySelector(dom);\n                    if (!dom) {\n                        throw new Error('DOMイベントが追加できません。要素が見当たりません。');\n                    }\n                }\n                // func\n                if (typeof (func) === 'string') {\n                    func = sys.__findVar(func, null);\n                    if (!func) {\n                        throw new Error('DOMイベントが追加できません。関数が見当たりません。');\n                    }\n                }\n                // make wrapper func\n                const wrapperFunc = (e) => {\n                    sys.__v0['対象'] = e.target;\n                    sys.__v0['対象イベント'] = e;\n                    // 追加データが得られる場合\n                    if (setHandler) {\n                        setHandler(e, sys);\n                    }\n                    if (sys.__genMode === '非同期モード') {\n                        sys.newenv = true;\n                    }\n                    return func(e, sys);\n                };\n                // add\n                sys.__dom_events.push({ dom, event, func: wrapperFunc, rawFunc: func });\n                dom.addEventListener(event, wrapperFunc);\n            };\n            // キーイベントハンドラ\n            sys.__keyHandler = (e, sys) => {\n                sys.__v0['押キー'] = e.key;\n            };\n            // マウスイベントハンドラ\n            sys.__mouseHandler = (e, sys) => {\n                const box = e.target.getBoundingClientRect();\n                sys.__v0['マウスX'] = e.clientX - box.left;\n                sys.__v0['マウスY'] = e.clientY - box.top;\n            };\n            // タッチイベントハンドラ\n            sys.__touchHandler = (e, sys) => {\n                const box = e.target.getBoundingClientRect();\n                const touches = e.changedTouches;\n                if (touches.length <= 0) {\n                    return;\n                }\n                const ts = [];\n                for (let i = 0; i < touches.length; i++) {\n                    const t = touches[i];\n                    const tx = t.clientX - box.left;\n                    const ty = t.clientY - box.top;\n                    if (i === 0) {\n                        sys.__v0['タッチX'] = tx;\n                        sys.__v0['タッチY'] = ty;\n                    }\n                    ts.push([tx, ty]);\n                }\n                sys.__v0['タッチ配列'] = ts;\n                return ts;\n            };\n            // DOMイベント削除 (探して削除)\n            sys.__removeEvent = (dom, event, func) => {\n                // dom\n                if (typeof (dom) === 'string') {\n                    dom = doc.querySelector(dom);\n                    if (!dom) {\n                        throw new Error('DOMイベントが削除できません。要素が見当たりません。');\n                    }\n                }\n                // func\n                if (typeof (func) === 'string') {\n                    func = sys.__findVar(func, null);\n                    if (!func) {\n                        throw new Error('DOMイベントが削除できません。関数が見当たりません。');\n                    }\n                }\n                // find\n                for (let i = 0; i < sys.__dom_events.length; i++) {\n                    const e = sys.__dom_events[i];\n                    if (e.dom === dom && e.event === event && e.rawFunc === func) {\n                        e.dom.removeEventListener(e.event, e.func);\n                        sys.__dom_events.splice(i, 1);\n                        break;\n                    }\n                }\n            };\n            // requestAnimationFrame のためのid\n            sys.__requestAnimationFrameLastId = 0;\n            // DOMイベント全クリア\n            sys.__removeAllDomEvent = () => {\n                sys.__dom_events.forEach(e => {\n                    e.dom.removeEventListener(e.event, e.func);\n                });\n                sys.__dom_events = [];\n                // requestAnimationFrame\n                if (sys.__requestAnimationFrameLastId > 0) {\n                    win.cancelAnimationFrame(sys.__requestAnimationFrameLastId);\n                    sys.__requestAnimationFrameLastId = 0;\n                }\n            };\n            // DOM取得のために使う\n            sys.__query = (dom, commandName, isGetFunc) => {\n                const elm = (typeof dom === 'string') ? document.querySelector(dom) : dom;\n                if (!elm) {\n                    if (isGetFunc) {\n                        // 取得イベントではコンソールにヒントを出す\n                        console.warn(`[ヒント](${sys.__v0.line})『${commandName}』でDOM取得に失敗しています。DOM=`, dom);\n                    }\n                    else {\n                        // 設定イベントでは実行時エラーにする\n                        const desc = (typeof dom === 'string') ? dom : String(dom);\n                        throw new Error(`『${commandName}』でクエリ『${desc}』でDOM取得に失敗しました。`);\n                    }\n                }\n                return elm;\n            };\n        }\n    },\n    '!クリア': {\n        type: 'func',\n        josi: [],\n        pure: true,\n        fn: function (sys) {\n            // chart.jsを破棄\n            if (sys.__chartjs) {\n                sys.__chartjs.destroy();\n            }\n            // 全DOMイベントをクリア\n            sys.__removeAllDomEvent();\n        }\n    }\n};\nBrowserParts.forEach((a) => {\n    const b = {};\n    Object.assign(b, a);\n    // 各モジュールでの初期化処理は認めない\n    if (typeof b['初期化'] !== 'undefined') {\n        delete b['初期化'];\n    }\n    Object.assign(PluginBrowser, b);\n});\nexport default PluginBrowser;\n","// @ts-nocheck\nimport hotkeys from 'hotkeys-js';\nexport default {\n    // @ホットキー\n    'ホットキー登録': {\n        type: 'func',\n        josi: [['に', 'で'], ['を']],\n        pure: true,\n        fn: function (key, fname, sys) {\n            hotkeys(key, function (event, handler) {\n                event.preventDefault();\n                const f = sys.__findFunc(fname);\n                f(sys);\n            });\n        }\n    },\n    'ホットキー解除': {\n        type: 'func',\n        josi: [['を', 'の']],\n        pure: true,\n        fn: function (key) {\n            hotkeys.unbind(key);\n        }\n    }\n};\n","export default {\n    // @グラフ描画_CHARTJS\n    'グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // Chart.jsが使えるかチェック\n            const win = sys.__v0.WINDOW;\n            if (typeof win === 'undefined') {\n                throw new Error('『グラフ描画』のエラー。ブラウザで実行してください。');\n            }\n            if (typeof win.Chart === 'undefined') {\n                throw new Error('『グラフ描画』のエラー。Chart.jsを取り込んでください。');\n            }\n            const Chart = win.Chart;\n            // Canvasが有効？\n            if (!sys.__canvas) {\n                throw new Error('『グラフ描画』のエラー。『描画開始』命令で描画先のCanvasを指定してください。 ');\n            }\n            // 日本語のキーワードを変換\n            if (data['タイプ']) {\n                data.type = data['タイプ'];\n            }\n            if (data['データ']) {\n                data.data = data['データ'];\n            }\n            if (data['オプション']) {\n                data.options = data['オプション'];\n            }\n            if (sys.__chartjs) {\n                sys.__chartjs.destroy();\n            }\n            // eslint-disable-next-line no-undef\n            const chart = new Chart(sys.__canvas, data);\n            sys.__chartjs = chart;\n            return chart;\n        }\n    },\n    'グラフオプション': { type: 'const', value: {} },\n    '線グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            data = sys.__exec('二次元グラフデータ変形', ['line', data, sys]);\n            const d = {\n                type: 'line',\n                data,\n                options: sys.__v0['グラフオプション']\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '棒グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // グラフオプションの差分作成\n            const gopt = Object.assign({}, sys.__v0['グラフオプション'], { 'indexAxis': 'x' });\n            data = sys.__exec('二次元グラフデータ変形', ['bar', data, sys]);\n            const d = {\n                type: 'bar',\n                data,\n                options: gopt\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '横棒グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // グラフオプションの差分作成\n            const gopt = Object.assign({}, sys.__v0['グラフオプション'], { 'indexAxis': 'y' });\n            data = sys.__exec('二次元グラフデータ変形', ['bar', data, sys]);\n            const d = {\n                type: 'bar',\n                data,\n                options: gopt\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '積上棒グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // グラフオプションの差分作成\n            const gopt = Object.assign({}, sys.__v0['グラフオプション'], {\n                'indexAxis': 'x',\n                'scales': {\n                    x: { stacked: true },\n                    y: { stacked: true }\n                }\n            });\n            data = sys.__exec('二次元グラフデータ変形', ['bar', data, sys]);\n            const d = {\n                type: 'bar',\n                data,\n                options: gopt\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '積上横棒グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // グラフオプションの差分作成\n            const gopt = Object.assign({}, sys.__v0['グラフオプション'], {\n                'indexAxis': 'y',\n                'scales': {\n                    x: { stacked: true },\n                    y: { stacked: true }\n                }\n            });\n            data = sys.__exec('二次元グラフデータ変形', ['bar', data, sys]);\n            const d = {\n                type: 'bar',\n                data,\n                options: gopt\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '散布図描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            // グラフオプションの差分作成\n            const gopt = Object.assign({}, sys.__v0['グラフオプション'], {});\n            data = sys.__exec('二次元グラフデータ変形', ['scatter', data, sys]);\n            const d = {\n                type: 'scatter',\n                data,\n                options: gopt\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '円グラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            data = sys.__exec('二次元グラフデータ変形', ['pie', data, sys]);\n            const d = {\n                type: 'pie',\n                data,\n                options: sys.__v0['グラフオプション']\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    'ドーナツグラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            data = sys.__exec('二次元グラフデータ変形', ['pie', data, sys]);\n            const d = {\n                type: 'doughnut',\n                data,\n                options: sys.__v0['グラフオプション']\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    'ポーラーグラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            data = sys.__exec('二次元グラフデータ変形', ['pie', data, sys]);\n            const d = {\n                type: 'polarArea',\n                data,\n                options: sys.__v0['グラフオプション']\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    'レーダーグラフ描画': {\n        type: 'func',\n        josi: [['を', 'で', 'の']],\n        pure: true,\n        fn: function (data, sys) {\n            data = sys.__exec('二次元グラフデータ変形', ['bar', data, sys]);\n            const d = {\n                type: 'radar',\n                data,\n                options: sys.__v0['グラフオプション']\n            };\n            return sys.__exec('グラフ描画', [d, sys]);\n        }\n    },\n    '二次元グラフデータ変形': {\n        type: 'func',\n        josi: [['の'], ['を']],\n        pure: true,\n        fn: function (t, dataOrg, sys) {\n            // データを破壊的に変更してしまうので最初にデータをコピー (#1416)\n            const data = JSON.parse(JSON.stringify(dataOrg));\n            const bgcolorList = [\n                'rgba(255, 99, 132, 0.2)',\n                'rgba(54, 162, 235, 0.2)',\n                'rgba(255, 206, 86, 0.2)',\n                'rgba(75, 192, 192, 0.2)',\n                'rgba(153, 102, 255, 0.2)',\n                'rgba(255, 159, 64, 0.2)'\n            ];\n            const fgcolorList = [\n                'rgba(255, 99, 132, 1)',\n                'rgba(54, 162, 235, 1)',\n                'rgba(255, 206, 86, 1)',\n                'rgba(75, 192, 192, 1)',\n                'rgba(153, 102, 255, 1)',\n                'rgba(255, 159, 64, 1)'\n            ];\n            const res = {};\n            const bgcolors = [];\n            const fgcolors = [];\n            res.labels = [];\n            // 配列かどうか\n            if (data instanceof Array) {\n                // 二次元データのとき\n                if (data[0] instanceof Array) {\n                    if (t === 'pie') { // 円グラフの時だけ整形方法が異なる\n                        const o = {};\n                        o.data = [];\n                        res.datasets = [o];\n                        for (let i = 0; i < data.length; i++) {\n                            res.labels.push(data[i][0]); // label\n                            o.data.push(data[i][1]); // value\n                            bgcolors.push(bgcolorList[i % 6]);\n                            fgcolors.push(fgcolorList[i % 6]);\n                        }\n                        o.backgroundColor = bgcolors;\n                        o.borderColor = fgcolors;\n                        return res;\n                    }\n                    // 左側のラベルの処理\n                    // [1,0]が文字列ならラベルあり\n                    if (typeof (data[1][0]) === 'string') {\n                        for (let i = 1; i < data.length; i++) {\n                            res.labels.push(data[i][0]); // 左ラベルを追加\n                            data[i] = data[i].slice(1); // 左ラベル除去\n                        }\n                        data[0] = data[0].slice(1); // ヘッダ行も左ラベルを削除\n                    }\n                    else {\n                        // 左側ラベルない場合 - ダミーのラベルを追加\n                        for (let i = 1; i < data.length; i++) {\n                            res.labels.push(i);\n                        }\n                    }\n                    res.datasets = [];\n                    for (let i = 0; i < data[0].length; i++) {\n                        const o = {};\n                        res.datasets.push(o);\n                        o.label = data[0][i];\n                        o.backgroundColor = bgcolorList[i % 6];\n                        o.borderColor = fgcolorList[i % 6];\n                        o.data = [];\n                        for (let j = 1; j < data.length; j++) {\n                            o.data.push(data[j][i]);\n                        }\n                    }\n                    return res;\n                }\n                // 一次元データのとき\n                // ラベルを作成\n                for (let i = 0; i < data.length; i++) {\n                    res.labels.push(i + 1);\n                    bgcolors.push(bgcolorList[i % 6]);\n                    fgcolors.push(fgcolorList[i % 6]);\n                }\n                const o1 = {};\n                res.datasets = [o1];\n                o1.label = 'データ';\n                o1.data = data;\n                o1.backgroundColor = bgcolors;\n                o1.borderColor = fgcolors;\n                return res;\n            }\n            if (data instanceof Object) {\n                return data;\n            }\n            // データが1つだけのとき\n            return sys.__exec('二次元グラフデータ変形', [[data], sys]);\n        }\n    }\n};\n","export default {\n    // @ハッシュ関数\n    'ハッシュ値計算時': {\n        type: 'func',\n        josi: [['へ'], ['を'], ['で']],\n        pure: true,\n        fn: function (func, s, alg, sys) {\n            func = sys.__findVar(func, null); // 文字列指定なら関数に変換\n            // convert\n            const buffer = new TextEncoder().encode(s);\n            crypto.subtle.digest(alg, buffer).then(function (hash) {\n                const codes = [];\n                const view = new DataView(hash);\n                for (let i = 0; i < view.byteLength; i += 4) {\n                    const v = view.getUint32(i);\n                    const h = v.toString(16);\n                    const pad = '00' + h;\n                    codes.push(pad.substr(pad.length - 2, 2));\n                }\n                const res = sys.__v0['対象'] = codes.join('');\n                func(res);\n            });\n        },\n        return_none: true\n    }\n};\n","// wnako3mod - nadesiko for web browser\n// - wnako3 から wnako3mod を取り込む。\n// - このファイルはモジュールとして別のファイルから取り込み可能。\nimport { NakoCompiler } from '../core/src/nako3.mjs';\nimport { NakoImportError } from '../core/src/nako_errors.mjs';\nimport { setupEditor } from './wnako3_editor.mjs';\nimport nakoVersion from './nako_version.mjs';\nimport PluginBrowser from './plugin_browser.mjs';\nconst NAKO_SCRIPT_RE = /^(なでしこ|nako|nadesiko)3?$/;\nexport class WebNakoCompiler extends NakoCompiler {\n    constructor() {\n        super({ useBasicPlugin: true });\n        this.wnakoVersion = nakoVersion;\n        this.localFiles = {};\n        // プラグインを追加\n        this.addPluginObject('PluginBrowser', PluginBrowser);\n        // 必要な定数を設定\n        this.addListener('beforeRun', (g) => {\n            // バージョン情報を設定\n            g.__varslist[0]['ナデシコ種類'] = 'wnako3';\n            g.__varslist[0]['ナデシコバージョン'] = nakoVersion.version;\n            g.__varslist[0]['WNAKOバージョン'] = nakoVersion.version;\n        });\n    }\n    /**\n     * ブラウザでtype=\"なでしこ\"というスクリプトを得て実行する\n     */\n    async runNakoScript() {\n        // スクリプトタグの中身を得る\n        let nakoScriptCount = 0;\n        const scripts = document.querySelectorAll('script');\n        for (let i = 0; i < scripts.length; i++) {\n            const script = scripts[i];\n            if (script.type.match(NAKO_SCRIPT_RE)) {\n                nakoScriptCount++;\n                // URLからスクリプト名を見つける\n                const url = (typeof (window.location) === 'object') ? window.location.href : 'url_unknown';\n                const fname = `${url}#script${nakoScriptCount}.nako3`;\n                const code = script.text;\n                // 依存するライブラリをロード\n                await this.loadDependencies(code, fname);\n                // プログラムを実行\n                await this.runAsync(script.text, fname);\n            }\n        }\n        if (nakoScriptCount > 1) {\n            console.log('実行したなでしこの個数=', nakoScriptCount);\n        }\n    }\n    /** 取り込む文を実行する */\n    async loadDependencies(code, filename, preCode = '', localFiles = {}) {\n        this.localFiles = localFiles || {};\n        return this._loadDependencies(code, filename, preCode, this.getLoaderTool());\n    }\n    /**\n     * type=なでしこ のスクリプトを自動実行するべきかどうかを返す\n     * @returns type=なでしこ のスクリプトを自動実行するべきかどうか\n     */\n    checkScriptTagParam() {\n        const scripts = document.querySelectorAll('script');\n        for (let i = 0; i < scripts.length; i++) {\n            const script = scripts[i];\n            const src = script.src || '';\n            if (src.indexOf('wnako3.js?run') >= 0 ||\n                src.indexOf('wnako3.js&run') >= 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * 指定したidのHTML要素をなでしこ言語のエディタにする。\n     * @param {string | Element} idOrElement HTML要素\n     * @see {setupEditor}\n     */\n    setupEditor(idOrElement) {\n        return setupEditor(idOrElement, this, window.ace);\n    }\n    /** なでしこ3の『取り込む』命令のための読み込みツール */\n    getLoaderTool() {\n        const tool = { readJs: this.readJs, readNako3: this.readNako3, resolvePath: this.resolvePath };\n        return tool;\n    }\n    /** JSプラグインの読み込み */\n    readJs(filePath, token) {\n        if (this.localFiles && this.localFiles[filePath]) {\n            return {\n                task: (async () => () => {\n                    // eslint-disable-next-line no-new-func\n                    Function(this.localFiles[filePath])();\n                    return {};\n                })()\n            };\n        }\n        return {\n            task: (async () => {\n                // もし動的インポートに対応していれば動的インポートを試す\n                const basename = ('/' + filePath).split('/').pop() || '?';\n                /*\n                try {\n                  const obj = await import(filePath)\n                  this.addPluginObject(basename, obj)\n                  return {}\n                } catch (e) { }\n                */\n                // WebPackの関係で動的インポートが失敗するので、テキストとしてJSソースを取り出して処理する\n                // JavaScriptをテキストとして取得\n                const res = await fetch(filePath);\n                if (!res.ok) {\n                    throw new NakoImportError(`ファイル『${filePath}』のダウンロードに失敗しました: ${res.status} ${res.statusText}`, token.file, token.line);\n                }\n                let jstext = await res.text();\n                // ESModuleっぽければ `default export`を置き換える\n                const r = Math.floor(Math.random() * 1000000);\n                const exportName = `exportObject${r}`;\n                if (jstext.includes('default export')) {\n                    jstext = jstext.replace('default export', `;let ${exportName} = `);\n                    jstext += `\\n;navigator.nako3.addPluginObject('${basename}', ${exportName});\\n`;\n                }\n                // addPluginObjectが存在する\n                if (!jstext.includes('navigator.nako3.addPluginObject')) {\n                    throw new NakoImportError(`ファイル ${filePath} の中に文字列 \"navigator.nako3.addPluginObject\" が存在しません。現在、ブラウザ版のなでしこ言語v3は自動登録するプラグインのみをサポートしています。`, token.file, token.line);\n                }\n                const gNavigator = navigator;\n                const gSelf = gNavigator.nako3;\n                // textの例: `navigator.nako3.addPluginObject('PluginRequireTest', { requiretest: { type: 'var', value: 100 } })`\n                return () => {\n                    // プラグインの自動登録は navigator.nako3 を参照するため、 navigator.nako3 を一時的に現在のインスタンスにする。\n                    const globalNavigator = gNavigator;\n                    const globalNako3 = globalNavigator.nako3;\n                    globalNavigator.nako3 = gSelf;\n                    try {\n                        // eslint-disable-next-line no-new-func\n                        const f = Function(jstext);\n                        f.apply(gSelf.__globalObj);\n                    }\n                    catch (err) {\n                        throw new NakoImportError(`プラグイン ${filePath} の取り込みに失敗: ${err instanceof Error ? err.message : err + ''}`, token.file, token.line);\n                    }\n                    finally {\n                        globalNavigator.nako3 = globalNako3;\n                    }\n                    return {};\n                };\n            })()\n        };\n    }\n    /** NAKO3プラグインの読み込み */\n    readNako3(filePath, token) {\n        if (this.localFiles && this.localFiles[filePath]) { // ローカルファイルを使う場合\n            return {\n                task: (() => {\n                    return (new Promise((resolve, reject) => {\n                        const s = this.localFiles[filePath];\n                        resolve(s);\n                    }));\n                })()\n            };\n        }\n        return {\n            task: (async () => {\n                const res = await fetch(filePath);\n                if (!res.ok) {\n                    throw new NakoImportError(`ファイル ${filePath} のダウンロードに失敗しました: ${res.status} ${res.statusText}`, token.file, token.line);\n                }\n                return await res.text();\n            })()\n        };\n    }\n    /** 読み込みでパスを解決する */\n    resolvePath(name, token, fromFile) {\n        let pathname = name;\n        // http から始まっていれば解決は不要\n        if (pathname.match(/^https?:\\/\\//)) { // フルパスなら解決不要\n        }\n        else if (this.localFiles && this.localFiles[name]) {\n            pathname = this.localFiles[name];\n        }\n        else {\n            try {\n                pathname = new URL(name).pathname;\n            }\n            catch (e) {\n                // 単純にパスに変換できなければ、location.hrefを参考にパスを組み立てる\n                try {\n                    let baseDir = dirname(fromFile);\n                    if (baseDir === '') {\n                        // https://2/3/4.html\n                        const a = window.location.href.split('/');\n                        baseDir = '/' + a.slice(3, a.length - 1).join('/');\n                    }\n                    pathname = resolveURL(baseDir, name);\n                }\n                catch (e) {\n                    throw new NakoImportError(`取り込み文の引数でパスが解決できません。https:// か http:// で始まるアドレスを指定してください。\\n${e}`, token.file, token.line);\n                }\n            }\n        }\n        // 拡張子によってプラグインタイプを分岐する\n        const checkExt = (name, extlist) => {\n            for (const ext of extlist) {\n                if (name.endsWith(ext)) {\n                    return true;\n                }\n                if (name.endsWith(ext + '.txt')) {\n                    return true;\n                } // '.mjs.txt' にもマッチ\n            }\n            return false;\n        };\n        // URLパラメータを考慮する\n        const aname = (pathname + '?').split('?')[0];\n        // JSプラグイン    → (.js|.mjs)\n        // NAKO3プラグイン → (.nako3|.nako)\n        if (checkExt(aname, ['.js', '.mjs'])) {\n            return { filePath: pathname, type: 'js' };\n        }\n        if (checkExt(aname, ['.nako3', '.nako'])) {\n            return { filePath: pathname, type: 'nako3' };\n        }\n        if (checkExt(pathname, ['.js', '.mjs'])) {\n            return { filePath: pathname, type: 'js' };\n        }\n        if (checkExt(pathname, ['.nako3', '.nako'])) {\n            return { filePath: pathname, type: 'nako3' };\n        }\n        // ファイル拡張子が未指定の場合\n        throw new NakoImportError(`ファイル『${name}』は拡張子が(.nako3|.js|.js.txt|.mjs|.mjs.txt)以外なので取り込めません。`, token.file, token.line);\n    }\n}\nfunction dirname(s) {\n    const a = s.split('/');\n    if (a && a.length > 1) {\n        return a.slice(0, a.length - 1).join('/');\n    }\n    return '';\n}\nfunction resolveURL(base, s) {\n    const baseA = base.split('/');\n    const sA = s.split('/');\n    for (const p of sA) {\n        if (p === '') {\n            continue;\n        }\n        if (p === '.') {\n            continue;\n        }\n        if (p === '..') {\n            baseA.pop();\n            continue;\n        }\n        baseA.push(p);\n    }\n    return baseA.join('/');\n}\n","// wnako3 - nadesiko for web browser\nimport { WebNakoCompiler } from './wnako3mod.mjs';\n// ブラウザから取り込まれる時 navigator.nako3 になでしこを登録\nif ((typeof navigator) === 'object' && !navigator.exportWNako3) {\n    const wnako3 = navigator.nako3 = new WebNakoCompiler();\n    window.addEventListener('DOMContentLoaded', (e) => {\n        const isAutoRun = wnako3.checkScriptTagParam();\n        if (isAutoRun) {\n            wnako3.runNakoScript();\n        }\n    }, false);\n}\n"],"names":["isff","navigator","userAgent","toLowerCase","indexOf","addEvent","e","n","t","o","addEventListener","attachEvent","concat","window","event","getMods","slice","length","getKeys","replace","split","lastIndexOf","splice","_keyMap","backspace","tab","clear","enter","return","esc","escape","space","left","up","right","down","del","delete","ins","insert","home","end","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","_modifier","shift","alt","option","ctrl","control","cmd","command","modifierMap","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","k","_downKeys","winListendFocus","_scope","elementHasBindEvent","code","toUpperCase","charCodeAt","setScope","getScope","eachUnbind","s","scope","i","method","splitKey","r","key","forEach","filter","compareArray","mods","eventHandler","element","Object","prototype","hasOwnProperty","call","shortcut","preventDefault","returnValue","stopPropagation","cancelBubble","dispatch","keyCode","which","charCode","hotkeys","this","push","getModifierState","d","type","keydown","keyup","a","c","l","f","y","sort","join","document","toString","capture","isElementBind","clearModifier","_hotkeys","_api","deleteScope","getPressedKeyCodes","isPressed","target","srcElement","tagName","isContentEditable","readOnly","trigger","arguments","keys","find","unbind","Array","isArray","keyMap","modifier","noConflict","module","exports","version","major","minor","patch","NakoError","Error","constructor","tag","msg","file","line","positionJa","undefined","super","name","NakoIndentError","InternalLexerError","preprocessedCodeStartOffset","preprocessedCodeEndOffset","NakoLexerError","startOffset","endOffset","NakoSyntaxError","static","first","last","NakoRuntimeError","error","lineNo","matches","message","exec","parseInt","NakoImportError","NakoGenOptions","isTest","importFiles","codeStandalone","convEnv","codeEnv","fname","NakoGen","com","nakoFuncList","getNakoFuncList","nakoTestFuncs","usedFuncSet","Set","loopId","numAsyncFn","usedAsyncFn","flagLoop","__self","genMode","lastLineNo","varslistSet","__varslist","map","v","isFunction","names","readonly","varsSet","speedMode","lineNumbers","implicitTypeCasting","invalidSore","forcePure","performanceMonitor","userFunction","systemFunction","systemFunctionBody","mumeiId","warnUndefinedVar","constPools","constPoolsTemplate","warnUndefinedReturnUserFunc","warnUndefinedCallingUserFunc","warnUndefinedCallingSystemFunc","warnUndefinedCalledUserFuncArgs","debugOption","test","convLineno","node","forceUpdate","incLine","lineNoStr","lineDataJSON","JSON","stringify","debugCode","useDebug","messageAction","waitTime","varname","isValidIdentifier","getFuncName","name2","convRequire","moduleName","value","getDefFuncCode","opt","getModList","nakoFuncCode","fn","asyncFn","testCode","addPlugin","po","addPluginObject","addPluginFile","objName","path","addFunc","josi","getFunc","registerFunction","ast","funcList","registFunc","block","blockList","add","meta","isExport","initialNames","convGen","result","_convGen","isExpression","blocks","b","convComment","convCheckLoop","convString","convDefLocalVar","convDefLocalVarlist","convLet","convInc","convGetVar","convOp","convRenbun","convCallFunc","convIf","convTikuji","convFor","convForeach","convRepeatTimes","convSpeedMode","convPerformanceMonitor","convWhile","convAtohantei","convSwitch","convLetArray","convRefArray","convJsonArray","convJsonObj","convFuncObj","convDefTest","convDefFunc","convReturn","convTryExcept","findVar","has","isTop","js","genVar","position","res","lno","dispName","getLogger","warn","pv","getNakoFunc","commentSrc","String","addConstPool","getConstPoolsTemplateId","id","args","fileNo","msgNo","args2","arg","argNo","poolIndex","cmdj","convDefFuncCommon","performanceMonitorInjectAtStart","performanceMonitorInjectAtEnd","variableDeclarations","varsDeclared","from","values","varnames","word","oldUsedAsyncFn","includes","pop","list","index","codeInit","codeArray","checkInit","arrayDefCode","convGenLoop","tmpflag","varName","idLoop","varI","kara","made","to","flagDown","inc","varFrom","varTo","sorePrefex","nameS","options","prev","cond","varId","cases","body","cvalue","cblock","expr","falseBlock","false_block","curName","errorCode","errorBlock","convFuncGetArgsCalcType","_funcName","_func","opts","nodeArgs","sore","getPluginList","__module","funcName","func","return_none","argsInfo","argsOpts","funcDef","funcBegin","funcEnd","setter","pure","localVars","str","indent","text","repeat","noCheckFuncs","argsCode","argsA","argStr","funcCall","OP_TBL","eq","noteq","gt","lt","gteq","lteq","and","or","shift_l","shift_r","shift_r0","op","operator","jsName","nodeName","vtype","vartype","mode","rf","errBlock","getUsedFuncSet","getPluginInitCode","pluginCode","initkey","generateJS","gen","jsInit","funcID","Date","getTime","Math","floor","random","asyncMain","syncMain","trace","codeImportFiles","importNames","ff","initCode","runtimeEnv","standalone","replaceTemplateCode","coreVersion","template","pat","val","NakoCodeNop","NakoCodeLabel","NakoCodeEOL","NakoCodeJump","NakoCodeJumpIfTrue","NakoCodeJumpIfFalse","NakoCodeCall","NakoCodeCallObj","NakoCodeReturn","NakoCodeTry","NakoCodeCode","NakoCode","no","NakoGenASync","getVarsCode","nakoTestList","codeId","labelContinue","labelBreak","labels","needToFixAddr","codes","usedLabels","addCode","addCodeStr","convFunc","codeStr","a2","row","makeLabel","uniqLabel","makeLabelDirectly","labelName","makeJump","label","makeJumpIfTrue","makeJumpIfFalse","labelBegin","labelEnd","labelIfFalse","loopVar","loopCount","labelCheck","isMumeiFunc","codeCall","size","labelInc","taisyo","targetArray","targetKeys","setTarget","_node","_isExpression","varValue","nextLabel","isJSFunc","arcCount","nameObj","vname","labelExcept","nako3","addCodeGenerator","josiList","tararebaJosiList","removeJosiList","tararebaMap","removeJosiMap","josiRE","RegExp","pluginName","pluginVersion","nakoRuntime","nakoVersion","sys","isDebug","__v0","__namespaceList","__findVar","nameStr","def","__locals","varScope","modList","__modList","__modName","modName","gname","__findFunc","parentFunc","__exec","params","f0","apply","__timeout","__interval","z2","__zero2","substring","__zero","keta","zeroS","__formatDate","getFullYear","getMonth","getDate","__formatTime","getHours","getSeconds","getMinutes","__formatDateTime","fmt","dateStr","timeStr","match","__str2date","parseFloat","__printPool","__parseFloatOrBigint","chk","constId","cp","msgArgs","fileStr","logger","__genMode","__stopAsync","PI","NaN","Infinity","send","isVariableJosi","console","log","aa","pow","reduce","p","__reisetu","src","eval","async","Function","obj","m","runEx","resetEnv","resetLog","out","resetAll","tf","performance","now","t1","forceClose","isNaN","Number","g","v2","fromCodePoint","fromCharCode","codePointAt","ss","cnt","chr","zen1","han1","zen2","han2","c2","n2","charAt","j","parse","re","sa","global","z","ufunc","reverse","tmp","old","x","max","min","nn","ns","ms","col","cols","rows","idx","nr","sum","Promise","resolve","reject","timerId","setTimeout","err","newenv","unshift","setInterval","clearInterval","clearTimeout","getDay","tm","getMilliseconds","era","gengo","d2","t2","ceil","unit","sec","rd","opc","addY","addM","addD","setFullYear","setMonth","setDate","curLine","breakpoints","forceLine","vars","pluginfiles","then","mod","assign","catch","w","default","encodeURIComponent","decodeURIComponent","url","kv","btoa","u8a","TextEncoder","encode","utf8str","Buffer","atob","decodedUtf8str","dec","decodedArray","Uint8Array","TextDecoder","decode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","defineProperty","enumerable","get","prop","Symbol","toStringTag","opPriority","RenbunJosi","operatorList","NewEmptyToken","column","isIndentChars","ch","kanakanji","hira","allHiragana","wordHasIjoIka","wordSpecial","errorRead","unitRE","rules","pattern","cbParser","numEOL","readJosi","cb","parseNumber","cbString","isTrimOkurigana","substr","ii","trimOkurigana","beginTag","closeTag","NakoLexer","funclist","moduleExport","setFuncList","listObj","setModuleExport","exportObj","replaceTokens","tokens","isFirst","filename","filenameToModName","preDefineFunc","_replaceWord","eof","rawJosi","moduleexport","isFuncPointer","readArgs","funcPointer","funcPointers","already","prevToken","nextToken","kai","isMumei","defToken","funcNameToken","attr","splitStringEx","arr","comment","namespaceStack","modSelf","gname1","gfo1","gfo","exportDefault","fo","tokenType","ltype","countIndent","tokenize","srcLength","columnCurrent","lineCurrent","isDefTest","ia","ok","rule","rp","offset","preprocessedCodeOffset","preprocessedCodeLength","srcOffset","um","sep","NakoParser","stackList","usedFuncs","stack","funcLevel","localvars","arrayIndexFrom","flagReverseArrayIndex","flagCheckArrayInit","recentlyCalledFunc","isReadingCalc","isExportDefault","isExportStack","init","reset","popStack","saveStack","loadStack","info","gnameSelf","pushStack","item","isEOF","getIndex","check","ttype","check2","checkTypes","accept","types","tmpIndex","rollback","bind","token","getCur","unget","peek","peekDef","peekSourceMap","nodeToStr","debugMode","depth","typeName","debug","subNode","node2","table","not","startParser","ySentenceList","ySentence","makeStackBalanceReport","words","desc","descFunc","chA","josiA","yEOL","eol","report","yIF","yAtohantei","yTryExcept","yTikuji","yRequire","yASyncMode","yDNCLMode","ySetGenMode","yExportDefault","ySpeedMode","yPerformanceMonitor","yLet","yDefTest","yDefFunc","yCall","c1","ver","yBlock","yDefFuncReadArgs","yDef","funcAttribute","defArgs","multiline","backupLocalvars","fnName","yIFCond","yGetArg","tmpI","naraba","smap","mosi","trueBlock","tanbun","optionNode","tikuji","tugini","tuginiType","yGetArgOperator","firstValue","yValue","infixToAST","value1","infixToPolish","priority","polish","sTop","tpop","ans","yGetArgParen","isClose","si","yRepeatTime","num","yWhile","bUntil","yFor","kurikaesu","incdec","vInc","vTo","vFrom","yReturn","yForEach","ySwitch","joukenbunki","isDefaultClause","skippedKokomade","condToken","condBlock","kokomade","yMumeiFunc","yDainyu","dainyu","getVarName","ySadameru","sadameru","attrNode","createVar","yIncDec","action","cur","yCallFunc","msgDebug","d0","d1","funcObj","nullCount","valueCount","popArg","funcNode","isexport","threw","yCalc","nameToken","la","yLetArrayAt","lb","yLetArrayBracket","wordToken","yJSONArray","createVarList","checkArrayIndex","checkArrayReverse","ary","tmpReadingCalc","fCalc","yValueKakko","closeParent","yJSONObject","splitType","tt","getVarNameRef","yValueWord","yValueWordGetIndex","isConst","yJSONObjectValue","firstToken","yJSONArrayValue","v1","kansi","ReplaceHistory","ConvertResult","sourcePosition","Replace","history","getText","replaceAll","getSourcePosition","NakoPrepare","_instance","convertTable","Map","convert1ch","convert","flagStr","flagStr2","endOfStr","ch2","checkNakoMode","modeNames","lines","lastTokenInfo","newToken","templateToken","isSkipWord","joinTokenLines","getLastTokenWithoutEOL","len","splitTokens","delimiter","kakko","IsEmptyLine","ty","GetLeftTokens","INDENT_MODE_KEYWORDS","convertIndentSyntax","useIndentSynax","jsonObjLevel","jsonArrayLevel","checkJsonSyntax","blockIndents","lastI","leftToken","curI","blockIndentTopLast","DNCL_KEYWORDS","DNCL_SIMPLES","convertDNCL","useDNCLmode","fi","findTokens","replaceAtohantei","fi2","nai","ni","sou","nakumosi","nakumosiTudukiStr","nakumosiToken","fu","replaceAllElementV","begin","times","mul","wo","ga","findTypeValue","findA","flag","DNCL2_KEYWORDS","convertDNCL2","useDNCL2mode","tokenEq","varToken","valToken","typeValues","fromIndex","SourceMappingOfTokenization","sourceCodeLength","preprocessed","cumulativeSum","el","lastIndex","lastPreprocessedCodePosition","preprocessedCodePosition","findIndex","SourceMappingOfIndentSyntax","codeAfterProcessingIndentationSyntax","linesInsertedByIndentationSyntax","linesDeletedByIndentationSyntax","lastLineNumber","lastOffset","tokenLine","getLineNumber","insertedLine","deletedLine","lineNumber","OffsetToLineColumn","lineOffsets","oneBasedLineNumber","subtractSourceMapByPreCodeLength","sourceMap","preCode","colorNames","NakoColors","noColor","browserConsoleStyles","consoleColor","consoleFontWeight","browserConsoleText","_","m1str","m1","htmlColor","htmlFontWeight","nodeConsole","html","browserConsole","bold","black","red","green","yellow","blue","magenta","cyan","white","LogLevel","levelStr","level","all","stdout","stringifyPosition","NakoLogger","listeners","logs","getErrorLogs","addListener","callback","fromS","removeListener","sendI","pos","runtimeError","posStr","makeData","formats","style","data","NakoGlobal","compiler","guid","lastJSCode","numFailures","nextIndex","__code","__callstack","__stack","__labels","getPluginfiles","clearLog","nakoGlobal","runSync","runAsync","_runTests","tests","pass","clearPlugins","pname","clearName","destroy","sin","cos","tan","asin","acos","atan","atan2","XY","abs","exp","hypot","LOG2E","LOG10E","trunc","sqrt","round","base","txt","reToDelim","convType","search","cells","valueConv","fQuot","genValueConverter","__promise","setLastPromise","promise","cbFunc","reason","finally","cloneAsJSON","newCompilerOptions","initObj","testOnly","NakoCompiler","useBasicPlugin","__vars","__v1","__globals","__globalObj","pluginFunclist","commandlist","eventList","codeGenerateor","dependencies","addBasicPlugins","prepare","getInstance","parser","lexer","replaceLogger","requireStatements","start","lastToken","_loadDependencies","tools","loadJS","tasks","readJs","filePath","task","pluginFuncs","loadNako3","content","readNako3","registerFile","rawtokenize","loadRec","tagsResolvePath","listRequireStatements","resolvePath","alias","startsWith","tokenizationSourceMapping","indentationSyntaxSourceMapping","offsetToLineColumn","dest","checkICount","lineICount","tFirst","tLast","convertInlineIndent","converttoken","needToClearPlugin","original","lexCodeToken","commentTokens","replaceRequireStatements","includeGuard","deletedTokens","children","removeRequireStatements","lex","syntaxHighlighting","requireStatementTokens","requireTokens","lexerOutput","deleteUnNakoFuncs","getUsedFuncs","queue","ast_","getUsedAndDefFuncs","astQueue","blockQueue","getUsedAndDefFunc","compile","compileFromCode","eventName","outCode","generateCode","genObj","generate","isReset","_runEx","evalJS","getNakoGlobal","run","compileStandalone","persistent","fpath","returnNone","setFunc","defSpecialRetMark","SpecialRetMark","removeCommentsFromLine","eos","isComment","cPrepared","ch2Prepared","getIndent","replaceRetMark","pairs","parents","spaces","lineCount","numLines","line2","current","fill","parent","getEditorTokens","compilerToken","includesLastCharacter","underlineJosi","docHTML","findPluginName","createParameterDeclaration","getDocumentationHTML","union","alphabet","createParameterName","getDefaultTokens","doc","getLine","withoutLogger","entries","lineStartOffset","tokenIndex","editorTokens","lineEndOffset","EditorMarkers","session","AceRange","disable","markers","hasAnnotations","startLine","startColumn","endLine","endColumn","fromOffset","fromNullable","range","addMarker","setAnnotations","addByError","fromError","marker","removeMarker","clearAnnotations","BackgroundTokenizer","onTokenUpdate","onCompileError","onUpdate","dirty","lastLexerOutput","getAllLines","cache","deleted","enabled","update","startTime","getLength","dispose","$updateOnChange","delta","startRow","endRow","columnStart","oldTokens","newTokens","getTokens","fireUpdateEvent","firstRow","lastRow","setDocument","scheduleStart","setTokenizer","tokenizer","stop","getState","LanguageFeatures","state","parseLine","every","removeInLine","minIndent","insertInLine","input","autoOutdent","prevLine","isBlockStart","getBlockStructure","oldIndent","prefix","backgroundTokenizer","addItem","caption","score","set","indentSyntax","en","jp","snippet","getFoldWidget","foldStyle","getFoldWidgetRange","pair","results","title","blockStructure","EditorTabs","editor","UndoManager","newTab","cursor","reversed","scroll","top","undoManger","getTab","getValue","selection","getRange","isBackwards","getScrollLeft","getScrollTop","getUndoManager","setTab","setValue","setRange","setScrollLeft","setScrollTop","setUndoManager","Options","getOption","localStorage","setItem","getItem","json","keyboardHandler","setOption","theme","fontSize","tabSize","OptionPanel","panel","done","isMain","renderOptionGroup","group","items","defaultValue","ariaLabel","render","on","save","completers","editorIdCounter","setupEditor","idOrElement","ace","edit","getElementById","require","Range","editorMarkers","bgTokenizer","dataset","nako3DisableMarker","classList","contains","setAttribute","nako3Readonly","setReadOnly","setFontSize","resetEditorTokens","removeFullLines","defineOptions","initialValue","setOptions","wrap","indentedSoftWrap","showPrintMargin","setKeyboardHandler","tooltip","Tooltip","container","renderer","hide","getDocumentPosition","getTokenAt","setHtml","show","clientX","clientY","domEvent","className","isFocused","editorId","setBreakpoint","postMessage","clearBreakpoint","forceSyntaxHighlighting","nako3ForceSyntaxHighlighting","isFirstTime","oldBgTokenizer","_signal","slowSpeedMessage","remove","enableBasicAutocompletion","enableSnippets","enableLiveAutocompletion","wnako3EditorId","getCompletions","getCompletionItems","some","getSnippets","setCompleters","getCompletionPrefix","getCursorPosition","languageFeatures","oop","TextMode","Mode","HighlightRules","foldingRules","inherits","toggleCommentLines","getNextLineIndent","checkOutdent","setMode","setTheme","load","initPanel","buttonContainer","createElement","appendChild","innerHTML","codeLensListeners","CodeLens","commands","addCommand","registerCodeLensProvider","provideCodeLenses","getCodeLens","exitFullscreen","setScrollMargin","fullscreenButton","innerText","settingsButton","execCommand","editorTabs","nako3Resizable","MutationObserver","resize","observe","attributes","retokenize","outputContainer","display","loadDependencies","localFiles","testName","ua","alert","prompt","confirm","location","href","back","fetch","status","headers","blob","bodyData","fd","FormData","flist","arrayBuffer","Blob","resolveCount","q","querySelector","querySelectorAll","getElementsByTagName","pa","__query","dom","funcStr","selectedIndex","uses","wa","getAttribute","HTMLElement","removeChild","focus","__addEvent","__removeEvent","__keyHandler","__mouseHandler","__touchHandler","__requestAnimationFrameLastId","requestAnimationFrame","cancelAnimationFrame","skin","elm","btn","inp","te","lbl","cv","width","height","img","span","htmlFor","createTextNode","frm","rowIndex","th","__tohtmlQ","td","ita","its","select","it","tr","getChildren","childNodes","checked","rr","bgColor","bgHead","rowNo","__tohtml","backgroundColor","color","textAlign","clipboard","writeText","pre","webkitUserSelect","userSelect","textContent","getSelection","selectAllChildren","readText","removeItem","errMsgCanvasInit","__canvas","__ctx","getContext","__fillStyle","__strokeStyle","restore","strokeStyle","fillStyle","beginPath","moveTo","lineTo","stroke","lineWidth","rect","clearRect","xy","arc","ellipse","Image","crossOrigin","onload","onerror","drawFunc","im","ctx","drawImage","image","sxy","dxy","errArgLen","__proto__","sw","font","fillText","measureText","translate","rotate","scale","setTransform","transform","toDataURL","toBlob","download","click","geolocation","getCurrentPosition","coords","latitude","longitude","watchPosition","wid","clearWatch","speechSynthesis","speak","onend","voice","SpeechSynthesisUtterance","lang","rate","pitch","volume","getVoices","voices","changeFunc","ws","WebSocket","onopen","cbOpen","cbError","onmessage","cbMsg","close","Audio","loop","play","pause","currentTime","duration","PluginBrowser","win","nav","loc","DOCUMENT","WINDOW","NAVIGATOR","__dom_events","setHandler","wrapperFunc","rawFunc","box","getBoundingClientRect","touches","changedTouches","ts","tx","removeEventListener","__removeAllDomEvent","commandName","isGetFunc","__chartjs","handler","Chart","chart","gopt","stacked","dataOrg","bgcolorList","fgcolorList","bgcolors","fgcolors","datasets","borderColor","o1","alg","buffer","crypto","subtle","digest","hash","view","DataView","byteLength","pad","getUint32","NAKO_SCRIPT_RE","WebNakoCompiler","wnakoVersion","nakoScriptCount","scripts","script","getLoaderTool","checkScriptTagParam","basename","statusText","jstext","exportName","gNavigator","gSelf","globalNavigator","globalNako3","fromFile","pathname","URL","baseDir","dirname","baseA","sA","resolveURL","checkExt","extlist","ext","endsWith","aname","exportWNako3","wnako3","runNakoScript"],"sourceRoot":""}